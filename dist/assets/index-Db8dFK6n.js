(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))c(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function r(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function c(d){if(d.ep)return;d.ep=!0;const f=r(d);fetch(d.href,f)}})();function cp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var _u={exports:{}},Ve={};var kh;function wv(){if(kh)return Ve;kh=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),m=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),D=Symbol.iterator;function z(A){return A===null||typeof A!="object"?null:(A=D&&A[D]||A["@@iterator"],typeof A=="function"?A:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,Y={};function ne(A,F,ie){this.props=A,this.context=F,this.refs=Y,this.updater=ie||x}ne.prototype.isReactComponent={},ne.prototype.setState=function(A,F){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,F,"setState")},ne.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function re(){}re.prototype=ne.prototype;function X(A,F,ie){this.props=A,this.context=F,this.refs=Y,this.updater=ie||x}var ve=X.prototype=new re;ve.constructor=X,L(ve,ne.prototype),ve.isPureReactComponent=!0;var Ce=Array.isArray;function R(){}var ce={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function oe(A,F,ie){var pe=ie.ref;return{$$typeof:i,type:A,key:F,ref:pe!==void 0?pe:null,props:ie}}function ze(A,F){return oe(A.type,F,A.props)}function Le(A){return typeof A=="object"&&A!==null&&A.$$typeof===i}function be(A){var F={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(ie){return F[ie]})}var Ye=/\/+/g;function Xe(A,F){return typeof A=="object"&&A!==null&&A.key!=null?be(""+A.key):F.toString(36)}function Ee(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(R,R):(A.status="pending",A.then(function(F){A.status==="pending"&&(A.status="fulfilled",A.value=F)},function(F){A.status==="pending"&&(A.status="rejected",A.reason=F)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function K(A,F,ie,pe,ke){var je=typeof A;(je==="undefined"||je==="boolean")&&(A=null);var Ke=!1;if(A===null)Ke=!0;else switch(je){case"bigint":case"string":case"number":Ke=!0;break;case"object":switch(A.$$typeof){case i:case n:Ke=!0;break;case k:return Ke=A._init,K(Ke(A._payload),F,ie,pe,ke)}}if(Ke)return ke=ke(A),Ke=pe===""?"."+Xe(A,0):pe,Ce(ke)?(ie="",Ke!=null&&(ie=Ke.replace(Ye,"$&/")+"/"),K(ke,F,ie,"",function(Pt){return Pt})):ke!=null&&(Le(ke)&&(ke=ze(ke,ie+(ke.key==null||A&&A.key===ke.key?"":(""+ke.key).replace(Ye,"$&/")+"/")+Ke)),F.push(ke)),1;Ke=0;var yt=pe===""?".":pe+":";if(Ce(A))for(var Re=0;Re<A.length;Re++)pe=A[Re],je=yt+Xe(pe,Re),Ke+=K(pe,F,ie,je,ke);else if(Re=z(A),typeof Re=="function")for(A=Re.call(A),Re=0;!(pe=A.next()).done;)pe=pe.value,je=yt+Xe(pe,Re++),Ke+=K(pe,F,ie,je,ke);else if(je==="object"){if(typeof A.then=="function")return K(Ee(A),F,ie,pe,ke);throw F=String(A),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return Ke}function fe(A,F,ie){if(A==null)return A;var pe=[],ke=0;return K(A,pe,"","",function(je){return F.call(ie,je,ke++)}),pe}function ge(A){if(A._status===-1){var F=A._result;F=F(),F.then(function(ie){(A._status===0||A._status===-1)&&(A._status=1,A._result=ie)},function(ie){(A._status===0||A._status===-1)&&(A._status=2,A._result=ie)}),A._status===-1&&(A._status=0,A._result=F)}if(A._status===1)return A._result.default;throw A._result}var Q=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},ye={map:fe,forEach:function(A,F,ie){fe(A,function(){F.apply(this,arguments)},ie)},count:function(A){var F=0;return fe(A,function(){F++}),F},toArray:function(A){return fe(A,function(F){return F})||[]},only:function(A){if(!Le(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return Ve.Activity=w,Ve.Children=ye,Ve.Component=ne,Ve.Fragment=r,Ve.Profiler=d,Ve.PureComponent=X,Ve.StrictMode=c,Ve.Suspense=g,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(A){return ce.H.useMemoCache(A)}},Ve.cache=function(A){return function(){return A.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(A,F,ie){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var pe=L({},A.props),ke=A.key;if(F!=null)for(je in F.key!==void 0&&(ke=""+F.key),F)!P.call(F,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&F.ref===void 0||(pe[je]=F[je]);var je=arguments.length-2;if(je===1)pe.children=ie;else if(1<je){for(var Ke=Array(je),yt=0;yt<je;yt++)Ke[yt]=arguments[yt+2];pe.children=Ke}return oe(A.type,ke,pe)},Ve.createContext=function(A){return A={$$typeof:m,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:f,_context:A},A},Ve.createElement=function(A,F,ie){var pe,ke={},je=null;if(F!=null)for(pe in F.key!==void 0&&(je=""+F.key),F)P.call(F,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(ke[pe]=F[pe]);var Ke=arguments.length-2;if(Ke===1)ke.children=ie;else if(1<Ke){for(var yt=Array(Ke),Re=0;Re<Ke;Re++)yt[Re]=arguments[Re+2];ke.children=yt}if(A&&A.defaultProps)for(pe in Ke=A.defaultProps,Ke)ke[pe]===void 0&&(ke[pe]=Ke[pe]);return oe(A,je,ke)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(A){return{$$typeof:p,render:A}},Ve.isValidElement=Le,Ve.lazy=function(A){return{$$typeof:k,_payload:{_status:-1,_result:A},_init:ge}},Ve.memo=function(A,F){return{$$typeof:v,type:A,compare:F===void 0?null:F}},Ve.startTransition=function(A){var F=ce.T,ie={};ce.T=ie;try{var pe=A(),ke=ce.S;ke!==null&&ke(ie,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(R,Q)}catch(je){Q(je)}finally{F!==null&&ie.types!==null&&(F.types=ie.types),ce.T=F}},Ve.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},Ve.use=function(A){return ce.H.use(A)},Ve.useActionState=function(A,F,ie){return ce.H.useActionState(A,F,ie)},Ve.useCallback=function(A,F){return ce.H.useCallback(A,F)},Ve.useContext=function(A){return ce.H.useContext(A)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(A,F){return ce.H.useDeferredValue(A,F)},Ve.useEffect=function(A,F){return ce.H.useEffect(A,F)},Ve.useEffectEvent=function(A){return ce.H.useEffectEvent(A)},Ve.useId=function(){return ce.H.useId()},Ve.useImperativeHandle=function(A,F,ie){return ce.H.useImperativeHandle(A,F,ie)},Ve.useInsertionEffect=function(A,F){return ce.H.useInsertionEffect(A,F)},Ve.useLayoutEffect=function(A,F){return ce.H.useLayoutEffect(A,F)},Ve.useMemo=function(A,F){return ce.H.useMemo(A,F)},Ve.useOptimistic=function(A,F){return ce.H.useOptimistic(A,F)},Ve.useReducer=function(A,F,ie){return ce.H.useReducer(A,F,ie)},Ve.useRef=function(A){return ce.H.useRef(A)},Ve.useState=function(A){return ce.H.useState(A)},Ve.useSyncExternalStore=function(A,F,ie){return ce.H.useSyncExternalStore(A,F,ie)},Ve.useTransition=function(){return ce.H.useTransition()},Ve.version="19.2.3",Ve}var Ah;function Pu(){return Ah||(Ah=1,_u.exports=wv()),_u.exports}var Z=Pu();const s=cp(Z);var Eu={exports:{}},xr={},wu={exports:{}},Su={};var Oh;function Sv(){return Oh||(Oh=1,(function(i){function n(K,fe){var ge=K.length;K.push(fe);e:for(;0<ge;){var Q=ge-1>>>1,ye=K[Q];if(0<d(ye,fe))K[Q]=fe,K[ge]=ye,ge=Q;else break e}}function r(K){return K.length===0?null:K[0]}function c(K){if(K.length===0)return null;var fe=K[0],ge=K.pop();if(ge!==fe){K[0]=ge;e:for(var Q=0,ye=K.length,A=ye>>>1;Q<A;){var F=2*(Q+1)-1,ie=K[F],pe=F+1,ke=K[pe];if(0>d(ie,ge))pe<ye&&0>d(ke,ie)?(K[Q]=ke,K[pe]=ge,Q=pe):(K[Q]=ie,K[F]=ge,Q=F);else if(pe<ye&&0>d(ke,ge))K[Q]=ke,K[pe]=ge,Q=pe;else break e}}return fe}function d(K,fe){var ge=K.sortIndex-fe.sortIndex;return ge!==0?ge:K.id-fe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;i.unstable_now=function(){return f.now()}}else{var m=Date,p=m.now();i.unstable_now=function(){return m.now()-p}}var g=[],v=[],k=1,w=null,D=3,z=!1,x=!1,L=!1,Y=!1,ne=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function ve(K){for(var fe=r(v);fe!==null;){if(fe.callback===null)c(v);else if(fe.startTime<=K)c(v),fe.sortIndex=fe.expirationTime,n(g,fe);else break;fe=r(v)}}function Ce(K){if(L=!1,ve(K),!x)if(r(g)!==null)x=!0,R||(R=!0,be());else{var fe=r(v);fe!==null&&Ee(Ce,fe.startTime-K)}}var R=!1,ce=-1,P=5,oe=-1;function ze(){return Y?!0:!(i.unstable_now()-oe<P)}function Le(){if(Y=!1,R){var K=i.unstable_now();oe=K;var fe=!0;try{e:{x=!1,L&&(L=!1,re(ce),ce=-1),z=!0;var ge=D;try{t:{for(ve(K),w=r(g);w!==null&&!(w.expirationTime>K&&ze());){var Q=w.callback;if(typeof Q=="function"){w.callback=null,D=w.priorityLevel;var ye=Q(w.expirationTime<=K);if(K=i.unstable_now(),typeof ye=="function"){w.callback=ye,ve(K),fe=!0;break t}w===r(g)&&c(g),ve(K)}else c(g);w=r(g)}if(w!==null)fe=!0;else{var A=r(v);A!==null&&Ee(Ce,A.startTime-K),fe=!1}}break e}finally{w=null,D=ge,z=!1}fe=void 0}}finally{fe?be():R=!1}}}var be;if(typeof X=="function")be=function(){X(Le)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,Xe=Ye.port2;Ye.port1.onmessage=Le,be=function(){Xe.postMessage(null)}}else be=function(){ne(Le,0)};function Ee(K,fe){ce=ne(function(){K(i.unstable_now())},fe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(K){K.callback=null},i.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<K?Math.floor(1e3/K):5},i.unstable_getCurrentPriorityLevel=function(){return D},i.unstable_next=function(K){switch(D){case 1:case 2:case 3:var fe=3;break;default:fe=D}var ge=D;D=fe;try{return K()}finally{D=ge}},i.unstable_requestPaint=function(){Y=!0},i.unstable_runWithPriority=function(K,fe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ge=D;D=K;try{return fe()}finally{D=ge}},i.unstable_scheduleCallback=function(K,fe,ge){var Q=i.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Q+ge:Q):ge=Q,K){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=ge+ye,K={id:k++,callback:fe,priorityLevel:K,startTime:ge,expirationTime:ye,sortIndex:-1},ge>Q?(K.sortIndex=ge,n(v,K),r(g)===null&&K===r(v)&&(L?(re(ce),ce=-1):L=!0,Ee(Ce,ge-Q))):(K.sortIndex=ye,n(g,K),x||z||(x=!0,R||(R=!0,be()))),K},i.unstable_shouldYield=ze,i.unstable_wrapCallback=function(K){var fe=D;return function(){var ge=D;D=fe;try{return K.apply(this,arguments)}finally{D=ge}}}})(Su)),Su}var Rh;function Nv(){return Rh||(Rh=1,wu.exports=Sv()),wu.exports}var Nu={exports:{}},ua={};var Dh;function Cv(){if(Dh)return ua;Dh=1;var i=Pu();function n(g){var v="https://react.dev/errors/"+g;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var k=2;k<arguments.length;k++)v+="&args[]="+encodeURIComponent(arguments[k])}return"Minified React error #"+g+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var c={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},d=Symbol.for("react.portal");function f(g,v,k){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:w==null?null:""+w,children:g,containerInfo:v,implementation:k}}var m=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,v){if(g==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return ua.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,ua.createPortal=function(g,v){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(n(299));return f(g,v,null,k)},ua.flushSync=function(g){var v=m.T,k=c.p;try{if(m.T=null,c.p=2,g)return g()}finally{m.T=v,c.p=k,c.d.f()}},ua.preconnect=function(g,v){typeof g=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,c.d.C(g,v))},ua.prefetchDNS=function(g){typeof g=="string"&&c.d.D(g)},ua.preinit=function(g,v){if(typeof g=="string"&&v&&typeof v.as=="string"){var k=v.as,w=p(k,v.crossOrigin),D=typeof v.integrity=="string"?v.integrity:void 0,z=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;k==="style"?c.d.S(g,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:w,integrity:D,fetchPriority:z}):k==="script"&&c.d.X(g,{crossOrigin:w,integrity:D,fetchPriority:z,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},ua.preinitModule=function(g,v){if(typeof g=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var k=p(v.as,v.crossOrigin);c.d.M(g,{crossOrigin:k,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&c.d.M(g)},ua.preload=function(g,v){if(typeof g=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var k=v.as,w=p(k,v.crossOrigin);c.d.L(g,k,{crossOrigin:w,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},ua.preloadModule=function(g,v){if(typeof g=="string")if(v){var k=p(v.as,v.crossOrigin);c.d.m(g,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:k,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else c.d.m(g)},ua.requestFormReset=function(g){c.d.r(g)},ua.unstable_batchedUpdates=function(g,v){return g(v)},ua.useFormState=function(g,v,k){return m.H.useFormState(g,v,k)},ua.useFormStatus=function(){return m.H.useHostTransitionStatus()},ua.version="19.2.3",ua}var xh;function Tv(){if(xh)return Nu.exports;xh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Nu.exports=Cv(),Nu.exports}var Mh;function kv(){if(Mh)return xr;Mh=1;var i=Nv(),n=Pu(),r=Tv();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(f(e)!==e)throw Error(c(188))}function v(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(c(188));return t!==e?null:e}for(var a=e,l=t;;){var o=a.return;if(o===null)break;var u=o.alternate;if(u===null){if(l=o.return,l!==null){a=l;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===a)return g(o),e;if(u===l)return g(o),t;u=u.sibling}throw Error(c(188))}if(a.return!==l.return)a=o,l=u;else{for(var h=!1,b=o.child;b;){if(b===a){h=!0,a=o,l=u;break}if(b===l){h=!0,l=o,a=u;break}b=b.sibling}if(!h){for(b=u.child;b;){if(b===a){h=!0,a=u,l=o;break}if(b===l){h=!0,l=u,a=o;break}b=b.sibling}if(!h)throw Error(c(189))}}if(a.alternate!==l)throw Error(c(190))}if(a.tag!==3)throw Error(c(188));return a.stateNode.current===a?e:t}function k(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=k(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,D=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),re=Symbol.for("react.consumer"),X=Symbol.for("react.context"),ve=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),oe=Symbol.for("react.activity"),ze=Symbol.for("react.memo_cache_sentinel"),Le=Symbol.iterator;function be(e){return e===null||typeof e!="object"?null:(e=Le&&e[Le]||e["@@iterator"],typeof e=="function"?e:null)}var Ye=Symbol.for("react.client.reference");function Xe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ye?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case L:return"Fragment";case ne:return"Profiler";case Y:return"StrictMode";case Ce:return"Suspense";case R:return"SuspenseList";case oe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case x:return"Portal";case X:return e.displayName||"Context";case re:return(e._context.displayName||"Context")+".Consumer";case ve:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ce:return t=e.displayName||null,t!==null?t:Xe(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return Xe(e(t))}catch{}}return null}var Ee=Array.isArray,K=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Q=[],ye=-1;function A(e){return{current:e}}function F(e){0>ye||(e.current=Q[ye],Q[ye]=null,ye--)}function ie(e,t){ye++,Q[ye]=e.current,e.current=t}var pe=A(null),ke=A(null),je=A(null),Ke=A(null);function yt(e,t){switch(ie(je,t),ie(ke,e),ie(pe,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Jm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Jm(t),e=Zm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}F(pe),ie(pe,e)}function Re(){F(pe),F(ke),F(je)}function Pt(e){e.memoizedState!==null&&ie(Ke,e);var t=pe.current,a=Zm(t,e.type);t!==a&&(ie(ke,e),ie(pe,a))}function ma(e){ke.current===e&&(F(pe),F(ke)),Ke.current===e&&(F(Ke),Ar._currentValue=ge)}var ha,Je;function rt(e){if(ha===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);ha=t&&t[1]||"",Je=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ha+e+Je}var Et=!1;function Ue(e,t){if(!e||Et)return"";Et=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(J){var I=J}Reflect.construct(e,[],ae)}else{try{ae.call()}catch(J){I=J}e.call(ae.prototype)}}else{try{throw Error()}catch(J){I=J}(ae=e())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(J){if(J&&I&&typeof J.stack=="string")return[J.stack,I.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=l.DetermineComponentFrameRoot(),h=u[0],b=u[1];if(h&&b){var T=h.split(`
`),V=b.split(`
`);for(o=l=0;l<T.length&&!T[l].includes("DetermineComponentFrameRoot");)l++;for(;o<V.length&&!V[o].includes("DetermineComponentFrameRoot");)o++;if(l===T.length||o===V.length)for(l=T.length-1,o=V.length-1;1<=l&&0<=o&&T[l]!==V[o];)o--;for(;1<=l&&0<=o;l--,o--)if(T[l]!==V[o]){if(l!==1||o!==1)do if(l--,o--,0>o||T[l]!==V[o]){var W=`
`+T[l].replace(" at new "," at ");return e.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",e.displayName)),W}while(1<=l&&0<=o);break}}}finally{Et=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?rt(a):""}function $a(e,t){switch(e.tag){case 26:case 27:case 5:return rt(e.type);case 16:return rt("Lazy");case 13:return e.child!==t&&t!==null?rt("Suspense Fallback"):rt("Suspense");case 19:return rt("SuspenseList");case 0:case 15:return Ue(e.type,!1);case 11:return Ue(e.type.render,!1);case 1:return Ue(e.type,!0);case 31:return rt("Activity");default:return""}}function La(e){try{var t="",a=null;do t+=$a(e,a),a=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Na=Object.prototype.hasOwnProperty,mn=i.unstable_scheduleCallback,tn=i.unstable_cancelCallback,Gn=i.unstable_shouldYield,Vn=i.unstable_requestPaint,$t=i.unstable_now,H=i.unstable_getCurrentPriorityLevel,me=i.unstable_ImmediatePriority,Ge=i.unstable_UserBlockingPriority,He=i.unstable_NormalPriority,nt=i.unstable_LowPriority,ct=i.unstable_IdlePriority,Rt=i.log,bt=i.unstable_setDisableYieldValue,Ct=null,wt=null;function ot(e){if(typeof Rt=="function"&&bt(e),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(Ct,e)}catch{}}var Be=Math.clz32?Math.clz32:y,kt=Math.log,ra=Math.LN2;function y(e){return e>>>=0,e===0?32:31-(kt(e)/ra|0)|0}var C=256,se=262144,Ie=4194304;function At(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Zt(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var o=0,u=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var b=l&134217727;return b!==0?(l=b&~u,l!==0?o=At(l):(h&=b,h!==0?o=At(h):a||(a=b&~e,a!==0&&(o=At(a))))):(b=l&~u,b!==0?o=At(b):h!==0?o=At(h):a||(a=l&~e,a!==0&&(o=At(a)))),o===0?0:t!==0&&t!==o&&(t&u)===0&&(u=o&-o,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:o}function Ft(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ca(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ut(){var e=Ie;return Ie<<=1,(Ie&62914560)===0&&(Ie=4194304),e}function Ha(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function pa(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _l(e,t,a,l,o,u){var h=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var b=e.entanglements,T=e.expirationTimes,V=e.hiddenUpdates;for(a=h&~a;0<a;){var W=31-Be(a),ae=1<<W;b[W]=0,T[W]=-1;var I=V[W];if(I!==null)for(V[W]=null,W=0;W<I.length;W++){var J=I[W];J!==null&&(J.lane&=-536870913)}a&=~ae}l!==0&&El(e,l,0),u!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=u&~(h&~t))}function El(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Be(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function ga(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-Be(a),o=1<<l;o&t|e[l]&t&&(e[l]|=t),a&=~o}}function Yn(e,t){var a=t&-t;return a=(a&42)!==0?1:Ta(a),(a&(e.suspendedLanes|t))!==0?0:a}function Ta(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ka(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ze(){var e=fe.p;return e!==0?e:(e=window.event,e===void 0?32:_h(e.type))}function Ga(e,t){var a=fe.p;try{return fe.p=e,t()}finally{fe.p=a}}var Dt=Math.random().toString(36).slice(2),Bt="__reactFiber$"+Dt,ia="__reactProps$"+Dt,Kn="__reactContainer$"+Dt,qs="__reactEvents$"+Dt,Yr="__reactListeners$"+Dt,Kr="__reactHandles$"+Dt,Ir="__reactResources$"+Dt,wl="__reactMarker$"+Dt;function $s(e){delete e[Bt],delete e[ia],delete e[qs],delete e[Yr],delete e[Kr]}function En(e){var t=e[Bt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Kn]||a[Bt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=lh(e);e!==null;){if(a=e[Bt])return a;e=lh(e)}return t}e=a,a=e.parentNode}return null}function hn(e){if(e=e[Bt]||e[Kn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function wn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function Lt(e){var t=e[Ir];return t||(t=e[Ir]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ht(e){e[wl]=!0}var Pl=new Set,ca={};function xt(e,t){In(e,t),In(e+"Capture",t)}function In(e,t){for(ca[e]=t,e=0;e<t.length;e++)Pl.add(t[e])}var Ls=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Va={},Sl={};function Pn(e){return Na.call(Sl,e)?!0:Na.call(Va,e)?!1:Ls.test(e)?Sl[e]=!0:(Va[e]=!0,!1)}function Sn(e,t,a){if(Pn(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function an(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function nn(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}function va(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Pr(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yc(e,t,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var o=l.get,u=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(h){a=""+h,u.call(this,h)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(h){a=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Hs(e){if(!e._valueTracker){var t=Pr(e)?"checked":"value";e._valueTracker=yc(e,t,""+e[t])}}function Ql(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=Pr(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function Xl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var bc=/[\n"\\]/g;function da(e){return e.replace(bc,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Gs(e,t,a,l,o,u,h,b){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+va(t)):e.value!==""+va(t)&&(e.value=""+va(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?Jl(e,h,va(t)):a!=null?Jl(e,h,va(a)):l!=null&&e.removeAttribute("value"),o==null&&u!=null&&(e.defaultChecked=!!u),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+va(b):e.removeAttribute("name")}function Vs(e,t,a,l,o,u,h,b){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Hs(e);return}a=a!=null?""+va(a):"",t=t!=null?""+va(t):a,b||t===e.value||(e.value=t),e.defaultValue=t}l=l??o,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=b?e.checked:!!l,e.defaultChecked=!!l,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h),Hs(e)}function Jl(e,t,a){t==="number"&&Xl(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ln(e,t,a,l){if(e=e.options,t){t={};for(var o=0;o<a.length;o++)t["$"+a[o]]=!0;for(a=0;a<e.length;a++)o=t.hasOwnProperty("$"+e[a].value),e[a].selected!==o&&(e[a].selected=o),o&&l&&(e[a].defaultSelected=!0)}else{for(a=""+va(a),t=null,o=0;o<e.length;o++){if(e[o].value===a){e[o].selected=!0,l&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Qr(e,t,a){if(t!=null&&(t=""+va(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+va(a):""}function Xr(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(c(92));if(Ee(l)){if(1<l.length)throw Error(c(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=va(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),Hs(e)}function Qn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var _c=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jr(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||_c.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Zr(e,t,a){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var o in t)l=t[o],t.hasOwnProperty(o)&&a[o]!==l&&Jr(e,o,l)}else for(var u in t)t.hasOwnProperty(u)&&Jr(e,u,t[u])}function Ys(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ec=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Aa(e){return wc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function sn(){}var Ks=null;function Is(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Nn=null,Xn=null;function Fr(e){var t=hn(e);if(t&&(e=t.stateNode)){var a=e[ia]||null;e:switch(e=t.stateNode,t.type){case"input":if(Gs(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+da(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var o=l[ia]||null;if(!o)throw Error(c(90));Gs(l,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&Ql(l)}break e;case"textarea":Qr(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&ln(e,!!a.multiple,t,!1)}}}var Ps=!1;function Ya(e,t,a){if(Ps)return e(t,a);Ps=!0;try{var l=e(t);return l}finally{if(Ps=!1,(Nn!==null||Xn!==null)&&(Ui(),Nn&&(t=Nn,e=Xn,Xn=Nn=null,Fr(t),e)))for(t=0;t<e.length;t++)Fr(e[t])}}function ya(e,t){var a=e.stateNode;if(a===null)return null;var l=a[ia]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(c(231,t,typeof a));return a}var Ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qs=!1;if(Ka)try{var Nl={};Object.defineProperty(Nl,"passive",{get:function(){Qs=!0}}),window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch{Qs=!1}var S=null,E=null,N=null;function j(){if(N)return N;var e,t=E,a=t.length,l,o="value"in S?S.value:S.textContent,u=o.length;for(e=0;e<a&&t[e]===o[e];e++);var h=a-e;for(l=1;l<=h&&t[a-l]===o[u-l];l++);return N=o.slice(e,1<l?1-l:void 0)}function U(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function le(){return!0}function O(){return!1}function _(e){function t(a,l,o,u,h){this._reactName=a,this._targetInst=o,this.type=l,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(a=e[b],this[b]=a?a(u):u[b]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?le:O,this.isPropagationStopped=O,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=le)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=le)},persist:function(){},isPersistent:le}),t}var B={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},de=_(B),Ae=w({},B,{view:0,detail:0}),qe=_(Ae),$e,$,he,ue=w({},Ae,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==he&&(he&&e.type==="mousemove"?($e=e.screenX-he.screenX,$=e.screenY-he.screenY):$=$e=0,he=e),$e)},movementY:function(e){return"movementY"in e?e.movementY:$}}),we=_(ue),Se=w({},ue,{dataTransfer:0}),gt=_(Se),oa=w({},Ae,{relatedTarget:0}),pn=_(oa),gn=w({},B,{animationName:0,elapsedTime:0,pseudoElement:0}),Sc=_(gn),Tp=w({},B,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kp=_(Tp),Ap=w({},B,{data:0}),Wu=_(Ap),Op={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Dp[e])?!!t[e]:!1}function Nc(){return xp}var Mp=w({},Ae,{key:function(e){if(e.key){var t=Op[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=U(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Rp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nc,charCode:function(e){return e.type==="keypress"?U(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?U(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Up=_(Mp),jp=w({},ue,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ed=_(jp),Bp=w({},Ae,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nc}),zp=_(Bp),qp=w({},B,{propertyName:0,elapsedTime:0,pseudoElement:0}),$p=_(qp),Lp=w({},ue,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Hp=_(Lp),Gp=w({},B,{newState:0,oldState:0}),Vp=_(Gp),Yp=[9,13,27,32],Cc=Ka&&"CompositionEvent"in window,Xs=null;Ka&&"documentMode"in document&&(Xs=document.documentMode);var Kp=Ka&&"TextEvent"in window&&!Xs,td=Ka&&(!Cc||Xs&&8<Xs&&11>=Xs),ad=" ",nd=!1;function ld(e,t){switch(e){case"keyup":return Yp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zl=!1;function Ip(e,t){switch(e){case"compositionend":return sd(t);case"keypress":return t.which!==32?null:(nd=!0,ad);case"textInput":return e=t.data,e===ad&&nd?null:e;default:return null}}function Pp(e,t){if(Zl)return e==="compositionend"||!Cc&&ld(e,t)?(e=j(),N=E=S=null,Zl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return td&&t.locale!=="ko"?null:t.data;default:return null}}var Qp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Qp[e.type]:t==="textarea"}function id(e,t,a,l){Nn?Xn?Xn.push(l):Xn=[l]:Nn=l,t=Hi(t,"onChange"),0<t.length&&(a=new de("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var Js=null,Zs=null;function Xp(e){Ym(e,0)}function Wr(e){var t=wn(e);if(Ql(t))return e}function cd(e,t){if(e==="change")return t}var od=!1;if(Ka){var Tc;if(Ka){var kc="oninput"in document;if(!kc){var ud=document.createElement("div");ud.setAttribute("oninput","return;"),kc=typeof ud.oninput=="function"}Tc=kc}else Tc=!1;od=Tc&&(!document.documentMode||9<document.documentMode)}function dd(){Js&&(Js.detachEvent("onpropertychange",fd),Zs=Js=null)}function fd(e){if(e.propertyName==="value"&&Wr(Zs)){var t=[];id(t,Zs,e,Is(e)),Ya(Xp,t)}}function Jp(e,t,a){e==="focusin"?(dd(),Js=t,Zs=a,Js.attachEvent("onpropertychange",fd)):e==="focusout"&&dd()}function Zp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wr(Zs)}function Fp(e,t){if(e==="click")return Wr(t)}function Wp(e,t){if(e==="input"||e==="change")return Wr(t)}function eg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Oa=typeof Object.is=="function"?Object.is:eg;function Fs(e,t){if(Oa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var o=a[l];if(!Na.call(t,o)||!Oa(e[o],t[o]))return!1}return!0}function md(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hd(e,t){var a=md(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=md(a)}}function pd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?pd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Xl(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Xl(e.document)}return t}function Ac(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var tg=Ka&&"documentMode"in document&&11>=document.documentMode,Fl=null,Oc=null,Ws=null,Rc=!1;function vd(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Rc||Fl==null||Fl!==Xl(l)||(l=Fl,"selectionStart"in l&&Ac(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ws&&Fs(Ws,l)||(Ws=l,l=Hi(Oc,"onSelect"),0<l.length&&(t=new de("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=Fl)))}function Cl(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Wl={animationend:Cl("Animation","AnimationEnd"),animationiteration:Cl("Animation","AnimationIteration"),animationstart:Cl("Animation","AnimationStart"),transitionrun:Cl("Transition","TransitionRun"),transitionstart:Cl("Transition","TransitionStart"),transitioncancel:Cl("Transition","TransitionCancel"),transitionend:Cl("Transition","TransitionEnd")},Dc={},yd={};Ka&&(yd=document.createElement("div").style,"AnimationEvent"in window||(delete Wl.animationend.animation,delete Wl.animationiteration.animation,delete Wl.animationstart.animation),"TransitionEvent"in window||delete Wl.transitionend.transition);function Tl(e){if(Dc[e])return Dc[e];if(!Wl[e])return e;var t=Wl[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in yd)return Dc[e]=t[a];return e}var bd=Tl("animationend"),_d=Tl("animationiteration"),Ed=Tl("animationstart"),ag=Tl("transitionrun"),ng=Tl("transitionstart"),lg=Tl("transitioncancel"),wd=Tl("transitionend"),Sd=new Map,xc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xc.push("scrollEnd");function rn(e,t){Sd.set(e,t),xt(t,[e])}var ei=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ia=[],es=0,Mc=0;function ti(){for(var e=es,t=Mc=es=0;t<e;){var a=Ia[t];Ia[t++]=null;var l=Ia[t];Ia[t++]=null;var o=Ia[t];Ia[t++]=null;var u=Ia[t];if(Ia[t++]=null,l!==null&&o!==null){var h=l.pending;h===null?o.next=o:(o.next=h.next,h.next=o),l.pending=o}u!==0&&Nd(a,o,u)}}function ai(e,t,a,l){Ia[es++]=e,Ia[es++]=t,Ia[es++]=a,Ia[es++]=l,Mc|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Uc(e,t,a,l){return ai(e,t,a,l),ni(e)}function kl(e,t){return ai(e,null,null,t),ni(e)}function Nd(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var o=!1,u=e.return;u!==null;)u.childLanes|=a,l=u.alternate,l!==null&&(l.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(o=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,o&&t!==null&&(o=31-Be(a),e=u.hiddenUpdates,l=e[o],l===null?e[o]=[t]:l.push(t),t.lane=a|536870912),u):null}function ni(e){if(50<Er)throw Er=0,Yo=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ts={};function sg(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ra(e,t,a,l){return new sg(e,t,a,l)}function jc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Cn(e,t){var a=e.alternate;return a===null?(a=Ra(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Cd(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function li(e,t,a,l,o,u){var h=0;if(l=e,typeof e=="function")jc(e)&&(h=1);else if(typeof e=="string")h=uv(e,a,pe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case oe:return e=Ra(31,a,t,o),e.elementType=oe,e.lanes=u,e;case L:return Al(a.children,o,u,t);case Y:h=8,o|=24;break;case ne:return e=Ra(12,a,t,o|2),e.elementType=ne,e.lanes=u,e;case Ce:return e=Ra(13,a,t,o),e.elementType=Ce,e.lanes=u,e;case R:return e=Ra(19,a,t,o),e.elementType=R,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case X:h=10;break e;case re:h=9;break e;case ve:h=11;break e;case ce:h=14;break e;case P:h=16,l=null;break e}h=29,a=Error(c(130,e===null?"null":typeof e,"")),l=null}return t=Ra(h,a,t,o),t.elementType=e,t.type=l,t.lanes=u,t}function Al(e,t,a,l){return e=Ra(7,e,l,t),e.lanes=a,e}function Bc(e,t,a){return e=Ra(6,e,null,t),e.lanes=a,e}function Td(e){var t=Ra(18,null,null,0);return t.stateNode=e,t}function zc(e,t,a){return t=Ra(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var kd=new WeakMap;function Pa(e,t){if(typeof e=="object"&&e!==null){var a=kd.get(e);return a!==void 0?a:(t={value:e,source:t,stack:La(t)},kd.set(e,t),t)}return{value:e,source:t,stack:La(t)}}var as=[],ns=0,si=null,er=0,Qa=[],Xa=0,Jn=null,vn=1,yn="";function Tn(e,t){as[ns++]=er,as[ns++]=si,si=e,er=t}function Ad(e,t,a){Qa[Xa++]=vn,Qa[Xa++]=yn,Qa[Xa++]=Jn,Jn=e;var l=vn;e=yn;var o=32-Be(l)-1;l&=~(1<<o),a+=1;var u=32-Be(t)+o;if(30<u){var h=o-o%5;u=(l&(1<<h)-1).toString(32),l>>=h,o-=h,vn=1<<32-Be(t)+o|a<<o|l,yn=u+e}else vn=1<<u|a<<o|l,yn=e}function qc(e){e.return!==null&&(Tn(e,1),Ad(e,1,0))}function $c(e){for(;e===si;)si=as[--ns],as[ns]=null,er=as[--ns],as[ns]=null;for(;e===Jn;)Jn=Qa[--Xa],Qa[Xa]=null,yn=Qa[--Xa],Qa[Xa]=null,vn=Qa[--Xa],Qa[Xa]=null}function Od(e,t){Qa[Xa++]=vn,Qa[Xa++]=yn,Qa[Xa++]=Jn,vn=t.id,yn=t.overflow,Jn=e}var Wt=null,St=null,at=!1,Zn=null,Ja=!1,Lc=Error(c(519));function Fn(e){var t=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tr(Pa(t,e)),Lc}function Rd(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[Bt]=e,t[ia]=l,a){case"dialog":We("cancel",t),We("close",t);break;case"iframe":case"object":case"embed":We("load",t);break;case"video":case"audio":for(a=0;a<Sr.length;a++)We(Sr[a],t);break;case"source":We("error",t);break;case"img":case"image":case"link":We("error",t),We("load",t);break;case"details":We("toggle",t);break;case"input":We("invalid",t),Vs(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":We("invalid",t);break;case"textarea":We("invalid",t),Xr(t,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||Qm(t.textContent,a)?(l.popover!=null&&(We("beforetoggle",t),We("toggle",t)),l.onScroll!=null&&We("scroll",t),l.onScrollEnd!=null&&We("scrollend",t),l.onClick!=null&&(t.onclick=sn),t=!0):t=!1,t||Fn(e,!0)}function Dd(e){for(Wt=e.return;Wt;)switch(Wt.tag){case 5:case 31:case 13:Ja=!1;return;case 27:case 3:Ja=!0;return;default:Wt=Wt.return}}function ls(e){if(e!==Wt)return!1;if(!at)return Dd(e),at=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||su(e.type,e.memoizedProps)),a=!a),a&&St&&Fn(e),Dd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));St=nh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));St=nh(e)}else t===27?(t=St,fl(e.type)?(e=uu,uu=null,St=e):St=t):St=Wt?Fa(e.stateNode.nextSibling):null;return!0}function Ol(){St=Wt=null,at=!1}function Hc(){var e=Zn;return e!==null&&(wa===null?wa=e:wa.push.apply(wa,e),Zn=null),e}function tr(e){Zn===null?Zn=[e]:Zn.push(e)}var Gc=A(null),Rl=null,kn=null;function Wn(e,t,a){ie(Gc,t._currentValue),t._currentValue=a}function An(e){e._currentValue=Gc.current,F(Gc)}function Vc(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function Yc(e,t,a,l){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){var h=o.child;u=u.firstContext;e:for(;u!==null;){var b=u;u=o;for(var T=0;T<t.length;T++)if(b.context===t[T]){u.lanes|=a,b=u.alternate,b!==null&&(b.lanes|=a),Vc(u.return,a,e),l||(h=null);break e}u=b.next}}else if(o.tag===18){if(h=o.return,h===null)throw Error(c(341));h.lanes|=a,u=h.alternate,u!==null&&(u.lanes|=a),Vc(h,a,e),h=null}else h=o.child;if(h!==null)h.return=o;else for(h=o;h!==null;){if(h===e){h=null;break}if(o=h.sibling,o!==null){o.return=h.return,h=o;break}h=h.return}o=h}}function ss(e,t,a,l){e=null;for(var o=t,u=!1;o!==null;){if(!u){if((o.flags&524288)!==0)u=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var h=o.alternate;if(h===null)throw Error(c(387));if(h=h.memoizedProps,h!==null){var b=o.type;Oa(o.pendingProps.value,h.value)||(e!==null?e.push(b):e=[b])}}else if(o===Ke.current){if(h=o.alternate,h===null)throw Error(c(387));h.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(Ar):e=[Ar])}o=o.return}e!==null&&Yc(t,e,a,l),t.flags|=262144}function ri(e){for(e=e.firstContext;e!==null;){if(!Oa(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Dl(e){Rl=e,kn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ea(e){return xd(Rl,e)}function ii(e,t){return Rl===null&&Dl(e),xd(e,t)}function xd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},kn===null){if(e===null)throw Error(c(308));kn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else kn=kn.next=t;return a}var rg=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},ig=i.unstable_scheduleCallback,cg=i.unstable_NormalPriority,Gt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kc(){return{controller:new rg,data:new Map,refCount:0}}function ar(e){e.refCount--,e.refCount===0&&ig(cg,function(){e.controller.abort()})}var nr=null,Ic=0,rs=0,is=null;function og(e,t){if(nr===null){var a=nr=[];Ic=0,rs=Jo(),is={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ic++,t.then(Md,Md),t}function Md(){if(--Ic===0&&nr!==null){is!==null&&(is.status="fulfilled");var e=nr;nr=null,rs=0,is=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ug(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(o){a.push(o)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var o=0;o<a.length;o++)(0,a[o])(t)},function(o){for(l.status="rejected",l.reason=o,o=0;o<a.length;o++)(0,a[o])(void 0)}),l}var Ud=K.S;K.S=function(e,t){ym=$t(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&og(e,t),Ud!==null&&Ud(e,t)};var xl=A(null);function Pc(){var e=xl.current;return e!==null?e:vt.pooledCache}function ci(e,t){t===null?ie(xl,xl.current):ie(xl,t.pool)}function jd(){var e=Pc();return e===null?null:{parent:Gt._currentValue,pool:e}}var cs=Error(c(460)),Qc=Error(c(474)),oi=Error(c(542)),ui={then:function(){}};function Bd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function zd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(sn,sn),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,$d(e),e;default:if(typeof t.status=="string")t.then(sn,sn);else{if(e=vt,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=l}},function(l){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,$d(e),e}throw Ul=t,cs}}function Ml(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ul=a,cs):a}}var Ul=null;function qd(){if(Ul===null)throw Error(c(459));var e=Ul;return Ul=null,e}function $d(e){if(e===cs||e===oi)throw Error(c(483))}var os=null,lr=0;function di(e){var t=lr;return lr+=1,os===null&&(os=[]),zd(os,e,t)}function sr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function fi(e,t){throw t.$$typeof===D?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ld(e){function t(q,M){if(e){var G=q.deletions;G===null?(q.deletions=[M],q.flags|=16):G.push(M)}}function a(q,M){if(!e)return null;for(;M!==null;)t(q,M),M=M.sibling;return null}function l(q){for(var M=new Map;q!==null;)q.key!==null?M.set(q.key,q):M.set(q.index,q),q=q.sibling;return M}function o(q,M){return q=Cn(q,M),q.index=0,q.sibling=null,q}function u(q,M,G){return q.index=G,e?(G=q.alternate,G!==null?(G=G.index,G<M?(q.flags|=67108866,M):G):(q.flags|=67108866,M)):(q.flags|=1048576,M)}function h(q){return e&&q.alternate===null&&(q.flags|=67108866),q}function b(q,M,G,te){return M===null||M.tag!==6?(M=Bc(G,q.mode,te),M.return=q,M):(M=o(M,G),M.return=q,M)}function T(q,M,G,te){var Oe=G.type;return Oe===L?W(q,M,G.props.children,te,G.key):M!==null&&(M.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===P&&Ml(Oe)===M.type)?(M=o(M,G.props),sr(M,G),M.return=q,M):(M=li(G.type,G.key,G.props,null,q.mode,te),sr(M,G),M.return=q,M)}function V(q,M,G,te){return M===null||M.tag!==4||M.stateNode.containerInfo!==G.containerInfo||M.stateNode.implementation!==G.implementation?(M=zc(G,q.mode,te),M.return=q,M):(M=o(M,G.children||[]),M.return=q,M)}function W(q,M,G,te,Oe){return M===null||M.tag!==7?(M=Al(G,q.mode,te,Oe),M.return=q,M):(M=o(M,G),M.return=q,M)}function ae(q,M,G){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Bc(""+M,q.mode,G),M.return=q,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case z:return G=li(M.type,M.key,M.props,null,q.mode,G),sr(G,M),G.return=q,G;case x:return M=zc(M,q.mode,G),M.return=q,M;case P:return M=Ml(M),ae(q,M,G)}if(Ee(M)||be(M))return M=Al(M,q.mode,G,null),M.return=q,M;if(typeof M.then=="function")return ae(q,di(M),G);if(M.$$typeof===X)return ae(q,ii(q,M),G);fi(q,M)}return null}function I(q,M,G,te){var Oe=M!==null?M.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Oe!==null?null:b(q,M,""+G,te);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case z:return G.key===Oe?T(q,M,G,te):null;case x:return G.key===Oe?V(q,M,G,te):null;case P:return G=Ml(G),I(q,M,G,te)}if(Ee(G)||be(G))return Oe!==null?null:W(q,M,G,te,null);if(typeof G.then=="function")return I(q,M,di(G),te);if(G.$$typeof===X)return I(q,M,ii(q,G),te);fi(q,G)}return null}function J(q,M,G,te,Oe){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return q=q.get(G)||null,b(M,q,""+te,Oe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case z:return q=q.get(te.key===null?G:te.key)||null,T(M,q,te,Oe);case x:return q=q.get(te.key===null?G:te.key)||null,V(M,q,te,Oe);case P:return te=Ml(te),J(q,M,G,te,Oe)}if(Ee(te)||be(te))return q=q.get(G)||null,W(M,q,te,Oe,null);if(typeof te.then=="function")return J(q,M,G,di(te),Oe);if(te.$$typeof===X)return J(q,M,G,ii(M,te),Oe);fi(M,te)}return null}function _e(q,M,G,te){for(var Oe=null,lt=null,Ne=M,Qe=M=0,tt=null;Ne!==null&&Qe<G.length;Qe++){Ne.index>Qe?(tt=Ne,Ne=null):tt=Ne.sibling;var st=I(q,Ne,G[Qe],te);if(st===null){Ne===null&&(Ne=tt);break}e&&Ne&&st.alternate===null&&t(q,Ne),M=u(st,M,Qe),lt===null?Oe=st:lt.sibling=st,lt=st,Ne=tt}if(Qe===G.length)return a(q,Ne),at&&Tn(q,Qe),Oe;if(Ne===null){for(;Qe<G.length;Qe++)Ne=ae(q,G[Qe],te),Ne!==null&&(M=u(Ne,M,Qe),lt===null?Oe=Ne:lt.sibling=Ne,lt=Ne);return at&&Tn(q,Qe),Oe}for(Ne=l(Ne);Qe<G.length;Qe++)tt=J(Ne,q,Qe,G[Qe],te),tt!==null&&(e&&tt.alternate!==null&&Ne.delete(tt.key===null?Qe:tt.key),M=u(tt,M,Qe),lt===null?Oe=tt:lt.sibling=tt,lt=tt);return e&&Ne.forEach(function(vl){return t(q,vl)}),at&&Tn(q,Qe),Oe}function De(q,M,G,te){if(G==null)throw Error(c(151));for(var Oe=null,lt=null,Ne=M,Qe=M=0,tt=null,st=G.next();Ne!==null&&!st.done;Qe++,st=G.next()){Ne.index>Qe?(tt=Ne,Ne=null):tt=Ne.sibling;var vl=I(q,Ne,st.value,te);if(vl===null){Ne===null&&(Ne=tt);break}e&&Ne&&vl.alternate===null&&t(q,Ne),M=u(vl,M,Qe),lt===null?Oe=vl:lt.sibling=vl,lt=vl,Ne=tt}if(st.done)return a(q,Ne),at&&Tn(q,Qe),Oe;if(Ne===null){for(;!st.done;Qe++,st=G.next())st=ae(q,st.value,te),st!==null&&(M=u(st,M,Qe),lt===null?Oe=st:lt.sibling=st,lt=st);return at&&Tn(q,Qe),Oe}for(Ne=l(Ne);!st.done;Qe++,st=G.next())st=J(Ne,q,Qe,st.value,te),st!==null&&(e&&st.alternate!==null&&Ne.delete(st.key===null?Qe:st.key),M=u(st,M,Qe),lt===null?Oe=st:lt.sibling=st,lt=st);return e&&Ne.forEach(function(Ev){return t(q,Ev)}),at&&Tn(q,Qe),Oe}function pt(q,M,G,te){if(typeof G=="object"&&G!==null&&G.type===L&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case z:e:{for(var Oe=G.key;M!==null;){if(M.key===Oe){if(Oe=G.type,Oe===L){if(M.tag===7){a(q,M.sibling),te=o(M,G.props.children),te.return=q,q=te;break e}}else if(M.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===P&&Ml(Oe)===M.type){a(q,M.sibling),te=o(M,G.props),sr(te,G),te.return=q,q=te;break e}a(q,M);break}else t(q,M);M=M.sibling}G.type===L?(te=Al(G.props.children,q.mode,te,G.key),te.return=q,q=te):(te=li(G.type,G.key,G.props,null,q.mode,te),sr(te,G),te.return=q,q=te)}return h(q);case x:e:{for(Oe=G.key;M!==null;){if(M.key===Oe)if(M.tag===4&&M.stateNode.containerInfo===G.containerInfo&&M.stateNode.implementation===G.implementation){a(q,M.sibling),te=o(M,G.children||[]),te.return=q,q=te;break e}else{a(q,M);break}else t(q,M);M=M.sibling}te=zc(G,q.mode,te),te.return=q,q=te}return h(q);case P:return G=Ml(G),pt(q,M,G,te)}if(Ee(G))return _e(q,M,G,te);if(be(G)){if(Oe=be(G),typeof Oe!="function")throw Error(c(150));return G=Oe.call(G),De(q,M,G,te)}if(typeof G.then=="function")return pt(q,M,di(G),te);if(G.$$typeof===X)return pt(q,M,ii(q,G),te);fi(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,M!==null&&M.tag===6?(a(q,M.sibling),te=o(M,G),te.return=q,q=te):(a(q,M),te=Bc(G,q.mode,te),te.return=q,q=te),h(q)):a(q,M)}return function(q,M,G,te){try{lr=0;var Oe=pt(q,M,G,te);return os=null,Oe}catch(Ne){if(Ne===cs||Ne===oi)throw Ne;var lt=Ra(29,Ne,null,q.mode);return lt.lanes=te,lt.return=q,lt}}}var jl=Ld(!0),Hd=Ld(!1),el=!1;function Xc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function tl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function al(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(it&2)!==0){var o=l.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),l.pending=t,t=ni(e),Nd(e,null,a),t}return ai(e,l,t,a),ni(e)}function rr(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,ga(e,a)}}function Zc(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var o=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var h={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?o=u=h:u=u.next=h,a=a.next}while(a!==null);u===null?o=u=t:u=u.next=t}else o=u=t;a={baseState:l.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Fc=!1;function ir(){if(Fc){var e=is;if(e!==null)throw e}}function cr(e,t,a,l){Fc=!1;var o=e.updateQueue;el=!1;var u=o.firstBaseUpdate,h=o.lastBaseUpdate,b=o.shared.pending;if(b!==null){o.shared.pending=null;var T=b,V=T.next;T.next=null,h===null?u=V:h.next=V,h=T;var W=e.alternate;W!==null&&(W=W.updateQueue,b=W.lastBaseUpdate,b!==h&&(b===null?W.firstBaseUpdate=V:b.next=V,W.lastBaseUpdate=T))}if(u!==null){var ae=o.baseState;h=0,W=V=T=null,b=u;do{var I=b.lane&-536870913,J=I!==b.lane;if(J?(et&I)===I:(l&I)===I){I!==0&&I===rs&&(Fc=!0),W!==null&&(W=W.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var _e=e,De=b;I=t;var pt=a;switch(De.tag){case 1:if(_e=De.payload,typeof _e=="function"){ae=_e.call(pt,ae,I);break e}ae=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=De.payload,I=typeof _e=="function"?_e.call(pt,ae,I):_e,I==null)break e;ae=w({},ae,I);break e;case 2:el=!0}}I=b.callback,I!==null&&(e.flags|=64,J&&(e.flags|=8192),J=o.callbacks,J===null?o.callbacks=[I]:J.push(I))}else J={lane:I,tag:b.tag,payload:b.payload,callback:b.callback,next:null},W===null?(V=W=J,T=ae):W=W.next=J,h|=I;if(b=b.next,b===null){if(b=o.shared.pending,b===null)break;J=b,b=J.next,J.next=null,o.lastBaseUpdate=J,o.shared.pending=null}}while(!0);W===null&&(T=ae),o.baseState=T,o.firstBaseUpdate=V,o.lastBaseUpdate=W,u===null&&(o.shared.lanes=0),il|=h,e.lanes=h,e.memoizedState=ae}}function Gd(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function Vd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Gd(a[e],t)}var us=A(null),mi=A(0);function Yd(e,t){e=zn,ie(mi,e),ie(us,t),zn=e|t.baseLanes}function Wc(){ie(mi,zn),ie(us,us.current)}function eo(){zn=mi.current,F(us),F(mi)}var Da=A(null),Za=null;function nl(e){var t=e.alternate;ie(zt,zt.current&1),ie(Da,e),Za===null&&(t===null||us.current!==null||t.memoizedState!==null)&&(Za=e)}function to(e){ie(zt,zt.current),ie(Da,e),Za===null&&(Za=e)}function Kd(e){e.tag===22?(ie(zt,zt.current),ie(Da,e),Za===null&&(Za=e)):ll()}function ll(){ie(zt,zt.current),ie(Da,Da.current)}function xa(e){F(Da),Za===e&&(Za=null),F(zt)}var zt=A(0);function hi(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||cu(a)||ou(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var On=0,Pe=null,mt=null,Vt=null,pi=!1,ds=!1,Bl=!1,gi=0,or=0,fs=null,dg=0;function Mt(){throw Error(c(321))}function ao(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Oa(e[a],t[a]))return!1;return!0}function no(e,t,a,l,o,u){return On=u,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,K.H=e===null||e.memoizedState===null?Of:bo,Bl=!1,u=a(l,o),Bl=!1,ds&&(u=Pd(t,a,l,o)),Id(e),u}function Id(e){K.H=fr;var t=mt!==null&&mt.next!==null;if(On=0,Vt=mt=Pe=null,pi=!1,or=0,fs=null,t)throw Error(c(300));e===null||Yt||(e=e.dependencies,e!==null&&ri(e)&&(Yt=!0))}function Pd(e,t,a,l){Pe=e;var o=0;do{if(ds&&(fs=null),or=0,ds=!1,25<=o)throw Error(c(301));if(o+=1,Vt=mt=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}K.H=Rf,u=t(a,l)}while(ds);return u}function fg(){var e=K.H,t=e.useState()[0];return t=typeof t.then=="function"?ur(t):t,e=e.useState()[0],(mt!==null?mt.memoizedState:null)!==e&&(Pe.flags|=1024),t}function lo(){var e=gi!==0;return gi=0,e}function so(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function ro(e){if(pi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}pi=!1}On=0,Vt=mt=Pe=null,ds=!1,or=gi=0,fs=null}function fa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?Pe.memoizedState=Vt=e:Vt=Vt.next=e,Vt}function qt(){if(mt===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=mt.next;var t=Vt===null?Pe.memoizedState:Vt.next;if(t!==null)Vt=t,mt=e;else{if(e===null)throw Pe.alternate===null?Error(c(467)):Error(c(310));mt=e,e={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Vt===null?Pe.memoizedState=Vt=e:Vt=Vt.next=e}return Vt}function vi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ur(e){var t=or;return or+=1,fs===null&&(fs=[]),e=zd(fs,e,t),t=Pe,(Vt===null?t.memoizedState:Vt.next)===null&&(t=t.alternate,K.H=t===null||t.memoizedState===null?Of:bo),e}function yi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ur(e);if(e.$$typeof===X)return ea(e)}throw Error(c(438,String(e)))}function io(e){var t=null,a=Pe.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=Pe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=vi(),Pe.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=ze;return t.index++,a}function Rn(e,t){return typeof t=="function"?t(e):t}function bi(e){var t=qt();return co(t,mt,e)}function co(e,t,a){var l=e.queue;if(l===null)throw Error(c(311));l.lastRenderedReducer=a;var o=e.baseQueue,u=l.pending;if(u!==null){if(o!==null){var h=o.next;o.next=u.next,u.next=h}t.baseQueue=o=u,l.pending=null}if(u=e.baseState,o===null)e.memoizedState=u;else{t=o.next;var b=h=null,T=null,V=t,W=!1;do{var ae=V.lane&-536870913;if(ae!==V.lane?(et&ae)===ae:(On&ae)===ae){var I=V.revertLane;if(I===0)T!==null&&(T=T.next={lane:0,revertLane:0,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),ae===rs&&(W=!0);else if((On&I)===I){V=V.next,I===rs&&(W=!0);continue}else ae={lane:0,revertLane:V.revertLane,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},T===null?(b=T=ae,h=u):T=T.next=ae,Pe.lanes|=I,il|=I;ae=V.action,Bl&&a(u,ae),u=V.hasEagerState?V.eagerState:a(u,ae)}else I={lane:ae,revertLane:V.revertLane,gesture:V.gesture,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},T===null?(b=T=I,h=u):T=T.next=I,Pe.lanes|=ae,il|=ae;V=V.next}while(V!==null&&V!==t);if(T===null?h=u:T.next=b,!Oa(u,e.memoizedState)&&(Yt=!0,W&&(a=is,a!==null)))throw a;e.memoizedState=u,e.baseState=h,e.baseQueue=T,l.lastRenderedState=u}return o===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function oo(e){var t=qt(),a=t.queue;if(a===null)throw Error(c(311));a.lastRenderedReducer=e;var l=a.dispatch,o=a.pending,u=t.memoizedState;if(o!==null){a.pending=null;var h=o=o.next;do u=e(u,h.action),h=h.next;while(h!==o);Oa(u,t.memoizedState)||(Yt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,l]}function Qd(e,t,a){var l=Pe,o=qt(),u=at;if(u){if(a===void 0)throw Error(c(407));a=a()}else a=t();var h=!Oa((mt||o).memoizedState,a);if(h&&(o.memoizedState=a,Yt=!0),o=o.queue,mo(Zd.bind(null,l,o,e),[e]),o.getSnapshot!==t||h||Vt!==null&&Vt.memoizedState.tag&1){if(l.flags|=2048,ms(9,{destroy:void 0},Jd.bind(null,l,o,a,t),null),vt===null)throw Error(c(349));u||(On&127)!==0||Xd(l,t,a)}return a}function Xd(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Pe.updateQueue,t===null?(t=vi(),Pe.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Jd(e,t,a,l){t.value=a,t.getSnapshot=l,Fd(t)&&Wd(e)}function Zd(e,t,a){return a(function(){Fd(t)&&Wd(e)})}function Fd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Oa(e,a)}catch{return!0}}function Wd(e){var t=kl(e,2);t!==null&&Sa(t,e,2)}function uo(e){var t=fa();if(typeof e=="function"){var a=e;if(e=a(),Bl){ot(!0);try{a()}finally{ot(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:e},t}function ef(e,t,a,l){return e.baseState=a,co(e,mt,typeof l=="function"?l:Rn)}function mg(e,t,a,l,o){if(wi(e))throw Error(c(485));if(e=t.action,e!==null){var u={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){u.listeners.push(h)}};K.T!==null?a(!0):u.isTransition=!1,l(u),a=t.pending,a===null?(u.next=t.pending=u,tf(t,u)):(u.next=a.next,t.pending=a.next=u)}}function tf(e,t){var a=t.action,l=t.payload,o=e.state;if(t.isTransition){var u=K.T,h={};K.T=h;try{var b=a(o,l),T=K.S;T!==null&&T(h,b),af(e,t,b)}catch(V){fo(e,t,V)}finally{u!==null&&h.types!==null&&(u.types=h.types),K.T=u}}else try{u=a(o,l),af(e,t,u)}catch(V){fo(e,t,V)}}function af(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){nf(e,t,l)},function(l){return fo(e,t,l)}):nf(e,t,a)}function nf(e,t,a){t.status="fulfilled",t.value=a,lf(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,tf(e,a)))}function fo(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,lf(t),t=t.next;while(t!==l)}e.action=null}function lf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function sf(e,t){return t}function rf(e,t){if(at){var a=vt.formState;if(a!==null){e:{var l=Pe;if(at){if(St){t:{for(var o=St,u=Ja;o.nodeType!==8;){if(!u){o=null;break t}if(o=Fa(o.nextSibling),o===null){o=null;break t}}u=o.data,o=u==="F!"||u==="F"?o:null}if(o){St=Fa(o.nextSibling),l=o.data==="F!";break e}}Fn(l)}l=!1}l&&(t=a[0])}}return a=fa(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sf,lastRenderedState:t},a.queue=l,a=Tf.bind(null,Pe,l),l.dispatch=a,l=uo(!1),u=yo.bind(null,Pe,!1,l.queue),l=fa(),o={state:t,dispatch:null,action:e,pending:null},l.queue=o,a=mg.bind(null,Pe,o,u,a),o.dispatch=a,l.memoizedState=e,[t,a,!1]}function cf(e){var t=qt();return of(t,mt,e)}function of(e,t,a){if(t=co(e,t,sf)[0],e=bi(Rn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=ur(t)}catch(h){throw h===cs?oi:h}else l=t;t=qt();var o=t.queue,u=o.dispatch;return a!==t.memoizedState&&(Pe.flags|=2048,ms(9,{destroy:void 0},hg.bind(null,o,a),null)),[l,u,e]}function hg(e,t){e.action=t}function uf(e){var t=qt(),a=mt;if(a!==null)return of(t,a,e);qt(),t=t.memoizedState,a=qt();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function ms(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=Pe.updateQueue,t===null&&(t=vi(),Pe.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function df(){return qt().memoizedState}function _i(e,t,a,l){var o=fa();Pe.flags|=e,o.memoizedState=ms(1|t,{destroy:void 0},a,l===void 0?null:l)}function Ei(e,t,a,l){var o=qt();l=l===void 0?null:l;var u=o.memoizedState.inst;mt!==null&&l!==null&&ao(l,mt.memoizedState.deps)?o.memoizedState=ms(t,u,a,l):(Pe.flags|=e,o.memoizedState=ms(1|t,u,a,l))}function ff(e,t){_i(8390656,8,e,t)}function mo(e,t){Ei(2048,8,e,t)}function pg(e){Pe.flags|=4;var t=Pe.updateQueue;if(t===null)t=vi(),Pe.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function mf(e){var t=qt().memoizedState;return pg({ref:t,nextImpl:e}),function(){if((it&2)!==0)throw Error(c(440));return t.impl.apply(void 0,arguments)}}function hf(e,t){return Ei(4,2,e,t)}function pf(e,t){return Ei(4,4,e,t)}function gf(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vf(e,t,a){a=a!=null?a.concat([e]):null,Ei(4,4,gf.bind(null,t,e),a)}function ho(){}function yf(e,t){var a=qt();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&ao(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function bf(e,t){var a=qt();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&ao(t,l[1]))return l[0];if(l=e(),Bl){ot(!0);try{e()}finally{ot(!1)}}return a.memoizedState=[l,t],l}function po(e,t,a){return a===void 0||(On&1073741824)!==0&&(et&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=_m(),Pe.lanes|=e,il|=e,a)}function _f(e,t,a,l){return Oa(a,t)?a:us.current!==null?(e=po(e,a,l),Oa(e,t)||(Yt=!0),e):(On&42)===0||(On&1073741824)!==0&&(et&261930)===0?(Yt=!0,e.memoizedState=a):(e=_m(),Pe.lanes|=e,il|=e,t)}function Ef(e,t,a,l,o){var u=fe.p;fe.p=u!==0&&8>u?u:8;var h=K.T,b={};K.T=b,yo(e,!1,t,a);try{var T=o(),V=K.S;if(V!==null&&V(b,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var W=ug(T,l);dr(e,t,W,ja(e))}else dr(e,t,l,ja(e))}catch(ae){dr(e,t,{then:function(){},status:"rejected",reason:ae},ja())}finally{fe.p=u,h!==null&&b.types!==null&&(h.types=b.types),K.T=h}}function gg(){}function go(e,t,a,l){if(e.tag!==5)throw Error(c(476));var o=wf(e).queue;Ef(e,o,t,ge,a===null?gg:function(){return Sf(e),a(l)})}function wf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:ge},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Sf(e){var t=wf(e);t.next===null&&(t=e.alternate.memoizedState),dr(e,t.next.queue,{},ja())}function vo(){return ea(Ar)}function Nf(){return qt().memoizedState}function Cf(){return qt().memoizedState}function vg(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=ja();e=tl(a);var l=al(t,e,a);l!==null&&(Sa(l,t,a),rr(l,t,a)),t={cache:Kc()},e.payload=t;return}t=t.return}}function yg(e,t,a){var l=ja();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},wi(e)?kf(t,a):(a=Uc(e,t,a,l),a!==null&&(Sa(a,e,l),Af(a,t,l)))}function Tf(e,t,a){var l=ja();dr(e,t,a,l)}function dr(e,t,a,l){var o={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(wi(e))kf(t,o);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var h=t.lastRenderedState,b=u(h,a);if(o.hasEagerState=!0,o.eagerState=b,Oa(b,h))return ai(e,t,o,0),vt===null&&ti(),!1}catch{}if(a=Uc(e,t,o,l),a!==null)return Sa(a,e,l),Af(a,t,l),!0}return!1}function yo(e,t,a,l){if(l={lane:2,revertLane:Jo(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},wi(e)){if(t)throw Error(c(479))}else t=Uc(e,a,l,2),t!==null&&Sa(t,e,2)}function wi(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function kf(e,t){ds=pi=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Af(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,ga(e,a)}}var fr={readContext:ea,use:yi,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt};fr.useEffectEvent=Mt;var Of={readContext:ea,use:yi,useCallback:function(e,t){return fa().memoizedState=[e,t===void 0?null:t],e},useContext:ea,useEffect:ff,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,_i(4194308,4,gf.bind(null,t,e),a)},useLayoutEffect:function(e,t){return _i(4194308,4,e,t)},useInsertionEffect:function(e,t){_i(4,2,e,t)},useMemo:function(e,t){var a=fa();t=t===void 0?null:t;var l=e();if(Bl){ot(!0);try{e()}finally{ot(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=fa();if(a!==void 0){var o=a(t);if(Bl){ot(!0);try{a(t)}finally{ot(!1)}}}else o=t;return l.memoizedState=l.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},l.queue=e,e=e.dispatch=yg.bind(null,Pe,e),[l.memoizedState,e]},useRef:function(e){var t=fa();return e={current:e},t.memoizedState=e},useState:function(e){e=uo(e);var t=e.queue,a=Tf.bind(null,Pe,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:ho,useDeferredValue:function(e,t){var a=fa();return po(a,e,t)},useTransition:function(){var e=uo(!1);return e=Ef.bind(null,Pe,e.queue,!0,!1),fa().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=Pe,o=fa();if(at){if(a===void 0)throw Error(c(407));a=a()}else{if(a=t(),vt===null)throw Error(c(349));(et&127)!==0||Xd(l,t,a)}o.memoizedState=a;var u={value:a,getSnapshot:t};return o.queue=u,ff(Zd.bind(null,l,u,e),[e]),l.flags|=2048,ms(9,{destroy:void 0},Jd.bind(null,l,u,a,t),null),a},useId:function(){var e=fa(),t=vt.identifierPrefix;if(at){var a=yn,l=vn;a=(l&~(1<<32-Be(l)-1)).toString(32)+a,t="_"+t+"R_"+a,a=gi++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=dg++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:vo,useFormState:rf,useActionState:rf,useOptimistic:function(e){var t=fa();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=yo.bind(null,Pe,!0,a),a.dispatch=t,[e,t]},useMemoCache:io,useCacheRefresh:function(){return fa().memoizedState=vg.bind(null,Pe)},useEffectEvent:function(e){var t=fa(),a={impl:e};return t.memoizedState=a,function(){if((it&2)!==0)throw Error(c(440));return a.impl.apply(void 0,arguments)}}},bo={readContext:ea,use:yi,useCallback:yf,useContext:ea,useEffect:mo,useImperativeHandle:vf,useInsertionEffect:hf,useLayoutEffect:pf,useMemo:bf,useReducer:bi,useRef:df,useState:function(){return bi(Rn)},useDebugValue:ho,useDeferredValue:function(e,t){var a=qt();return _f(a,mt.memoizedState,e,t)},useTransition:function(){var e=bi(Rn)[0],t=qt().memoizedState;return[typeof e=="boolean"?e:ur(e),t]},useSyncExternalStore:Qd,useId:Nf,useHostTransitionStatus:vo,useFormState:cf,useActionState:cf,useOptimistic:function(e,t){var a=qt();return ef(a,mt,e,t)},useMemoCache:io,useCacheRefresh:Cf};bo.useEffectEvent=mf;var Rf={readContext:ea,use:yi,useCallback:yf,useContext:ea,useEffect:mo,useImperativeHandle:vf,useInsertionEffect:hf,useLayoutEffect:pf,useMemo:bf,useReducer:oo,useRef:df,useState:function(){return oo(Rn)},useDebugValue:ho,useDeferredValue:function(e,t){var a=qt();return mt===null?po(a,e,t):_f(a,mt.memoizedState,e,t)},useTransition:function(){var e=oo(Rn)[0],t=qt().memoizedState;return[typeof e=="boolean"?e:ur(e),t]},useSyncExternalStore:Qd,useId:Nf,useHostTransitionStatus:vo,useFormState:uf,useActionState:uf,useOptimistic:function(e,t){var a=qt();return mt!==null?ef(a,mt,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:io,useCacheRefresh:Cf};Rf.useEffectEvent=mf;function _o(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:w({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Eo={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=ja(),o=tl(l);o.payload=t,a!=null&&(o.callback=a),t=al(e,o,l),t!==null&&(Sa(t,e,l),rr(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=ja(),o=tl(l);o.tag=1,o.payload=t,a!=null&&(o.callback=a),t=al(e,o,l),t!==null&&(Sa(t,e,l),rr(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=ja(),l=tl(a);l.tag=2,t!=null&&(l.callback=t),t=al(e,l,a),t!==null&&(Sa(t,e,a),rr(t,e,a))}};function Df(e,t,a,l,o,u,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,u,h):t.prototype&&t.prototype.isPureReactComponent?!Fs(a,l)||!Fs(o,u):!0}function xf(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&Eo.enqueueReplaceState(t,t.state,null)}function zl(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=w({},a));for(var o in e)a[o]===void 0&&(a[o]=e[o])}return a}function Mf(e){ei(e)}function Uf(e){console.error(e)}function jf(e){ei(e)}function Si(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Bf(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function wo(e,t,a){return a=tl(a),a.tag=3,a.payload={element:null},a.callback=function(){Si(e,t)},a}function zf(e){return e=tl(e),e.tag=3,e}function qf(e,t,a,l){var o=a.type.getDerivedStateFromError;if(typeof o=="function"){var u=l.value;e.payload=function(){return o(u)},e.callback=function(){Bf(t,a,l)}}var h=a.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){Bf(t,a,l),typeof o!="function"&&(cl===null?cl=new Set([this]):cl.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function bg(e,t,a,l,o){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&ss(t,a,o,!0),a=Da.current,a!==null){switch(a.tag){case 31:case 13:return Za===null?ji():a.alternate===null&&Ut===0&&(Ut=3),a.flags&=-257,a.flags|=65536,a.lanes=o,l===ui?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),Po(e,l,o)),!1;case 22:return a.flags|=65536,l===ui?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),Po(e,l,o)),!1}throw Error(c(435,a.tag))}return Po(e,l,o),ji(),!1}if(at)return t=Da.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,l!==Lc&&(e=Error(c(422),{cause:l}),tr(Pa(e,a)))):(l!==Lc&&(t=Error(c(423),{cause:l}),tr(Pa(t,a))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,l=Pa(l,a),o=wo(e.stateNode,l,o),Zc(e,o),Ut!==4&&(Ut=2)),!1;var u=Error(c(520),{cause:l});if(u=Pa(u,a),_r===null?_r=[u]:_r.push(u),Ut!==4&&(Ut=2),t===null)return!0;l=Pa(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=o&-o,a.lanes|=e,e=wo(a.stateNode,l,e),Zc(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(cl===null||!cl.has(u))))return a.flags|=65536,o&=-o,a.lanes|=o,o=zf(o),qf(o,e,a,l),Zc(a,o),!1}a=a.return}while(a!==null);return!1}var So=Error(c(461)),Yt=!1;function ta(e,t,a,l){t.child=e===null?Hd(t,null,a,l):jl(t,e.child,a,l)}function $f(e,t,a,l,o){a=a.render;var u=t.ref;if("ref"in l){var h={};for(var b in l)b!=="ref"&&(h[b]=l[b])}else h=l;return Dl(t),l=no(e,t,a,h,u,o),b=lo(),e!==null&&!Yt?(so(e,t,o),Dn(e,t,o)):(at&&b&&qc(t),t.flags|=1,ta(e,t,l,o),t.child)}function Lf(e,t,a,l,o){if(e===null){var u=a.type;return typeof u=="function"&&!jc(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,Hf(e,t,u,l,o)):(e=li(a.type,null,l,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Do(e,o)){var h=u.memoizedProps;if(a=a.compare,a=a!==null?a:Fs,a(h,l)&&e.ref===t.ref)return Dn(e,t,o)}return t.flags|=1,e=Cn(u,l),e.ref=t.ref,e.return=t,t.child=e}function Hf(e,t,a,l,o){if(e!==null){var u=e.memoizedProps;if(Fs(u,l)&&e.ref===t.ref)if(Yt=!1,t.pendingProps=l=u,Do(e,o))(e.flags&131072)!==0&&(Yt=!0);else return t.lanes=e.lanes,Dn(e,t,o)}return No(e,t,a,l,o)}function Gf(e,t,a,l){var o=l.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|a:a,e!==null){for(l=t.child=e.child,o=0;l!==null;)o=o|l.lanes|l.childLanes,l=l.sibling;l=o&~u}else l=0,t.child=null;return Vf(e,t,u,a,l)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ci(t,u!==null?u.cachePool:null),u!==null?Yd(t,u):Wc(),Kd(t);else return l=t.lanes=536870912,Vf(e,t,u!==null?u.baseLanes|a:a,a,l)}else u!==null?(ci(t,u.cachePool),Yd(t,u),ll(),t.memoizedState=null):(e!==null&&ci(t,null),Wc(),ll());return ta(e,t,o,a),t.child}function mr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Vf(e,t,a,l,o){var u=Pc();return u=u===null?null:{parent:Gt._currentValue,pool:u},t.memoizedState={baseLanes:a,cachePool:u},e!==null&&ci(t,null),Wc(),Kd(t),e!==null&&ss(e,t,l,!0),t.childLanes=o,null}function Ni(e,t){return t=Ti({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Yf(e,t,a){return jl(t,e.child,null,a),e=Ni(t,t.pendingProps),e.flags|=2,xa(t),t.memoizedState=null,e}function _g(e,t,a){var l=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(at){if(l.mode==="hidden")return e=Ni(t,l),t.lanes=536870912,mr(null,e);if(to(t),(e=St)?(e=ah(e,Ja),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Jn!==null?{id:vn,overflow:yn}:null,retryLane:536870912,hydrationErrors:null},a=Td(e),a.return=t,t.child=a,Wt=t,St=null)):e=null,e===null)throw Fn(t);return t.lanes=536870912,null}return Ni(t,l)}var u=e.memoizedState;if(u!==null){var h=u.dehydrated;if(to(t),o)if(t.flags&256)t.flags&=-257,t=Yf(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(c(558));else if(Yt||ss(e,t,a,!1),o=(a&e.childLanes)!==0,Yt||o){if(l=vt,l!==null&&(h=Yn(l,a),h!==0&&h!==u.retryLane))throw u.retryLane=h,kl(e,h),Sa(l,e,h),So;ji(),t=Yf(e,t,a)}else e=u.treeContext,St=Fa(h.nextSibling),Wt=t,at=!0,Zn=null,Ja=!1,e!==null&&Od(t,e),t=Ni(t,l),t.flags|=4096;return t}return e=Cn(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ci(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(c(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function No(e,t,a,l,o){return Dl(t),a=no(e,t,a,l,void 0,o),l=lo(),e!==null&&!Yt?(so(e,t,o),Dn(e,t,o)):(at&&l&&qc(t),t.flags|=1,ta(e,t,a,o),t.child)}function Kf(e,t,a,l,o,u){return Dl(t),t.updateQueue=null,a=Pd(t,l,a,o),Id(e),l=lo(),e!==null&&!Yt?(so(e,t,u),Dn(e,t,u)):(at&&l&&qc(t),t.flags|=1,ta(e,t,a,u),t.child)}function If(e,t,a,l,o){if(Dl(t),t.stateNode===null){var u=ts,h=a.contextType;typeof h=="object"&&h!==null&&(u=ea(h)),u=new a(l,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Eo,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=l,u.state=t.memoizedState,u.refs={},Xc(t),h=a.contextType,u.context=typeof h=="object"&&h!==null?ea(h):ts,u.state=t.memoizedState,h=a.getDerivedStateFromProps,typeof h=="function"&&(_o(t,a,h,l),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(h=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),h!==u.state&&Eo.enqueueReplaceState(u,u.state,null),cr(t,l,u,o),ir(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){u=t.stateNode;var b=t.memoizedProps,T=zl(a,b);u.props=T;var V=u.context,W=a.contextType;h=ts,typeof W=="object"&&W!==null&&(h=ea(W));var ae=a.getDerivedStateFromProps;W=typeof ae=="function"||typeof u.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,W||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(b||V!==h)&&xf(t,u,l,h),el=!1;var I=t.memoizedState;u.state=I,cr(t,l,u,o),ir(),V=t.memoizedState,b||I!==V||el?(typeof ae=="function"&&(_o(t,a,ae,l),V=t.memoizedState),(T=el||Df(t,a,T,l,I,V,h))?(W||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=V),u.props=l,u.state=V,u.context=h,l=T):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{u=t.stateNode,Jc(e,t),h=t.memoizedProps,W=zl(a,h),u.props=W,ae=t.pendingProps,I=u.context,V=a.contextType,T=ts,typeof V=="object"&&V!==null&&(T=ea(V)),b=a.getDerivedStateFromProps,(V=typeof b=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==ae||I!==T)&&xf(t,u,l,T),el=!1,I=t.memoizedState,u.state=I,cr(t,l,u,o),ir();var J=t.memoizedState;h!==ae||I!==J||el||e!==null&&e.dependencies!==null&&ri(e.dependencies)?(typeof b=="function"&&(_o(t,a,b,l),J=t.memoizedState),(W=el||Df(t,a,W,l,I,J,T)||e!==null&&e.dependencies!==null&&ri(e.dependencies))?(V||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(l,J,T),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(l,J,T)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=J),u.props=l,u.state=J,u.context=T,l=W):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),l=!1)}return u=l,Ci(e,t),l=(t.flags&128)!==0,u||l?(u=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&l?(t.child=jl(t,e.child,null,o),t.child=jl(t,null,a,o)):ta(e,t,a,o),t.memoizedState=u.state,e=t.child):e=Dn(e,t,o),e}function Pf(e,t,a,l){return Ol(),t.flags|=256,ta(e,t,a,l),t.child}var Co={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function To(e){return{baseLanes:e,cachePool:jd()}}function ko(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Ua),e}function Qf(e,t,a){var l=t.pendingProps,o=!1,u=(t.flags&128)!==0,h;if((h=u)||(h=e!==null&&e.memoizedState===null?!1:(zt.current&2)!==0),h&&(o=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(at){if(o?nl(t):ll(),(e=St)?(e=ah(e,Ja),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Jn!==null?{id:vn,overflow:yn}:null,retryLane:536870912,hydrationErrors:null},a=Td(e),a.return=t,t.child=a,Wt=t,St=null)):e=null,e===null)throw Fn(t);return ou(e)?t.lanes=32:t.lanes=536870912,null}var b=l.children;return l=l.fallback,o?(ll(),o=t.mode,b=Ti({mode:"hidden",children:b},o),l=Al(l,o,a,null),b.return=t,l.return=t,b.sibling=l,t.child=b,l=t.child,l.memoizedState=To(a),l.childLanes=ko(e,h,a),t.memoizedState=Co,mr(null,l)):(nl(t),Ao(t,b))}var T=e.memoizedState;if(T!==null&&(b=T.dehydrated,b!==null)){if(u)t.flags&256?(nl(t),t.flags&=-257,t=Oo(e,t,a)):t.memoizedState!==null?(ll(),t.child=e.child,t.flags|=128,t=null):(ll(),b=l.fallback,o=t.mode,l=Ti({mode:"visible",children:l.children},o),b=Al(b,o,a,null),b.flags|=2,l.return=t,b.return=t,l.sibling=b,t.child=l,jl(t,e.child,null,a),l=t.child,l.memoizedState=To(a),l.childLanes=ko(e,h,a),t.memoizedState=Co,t=mr(null,l));else if(nl(t),ou(b)){if(h=b.nextSibling&&b.nextSibling.dataset,h)var V=h.dgst;h=V,l=Error(c(419)),l.stack="",l.digest=h,tr({value:l,source:null,stack:null}),t=Oo(e,t,a)}else if(Yt||ss(e,t,a,!1),h=(a&e.childLanes)!==0,Yt||h){if(h=vt,h!==null&&(l=Yn(h,a),l!==0&&l!==T.retryLane))throw T.retryLane=l,kl(e,l),Sa(h,e,l),So;cu(b)||ji(),t=Oo(e,t,a)}else cu(b)?(t.flags|=192,t.child=e.child,t=null):(e=T.treeContext,St=Fa(b.nextSibling),Wt=t,at=!0,Zn=null,Ja=!1,e!==null&&Od(t,e),t=Ao(t,l.children),t.flags|=4096);return t}return o?(ll(),b=l.fallback,o=t.mode,T=e.child,V=T.sibling,l=Cn(T,{mode:"hidden",children:l.children}),l.subtreeFlags=T.subtreeFlags&65011712,V!==null?b=Cn(V,b):(b=Al(b,o,a,null),b.flags|=2),b.return=t,l.return=t,l.sibling=b,t.child=l,mr(null,l),l=t.child,b=e.child.memoizedState,b===null?b=To(a):(o=b.cachePool,o!==null?(T=Gt._currentValue,o=o.parent!==T?{parent:T,pool:T}:o):o=jd(),b={baseLanes:b.baseLanes|a,cachePool:o}),l.memoizedState=b,l.childLanes=ko(e,h,a),t.memoizedState=Co,mr(e.child,l)):(nl(t),a=e.child,e=a.sibling,a=Cn(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=a,t.memoizedState=null,a)}function Ao(e,t){return t=Ti({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ti(e,t){return e=Ra(22,e,null,t),e.lanes=0,e}function Oo(e,t,a){return jl(t,e.child,null,a),e=Ao(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xf(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Vc(e.return,t,a)}function Ro(e,t,a,l,o,u){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:o,treeForkCount:u}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=a,h.tailMode=o,h.treeForkCount=u)}function Jf(e,t,a){var l=t.pendingProps,o=l.revealOrder,u=l.tail;l=l.children;var h=zt.current,b=(h&2)!==0;if(b?(h=h&1|2,t.flags|=128):h&=1,ie(zt,h),ta(e,t,l,a),l=at?er:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xf(e,a,t);else if(e.tag===19)Xf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(a=t.child,o=null;a!==null;)e=a.alternate,e!==null&&hi(e)===null&&(o=a),a=a.sibling;a=o,a===null?(o=t.child,t.child=null):(o=a.sibling,a.sibling=null),Ro(t,!1,o,a,u,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&hi(e)===null){t.child=o;break}e=o.sibling,o.sibling=a,a=o,o=e}Ro(t,!0,a,null,u,l);break;case"together":Ro(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Dn(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),il|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(ss(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,a=Cn(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Cn(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Do(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ri(e)))}function Eg(e,t,a){switch(t.tag){case 3:yt(t,t.stateNode.containerInfo),Wn(t,Gt,e.memoizedState.cache),Ol();break;case 27:case 5:Pt(t);break;case 4:yt(t,t.stateNode.containerInfo);break;case 10:Wn(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,to(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(nl(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Qf(e,t,a):(nl(t),e=Dn(e,t,a),e!==null?e.sibling:null);nl(t);break;case 19:var o=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(ss(e,t,a,!1),l=(a&t.childLanes)!==0),o){if(l)return Jf(e,t,a);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ie(zt,zt.current),l)break;return null;case 22:return t.lanes=0,Gf(e,t,a,t.pendingProps);case 24:Wn(t,Gt,e.memoizedState.cache)}return Dn(e,t,a)}function Zf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Yt=!0;else{if(!Do(e,a)&&(t.flags&128)===0)return Yt=!1,Eg(e,t,a);Yt=(e.flags&131072)!==0}else Yt=!1,at&&(t.flags&1048576)!==0&&Ad(t,er,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=Ml(t.elementType),t.type=e,typeof e=="function")jc(e)?(l=zl(e,l),t.tag=1,t=If(null,t,e,l,a)):(t.tag=0,t=No(null,t,e,l,a));else{if(e!=null){var o=e.$$typeof;if(o===ve){t.tag=11,t=$f(null,t,e,l,a);break e}else if(o===ce){t.tag=14,t=Lf(null,t,e,l,a);break e}}throw t=Xe(e)||e,Error(c(306,t,""))}}return t;case 0:return No(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,o=zl(l,t.pendingProps),If(e,t,l,o,a);case 3:e:{if(yt(t,t.stateNode.containerInfo),e===null)throw Error(c(387));l=t.pendingProps;var u=t.memoizedState;o=u.element,Jc(e,t),cr(t,l,null,a);var h=t.memoizedState;if(l=h.cache,Wn(t,Gt,l),l!==u.cache&&Yc(t,[Gt],a,!0),ir(),l=h.element,u.isDehydrated)if(u={element:l,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Pf(e,t,l,a);break e}else if(l!==o){o=Pa(Error(c(424)),t),tr(o),t=Pf(e,t,l,a);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,St=Fa(e.firstChild),Wt=t,at=!0,Zn=null,Ja=!0,a=Hd(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ol(),l===o){t=Dn(e,t,a);break e}ta(e,t,l,a)}t=t.child}return t;case 26:return Ci(e,t),e===null?(a=ch(t.type,null,t.pendingProps,null))?t.memoizedState=a:at||(a=t.type,e=t.pendingProps,l=Gi(je.current).createElement(a),l[Bt]=t,l[ia]=e,aa(l,a,e),Ht(l),t.stateNode=l):t.memoizedState=ch(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Pt(t),e===null&&at&&(l=t.stateNode=sh(t.type,t.pendingProps,je.current),Wt=t,Ja=!0,o=St,fl(t.type)?(uu=o,St=Fa(l.firstChild)):St=o),ta(e,t,t.pendingProps.children,a),Ci(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&at&&((o=l=St)&&(l=Zg(l,t.type,t.pendingProps,Ja),l!==null?(t.stateNode=l,Wt=t,St=Fa(l.firstChild),Ja=!1,o=!0):o=!1),o||Fn(t)),Pt(t),o=t.type,u=t.pendingProps,h=e!==null?e.memoizedProps:null,l=u.children,su(o,u)?l=null:h!==null&&su(o,h)&&(t.flags|=32),t.memoizedState!==null&&(o=no(e,t,fg,null,null,a),Ar._currentValue=o),Ci(e,t),ta(e,t,l,a),t.child;case 6:return e===null&&at&&((e=a=St)&&(a=Fg(a,t.pendingProps,Ja),a!==null?(t.stateNode=a,Wt=t,St=null,e=!0):e=!1),e||Fn(t)),null;case 13:return Qf(e,t,a);case 4:return yt(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=jl(t,null,l,a):ta(e,t,l,a),t.child;case 11:return $f(e,t,t.type,t.pendingProps,a);case 7:return ta(e,t,t.pendingProps,a),t.child;case 8:return ta(e,t,t.pendingProps.children,a),t.child;case 12:return ta(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,Wn(t,t.type,l.value),ta(e,t,l.children,a),t.child;case 9:return o=t.type._context,l=t.pendingProps.children,Dl(t),o=ea(o),l=l(o),t.flags|=1,ta(e,t,l,a),t.child;case 14:return Lf(e,t,t.type,t.pendingProps,a);case 15:return Hf(e,t,t.type,t.pendingProps,a);case 19:return Jf(e,t,a);case 31:return _g(e,t,a);case 22:return Gf(e,t,a,t.pendingProps);case 24:return Dl(t),l=ea(Gt),e===null?(o=Pc(),o===null&&(o=vt,u=Kc(),o.pooledCache=u,u.refCount++,u!==null&&(o.pooledCacheLanes|=a),o=u),t.memoizedState={parent:l,cache:o},Xc(t),Wn(t,Gt,o)):((e.lanes&a)!==0&&(Jc(e,t),cr(t,null,null,a),ir()),o=e.memoizedState,u=t.memoizedState,o.parent!==l?(o={parent:l,cache:l},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Wn(t,Gt,l)):(l=u.cache,Wn(t,Gt,l),l!==o.cache&&Yc(t,[Gt],a,!0))),ta(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function xn(e){e.flags|=4}function xo(e,t,a,l,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(Nm())e.flags|=8192;else throw Ul=ui,Qc}else e.flags&=-16777217}function Ff(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!mh(t))if(Nm())e.flags|=8192;else throw Ul=ui,Qc}function ki(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ut():536870912,e.lanes|=t,vs|=t)}function hr(e,t){if(!at)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var o=e.child;o!==null;)a|=o.lanes|o.childLanes,l|=o.subtreeFlags&65011712,l|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)a|=o.lanes|o.childLanes,l|=o.subtreeFlags,l|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function wg(e,t,a){var l=t.pendingProps;switch($c(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(t),null;case 1:return Nt(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),An(Gt),Re(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ls(t)?xn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Hc())),Nt(t),null;case 26:var o=t.type,u=t.memoizedState;return e===null?(xn(t),u!==null?(Nt(t),Ff(t,u)):(Nt(t),xo(t,o,null,l,a))):u?u!==e.memoizedState?(xn(t),Nt(t),Ff(t,u)):(Nt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&xn(t),Nt(t),xo(t,o,e,l,a)),null;case 27:if(ma(t),a=je.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&xn(t);else{if(!l){if(t.stateNode===null)throw Error(c(166));return Nt(t),null}e=pe.current,ls(t)?Rd(t):(e=sh(o,l,a),t.stateNode=e,xn(t))}return Nt(t),null;case 5:if(ma(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&xn(t);else{if(!l){if(t.stateNode===null)throw Error(c(166));return Nt(t),null}if(u=pe.current,ls(t))Rd(t);else{var h=Gi(je.current);switch(u){case 1:u=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:u=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":u=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":u=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":u=h.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?u.multiple=!0:l.size&&(u.size=l.size);break;default:u=typeof l.is=="string"?h.createElement(o,{is:l.is}):h.createElement(o)}}u[Bt]=t,u[ia]=l;e:for(h=t.child;h!==null;){if(h.tag===5||h.tag===6)u.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}t.stateNode=u;e:switch(aa(u,o,l),o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&xn(t)}}return Nt(t),xo(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&xn(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(c(166));if(e=je.current,ls(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,o=Wt,o!==null)switch(o.tag){case 27:case 5:l=o.memoizedProps}e[Bt]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Qm(e.nodeValue,a)),e||Fn(t,!0)}else e=Gi(e).createTextNode(l),e[Bt]=t,t.stateNode=e}return Nt(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(l=ls(t),a!==null){if(e===null){if(!l)throw Error(c(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[Bt]=t}else Ol(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Nt(t),e=!1}else a=Hc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(xa(t),t):(xa(t),null);if((t.flags&128)!==0)throw Error(c(558))}return Nt(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=ls(t),l!==null&&l.dehydrated!==null){if(e===null){if(!o)throw Error(c(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(c(317));o[Bt]=t}else Ol(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Nt(t),o=!1}else o=Hc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(xa(t),t):(xa(t),null)}return xa(t),(t.flags&128)!==0?(t.lanes=a,t):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=t.child,o=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(o=l.alternate.memoizedState.cachePool.pool),u=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(u=l.memoizedState.cachePool.pool),u!==o&&(l.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),ki(t,t.updateQueue),Nt(t),null);case 4:return Re(),e===null&&eu(t.stateNode.containerInfo),Nt(t),null;case 10:return An(t.type),Nt(t),null;case 19:if(F(zt),l=t.memoizedState,l===null)return Nt(t),null;if(o=(t.flags&128)!==0,u=l.rendering,u===null)if(o)hr(l,!1);else{if(Ut!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=hi(e),u!==null){for(t.flags|=128,hr(l,!1),e=u.updateQueue,t.updateQueue=e,ki(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Cd(a,e),a=a.sibling;return ie(zt,zt.current&1|2),at&&Tn(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&$t()>xi&&(t.flags|=128,o=!0,hr(l,!1),t.lanes=4194304)}else{if(!o)if(e=hi(u),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,ki(t,e),hr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!u.alternate&&!at)return Nt(t),null}else 2*$t()-l.renderingStartTime>xi&&a!==536870912&&(t.flags|=128,o=!0,hr(l,!1),t.lanes=4194304);l.isBackwards?(u.sibling=t.child,t.child=u):(e=l.last,e!==null?e.sibling=u:t.child=u,l.last=u)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=$t(),e.sibling=null,a=zt.current,ie(zt,o?a&1|2:a&1),at&&Tn(t,l.treeForkCount),e):(Nt(t),null);case 22:case 23:return xa(t),eo(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(Nt(t),t.subtreeFlags&6&&(t.flags|=8192)):Nt(t),a=t.updateQueue,a!==null&&ki(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&F(xl),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),An(Gt),Nt(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function Sg(e,t){switch($c(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return An(Gt),Re(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ma(t),null;case 31:if(t.memoizedState!==null){if(xa(t),t.alternate===null)throw Error(c(340));Ol()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(xa(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));Ol()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return F(zt),null;case 4:return Re(),null;case 10:return An(t.type),null;case 22:case 23:return xa(t),eo(),e!==null&&F(xl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return An(Gt),null;case 25:return null;default:return null}}function Wf(e,t){switch($c(t),t.tag){case 3:An(Gt),Re();break;case 26:case 27:case 5:ma(t);break;case 4:Re();break;case 31:t.memoizedState!==null&&xa(t);break;case 13:xa(t);break;case 19:F(zt);break;case 10:An(t.type);break;case 22:case 23:xa(t),eo(),e!==null&&F(xl);break;case 24:An(Gt)}}function pr(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var o=l.next;a=o;do{if((a.tag&e)===e){l=void 0;var u=a.create,h=a.inst;l=u(),h.destroy=l}a=a.next}while(a!==o)}}catch(b){ft(t,t.return,b)}}function sl(e,t,a){try{var l=t.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var u=o.next;l=u;do{if((l.tag&e)===e){var h=l.inst,b=h.destroy;if(b!==void 0){h.destroy=void 0,o=t;var T=a,V=b;try{V()}catch(W){ft(o,T,W)}}}l=l.next}while(l!==u)}}catch(W){ft(t,t.return,W)}}function em(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Vd(t,a)}catch(l){ft(e,e.return,l)}}}function tm(e,t,a){a.props=zl(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){ft(e,t,l)}}function gr(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(o){ft(e,t,o)}}function bn(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(o){ft(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(o){ft(e,t,o)}else a.current=null}function am(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(o){ft(e,e.return,o)}}function Mo(e,t,a){try{var l=e.stateNode;Kg(l,e.type,a,t),l[ia]=t}catch(o){ft(e,e.return,o)}}function nm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&fl(e.type)||e.tag===4}function Uo(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&fl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jo(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=sn));else if(l!==4&&(l===27&&fl(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(jo(e,t,a),e=e.sibling;e!==null;)jo(e,t,a),e=e.sibling}function Ai(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&fl(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ai(e,t,a),e=e.sibling;e!==null;)Ai(e,t,a),e=e.sibling}function lm(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);aa(t,l,a),t[Bt]=e,t[ia]=a}catch(u){ft(e,e.return,u)}}var Mn=!1,Kt=!1,Bo=!1,sm=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function Ng(e,t){if(e=e.containerInfo,nu=Xi,e=gd(e),Ac(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var o=l.anchorOffset,u=l.focusNode;l=l.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var h=0,b=-1,T=-1,V=0,W=0,ae=e,I=null;t:for(;;){for(var J;ae!==a||o!==0&&ae.nodeType!==3||(b=h+o),ae!==u||l!==0&&ae.nodeType!==3||(T=h+l),ae.nodeType===3&&(h+=ae.nodeValue.length),(J=ae.firstChild)!==null;)I=ae,ae=J;for(;;){if(ae===e)break t;if(I===a&&++V===o&&(b=h),I===u&&++W===l&&(T=h),(J=ae.nextSibling)!==null)break;ae=I,I=ae.parentNode}ae=J}a=b===-1||T===-1?null:{start:b,end:T}}else a=null}a=a||{start:0,end:0}}else a=null;for(lu={focusedElem:e,selectionRange:a},Xi=!1,Jt=t;Jt!==null;)if(t=Jt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Jt=e;else for(;Jt!==null;){switch(t=Jt,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)o=e[a],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,o=u.memoizedProps,u=u.memoizedState,l=a.stateNode;try{var _e=zl(a.type,o);e=l.getSnapshotBeforeUpdate(_e,u),l.__reactInternalSnapshotBeforeUpdate=e}catch(De){ft(a,a.return,De)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)iu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":iu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,Jt=e;break}Jt=t.return}}function rm(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:jn(e,a),l&4&&pr(5,a);break;case 1:if(jn(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(h){ft(a,a.return,h)}else{var o=zl(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){ft(a,a.return,h)}}l&64&&em(a),l&512&&gr(a,a.return);break;case 3:if(jn(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Vd(e,t)}catch(h){ft(a,a.return,h)}}break;case 27:t===null&&l&4&&lm(a);case 26:case 5:jn(e,a),t===null&&l&4&&am(a),l&512&&gr(a,a.return);break;case 12:jn(e,a);break;case 31:jn(e,a),l&4&&om(e,a);break;case 13:jn(e,a),l&4&&um(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Mg.bind(null,a),Wg(e,a))));break;case 22:if(l=a.memoizedState!==null||Mn,!l){t=t!==null&&t.memoizedState!==null||Kt,o=Mn;var u=Kt;Mn=l,(Kt=t)&&!u?Bn(e,a,(a.subtreeFlags&8772)!==0):jn(e,a),Mn=o,Kt=u}break;case 30:break;default:jn(e,a)}}function im(e){var t=e.alternate;t!==null&&(e.alternate=null,im(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&$s(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Tt=null,ba=!1;function Un(e,t,a){for(a=a.child;a!==null;)cm(e,t,a),a=a.sibling}function cm(e,t,a){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Ct,a)}catch{}switch(a.tag){case 26:Kt||bn(a,t),Un(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Kt||bn(a,t);var l=Tt,o=ba;fl(a.type)&&(Tt=a.stateNode,ba=!1),Un(e,t,a),Cr(a.stateNode),Tt=l,ba=o;break;case 5:Kt||bn(a,t);case 6:if(l=Tt,o=ba,Tt=null,Un(e,t,a),Tt=l,ba=o,Tt!==null)if(ba)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(a.stateNode)}catch(u){ft(a,t,u)}else try{Tt.removeChild(a.stateNode)}catch(u){ft(a,t,u)}break;case 18:Tt!==null&&(ba?(e=Tt,eh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Cs(e)):eh(Tt,a.stateNode));break;case 4:l=Tt,o=ba,Tt=a.stateNode.containerInfo,ba=!0,Un(e,t,a),Tt=l,ba=o;break;case 0:case 11:case 14:case 15:sl(2,a,t),Kt||sl(4,a,t),Un(e,t,a);break;case 1:Kt||(bn(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&tm(a,t,l)),Un(e,t,a);break;case 21:Un(e,t,a);break;case 22:Kt=(l=Kt)||a.memoizedState!==null,Un(e,t,a),Kt=l;break;default:Un(e,t,a)}}function om(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Cs(e)}catch(a){ft(t,t.return,a)}}}function um(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Cs(e)}catch(a){ft(t,t.return,a)}}function Cg(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new sm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new sm),t;default:throw Error(c(435,e.tag))}}function Oi(e,t){var a=Cg(e);t.forEach(function(l){if(!a.has(l)){a.add(l);var o=Ug.bind(null,e,l);l.then(o,o)}})}function _a(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var o=a[l],u=e,h=t,b=h;e:for(;b!==null;){switch(b.tag){case 27:if(fl(b.type)){Tt=b.stateNode,ba=!1;break e}break;case 5:Tt=b.stateNode,ba=!1;break e;case 3:case 4:Tt=b.stateNode.containerInfo,ba=!0;break e}b=b.return}if(Tt===null)throw Error(c(160));cm(u,h,o),Tt=null,ba=!1,u=o.alternate,u!==null&&(u.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)dm(t,e),t=t.sibling}var cn=null;function dm(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_a(t,e),Ea(e),l&4&&(sl(3,e,e.return),pr(3,e),sl(5,e,e.return));break;case 1:_a(t,e),Ea(e),l&512&&(Kt||a===null||bn(a,a.return)),l&64&&Mn&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var o=cn;if(_a(t,e),Ea(e),l&512&&(Kt||a===null||bn(a,a.return)),l&4){var u=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,o=o.ownerDocument||o;t:switch(l){case"title":u=o.getElementsByTagName("title")[0],(!u||u[wl]||u[Bt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=o.createElement(l),o.head.insertBefore(u,o.querySelector("head > title"))),aa(u,l,a),u[Bt]=e,Ht(u),l=u;break e;case"link":var h=dh("link","href",o).get(l+(a.href||""));if(h){for(var b=0;b<h.length;b++)if(u=h[b],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){h.splice(b,1);break t}}u=o.createElement(l),aa(u,l,a),o.head.appendChild(u);break;case"meta":if(h=dh("meta","content",o).get(l+(a.content||""))){for(b=0;b<h.length;b++)if(u=h[b],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){h.splice(b,1);break t}}u=o.createElement(l),aa(u,l,a),o.head.appendChild(u);break;default:throw Error(c(468,l))}u[Bt]=e,Ht(u),l=u}e.stateNode=l}else fh(o,e.type,e.stateNode);else e.stateNode=uh(o,l,e.memoizedProps);else u!==l?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,l===null?fh(o,e.type,e.stateNode):uh(o,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Mo(e,e.memoizedProps,a.memoizedProps)}break;case 27:_a(t,e),Ea(e),l&512&&(Kt||a===null||bn(a,a.return)),a!==null&&l&4&&Mo(e,e.memoizedProps,a.memoizedProps);break;case 5:if(_a(t,e),Ea(e),l&512&&(Kt||a===null||bn(a,a.return)),e.flags&32){o=e.stateNode;try{Qn(o,"")}catch(_e){ft(e,e.return,_e)}}l&4&&e.stateNode!=null&&(o=e.memoizedProps,Mo(e,o,a!==null?a.memoizedProps:o)),l&1024&&(Bo=!0);break;case 6:if(_a(t,e),Ea(e),l&4){if(e.stateNode===null)throw Error(c(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(_e){ft(e,e.return,_e)}}break;case 3:if(Ki=null,o=cn,cn=Vi(t.containerInfo),_a(t,e),cn=o,Ea(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Cs(t.containerInfo)}catch(_e){ft(e,e.return,_e)}Bo&&(Bo=!1,fm(e));break;case 4:l=cn,cn=Vi(e.stateNode.containerInfo),_a(t,e),Ea(e),cn=l;break;case 12:_a(t,e),Ea(e);break;case 31:_a(t,e),Ea(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Oi(e,l)));break;case 13:_a(t,e),Ea(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Di=$t()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Oi(e,l)));break;case 22:o=e.memoizedState!==null;var T=a!==null&&a.memoizedState!==null,V=Mn,W=Kt;if(Mn=V||o,Kt=W||T,_a(t,e),Kt=W,Mn=V,Ea(e),l&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(a===null||T||Mn||Kt||ql(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){T=a=t;try{if(u=T.stateNode,o)h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{b=T.stateNode;var ae=T.memoizedProps.style,I=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;b.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(_e){ft(T,T.return,_e)}}}else if(t.tag===6){if(a===null){T=t;try{T.stateNode.nodeValue=o?"":T.memoizedProps}catch(_e){ft(T,T.return,_e)}}}else if(t.tag===18){if(a===null){T=t;try{var J=T.stateNode;o?th(J,!0):th(T.stateNode,!1)}catch(_e){ft(T,T.return,_e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Oi(e,a))));break;case 19:_a(t,e),Ea(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Oi(e,l)));break;case 30:break;case 21:break;default:_a(t,e),Ea(e)}}function Ea(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(nm(l)){a=l;break}l=l.return}if(a==null)throw Error(c(160));switch(a.tag){case 27:var o=a.stateNode,u=Uo(e);Ai(e,u,o);break;case 5:var h=a.stateNode;a.flags&32&&(Qn(h,""),a.flags&=-33);var b=Uo(e);Ai(e,b,h);break;case 3:case 4:var T=a.stateNode.containerInfo,V=Uo(e);jo(e,V,T);break;default:throw Error(c(161))}}catch(W){ft(e,e.return,W)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;fm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function jn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)rm(e,t.alternate,t),t=t.sibling}function ql(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sl(4,t,t.return),ql(t);break;case 1:bn(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&tm(t,t.return,a),ql(t);break;case 27:Cr(t.stateNode);case 26:case 5:bn(t,t.return),ql(t);break;case 22:t.memoizedState===null&&ql(t);break;case 30:ql(t);break;default:ql(t)}e=e.sibling}}function Bn(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,o=e,u=t,h=u.flags;switch(u.tag){case 0:case 11:case 15:Bn(o,u,a),pr(4,u);break;case 1:if(Bn(o,u,a),l=u,o=l.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(V){ft(l,l.return,V)}if(l=u,o=l.updateQueue,o!==null){var b=l.stateNode;try{var T=o.shared.hiddenCallbacks;if(T!==null)for(o.shared.hiddenCallbacks=null,o=0;o<T.length;o++)Gd(T[o],b)}catch(V){ft(l,l.return,V)}}a&&h&64&&em(u),gr(u,u.return);break;case 27:lm(u);case 26:case 5:Bn(o,u,a),a&&l===null&&h&4&&am(u),gr(u,u.return);break;case 12:Bn(o,u,a);break;case 31:Bn(o,u,a),a&&h&4&&om(o,u);break;case 13:Bn(o,u,a),a&&h&4&&um(o,u);break;case 22:u.memoizedState===null&&Bn(o,u,a),gr(u,u.return);break;case 30:break;default:Bn(o,u,a)}t=t.sibling}}function zo(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ar(a))}function qo(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ar(e))}function on(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)mm(e,t,a,l),t=t.sibling}function mm(e,t,a,l){var o=t.flags;switch(t.tag){case 0:case 11:case 15:on(e,t,a,l),o&2048&&pr(9,t);break;case 1:on(e,t,a,l);break;case 3:on(e,t,a,l),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ar(e)));break;case 12:if(o&2048){on(e,t,a,l),e=t.stateNode;try{var u=t.memoizedProps,h=u.id,b=u.onPostCommit;typeof b=="function"&&b(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(T){ft(t,t.return,T)}}else on(e,t,a,l);break;case 31:on(e,t,a,l);break;case 13:on(e,t,a,l);break;case 23:break;case 22:u=t.stateNode,h=t.alternate,t.memoizedState!==null?u._visibility&2?on(e,t,a,l):vr(e,t):u._visibility&2?on(e,t,a,l):(u._visibility|=2,hs(e,t,a,l,(t.subtreeFlags&10256)!==0||!1)),o&2048&&zo(h,t);break;case 24:on(e,t,a,l),o&2048&&qo(t.alternate,t);break;default:on(e,t,a,l)}}function hs(e,t,a,l,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,h=t,b=a,T=l,V=h.flags;switch(h.tag){case 0:case 11:case 15:hs(u,h,b,T,o),pr(8,h);break;case 23:break;case 22:var W=h.stateNode;h.memoizedState!==null?W._visibility&2?hs(u,h,b,T,o):vr(u,h):(W._visibility|=2,hs(u,h,b,T,o)),o&&V&2048&&zo(h.alternate,h);break;case 24:hs(u,h,b,T,o),o&&V&2048&&qo(h.alternate,h);break;default:hs(u,h,b,T,o)}t=t.sibling}}function vr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,o=l.flags;switch(l.tag){case 22:vr(a,l),o&2048&&zo(l.alternate,l);break;case 24:vr(a,l),o&2048&&qo(l.alternate,l);break;default:vr(a,l)}t=t.sibling}}var yr=8192;function ps(e,t,a){if(e.subtreeFlags&yr)for(e=e.child;e!==null;)hm(e,t,a),e=e.sibling}function hm(e,t,a){switch(e.tag){case 26:ps(e,t,a),e.flags&yr&&e.memoizedState!==null&&dv(a,cn,e.memoizedState,e.memoizedProps);break;case 5:ps(e,t,a);break;case 3:case 4:var l=cn;cn=Vi(e.stateNode.containerInfo),ps(e,t,a),cn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=yr,yr=16777216,ps(e,t,a),yr=l):ps(e,t,a));break;default:ps(e,t,a)}}function pm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function br(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];Jt=l,vm(l,e)}pm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)gm(e),e=e.sibling}function gm(e){switch(e.tag){case 0:case 11:case 15:br(e),e.flags&2048&&sl(9,e,e.return);break;case 3:br(e);break;case 12:br(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ri(e)):br(e);break;default:br(e)}}function Ri(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];Jt=l,vm(l,e)}pm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:sl(8,t,t.return),Ri(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Ri(t));break;default:Ri(t)}e=e.sibling}}function vm(e,t){for(;Jt!==null;){var a=Jt;switch(a.tag){case 0:case 11:case 15:sl(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ar(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Jt=l;else e:for(a=e;Jt!==null;){l=Jt;var o=l.sibling,u=l.return;if(im(l),l===a){Jt=null;break e}if(o!==null){o.return=u,Jt=o;break e}Jt=u}}}var Tg={getCacheForType:function(e){var t=ea(Gt),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return ea(Gt).controller.signal}},kg=typeof WeakMap=="function"?WeakMap:Map,it=0,vt=null,Fe=null,et=0,dt=0,Ma=null,rl=!1,gs=!1,$o=!1,zn=0,Ut=0,il=0,$l=0,Lo=0,Ua=0,vs=0,_r=null,wa=null,Ho=!1,Di=0,ym=0,xi=1/0,Mi=null,cl=null,Qt=0,ol=null,ys=null,qn=0,Go=0,Vo=null,bm=null,Er=0,Yo=null;function ja(){return(it&2)!==0&&et!==0?et&-et:K.T!==null?Jo():Ze()}function _m(){if(Ua===0)if((et&536870912)===0||at){var e=se;se<<=1,(se&3932160)===0&&(se=262144),Ua=e}else Ua=536870912;return e=Da.current,e!==null&&(e.flags|=32),Ua}function Sa(e,t,a){(e===vt&&(dt===2||dt===9)||e.cancelPendingCommit!==null)&&(bs(e,0),ul(e,et,Ua,!1)),pa(e,a),((it&2)===0||e!==vt)&&(e===vt&&((it&2)===0&&($l|=a),Ut===4&&ul(e,et,Ua,!1)),_n(e))}function Em(e,t,a){if((it&6)!==0)throw Error(c(327));var l=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Ft(e,t),o=l?Rg(e,t):Io(e,t,!0),u=l;do{if(o===0){gs&&!l&&ul(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!Ag(a)){o=Io(e,t,!1),u=!1;continue}if(o===2){if(u=t,e.errorRecoveryDisabledLanes&u)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var b=e;o=_r;var T=b.current.memoizedState.isDehydrated;if(T&&(bs(b,h).flags|=256),h=Io(b,h,!1),h!==2){if($o&&!T){b.errorRecoveryDisabledLanes|=u,$l|=u,o=4;break e}u=wa,wa=o,u!==null&&(wa===null?wa=u:wa.push.apply(wa,u))}o=h}if(u=!1,o!==2)continue}}if(o===1){bs(e,0),ul(e,t,0,!0);break}e:{switch(l=e,u=o,u){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:ul(l,t,Ua,!rl);break e;case 2:wa=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(o=Di+300-$t(),10<o)){if(ul(l,t,Ua,!rl),Zt(l,0,!0)!==0)break e;qn=t,l.timeoutHandle=Fm(wm.bind(null,l,a,wa,Mi,Ho,t,Ua,$l,vs,rl,u,"Throttled",-0,0),o);break e}wm(l,a,wa,Mi,Ho,t,Ua,$l,vs,rl,u,null,-0,0)}}break}while(!0);_n(e)}function wm(e,t,a,l,o,u,h,b,T,V,W,ae,I,J){if(e.timeoutHandle=-1,ae=t.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:sn},hm(t,u,ae);var _e=(u&62914560)===u?Di-$t():(u&4194048)===u?ym-$t():0;if(_e=fv(ae,_e),_e!==null){qn=u,e.cancelPendingCommit=_e(Rm.bind(null,e,t,u,a,l,o,h,b,T,W,ae,null,I,J)),ul(e,u,h,!V);return}}Rm(e,t,u,a,l,o,h,b,T)}function Ag(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var o=a[l],u=o.getSnapshot;o=o.value;try{if(!Oa(u(),o))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ul(e,t,a,l){t&=~Lo,t&=~$l,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var o=t;0<o;){var u=31-Be(o),h=1<<u;l[u]=-1,o&=~h}a!==0&&El(e,a,t)}function Ui(){return(it&6)===0?(wr(0),!1):!0}function Ko(){if(Fe!==null){if(dt===0)var e=Fe.return;else e=Fe,kn=Rl=null,ro(e),os=null,lr=0,e=Fe;for(;e!==null;)Wf(e.alternate,e),e=e.return;Fe=null}}function bs(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Qg(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),qn=0,Ko(),vt=e,Fe=a=Cn(e.current,null),et=t,dt=0,Ma=null,rl=!1,gs=Ft(e,t),$o=!1,vs=Ua=Lo=$l=il=Ut=0,wa=_r=null,Ho=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var o=31-Be(l),u=1<<o;t|=e[o],l&=~u}return zn=t,ti(),a}function Sm(e,t){Pe=null,K.H=fr,t===cs||t===oi?(t=qd(),dt=3):t===Qc?(t=qd(),dt=4):dt=t===So?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ma=t,Fe===null&&(Ut=1,Si(e,Pa(t,e.current)))}function Nm(){var e=Da.current;return e===null?!0:(et&4194048)===et?Za===null:(et&62914560)===et||(et&536870912)!==0?e===Za:!1}function Cm(){var e=K.H;return K.H=fr,e===null?fr:e}function Tm(){var e=K.A;return K.A=Tg,e}function ji(){Ut=4,rl||(et&4194048)!==et&&Da.current!==null||(gs=!0),(il&134217727)===0&&($l&134217727)===0||vt===null||ul(vt,et,Ua,!1)}function Io(e,t,a){var l=it;it|=2;var o=Cm(),u=Tm();(vt!==e||et!==t)&&(Mi=null,bs(e,t)),t=!1;var h=Ut;e:do try{if(dt!==0&&Fe!==null){var b=Fe,T=Ma;switch(dt){case 8:Ko(),h=6;break e;case 3:case 2:case 9:case 6:Da.current===null&&(t=!0);var V=dt;if(dt=0,Ma=null,_s(e,b,T,V),a&&gs){h=0;break e}break;default:V=dt,dt=0,Ma=null,_s(e,b,T,V)}}Og(),h=Ut;break}catch(W){Sm(e,W)}while(!0);return t&&e.shellSuspendCounter++,kn=Rl=null,it=l,K.H=o,K.A=u,Fe===null&&(vt=null,et=0,ti()),h}function Og(){for(;Fe!==null;)km(Fe)}function Rg(e,t){var a=it;it|=2;var l=Cm(),o=Tm();vt!==e||et!==t?(Mi=null,xi=$t()+500,bs(e,t)):gs=Ft(e,t);e:do try{if(dt!==0&&Fe!==null){t=Fe;var u=Ma;t:switch(dt){case 1:dt=0,Ma=null,_s(e,t,u,1);break;case 2:case 9:if(Bd(u)){dt=0,Ma=null,Am(t);break}t=function(){dt!==2&&dt!==9||vt!==e||(dt=7),_n(e)},u.then(t,t);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:Bd(u)?(dt=0,Ma=null,Am(t)):(dt=0,Ma=null,_s(e,t,u,7));break;case 5:var h=null;switch(Fe.tag){case 26:h=Fe.memoizedState;case 5:case 27:var b=Fe;if(h?mh(h):b.stateNode.complete){dt=0,Ma=null;var T=b.sibling;if(T!==null)Fe=T;else{var V=b.return;V!==null?(Fe=V,Bi(V)):Fe=null}break t}}dt=0,Ma=null,_s(e,t,u,5);break;case 6:dt=0,Ma=null,_s(e,t,u,6);break;case 8:Ko(),Ut=6;break e;default:throw Error(c(462))}}Dg();break}catch(W){Sm(e,W)}while(!0);return kn=Rl=null,K.H=l,K.A=o,it=a,Fe!==null?0:(vt=null,et=0,ti(),Ut)}function Dg(){for(;Fe!==null&&!Gn();)km(Fe)}function km(e){var t=Zf(e.alternate,e,zn);e.memoizedProps=e.pendingProps,t===null?Bi(e):Fe=t}function Am(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Kf(a,t,t.pendingProps,t.type,void 0,et);break;case 11:t=Kf(a,t,t.pendingProps,t.type.render,t.ref,et);break;case 5:ro(t);default:Wf(a,t),t=Fe=Cd(t,zn),t=Zf(a,t,zn)}e.memoizedProps=e.pendingProps,t===null?Bi(e):Fe=t}function _s(e,t,a,l){kn=Rl=null,ro(t),os=null,lr=0;var o=t.return;try{if(bg(e,o,t,a,et)){Ut=1,Si(e,Pa(a,e.current)),Fe=null;return}}catch(u){if(o!==null)throw Fe=o,u;Ut=1,Si(e,Pa(a,e.current)),Fe=null;return}t.flags&32768?(at||l===1?e=!0:gs||(et&536870912)!==0?e=!1:(rl=e=!0,(l===2||l===9||l===3||l===6)&&(l=Da.current,l!==null&&l.tag===13&&(l.flags|=16384))),Om(t,e)):Bi(t)}function Bi(e){var t=e;do{if((t.flags&32768)!==0){Om(t,rl);return}e=t.return;var a=wg(t.alternate,t,zn);if(a!==null){Fe=a;return}if(t=t.sibling,t!==null){Fe=t;return}Fe=t=e}while(t!==null);Ut===0&&(Ut=5)}function Om(e,t){do{var a=Sg(e.alternate,e);if(a!==null){a.flags&=32767,Fe=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Fe=e;return}Fe=e=a}while(e!==null);Ut=6,Fe=null}function Rm(e,t,a,l,o,u,h,b,T){e.cancelPendingCommit=null;do zi();while(Qt!==0);if((it&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(u=t.lanes|t.childLanes,u|=Mc,_l(e,a,u,h,b,T),e===vt&&(Fe=vt=null,et=0),ys=t,ol=e,qn=a,Go=u,Vo=o,bm=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,jg(He,function(){return jm(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,o=fe.p,fe.p=2,h=it,it|=4;try{Ng(e,t,a)}finally{it=h,fe.p=o,K.T=l}}Qt=1,Dm(),xm(),Mm()}}function Dm(){if(Qt===1){Qt=0;var e=ol,t=ys,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=fe.p;fe.p=2;var o=it;it|=4;try{dm(t,e);var u=lu,h=gd(e.containerInfo),b=u.focusedElem,T=u.selectionRange;if(h!==b&&b&&b.ownerDocument&&pd(b.ownerDocument.documentElement,b)){if(T!==null&&Ac(b)){var V=T.start,W=T.end;if(W===void 0&&(W=V),"selectionStart"in b)b.selectionStart=V,b.selectionEnd=Math.min(W,b.value.length);else{var ae=b.ownerDocument||document,I=ae&&ae.defaultView||window;if(I.getSelection){var J=I.getSelection(),_e=b.textContent.length,De=Math.min(T.start,_e),pt=T.end===void 0?De:Math.min(T.end,_e);!J.extend&&De>pt&&(h=pt,pt=De,De=h);var q=hd(b,De),M=hd(b,pt);if(q&&M&&(J.rangeCount!==1||J.anchorNode!==q.node||J.anchorOffset!==q.offset||J.focusNode!==M.node||J.focusOffset!==M.offset)){var G=ae.createRange();G.setStart(q.node,q.offset),J.removeAllRanges(),De>pt?(J.addRange(G),J.extend(M.node,M.offset)):(G.setEnd(M.node,M.offset),J.addRange(G))}}}}for(ae=[],J=b;J=J.parentNode;)J.nodeType===1&&ae.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ae.length;b++){var te=ae[b];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Xi=!!nu,lu=nu=null}finally{it=o,fe.p=l,K.T=a}}e.current=t,Qt=2}}function xm(){if(Qt===2){Qt=0;var e=ol,t=ys,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=fe.p;fe.p=2;var o=it;it|=4;try{rm(e,t.alternate,t)}finally{it=o,fe.p=l,K.T=a}}Qt=3}}function Mm(){if(Qt===4||Qt===3){Qt=0,Vn();var e=ol,t=ys,a=qn,l=bm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Qt=5:(Qt=0,ys=ol=null,Um(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(cl=null),ka(a),t=t.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Ct,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=K.T,o=fe.p,fe.p=2,K.T=null;try{for(var u=e.onRecoverableError,h=0;h<l.length;h++){var b=l[h];u(b.value,{componentStack:b.stack})}}finally{K.T=t,fe.p=o}}(qn&3)!==0&&zi(),_n(e),o=e.pendingLanes,(a&261930)!==0&&(o&42)!==0?e===Yo?Er++:(Er=0,Yo=e):Er=0,wr(0)}}function Um(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ar(t)))}function zi(){return Dm(),xm(),Mm(),jm()}function jm(){if(Qt!==5)return!1;var e=ol,t=Go;Go=0;var a=ka(qn),l=K.T,o=fe.p;try{fe.p=32>a?32:a,K.T=null,a=Vo,Vo=null;var u=ol,h=qn;if(Qt=0,ys=ol=null,qn=0,(it&6)!==0)throw Error(c(331));var b=it;if(it|=4,gm(u.current),mm(u,u.current,h,a),it=b,wr(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Ct,u)}catch{}return!0}finally{fe.p=o,K.T=l,Um(e,t)}}function Bm(e,t,a){t=Pa(a,t),t=wo(e.stateNode,t,2),e=al(e,t,2),e!==null&&(pa(e,2),_n(e))}function ft(e,t,a){if(e.tag===3)Bm(e,e,a);else for(;t!==null;){if(t.tag===3){Bm(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(cl===null||!cl.has(l))){e=Pa(a,e),a=zf(2),l=al(t,a,2),l!==null&&(qf(a,l,t,e),pa(l,2),_n(l));break}}t=t.return}}function Po(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new kg;var o=new Set;l.set(t,o)}else o=l.get(t),o===void 0&&(o=new Set,l.set(t,o));o.has(a)||($o=!0,o.add(a),e=xg.bind(null,e,t,a),t.then(e,e))}function xg(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,vt===e&&(et&a)===a&&(Ut===4||Ut===3&&(et&62914560)===et&&300>$t()-Di?(it&2)===0&&bs(e,0):Lo|=a,vs===et&&(vs=0)),_n(e)}function zm(e,t){t===0&&(t=ut()),e=kl(e,t),e!==null&&(pa(e,t),_n(e))}function Mg(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),zm(e,a)}function Ug(e,t){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,o=e.memoizedState;o!==null&&(a=o.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(c(314))}l!==null&&l.delete(t),zm(e,a)}function jg(e,t){return mn(e,t)}var qi=null,Es=null,Qo=!1,$i=!1,Xo=!1,dl=0;function _n(e){e!==Es&&e.next===null&&(Es===null?qi=Es=e:Es=Es.next=e),$i=!0,Qo||(Qo=!0,zg())}function wr(e,t){if(!Xo&&$i){Xo=!0;do for(var a=!1,l=qi;l!==null;){if(e!==0){var o=l.pendingLanes;if(o===0)var u=0;else{var h=l.suspendedLanes,b=l.pingedLanes;u=(1<<31-Be(42|e)+1)-1,u&=o&~(h&~b),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,Hm(l,u))}else u=et,u=Zt(l,l===vt?u:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(u&3)===0||Ft(l,u)||(a=!0,Hm(l,u));l=l.next}while(a);Xo=!1}}function Bg(){qm()}function qm(){$i=Qo=!1;var e=0;dl!==0&&Pg()&&(e=dl);for(var t=$t(),a=null,l=qi;l!==null;){var o=l.next,u=$m(l,t);u===0?(l.next=null,a===null?qi=o:a.next=o,o===null&&(Es=a)):(a=l,(e!==0||(u&3)!==0)&&($i=!0)),l=o}Qt!==0&&Qt!==5||wr(e),dl!==0&&(dl=0)}function $m(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,o=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var h=31-Be(u),b=1<<h,T=o[h];T===-1?((b&a)===0||(b&l)!==0)&&(o[h]=Ca(b,t)):T<=t&&(e.expiredLanes|=b),u&=~b}if(t=vt,a=et,a=Zt(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(dt===2||dt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&tn(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Ft(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&tn(l),ka(a)){case 2:case 8:a=Ge;break;case 32:a=He;break;case 268435456:a=ct;break;default:a=He}return l=Lm.bind(null,e),a=mn(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&tn(l),e.callbackPriority=2,e.callbackNode=null,2}function Lm(e,t){if(Qt!==0&&Qt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(zi()&&e.callbackNode!==a)return null;var l=et;return l=Zt(e,e===vt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Em(e,l,t),$m(e,$t()),e.callbackNode!=null&&e.callbackNode===a?Lm.bind(null,e):null)}function Hm(e,t){if(zi())return null;Em(e,t,!0)}function zg(){Xg(function(){(it&6)!==0?mn(me,Bg):qm()})}function Jo(){if(dl===0){var e=rs;e===0&&(e=C,C<<=1,(C&261888)===0&&(C=256)),dl=e}return dl}function Gm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Aa(""+e)}function Vm(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function qg(e,t,a,l,o){if(t==="submit"&&a&&a.stateNode===o){var u=Gm((o[ia]||null).action),h=l.submitter;h&&(t=(t=h[ia]||null)?Gm(t.formAction):h.getAttribute("formAction"),t!==null&&(u=t,h=null));var b=new de("action","action",null,l,o);e.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(dl!==0){var T=h?Vm(o,h):new FormData(o);go(a,{pending:!0,data:T,method:o.method,action:u},null,T)}}else typeof u=="function"&&(b.preventDefault(),T=h?Vm(o,h):new FormData(o),go(a,{pending:!0,data:T,method:o.method,action:u},u,T))},currentTarget:o}]})}}for(var Zo=0;Zo<xc.length;Zo++){var Fo=xc[Zo],$g=Fo.toLowerCase(),Lg=Fo[0].toUpperCase()+Fo.slice(1);rn($g,"on"+Lg)}rn(bd,"onAnimationEnd"),rn(_d,"onAnimationIteration"),rn(Ed,"onAnimationStart"),rn("dblclick","onDoubleClick"),rn("focusin","onFocus"),rn("focusout","onBlur"),rn(ag,"onTransitionRun"),rn(ng,"onTransitionStart"),rn(lg,"onTransitionCancel"),rn(wd,"onTransitionEnd"),In("onMouseEnter",["mouseout","mouseover"]),In("onMouseLeave",["mouseout","mouseover"]),In("onPointerEnter",["pointerout","pointerover"]),In("onPointerLeave",["pointerout","pointerover"]),xt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xt("onBeforeInput",["compositionend","keypress","textInput","paste"]),xt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sr));function Ym(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],o=l.event;l=l.listeners;e:{var u=void 0;if(t)for(var h=l.length-1;0<=h;h--){var b=l[h],T=b.instance,V=b.currentTarget;if(b=b.listener,T!==u&&o.isPropagationStopped())break e;u=b,o.currentTarget=V;try{u(o)}catch(W){ei(W)}o.currentTarget=null,u=T}else for(h=0;h<l.length;h++){if(b=l[h],T=b.instance,V=b.currentTarget,b=b.listener,T!==u&&o.isPropagationStopped())break e;u=b,o.currentTarget=V;try{u(o)}catch(W){ei(W)}o.currentTarget=null,u=T}}}}function We(e,t){var a=t[qs];a===void 0&&(a=t[qs]=new Set);var l=e+"__bubble";a.has(l)||(Km(t,e,2,!1),a.add(l))}function Wo(e,t,a){var l=0;t&&(l|=4),Km(a,e,l,t)}var Li="_reactListening"+Math.random().toString(36).slice(2);function eu(e){if(!e[Li]){e[Li]=!0,Pl.forEach(function(a){a!=="selectionchange"&&(Hg.has(a)||Wo(a,!1,e),Wo(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Li]||(t[Li]=!0,Wo("selectionchange",!1,t))}}function Km(e,t,a,l){switch(_h(t)){case 2:var o=pv;break;case 8:o=gv;break;default:o=pu}a=o.bind(null,t,a,e),o=void 0,!Qs||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),l?o!==void 0?e.addEventListener(t,a,{capture:!0,passive:o}):e.addEventListener(t,a,!0):o!==void 0?e.addEventListener(t,a,{passive:o}):e.addEventListener(t,a,!1)}function tu(e,t,a,l,o){var u=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var h=l.tag;if(h===3||h===4){var b=l.stateNode.containerInfo;if(b===o)break;if(h===4)for(h=l.return;h!==null;){var T=h.tag;if((T===3||T===4)&&h.stateNode.containerInfo===o)return;h=h.return}for(;b!==null;){if(h=En(b),h===null)return;if(T=h.tag,T===5||T===6||T===26||T===27){l=u=h;continue e}b=b.parentNode}}l=l.return}Ya(function(){var V=u,W=Is(a),ae=[];e:{var I=Sd.get(e);if(I!==void 0){var J=de,_e=e;switch(e){case"keypress":if(U(a)===0)break e;case"keydown":case"keyup":J=Up;break;case"focusin":_e="focus",J=pn;break;case"focusout":_e="blur",J=pn;break;case"beforeblur":case"afterblur":J=pn;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=we;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=gt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=zp;break;case bd:case _d:case Ed:J=Sc;break;case wd:J=$p;break;case"scroll":case"scrollend":J=qe;break;case"wheel":J=Hp;break;case"copy":case"cut":case"paste":J=kp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=ed;break;case"toggle":case"beforetoggle":J=Vp}var De=(t&4)!==0,pt=!De&&(e==="scroll"||e==="scrollend"),q=De?I!==null?I+"Capture":null:I;De=[];for(var M=V,G;M!==null;){var te=M;if(G=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||G===null||q===null||(te=ya(M,q),te!=null&&De.push(Nr(M,te,G))),pt)break;M=M.return}0<De.length&&(I=new J(I,_e,null,a,W),ae.push({event:I,listeners:De}))}}if((t&7)===0){e:{if(I=e==="mouseover"||e==="pointerover",J=e==="mouseout"||e==="pointerout",I&&a!==Ks&&(_e=a.relatedTarget||a.fromElement)&&(En(_e)||_e[Kn]))break e;if((J||I)&&(I=W.window===W?W:(I=W.ownerDocument)?I.defaultView||I.parentWindow:window,J?(_e=a.relatedTarget||a.toElement,J=V,_e=_e?En(_e):null,_e!==null&&(pt=f(_e),De=_e.tag,_e!==pt||De!==5&&De!==27&&De!==6)&&(_e=null)):(J=null,_e=V),J!==_e)){if(De=we,te="onMouseLeave",q="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(De=ed,te="onPointerLeave",q="onPointerEnter",M="pointer"),pt=J==null?I:wn(J),G=_e==null?I:wn(_e),I=new De(te,M+"leave",J,a,W),I.target=pt,I.relatedTarget=G,te=null,En(W)===V&&(De=new De(q,M+"enter",_e,a,W),De.target=G,De.relatedTarget=pt,te=De),pt=te,J&&_e)t:{for(De=Gg,q=J,M=_e,G=0,te=q;te;te=De(te))G++;te=0;for(var Oe=M;Oe;Oe=De(Oe))te++;for(;0<G-te;)q=De(q),G--;for(;0<te-G;)M=De(M),te--;for(;G--;){if(q===M||M!==null&&q===M.alternate){De=q;break t}q=De(q),M=De(M)}De=null}else De=null;J!==null&&Im(ae,I,J,De,!1),_e!==null&&pt!==null&&Im(ae,pt,_e,De,!0)}}e:{if(I=V?wn(V):window,J=I.nodeName&&I.nodeName.toLowerCase(),J==="select"||J==="input"&&I.type==="file")var lt=cd;else if(rd(I))if(od)lt=Wp;else{lt=Zp;var Ne=Jp}else J=I.nodeName,!J||J.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?V&&Ys(V.elementType)&&(lt=cd):lt=Fp;if(lt&&(lt=lt(e,V))){id(ae,lt,a,W);break e}Ne&&Ne(e,I,V),e==="focusout"&&V&&I.type==="number"&&V.memoizedProps.value!=null&&Jl(I,"number",I.value)}switch(Ne=V?wn(V):window,e){case"focusin":(rd(Ne)||Ne.contentEditable==="true")&&(Fl=Ne,Oc=V,Ws=null);break;case"focusout":Ws=Oc=Fl=null;break;case"mousedown":Rc=!0;break;case"contextmenu":case"mouseup":case"dragend":Rc=!1,vd(ae,a,W);break;case"selectionchange":if(tg)break;case"keydown":case"keyup":vd(ae,a,W)}var Qe;if(Cc)e:{switch(e){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else Zl?ld(e,a)&&(tt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(tt="onCompositionStart");tt&&(td&&a.locale!=="ko"&&(Zl||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&Zl&&(Qe=j()):(S=W,E="value"in S?S.value:S.textContent,Zl=!0)),Ne=Hi(V,tt),0<Ne.length&&(tt=new Wu(tt,e,null,a,W),ae.push({event:tt,listeners:Ne}),Qe?tt.data=Qe:(Qe=sd(a),Qe!==null&&(tt.data=Qe)))),(Qe=Kp?Ip(e,a):Pp(e,a))&&(tt=Hi(V,"onBeforeInput"),0<tt.length&&(Ne=new Wu("onBeforeInput","beforeinput",null,a,W),ae.push({event:Ne,listeners:tt}),Ne.data=Qe)),qg(ae,e,V,a,W)}Ym(ae,t)})}function Nr(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Hi(e,t){for(var a=t+"Capture",l=[];e!==null;){var o=e,u=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||u===null||(o=ya(e,a),o!=null&&l.unshift(Nr(e,o,u)),o=ya(e,t),o!=null&&l.push(Nr(e,o,u))),e.tag===3)return l;e=e.return}return[]}function Gg(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Im(e,t,a,l,o){for(var u=t._reactName,h=[];a!==null&&a!==l;){var b=a,T=b.alternate,V=b.stateNode;if(b=b.tag,T!==null&&T===l)break;b!==5&&b!==26&&b!==27||V===null||(T=V,o?(V=ya(a,u),V!=null&&h.unshift(Nr(a,V,T))):o||(V=ya(a,u),V!=null&&h.push(Nr(a,V,T)))),a=a.return}h.length!==0&&e.push({event:t,listeners:h})}var Vg=/\r\n?/g,Yg=/\u0000|\uFFFD/g;function Pm(e){return(typeof e=="string"?e:""+e).replace(Vg,`
`).replace(Yg,"")}function Qm(e,t){return t=Pm(t),Pm(e)===t}function ht(e,t,a,l,o,u){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Qn(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Qn(e,""+l);break;case"className":an(e,"class",l);break;case"tabIndex":an(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":an(e,a,l);break;case"style":Zr(e,l,u);break;case"data":if(t!=="object"){an(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Aa(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&ht(e,t,"name",o.name,o,null),ht(e,t,"formEncType",o.formEncType,o,null),ht(e,t,"formMethod",o.formMethod,o,null),ht(e,t,"formTarget",o.formTarget,o,null)):(ht(e,t,"encType",o.encType,o,null),ht(e,t,"method",o.method,o,null),ht(e,t,"target",o.target,o,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Aa(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=sn);break;case"onScroll":l!=null&&We("scroll",e);break;case"onScrollEnd":l!=null&&We("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(c(61));if(a=l.__html,a!=null){if(o.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Aa(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":We("beforetoggle",e),We("toggle",e),Sn(e,"popover",l);break;case"xlinkActuate":nn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":nn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":nn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":nn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":nn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":nn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":nn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":nn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":nn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Sn(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ec.get(a)||a,Sn(e,a,l))}}function au(e,t,a,l,o,u){switch(a){case"style":Zr(e,l,u);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(c(61));if(a=l.__html,a!=null){if(o.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Qn(e,l):(typeof l=="number"||typeof l=="bigint")&&Qn(e,""+l);break;case"onScroll":l!=null&&We("scroll",e);break;case"onScrollEnd":l!=null&&We("scrollend",e);break;case"onClick":l!=null&&(e.onclick=sn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ca.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(o=a.endsWith("Capture"),t=a.slice(2,o?a.length-7:void 0),u=e[ia]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,o),typeof l=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,o);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Sn(e,a,l)}}}function aa(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",e),We("load",e);var l=!1,o=!1,u;for(u in a)if(a.hasOwnProperty(u)){var h=a[u];if(h!=null)switch(u){case"src":l=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:ht(e,t,u,h,a,null)}}o&&ht(e,t,"srcSet",a.srcSet,a,null),l&&ht(e,t,"src",a.src,a,null);return;case"input":We("invalid",e);var b=u=h=o=null,T=null,V=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":o=W;break;case"type":h=W;break;case"checked":T=W;break;case"defaultChecked":V=W;break;case"value":u=W;break;case"defaultValue":b=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(c(137,t));break;default:ht(e,t,l,W,a,null)}}Vs(e,u,b,T,V,h,o,!1);return;case"select":We("invalid",e),l=h=u=null;for(o in a)if(a.hasOwnProperty(o)&&(b=a[o],b!=null))switch(o){case"value":u=b;break;case"defaultValue":h=b;break;case"multiple":l=b;default:ht(e,t,o,b,a,null)}t=u,a=h,e.multiple=!!l,t!=null?ln(e,!!l,t,!1):a!=null&&ln(e,!!l,a,!0);return;case"textarea":We("invalid",e),u=o=l=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":l=b;break;case"defaultValue":o=b;break;case"children":u=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(c(91));break;default:ht(e,t,h,b,a,null)}Xr(e,l,o,u);return;case"option":for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null)&&(T==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":ht(e,t,T,l,a,null));return;case"dialog":We("beforetoggle",e),We("toggle",e),We("cancel",e),We("close",e);break;case"iframe":case"object":We("load",e);break;case"video":case"audio":for(l=0;l<Sr.length;l++)We(Sr[l],e);break;case"image":We("error",e),We("load",e);break;case"details":We("toggle",e);break;case"embed":case"source":case"link":We("error",e),We("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in a)if(a.hasOwnProperty(V)&&(l=a[V],l!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:ht(e,t,V,l,a,null)}return;default:if(Ys(t)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&au(e,t,W,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&ht(e,t,b,l,a,null))}function Kg(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,u=null,h=null,b=null,T=null,V=null,W=null;for(J in a){var ae=a[J];if(a.hasOwnProperty(J)&&ae!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":T=ae;default:l.hasOwnProperty(J)||ht(e,t,J,null,l,ae)}}for(var I in l){var J=l[I];if(ae=a[I],l.hasOwnProperty(I)&&(J!=null||ae!=null))switch(I){case"type":u=J;break;case"name":o=J;break;case"checked":V=J;break;case"defaultChecked":W=J;break;case"value":h=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(c(137,t));break;default:J!==ae&&ht(e,t,I,J,l,ae)}}Gs(e,h,b,T,V,W,u,o);return;case"select":J=h=b=I=null;for(u in a)if(T=a[u],a.hasOwnProperty(u)&&T!=null)switch(u){case"value":break;case"multiple":J=T;default:l.hasOwnProperty(u)||ht(e,t,u,null,l,T)}for(o in l)if(u=l[o],T=a[o],l.hasOwnProperty(o)&&(u!=null||T!=null))switch(o){case"value":I=u;break;case"defaultValue":b=u;break;case"multiple":h=u;default:u!==T&&ht(e,t,o,u,l,T)}t=b,a=h,l=J,I!=null?ln(e,!!a,I,!1):!!l!=!!a&&(t!=null?ln(e,!!a,t,!0):ln(e,!!a,a?[]:"",!1));return;case"textarea":J=I=null;for(b in a)if(o=a[b],a.hasOwnProperty(b)&&o!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ht(e,t,b,null,l,o)}for(h in l)if(o=l[h],u=a[h],l.hasOwnProperty(h)&&(o!=null||u!=null))switch(h){case"value":I=o;break;case"defaultValue":J=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(c(91));break;default:o!==u&&ht(e,t,h,o,l,u)}Qr(e,I,J);return;case"option":for(var _e in a)I=a[_e],a.hasOwnProperty(_e)&&I!=null&&!l.hasOwnProperty(_e)&&(_e==="selected"?e.selected=!1:ht(e,t,_e,null,l,I));for(T in l)I=l[T],J=a[T],l.hasOwnProperty(T)&&I!==J&&(I!=null||J!=null)&&(T==="selected"?e.selected=I&&typeof I!="function"&&typeof I!="symbol":ht(e,t,T,I,l,J));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in a)I=a[De],a.hasOwnProperty(De)&&I!=null&&!l.hasOwnProperty(De)&&ht(e,t,De,null,l,I);for(V in l)if(I=l[V],J=a[V],l.hasOwnProperty(V)&&I!==J&&(I!=null||J!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(c(137,t));break;default:ht(e,t,V,I,l,J)}return;default:if(Ys(t)){for(var pt in a)I=a[pt],a.hasOwnProperty(pt)&&I!==void 0&&!l.hasOwnProperty(pt)&&au(e,t,pt,void 0,l,I);for(W in l)I=l[W],J=a[W],!l.hasOwnProperty(W)||I===J||I===void 0&&J===void 0||au(e,t,W,I,l,J);return}}for(var q in a)I=a[q],a.hasOwnProperty(q)&&I!=null&&!l.hasOwnProperty(q)&&ht(e,t,q,null,l,I);for(ae in l)I=l[ae],J=a[ae],!l.hasOwnProperty(ae)||I===J||I==null&&J==null||ht(e,t,ae,I,l,J)}function Xm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ig(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var o=a[l],u=o.transferSize,h=o.initiatorType,b=o.duration;if(u&&b&&Xm(h)){for(h=0,b=o.responseEnd,l+=1;l<a.length;l++){var T=a[l],V=T.startTime;if(V>b)break;var W=T.transferSize,ae=T.initiatorType;W&&Xm(ae)&&(T=T.responseEnd,h+=W*(T<b?1:(b-V)/(T-V)))}if(--l,t+=8*(u+h)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var nu=null,lu=null;function Gi(e){return e.nodeType===9?e:e.ownerDocument}function Jm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function su(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ru=null;function Pg(){var e=window.event;return e&&e.type==="popstate"?e===ru?!1:(ru=e,!0):(ru=null,!1)}var Fm=typeof setTimeout=="function"?setTimeout:void 0,Qg=typeof clearTimeout=="function"?clearTimeout:void 0,Wm=typeof Promise=="function"?Promise:void 0,Xg=typeof queueMicrotask=="function"?queueMicrotask:typeof Wm<"u"?function(e){return Wm.resolve(null).then(e).catch(Jg)}:Fm;function Jg(e){setTimeout(function(){throw e})}function fl(e){return e==="head"}function eh(e,t){var a=t,l=0;do{var o=a.nextSibling;if(e.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(o),Cs(t);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Cr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Cr(a);for(var u=a.firstChild;u;){var h=u.nextSibling,b=u.nodeName;u[wl]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=h}}else a==="body"&&Cr(e.ownerDocument.body);a=o}while(a);Cs(t)}function th(e,t){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function iu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":iu(a),$s(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Zg(e,t,a,l){for(;e.nodeType===1;){var o=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[wl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Fa(e.nextSibling),e===null)break}return null}function Fg(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Fa(e.nextSibling),e===null))return null;return e}function ah(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Fa(e.nextSibling),e===null))return null;return e}function cu(e){return e.data==="$?"||e.data==="$~"}function ou(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Wg(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Fa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var uu=null;function nh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Fa(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function lh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function sh(e,t,a){switch(t=Gi(a),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function Cr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);$s(e)}var Wa=new Map,rh=new Set;function Vi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var $n=fe.d;fe.d={f:ev,r:tv,D:av,C:nv,L:lv,m:sv,X:iv,S:rv,M:cv};function ev(){var e=$n.f(),t=Ui();return e||t}function tv(e){var t=hn(e);t!==null&&t.tag===5&&t.type==="form"?Sf(t):$n.r(e)}var ws=typeof document>"u"?null:document;function ih(e,t,a){var l=ws;if(l&&typeof t=="string"&&t){var o=da(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof a=="string"&&(o+='[crossorigin="'+a+'"]'),rh.has(o)||(rh.add(o),e={rel:e,crossOrigin:a,href:t},l.querySelector(o)===null&&(t=l.createElement("link"),aa(t,"link",e),Ht(t),l.head.appendChild(t)))}}function av(e){$n.D(e),ih("dns-prefetch",e,null)}function nv(e,t){$n.C(e,t),ih("preconnect",e,t)}function lv(e,t,a){$n.L(e,t,a);var l=ws;if(l&&e&&t){var o='link[rel="preload"][as="'+da(t)+'"]';t==="image"&&a&&a.imageSrcSet?(o+='[imagesrcset="'+da(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(o+='[imagesizes="'+da(a.imageSizes)+'"]')):o+='[href="'+da(e)+'"]';var u=o;switch(t){case"style":u=Ss(e);break;case"script":u=Ns(e)}Wa.has(u)||(e=w({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Wa.set(u,e),l.querySelector(o)!==null||t==="style"&&l.querySelector(Tr(u))||t==="script"&&l.querySelector(kr(u))||(t=l.createElement("link"),aa(t,"link",e),Ht(t),l.head.appendChild(t)))}}function sv(e,t){$n.m(e,t);var a=ws;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+da(l)+'"][href="'+da(e)+'"]',u=o;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=Ns(e)}if(!Wa.has(u)&&(e=w({rel:"modulepreload",href:e},t),Wa.set(u,e),a.querySelector(o)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(kr(u)))return}l=a.createElement("link"),aa(l,"link",e),Ht(l),a.head.appendChild(l)}}}function rv(e,t,a){$n.S(e,t,a);var l=ws;if(l&&e){var o=Lt(l).hoistableStyles,u=Ss(e);t=t||"default";var h=o.get(u);if(!h){var b={loading:0,preload:null};if(h=l.querySelector(Tr(u)))b.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Wa.get(u))&&du(e,a);var T=h=l.createElement("link");Ht(T),aa(T,"link",e),T._p=new Promise(function(V,W){T.onload=V,T.onerror=W}),T.addEventListener("load",function(){b.loading|=1}),T.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Yi(h,t,l)}h={type:"stylesheet",instance:h,count:1,state:b},o.set(u,h)}}}function iv(e,t){$n.X(e,t);var a=ws;if(a&&e){var l=Lt(a).hoistableScripts,o=Ns(e),u=l.get(o);u||(u=a.querySelector(kr(o)),u||(e=w({src:e,async:!0},t),(t=Wa.get(o))&&fu(e,t),u=a.createElement("script"),Ht(u),aa(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(o,u))}}function cv(e,t){$n.M(e,t);var a=ws;if(a&&e){var l=Lt(a).hoistableScripts,o=Ns(e),u=l.get(o);u||(u=a.querySelector(kr(o)),u||(e=w({src:e,async:!0,type:"module"},t),(t=Wa.get(o))&&fu(e,t),u=a.createElement("script"),Ht(u),aa(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(o,u))}}function ch(e,t,a,l){var o=(o=je.current)?Vi(o):null;if(!o)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Ss(a.href),a=Lt(o).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ss(a.href);var u=Lt(o).hoistableStyles,h=u.get(e);if(h||(o=o.ownerDocument||o,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=o.querySelector(Tr(e)))&&!u._p&&(h.instance=u,h.state.loading=5),Wa.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Wa.set(e,a),u||ov(o,e,a,h.state))),t&&l===null)throw Error(c(528,""));return h}if(t&&l!==null)throw Error(c(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ns(a),a=Lt(o).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function Ss(e){return'href="'+da(e)+'"'}function Tr(e){return'link[rel="stylesheet"]['+e+"]"}function oh(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function ov(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),aa(t,"link",a),Ht(t),e.head.appendChild(t))}function Ns(e){return'[src="'+da(e)+'"]'}function kr(e){return"script[async]"+e}function uh(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+da(a.href)+'"]');if(l)return t.instance=l,Ht(l),l;var o=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ht(l),aa(l,"style",o),Yi(l,a.precedence,e),t.instance=l;case"stylesheet":o=Ss(a.href);var u=e.querySelector(Tr(o));if(u)return t.state.loading|=4,t.instance=u,Ht(u),u;l=oh(a),(o=Wa.get(o))&&du(l,o),u=(e.ownerDocument||e).createElement("link"),Ht(u);var h=u;return h._p=new Promise(function(b,T){h.onload=b,h.onerror=T}),aa(u,"link",l),t.state.loading|=4,Yi(u,a.precedence,e),t.instance=u;case"script":return u=Ns(a.src),(o=e.querySelector(kr(u)))?(t.instance=o,Ht(o),o):(l=a,(o=Wa.get(u))&&(l=w({},a),fu(l,o)),e=e.ownerDocument||e,o=e.createElement("script"),Ht(o),aa(o,"link",l),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Yi(l,a.precedence,e));return t.instance}function Yi(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=l.length?l[l.length-1]:null,u=o,h=0;h<l.length;h++){var b=l[h];if(b.dataset.precedence===t)u=b;else if(u!==o)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function du(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function fu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ki=null;function dh(e,t,a){if(Ki===null){var l=new Map,o=Ki=new Map;o.set(a,l)}else o=Ki,l=o.get(a),l||(l=new Map,o.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),o=0;o<a.length;o++){var u=a[o];if(!(u[wl]||u[Bt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var h=u.getAttribute(t)||"";h=e+h;var b=l.get(h);b?b.push(u):l.set(h,[u])}}return l}function fh(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function uv(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function mh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function dv(e,t,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var o=Ss(l.href),u=t.querySelector(Tr(o));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ii.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=u,Ht(u);return}u=t.ownerDocument||t,l=oh(l),(o=Wa.get(o))&&du(l,o),u=u.createElement("link"),Ht(u);var h=u;h._p=new Promise(function(b,T){h.onload=b,h.onerror=T}),aa(u,"link",l),a.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Ii.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var mu=0;function fv(e,t){return e.stylesheets&&e.count===0&&Qi(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&Qi(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&mu===0&&(mu=62500*Ig());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Qi(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>mu?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(o)}}:null}function Ii(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qi(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Pi=null;function Qi(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Pi=new Map,t.forEach(mv,e),Pi=null,Ii.call(e))}function mv(e,t){if(!(t.state.loading&4)){var a=Pi.get(e);if(a)var l=a.get(null);else{a=new Map,Pi.set(e,a);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<o.length;u++){var h=o[u];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(a.set(h.dataset.precedence,h),l=h)}l&&a.set(null,l)}o=t.instance,h=o.getAttribute("data-precedence"),u=a.get(h)||l,u===l&&a.set(null,o),a.set(h,o),this.count++,l=Ii.bind(this),o.addEventListener("load",l),o.addEventListener("error",l),u?u.parentNode.insertBefore(o,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var Ar={$$typeof:X,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function hv(e,t,a,l,o,u,h,b,T){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ha(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ha(0),this.hiddenUpdates=Ha(null),this.identifierPrefix=l,this.onUncaughtError=o,this.onCaughtError=u,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function hh(e,t,a,l,o,u,h,b,T,V,W,ae){return e=new hv(e,t,a,h,T,V,W,ae,b),t=1,u===!0&&(t|=24),u=Ra(3,null,null,t),e.current=u,u.stateNode=e,t=Kc(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:l,isDehydrated:a,cache:t},Xc(u),e}function ph(e){return e?(e=ts,e):ts}function gh(e,t,a,l,o,u){o=ph(o),l.context===null?l.context=o:l.pendingContext=o,l=tl(t),l.payload={element:a},u=u===void 0?null:u,u!==null&&(l.callback=u),a=al(e,l,t),a!==null&&(Sa(a,e,t),rr(a,e,t))}function vh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function hu(e,t){vh(e,t),(e=e.alternate)&&vh(e,t)}function yh(e){if(e.tag===13||e.tag===31){var t=kl(e,67108864);t!==null&&Sa(t,e,67108864),hu(e,67108864)}}function bh(e){if(e.tag===13||e.tag===31){var t=ja();t=Ta(t);var a=kl(e,t);a!==null&&Sa(a,e,t),hu(e,t)}}var Xi=!0;function pv(e,t,a,l){var o=K.T;K.T=null;var u=fe.p;try{fe.p=2,pu(e,t,a,l)}finally{fe.p=u,K.T=o}}function gv(e,t,a,l){var o=K.T;K.T=null;var u=fe.p;try{fe.p=8,pu(e,t,a,l)}finally{fe.p=u,K.T=o}}function pu(e,t,a,l){if(Xi){var o=gu(l);if(o===null)tu(e,t,l,Ji,a),Eh(e,l);else if(yv(o,e,t,a,l))l.stopPropagation();else if(Eh(e,l),t&4&&-1<vv.indexOf(e)){for(;o!==null;){var u=hn(o);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var h=At(u.pendingLanes);if(h!==0){var b=u;for(b.pendingLanes|=2,b.entangledLanes|=2;h;){var T=1<<31-Be(h);b.entanglements[1]|=T,h&=~T}_n(u),(it&6)===0&&(xi=$t()+500,wr(0))}}break;case 31:case 13:b=kl(u,2),b!==null&&Sa(b,u,2),Ui(),hu(u,2)}if(u=gu(l),u===null&&tu(e,t,l,Ji,a),u===o)break;o=u}o!==null&&l.stopPropagation()}else tu(e,t,l,null,a)}}function gu(e){return e=Is(e),vu(e)}var Ji=null;function vu(e){if(Ji=null,e=En(e),e!==null){var t=f(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=m(t),e!==null)return e;e=null}else if(a===31){if(e=p(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ji=e,null}function _h(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(H()){case me:return 2;case Ge:return 8;case He:case nt:return 32;case ct:return 268435456;default:return 32}default:return 32}}var yu=!1,ml=null,hl=null,pl=null,Or=new Map,Rr=new Map,gl=[],vv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Eh(e,t){switch(e){case"focusin":case"focusout":ml=null;break;case"dragenter":case"dragleave":hl=null;break;case"mouseover":case"mouseout":pl=null;break;case"pointerover":case"pointerout":Or.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rr.delete(t.pointerId)}}function Dr(e,t,a,l,o,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:u,targetContainers:[o]},t!==null&&(t=hn(t),t!==null&&yh(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function yv(e,t,a,l,o){switch(t){case"focusin":return ml=Dr(ml,e,t,a,l,o),!0;case"dragenter":return hl=Dr(hl,e,t,a,l,o),!0;case"mouseover":return pl=Dr(pl,e,t,a,l,o),!0;case"pointerover":var u=o.pointerId;return Or.set(u,Dr(Or.get(u)||null,e,t,a,l,o)),!0;case"gotpointercapture":return u=o.pointerId,Rr.set(u,Dr(Rr.get(u)||null,e,t,a,l,o)),!0}return!1}function wh(e){var t=En(e.target);if(t!==null){var a=f(t);if(a!==null){if(t=a.tag,t===13){if(t=m(a),t!==null){e.blockedOn=t,Ga(e.priority,function(){bh(a)});return}}else if(t===31){if(t=p(a),t!==null){e.blockedOn=t,Ga(e.priority,function(){bh(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=gu(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Ks=l,a.target.dispatchEvent(l),Ks=null}else return t=hn(a),t!==null&&yh(t),e.blockedOn=a,!1;t.shift()}return!0}function Sh(e,t,a){Zi(e)&&a.delete(t)}function bv(){yu=!1,ml!==null&&Zi(ml)&&(ml=null),hl!==null&&Zi(hl)&&(hl=null),pl!==null&&Zi(pl)&&(pl=null),Or.forEach(Sh),Rr.forEach(Sh)}function Fi(e,t){e.blockedOn===t&&(e.blockedOn=null,yu||(yu=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,bv)))}var Wi=null;function Nh(e){Wi!==e&&(Wi=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Wi===e&&(Wi=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],o=e[t+2];if(typeof l!="function"){if(vu(l||a)===null)continue;break}var u=hn(a);u!==null&&(e.splice(t,3),t-=3,go(u,{pending:!0,data:o,method:a.method,action:l},l,o))}}))}function Cs(e){function t(T){return Fi(T,e)}ml!==null&&Fi(ml,e),hl!==null&&Fi(hl,e),pl!==null&&Fi(pl,e),Or.forEach(t),Rr.forEach(t);for(var a=0;a<gl.length;a++){var l=gl[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<gl.length&&(a=gl[0],a.blockedOn===null);)wh(a),a.blockedOn===null&&gl.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var o=a[l],u=a[l+1],h=o[ia]||null;if(typeof u=="function")h||Nh(a);else if(h){var b=null;if(u&&u.hasAttribute("formAction")){if(o=u,h=u[ia]||null)b=h.formAction;else if(vu(o)!==null)continue}else b=h.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),Nh(a)}}}function Ch(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(h){return o=h})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function bu(e){this._internalRoot=e}ec.prototype.render=bu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var a=t.current,l=ja();gh(a,l,e,t,null,null)},ec.prototype.unmount=bu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gh(e.current,2,null,e,null,null),Ui(),t[Kn]=null}};function ec(e){this._internalRoot=e}ec.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ze();e={blockedOn:null,target:e,priority:t};for(var a=0;a<gl.length&&t!==0&&t<gl[a].priority;a++);gl.splice(a,0,e),a===0&&wh(e)}};var Th=n.version;if(Th!=="19.2.3")throw Error(c(527,Th,"19.2.3"));fe.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=v(t),e=e!==null?k(e):null,e=e===null?null:e.stateNode,e};var _v={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tc.isDisabled&&tc.supportsFiber)try{Ct=tc.inject(_v),wt=tc}catch{}}return xr.createRoot=function(e,t){if(!d(e))throw Error(c(299));var a=!1,l="",o=Mf,u=Uf,h=jf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=hh(e,1,!1,null,null,a,l,null,o,u,h,Ch),e[Kn]=t.current,eu(e),new bu(t)},xr.hydrateRoot=function(e,t,a){if(!d(e))throw Error(c(299));var l=!1,o="",u=Mf,h=Uf,b=jf,T=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(h=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(T=a.formState)),t=hh(e,1,!0,t,a??null,l,o,T,u,h,b,Ch),t.context=ph(null),a=t.current,l=ja(),l=Ta(l),o=tl(l),o.callback=null,al(a,o,l),a=l,t.current.lanes=a,pa(t,a),_n(t),e[Kn]=t.current,eu(e),new ec(t)},xr.version="19.2.3",xr}var Uh;function Av(){if(Uh)return Eu.exports;Uh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Eu.exports=kv(),Eu.exports}var Ov=Av();const Rv=cp(Ov),Cu=[{id:1,name:"Gojo",maxHp:105,hp:105,maxMana:100,mana:100,attack:24,defense:18,cursedOutput:30,cursedResistance:22,critChance:.05,rarity:"UR",passive:{name:"Six Eyes",description:"Cooldowns reduce 1 turn faster, cursed energy costs reduced by 10%",type:"cooldown-reduction",value:1,manaReduction:.1},abilities:[{id:"gojo-1",name:"Infinity",description:"Raises a cursed barrier for the next enemy turn",type:"defensive",barrierValue:60,barrierDuration:1,manaCost:30,cooldown:3,currentCooldown:0},{id:"gojo-2",name:"Red - Reversal",description:"Deals 34 base damage + 20% cursed output",type:"attack",damageBase:34,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",manaCost:25,cooldown:2,currentCooldown:0},{id:"gojo-3",name:"Blue - Lapse",description:"Deals 22 base damage + binds for 1 turn",type:"attack-stun",damageBase:22,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",bindingDuration:1,manaCost:35,cooldown:3,currentCooldown:0}],ultimate:{id:"gojo-ult",name:"Hollow Purple",description:"Deals 55 base damage to all enemies",type:"attack-all",damageBase:55,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",manaCost:75,cooldown:5,currentCooldown:0}},{id:2,name:"Yuji",maxHp:95,hp:95,maxMana:100,mana:100,attack:22,defense:18,cursedOutput:16,cursedResistance:18,critChance:.05,rarity:"SSR",passive:{name:"Vessel Body",description:"Heals 6 HP at the start of each turn",type:"regen",value:6},abilities:[{id:"yuji-1",name:"Divergent Fist",description:"Deals 30 base damage + 20% Attack",type:"attack",damageBase:30,scaling:.2,scalingStat:"attack",damageType:"physical",manaCost:20,cooldown:2,currentCooldown:0},{id:"yuji-2",name:"Manji Kick",description:"Deals 24 base damage + 20% Attack",type:"attack",damageBase:24,scaling:.2,scalingStat:"attack",damageType:"physical",manaCost:15,cooldown:1,currentCooldown:0},{id:"yuji-3",name:"Adrenaline Rush",description:"Reinforces Attack by 14 for 2 turns",type:"buff",buffStat:"attack",buffAmount:14,duration:2,manaCost:30,cooldown:3,currentCooldown:0}],ultimate:{id:"yuji-ult",name:"Black Flash",description:"Deals 70 base damage + 20% Attack",type:"attack",damageBase:70,scaling:.2,scalingStat:"attack",damageType:"physical",manaCost:70,cooldown:5,currentCooldown:0}},{id:3,name:"Megumi",maxHp:88,hp:88,maxMana:100,mana:100,attack:19,defense:16,cursedOutput:24,cursedResistance:18,critChance:.05,rarity:"SSR",passive:{name:"Ten Shadows",description:"All attacks deal 10% bonus damage",type:"damage-boost",value:.1},abilities:[{id:"megumi-1",name:"Divine Dogs",description:"Deals 24 base damage + 20% cursed output",type:"attack",damageBase:24,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",manaCost:20,cooldown:1,currentCooldown:0},{id:"megumi-2",name:"Nue",description:"Deals 20 base damage + binds for 1 turn",type:"attack-stun",damageBase:20,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",bindingDuration:1,manaCost:35,cooldown:3,currentCooldown:0},{id:"megumi-3",name:"Toad",description:"Heals all allies for 18 HP",type:"heal-all",healAmount:18,manaCost:40,cooldown:3,currentCooldown:0}],ultimate:{id:"megumi-ult",name:"Chimera Shadow Garden",description:"Deals 38 base damage to all enemies and heals allies",type:"ultimate-megumi",damageBase:38,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",healAmount:22,manaCost:80,cooldown:6,currentCooldown:0}},{id:4,name:"Nobara",maxHp:82,hp:82,maxMana:100,mana:100,attack:21,defense:15,cursedOutput:22,cursedResistance:16,critChance:.05,rarity:"SR",passive:{name:"Resonance",description:"Attacks have a 20% chance to hit twice",type:"double-hit",value:.2},abilities:[{id:"nobara-1",name:"Straw Doll",description:"Deals 24 base damage + 20% cursed output",type:"attack",damageBase:24,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",manaCost:20,cooldown:1,currentCooldown:0},{id:"nobara-2",name:"Hairpin",description:"Deals 32 base damage + 20% cursed output",type:"attack",damageBase:32,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",manaCost:30,cooldown:3,currentCooldown:0},{id:"nobara-3",name:"Resonance Link",description:"Applies 15% curse amplification for 2 turns",type:"debuff-mark",damageAmp:.15,duration:2,manaCost:35,cooldown:3,currentCooldown:0}],ultimate:{id:"nobara-ult",name:"Black Flash Hairpin",description:"Deals 64 base damage + 20% cursed output",type:"attack",damageBase:64,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",manaCost:70,cooldown:5,currentCooldown:0}},{id:5,name:"Nanami",maxHp:98,hp:98,maxMana:100,mana:100,attack:25,defense:20,cursedOutput:12,cursedResistance:18,critChance:.05,rarity:"SSR",passive:{name:"Ratio Technique",description:"Attacks deal 20% bonus damage to enemies below 50% HP",type:"execute",value:.2,threshold:.5},abilities:[{id:"nanami-1",name:"Blunted Blade",description:"Deals 26 base damage + 20% Attack",type:"attack",damageBase:26,scaling:.2,scalingStat:"attack",damageType:"physical",manaCost:20,cooldown:1,currentCooldown:0},{id:"nanami-2",name:"Weak Point Strike",description:"Deals 38 base damage, +20 if target below 50% HP",type:"attack-execute",damageBase:38,scaling:.2,scalingStat:"attack",damageType:"physical",bonusDamage:20,threshold:.5,manaCost:35,cooldown:2,currentCooldown:0},{id:"nanami-3",name:"Overtime",description:"Reinforces Attack, but costs HP",type:"buff-self-damage",buffStat:"attack",buffAmount:22,duration:3,selfDamage:8,manaCost:30,cooldown:4,currentCooldown:0}],ultimate:{id:"nanami-ult",name:"Collapse",description:"Deals 85 base damage + 20% Attack",type:"attack",damageBase:85,scaling:.2,scalingStat:"attack",damageType:"physical",manaCost:80,cooldown:6,currentCooldown:0}},{id:6,name:"Jogo",maxHp:78,hp:78,maxMana:100,mana:100,attack:20,defense:14,cursedOutput:26,cursedResistance:18,critChance:.05,rarity:"SR",passive:{name:"Disaster Flame",description:"Attacks inflict Cursed Burn for 6 damage",type:"burn",value:6},abilities:[{id:"jogo-1",name:"Ember Insects",description:"Deals 20 base damage + 20% cursed output",type:"attack",damageBase:20,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",manaCost:15,cooldown:1,currentCooldown:0},{id:"jogo-2",name:"Flame Pillar",description:"Deals 28 base damage + 20% cursed output",type:"attack",damageBase:28,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",manaCost:25,cooldown:2,currentCooldown:0},{id:"jogo-3",name:"Coffin of the Iron Mountain",description:"Binds a target for 2 turns",type:"stun-only",bindingDuration:2,manaCost:45,cooldown:4,currentCooldown:0}],ultimate:{id:"jogo-ult",name:"Maximum Meteor",description:"Deals 62 base damage to all enemies",type:"attack-all",damageBase:62,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",manaCost:75,cooldown:6,currentCooldown:0}},{id:7,name:"Panda",maxHp:115,hp:115,maxMana:100,mana:100,attack:26,defense:20,cursedOutput:14,cursedResistance:18,critChance:.05,rarity:"SSR",passive:{name:"Gorilla Core",description:"After 3 techniques, awaken Gorilla Core for 2 turns",type:"gorilla-core"},abilities:[{id:"panda-1",name:"Drumming Beat",description:"Deals 80 base damage + 120% Attack",type:"attack",damageBase:80,scaling:1.2,scalingStat:"attack",damageType:"physical",coreDefenseDebuffPercent:.2,coreDefenseDebuffDuration:2,manaCost:30,cooldown:2,currentCooldown:0},{id:"panda-2",name:"Charging Tackle",description:"Deals 60 base damage + 100% Attack, reinforces Defense",type:"attack",damageBase:60,scaling:1,scalingStat:"attack",damageType:"physical",selfDefenseBuffPercent:.15,selfDefenseBuffDuration:2,coreAllEnemies:!0,manaCost:40,cooldown:3,currentCooldown:0},{id:"panda-3",name:"Sister Core's Embrace",description:"Heals self for 20% HP and cleanses one affliction",type:"heal-self",healPercent:.2,cleanseDebuff:!0,resetTechniqueCounter:!0,manaCost:50,cooldown:4,currentCooldown:0}],ultimate:{id:"panda-ult",name:"Unblockable Drumming Beat",description:"Deals 100 base damage to all enemies (Gorilla Core required)",type:"attack-all",damageBase:100,scaling:1.5,scalingStat:"attack",damageType:"physical",requiresGorillaCore:!0,coreDamageBase:150,coreScaling:2,coreBindDuration:1,manaCost:100,cooldown:5,currentCooldown:0}},{id:8,name:"Toge Inumaki",maxHp:88,hp:88,maxMana:120,mana:120,attack:16,defense:15,cursedOutput:30,cursedResistance:20,critChance:.05,rarity:"SSR",passive:{name:"Cursed Speech Resonance",description:"Cursed Speech techniques apply Speech Mark stacks",type:"speech-mark"},abilities:[{id:"inumaki-1",name:"Don't Move",description:"Deals 40 base damage + 80% output and binds",type:"attack-stun",damageBase:40,scaling:.8,scalingStat:"cursedOutput",damageType:"cursed",bindingDuration:1,speechMarkStacks:1,manaCost:35,cooldown:2,currentCooldown:0},{id:"inumaki-2",name:"Get Crushed",description:"Deals 70 base damage + 110% output, lowers Attack",type:"attack",damageBase:70,scaling:1.1,scalingStat:"cursedOutput",damageType:"cursed",attackDebuffPercent:.25,attackDebuffDuration:2,speechMarkStacks:1,manaCost:45,cooldown:3,currentCooldown:0},{id:"inumaki-3",name:"Explode",description:"Deals 50 base damage to all enemies, marks primary",type:"attack-all-primary-mark",damageBase:50,scaling:.9,scalingStat:"cursedOutput",damageType:"cursed",applySpeechMark:!0,manaCost:40,cooldown:3,currentCooldown:0}],ultimate:{id:"inumaki-ult",name:"Blast Away",description:"Deals 120 base damage and binds all enemies",type:"attack-all",damageBase:120,scaling:1.8,scalingStat:"cursedOutput",damageType:"cursed",bindingAllDuration:1,speechMarkAllStacks:2,recoilPercent:.1,manaCost:120,cooldown:6,currentCooldown:0}},{id:9,name:"Maki Zen'in",maxHp:100,hp:100,maxMana:80,mana:80,attack:28,defense:22,cursedOutput:10,cursedResistance:16,critChance:.05,rarity:"SSR",passive:{name:"Heavenly Restriction",description:"No natural cursed energy regen, +20% crit chance",type:"heavenly-restriction",critBonus:.2},abilities:[{id:"maki-1",name:"Cursed Tool Flurry",description:"Deals 50 base damage + 100% Attack",type:"attack",damageBase:50,scaling:1,scalingStat:"attack",damageType:"physical",isBasic:!0,onCritCooldownReduction:!0,manaCost:25,cooldown:1,currentCooldown:0},{id:"maki-2",name:"Precision Thrust",description:"Deals 90 base damage + 140% Attack, guaranteed crit",type:"attack",damageBase:90,scaling:1.4,scalingStat:"attack",damageType:"physical",guaranteedCrit:!0,damageAmp:.15,damageAmpDuration:2,manaCost:40,cooldown:3,currentCooldown:0},{id:"maki-3",name:"Weapon Arsenal",description:"Deals 40 base damage to 2 random enemies",type:"attack-random",damageBase:40,scaling:.8,scalingStat:"attack",damageType:"physical",targetCount:2,selfAttackBuffPercent:.3,selfAttackBuffDuration:3,setNextBasicDouble:!0,manaCost:35,cooldown:3,currentCooldown:0}],ultimate:{id:"maki-ult",name:"Three-Section Staff Maelstrom",description:"Deals 110 base damage to all enemies",type:"attack-all",damageBase:110,scaling:1.7,scalingStat:"attack",damageType:"physical",energyRestorePerHit:15,grantFlowStateTurns:3,manaCost:80,cooldown:5,currentCooldown:0}}],Dv="/assets/gojo-oQwO0DXj.png",xv={Gojo:Dv,Yuji:null,Megumi:null,Nobara:null,Todo:null,Nanami:null,Sukuna:null,Mahito:null,Jogo:null},Mv={"gojo-1":null,"gojo-2":null,"gojo-3":null,"gojo-ult":null,"yuji-1":null,"yuji-2":null,"yuji-3":null,"yuji-ult":null,"megumi-1":null,"megumi-2":null,"megumi-3":null,"megumi-ult":null,"sukuna-1":null,"sukuna-2":null,"sukuna-3":null,"sukuna-ult":null,"mahito-1":null,"mahito-2":null,"mahito-3":null,"mahito-ult":null,"jogo-1":null,"jogo-2":null,"jogo-3":null,"jogo-ult":null,"nobara-1":null,"nobara-2":null,"nobara-3":null,"nobara-ult":null,"todo-1":null,"todo-2":null,"todo-3":null,"todo-ult":null,"nanami-1":null,"nanami-2":null,"nanami-3":null,"nanami-ult":null},dc=i=>xv[i]||null,Uv=i=>Mv[i]||null;function jv({characters:i,selectedTeam:n,onSelect:r,onStartBattle:c,onStartPvpQuick:d,onStartPvpRanked:f,onCancelPvpQueue:m,pvpStatus:p,characterProgress:g,teamPresets:v,onSavePreset:k,onApplyPreset:w}){const D=Q=>n.some(ye=>ye.id===Q),z=g||{},x=n.length===3,L=[0,1,2].map(Q=>n[Q]).filter(Boolean),[Y,ne]=s.useState(""),[re,X]=s.useState(i[0]?.id||null),[ve,Ce]=s.useState(!1),[R,ce]=s.useState(null),P=i.find(Q=>Q.id===re)||i[0],oe=P?z[P.id]||{level:1,xp:0}:{level:1,xp:0},ze=100+oe.level*25;Math.min(100,Math.floor(oe.xp/ze*100));const Le=i.filter(Q=>Q.name.toLowerCase().includes(Y.toLowerCase())),be=n.length>=3,Ye=P?D(P.id):!1,Xe=Q=>{D(Q.id)?r(n.filter(ye=>ye.id!==Q.id)):n.length<3&&r([...n,Q])},Ee=(Q,ye)=>{const A=i.find(pe=>pe.id===ye);if(!A)return;const F=[...n],ie=F.findIndex(pe=>pe.id===A.id);ie>=0&&F.splice(ie,1),F.length<3?Q<=F.length?F.splice(Q,0,A):F.push(A):Q<3&&(F[Q]=A),r(F.slice(0,3))},K=Q=>{switch(Q){case"UR":return"linear-gradient(90deg, #ff6b6b, #feca57)";case"SSR":return"#9b59b6";case"SR":return"#3498db";default:return"#95a5a6"}},fe=({character:Q,size:ye="normal"})=>{const A=Q.portraitUrl||dc(Q.name);return s.createElement("div",{className:`select-portrait ${ye}`},A?s.createElement("img",{src:A,alt:Q.name,className:"select-portrait-img"}):s.createElement("div",{className:"select-portrait-placeholder"},s.createElement("span",{className:"select-portrait-initial"},Q.name[0])))},ge=P?[...P.abilities.slice(0,3),P.ultimate].filter(Boolean):[];return s.createElement("div",{className:"team-select-container"},s.createElement("div",{className:"team-select-grid"},s.createElement("div",{className:"team-left-column"},s.createElement("section",{className:"character-details-panel"},P?s.createElement(s.Fragment,null,s.createElement("div",{className:"details-header-row"},s.createElement("div",{className:"details-header-left"},s.createElement("div",{className:`details-portrait rarity-${P.rarity.toLowerCase()}`},s.createElement(fe,{character:P})),s.createElement("div",{className:"details-meta"},s.createElement("h2",null,P.name),s.createElement("div",{className:"details-level"},"Lv ",oe.level))),s.createElement("div",{className:"details-header-right"},s.createElement("button",{className:"details-primary-btn",onClick:()=>Xe(P),disabled:be&&!Ye},Ye?" Selected":be?"Squad Full":"Add to Squad"))),s.createElement("div",{className:"details-passive-line"},s.createElement("span",null,"Passive:")," ",P.passive.name,"  ",P.passive.description),s.createElement("div",{className:"details-skills"},s.createElement("div",{className:"skills-grid"},ge.map(Q=>{const ye=P?.ultimate?.id===Q.id;return s.createElement("div",{key:Q.id,className:"skill-card"},s.createElement("span",{className:"skill-icon"},""),s.createElement("span",{className:"skill-name"},Q.name),s.createElement("span",{className:"skill-cost"}," ",Q.manaCost??0,"   ",Q.cooldown),s.createElement("div",{className:"skill-tooltip"},s.createElement("div",{className:"skill-tooltip-title"},Q.name),s.createElement("div",{className:"skill-tooltip-desc"},Q.description),s.createElement("div",{className:"skill-tooltip-meta"},s.createElement("span",null,"Cursed Energy: ",Q.manaCost??0),s.createElement("span",null,"Cooldown: ",Q.cooldown),s.createElement("span",null,"Type: ",ye?"Domain Expansion":"Technique"))))})))):s.createElement("div",{className:"details-empty"},s.createElement("div",{className:"empty-state-icon"},""),s.createElement("div",{className:"empty-state-text"},"Select a character to view details"))),s.createElement("section",{className:"character-roster-panel"},s.createElement("div",{className:"section-header"},s.createElement("h2",null,"Character Roster"),s.createElement("span",{className:"selection-count"},n.length,"/3 Selected")),s.createElement("div",{className:"roster-search-bar"},s.createElement("span",{className:"search-icon"},""),s.createElement("input",{type:"text",value:Y,onChange:Q=>ne(Q.target.value),placeholder:"Search sorcerers...",className:"search-input"})),s.createElement("div",{className:"roster-grid-container"},Le.map(Q=>{const ye=z[Q.id]||{level:1};return s.createElement("div",{key:Q.id,className:`roster-character-card rarity-${Q.rarity.toLowerCase()} ${D(Q.id)?"is-selected":""} ${re===Q.id?"is-focused":""}`,onClick:()=>X(Q.id),onDoubleClick:()=>Xe(Q),draggable:!0,onDragStart:A=>{A.dataTransfer.setData("text/plain",String(Q.id))}},D(Q.id)&&s.createElement("div",{className:"card-selected-badge"},""),s.createElement("div",{className:"card-portrait"},s.createElement(fe,{character:Q,size:"small"})),s.createElement("div",{className:"card-info"},s.createElement("div",{className:"card-name"},Q.name),s.createElement("div",{className:"card-level"},"Lv ",ye.level)))})))),s.createElement("div",{className:"team-right-column"},s.createElement("section",{className:"squad-panel"},s.createElement("div",{className:"team-panel-header"},s.createElement("h2",null,"Your Squad"),n.length>0&&s.createElement("button",{className:"clear-btn",onClick:()=>r([])},"Clear All")),s.createElement("div",{className:"team-slots team-panel-slots"},[0,1,2].map(Q=>s.createElement("div",{key:Q,className:`team-slot ${n[Q]?"filled":"empty"} ${R===Q?"drag-over":""}`,onDragOver:ye=>ye.preventDefault(),onDragEnter:()=>ce(Q),onDragLeave:()=>ce(null),onDrop:ye=>{ye.preventDefault();const A=Number(ye.dataTransfer.getData("text/plain"));Ee(Q,A),ce(null)}},n[Q]?s.createElement(s.Fragment,null,s.createElement("button",{className:"slot-remove",onClick:()=>r(n.filter((ye,A)=>A!==Q)),title:"Remove"},""),s.createElement("div",{className:"slot-portrait"},s.createElement(fe,{character:n[Q]})),s.createElement("div",{className:"slot-info"},s.createElement("div",{className:"slot-name"},n[Q].name),s.createElement("div",{className:"slot-rarity",style:{color:K(n[Q].rarity)}},n[Q].rarity),s.createElement("div",{className:"slot-level"},"Lv ",(z[n[Q].id]||{level:1}).level))):s.createElement("div",{className:"slot-empty-state"},s.createElement("div",{className:"empty-icon"},"+"),s.createElement("div",{className:"empty-text"},"Slot ",Q+1))))),s.createElement("div",{className:`team-ready-indicator ${x?"ready":""}`},x?s.createElement(s.Fragment,null,s.createElement("span",{className:"ready-icon"},""),s.createElement("span",null,"Team Ready!")):s.createElement("span",null,"Select ",3-n.length," more"))),s.createElement("section",{className:"match-controls"},p?s.createElement("div",{className:"pvp-status-container"},s.createElement("div",{className:`pvp-status pvp-status-${p}`},p==="searching"&&s.createElement(s.Fragment,null,s.createElement("div",{className:"status-spinner"}),s.createElement("div",{className:"status-text"},s.createElement("div",{className:"status-title"},"Searching for opponent..."),s.createElement("div",{className:"status-subtitle"},"Finding a worthy adversary"))),p==="match_found"&&s.createElement(s.Fragment,null,s.createElement("div",{className:"status-icon"},""),s.createElement("div",{className:"status-text"},s.createElement("div",{className:"status-title"},"Match Found!"),s.createElement("div",{className:"status-subtitle"},"Preparing for battle..."))),p==="timeout"&&s.createElement(s.Fragment,null,s.createElement("div",{className:"status-icon"},""),s.createElement("div",{className:"status-text"},s.createElement("div",{className:"status-title"},"Search Timed Out"),s.createElement("div",{className:"status-subtitle"},"No opponents found"))),p==="error"&&s.createElement(s.Fragment,null,s.createElement("div",{className:"status-icon"},""),s.createElement("div",{className:"status-text"},s.createElement("div",{className:"status-title"},"Connection Error"),s.createElement("div",{className:"status-subtitle"},"Please try again")))),(p==="searching"||p==="match_found")&&s.createElement("button",{className:"cancel-queue-btn",onClick:m},"Cancel Search")):s.createElement(s.Fragment,null,s.createElement("button",{className:"match-primary-btn",disabled:!x,onClick:d||c},"Quick PvP"),s.createElement("div",{className:"match-secondary-buttons"},s.createElement("button",{className:"match-secondary-btn",disabled:!x,onClick:f},"Ranked PvP"),s.createElement("button",{className:"match-secondary-btn",disabled:!x,onClick:c},"Vs AI"),s.createElement("button",{className:"match-secondary-btn",onClick:()=>Ce(Q=>!Q)},ve?"Hide Teams":"Saved Teams"),s.createElement("button",{className:"match-secondary-btn",disabled:!0,title:"Coming soon"},"Random")))))),ve&&s.createElement("div",{className:"presets-modal-overlay",onClick:()=>Ce(!1)},s.createElement("div",{className:"presets-modal",onClick:Q=>Q.stopPropagation()},s.createElement("div",{className:"modal-header"},s.createElement("h3",null,"Saved Teams"),s.createElement("button",{className:"modal-close",onClick:()=>Ce(!1)},"")),s.createElement("div",{className:"preset-cards"},[1,2,3].map(Q=>{const ye=v?.[Q],A=ye?.name||`Preset ${Q}`;return s.createElement("div",{key:Q,className:"preset-card-modal"},s.createElement("div",{className:"preset-card-header"},s.createElement("span",{className:"preset-number"},"#",Q),s.createElement("span",{className:"preset-name"},A)),s.createElement("div",{className:"preset-card-actions"},s.createElement("button",{className:"preset-action-btn save",onClick:()=>{k?.(Q,A,L.map(F=>F.id)),Ce(!1)},disabled:!x}," Save Current"),s.createElement("button",{className:"preset-action-btn load",onClick:()=>{ye?.character_ids&&w?.(ye.character_ids),Ce(!1)},disabled:!ye?.character_ids?.length}," Load")))})))))}function Bv({playerTeam:i,enemyTeam:n,selectedEnemy:r,setSelectedEnemy:c,queueAbility:d,queuedActions:f,removeQueuedAction:m,battleLog:p,turn:g,gameOver:v,resetGame:k,actedCharacters:w,pendingAbility:D,setPendingAbility:z,endTurn:x,profile:L,matchSummary:Y,combatEvents:ne,battleShake:re,isPvp:X,isMyTurn:ve,storyBattle:Ce,onExitStory:R}){const[ce,P]=s.useState(null),[oe,ze]=s.useState([]),[Le,be]=s.useState([]),[Ye,Xe]=s.useState(!1),[Ee,K]=s.useState(!1),[fe,ge]=s.useState([]),Q=s.useRef([]),ye=s.useRef([]),A=p?.[p.length-1]||"",F=s.useMemo(()=>new Set(["attack","attack-stun","stun-only","ultimate-mahito","attack-execute","debuff-mark","attack-all-primary-mark","attack-random"]),[]);s.useEffect(()=>{if(v)return;P("YOUR TURN");const H=setTimeout(()=>P(null),1200);return()=>clearTimeout(H)},[g,v]);const ie=(H,me,Ge)=>{const He=H.map(ct=>ct.hp),nt=Ge.current;me(ct=>{const Rt=[...ct];return He.forEach((bt,Ct)=>{nt[Ct]!=null&&bt<nt[Ct]?(Rt[Ct]=nt[Ct],setTimeout(()=>{me(wt=>{const ot=[...wt];return ot[Ct]=bt,ot})},360)):Rt[Ct]=bt}),Rt}),Ge.current=He};s.useEffect(()=>{ie(i,ze,Q)},[i]),s.useEffect(()=>{ie(n,be,ye)},[n]),s.useEffect(()=>{!D?.needsTarget&&c&&c(null)},[D,c]);const pe=(H,me,Ge,He,nt)=>{if(w.includes(H)||nt.hp<=0||He.currentCooldown>0)return;let ct=He.manaCost||0;if(nt.passive?.manaReduction&&(ct=Math.floor(ct*(1-nt.passive.manaReduction))),nt.mana<ct)return;const Rt=F.has(He.type);if(D&&D.characterIndex===H&&D.abilityIndex===me&&D.isUltimate===Ge){z(null),c?.(null);return}if(Rt){z({characterIndex:H,abilityIndex:me,isUltimate:Ge,ability:He,needsTarget:Rt}),c?.(null);return}z(null),c?.(null),d(H,me,Ge,null)},ke=H=>{!D||!D.needsTarget||!n[H]||n[H].hp<=0||(c?.(H),d(D.characterIndex,D.abilityIndex,D.isUltimate,H),z(null))},je=H=>{const me=H.toLowerCase();return me.includes("victory")?"log-win":me.includes("defeat")||me.includes("ko")?"log-lose":me.includes("heals")||H.includes("")?"log-heal":me.includes("bound")||me.includes("binding")||H.includes("")?"log-stun":me.includes("burn")||H.includes("")?"log-burn":me.includes("barrier")||H.includes("")?"log-shield":me.includes("damage")||H.includes("")||H.includes("")?"log-hit":""},Ke=({character:H,size:me="normal"})=>{const Ge=dc(H.name),He=me==="small"?"portrait-small":"";return s.createElement("div",{className:`portrait-image-container ${He}`},Ge?s.createElement("img",{src:Ge,alt:H.name,className:"portrait-img"}):s.createElement("div",{className:"portrait-placeholder"},s.createElement("span",{className:"portrait-initial"},H.name[0]),s.createElement("span",{className:"portrait-name-small"},H.name.substring(1,4))))},yt=({ability:H,isUltimate:me})=>{const Ge=Uv(H.id);return s.createElement("div",{className:`ability-icon-container ${me?"ultimate":""}`},Ge?s.createElement("img",{src:Ge,alt:H.name,className:"ability-img"}):s.createElement("div",{className:"ability-placeholder"},s.createElement("span",{className:"ability-initial"},H.name.substring(0,2))),me&&s.createElement("span",{className:"ultimate-star"},""))},Re=({character:H,index:me,isPlayer:Ge,onAbilityClick:He,actedCharacters:nt,pendingAbility:ct,hpPreview:Rt})=>{const bt=H.hp/H.maxHp*100,Ct=Rt!=null?Rt/H.maxHp*100:bt,wt=H.mana/H.maxMana*100,ot=H.hp<=0,Be=nt.includes(me),kt=ct&&ct.characterIndex===me,ra=Ge&&me===i.length-1;H.level,H.xp;const y=Na(me),C=y>=0?f[y]:null,se=C?C.isUltimate?H.ultimate:H.abilities[C.abilityIndex]:null,Ie=()=>{y>=0&&m?.(y)},At=()=>bt>50?"#2ecc71":bt>25?"#f1c40f":"#e74c3c",Zt=H.states?.binding||0,Ft=H.states?.sleep||0,Ca=H.barrier?.value||0,ut=(H.effects?.dots||[]).find(Ze=>Ze.type==="burn"),Ha=(H.effects?.dots||[]).find(Ze=>Ze.type==="poison"),pa=H.stacks?.speechMark||0,_l=(H.effects?.buffs||[]).find(Ze=>Ze.stat==="attack"),El=(H.effects?.buffs||[]).find(Ze=>Ze.stat==="defense"),ga=Zt>0||Ft>0||Ca>0||ut||Ha||pa>0,Yn=Zt>0||Ft>0||_l||El,Ta=(ne||[]).filter(Ze=>Ze.team===(Ge?"player":"enemy")&&Ze.index===me),ka=Ta.some(Ze=>Ze.type==="damage"&&Ze.big);return s.createElement("div",{className:`character-row ${ot?"dead":""} ${Be?"acted":""} ${kt?"selecting-target":""} ${Ta.length?"hit-flash":""} ${ka?"crit-flash":""}`},s.createElement("div",{className:`portrait-container ${kt?"active":""}`},s.createElement("div",{className:"portrait-frame"},s.createElement(Ke,{character:H}),ga&&s.createElement("div",{className:"status-icons"},Ca>0&&s.createElement("span",{className:"status-icon invincible",title:`Barrier: ${Ca}`},""),ut&&s.createElement("span",{className:"status-icon burning",title:`Cursed Burn: ${ut.damage} damage`},""),Ha&&s.createElement("span",{className:"status-icon burning",title:`Cursed Poison: ${Ha.damage} damage`},""),pa>0&&s.createElement("span",{className:"status-icon marked",title:`Speech Mark: ${pa} stack(s)`},"")),s.createElement("div",{className:`portrait-rarity ${H.rarity.toLowerCase()}`},H.rarity),Be&&!ot&&s.createElement("div",{className:"acted-overlay"},s.createElement("span",null,"")),ot&&s.createElement("div",{className:"dead-overlay"},s.createElement("span",null,""))),s.createElement("p",{className:"portrait-name"},H.name),H.passive&&s.createElement("div",{className:"passive-indicator"},s.createElement("span",{className:"passive-tag"},"Passive"),s.createElement("div",{className:"passive-tooltip"},s.createElement("strong",null,H.passive.name),s.createElement("span",null,H.passive.description))),s.createElement("div",{className:"portrait-hp-bar"},s.createElement("div",{className:"portrait-hp-preview",style:{width:`${Ct}%`}}),s.createElement("div",{className:"portrait-hp-fill",style:{width:`${bt}%`,background:At()}}),s.createElement("span",{className:"portrait-hp-text"},H.hp)),s.createElement("div",{className:"portrait-mana-bar"},s.createElement("div",{className:"portrait-mana-fill",style:{width:`${wt}%`}}),s.createElement("span",{className:"portrait-mana-text"},H.mana))),Ge&&Yn&&s.createElement("div",{className:"player-status-row"},Zt>0&&s.createElement("span",{className:"status-pill stunned"}," Bound ",Zt),Ft>0&&s.createElement("span",{className:"status-pill stunned"}," Sleep ",Ft),_l&&s.createElement("span",{className:"status-pill buffed"}," Attack Up"),El&&s.createElement("span",{className:"status-pill buffed"}," Defense Up")),Ge&&s.createElement("div",{className:"ability-cards"},s.createElement("div",{className:`ability-card queue-slot ${C?"queued":""}`,onClick:C?Ie:void 0,title:C?"Click to un-queue":"Queued technique slot"},s.createElement("div",{className:"ability-card-art"},se?s.createElement(yt,{ability:se,isUltimate:C?.isUltimate}):s.createElement("div",{className:"ability-placeholder"},s.createElement("span",{className:"ability-initial"},"Q"))),s.createElement("div",{className:"ability-info"},s.createElement("div",{className:"ability-name"},se?se.name:"Queued"),s.createElement("div",{className:"ability-desc"},C?"Click to clear":"Technique slot")),y>=0&&s.createElement("span",{className:"ability-queue-order"},"#",y+1)),H.abilities.map((Ze,Ga)=>s.createElement(ma,{key:Ze.id,ability:Ze,index:Ga,isSelected:kt&&!ct.isUltimate&&ct.abilityIndex===Ga,isQueued:f.some(Dt=>Dt.characterIndex===me&&Dt.abilityIndex===Ga&&!Dt.isUltimate),queuedIndex:La(me,Ga,!1),onSelect:()=>He(me,Ga,!1,Ze,H),disabled:Be||ot||Ze.currentCooldown>0||Ze.requiresGorillaCore&&H.flags?.gorillaCoreTurns<=0,characterMana:H.mana,character:H,tooltipUp:ra})),s.createElement(ma,{ability:H.ultimate,index:0,isSelected:kt&&ct.isUltimate,isQueued:f.some(Ze=>Ze.characterIndex===me&&Ze.isUltimate),queuedIndex:La(me,0,!0),onSelect:()=>He(me,0,!0,H.ultimate,H),disabled:Be||ot||H.ultimate.currentCooldown>0||H.ultimate.requiresGorillaCore&&H.flags?.gorillaCoreTurns<=0,isUltimate:!0,characterMana:H.mana,character:H,tooltipUp:ra})),!Ge&&ga&&s.createElement("div",{className:"enemy-status-effects"},Ca>0&&s.createElement("div",{className:"status-badge invincible"},s.createElement("span",{className:"status-emoji"},""),s.createElement("span",{className:"status-count"},Math.round(Ca))),Zt>0&&s.createElement("div",{className:"status-badge stunned"},s.createElement("span",{className:"status-emoji"},""),s.createElement("span",{className:"status-count"},Zt)),ut&&s.createElement("div",{className:"status-badge burning"},s.createElement("span",{className:"status-emoji"},""),s.createElement("span",{className:"status-count"},ut.damage)),pa>0&&s.createElement("div",{className:"status-badge marked"},s.createElement("span",{className:"status-emoji"},""),s.createElement("span",{className:"status-count"},pa))),Ta.length>0&&s.createElement("div",{className:"damage-floats"},Ta.map(Ze=>s.createElement("span",{key:Ze.id,className:`damage-float ${Ze.type} ${Ze.big?"big":""}`},Ze.type==="heal"?`+${Ze.amount}`:`-${Ze.amount}`))))},Pt=({character:H,index:me,isSelected:Ge,onSelect:He,onHover:nt,pendingAbility:ct,hpPreview:Rt})=>{const bt=H.hp/H.maxHp*100,Ct=Rt!=null?Rt/H.maxHp*100:bt,wt=H.mana/H.maxMana*100,ot=H.hp<=0,Be=ct&&ct.needsTarget&&!ot,kt=()=>bt>50?"#2ecc71":bt>25?"#f1c40f":"#e74c3c",ra=H.states?.binding||0,y=H.states?.sleep||0,C=H.barrier?.value||0,se=(H.effects?.dots||[]).find(ut=>ut.type==="burn"),Ie=(H.effects?.dots||[]).find(ut=>ut.type==="poison"),At=H.stacks?.speechMark||0,Zt=ra>0||y>0||C>0||se||Ie||At>0,Ft=(ne||[]).filter(ut=>ut.team==="enemy"&&ut.index===me),Ca=Ft.some(ut=>ut.type==="damage"&&ut.big);return s.createElement("div",{className:`character-row enemy ${ot?"dead":""} ${Ge?"selected":""} ${Be?"targetable":""} ${Ft.length?"hit-flash":""} ${Ca?"crit-flash":""}`,onClick:()=>Be&&He(me),onMouseEnter:()=>Be&&nt?.(me),onMouseLeave:()=>Be&&nt?.(null)},s.createElement("div",{className:`portrait-container ${Be?"targetable":""}`},s.createElement("div",{className:"portrait-frame"},s.createElement(Ke,{character:H}),s.createElement("div",{className:`portrait-rarity ${H.rarity.toLowerCase()}`},H.rarity),ot&&s.createElement("div",{className:"dead-overlay"},s.createElement("span",null,"")),Be&&s.createElement("div",{className:"target-indicator"},s.createElement("span",null,""))),s.createElement("p",{className:"portrait-name"},H.name),s.createElement("div",{className:"portrait-hp-bar"},s.createElement("div",{className:"portrait-hp-preview",style:{width:`${Ct}%`}}),s.createElement("div",{className:"portrait-hp-fill",style:{width:`${bt}%`,background:kt()}}),s.createElement("span",{className:"portrait-hp-text"},H.hp)),s.createElement("div",{className:"portrait-mana-bar"},s.createElement("div",{className:"portrait-mana-fill",style:{width:`${wt}%`}}),s.createElement("span",{className:"portrait-mana-text"},H.mana))),Zt&&s.createElement("div",{className:"enemy-status-effects"},C>0&&s.createElement("div",{className:"status-badge invincible"},s.createElement("span",{className:"status-emoji"},""),s.createElement("span",{className:"status-count"},Math.round(C))),ra>0&&s.createElement("div",{className:"status-badge stunned"},s.createElement("span",{className:"status-emoji"},""),s.createElement("span",{className:"status-count"},ra)),se&&s.createElement("div",{className:"status-badge burning"},s.createElement("span",{className:"status-emoji"},""),s.createElement("span",{className:"status-count"},se.damage)),Ie&&s.createElement("div",{className:"status-badge burning"},s.createElement("span",{className:"status-emoji"},""),s.createElement("span",{className:"status-count"},Ie.damage)),At>0&&s.createElement("div",{className:"status-badge marked"},s.createElement("span",{className:"status-emoji"},""),s.createElement("span",{className:"status-count"},At))),Ft.length>0&&s.createElement("div",{className:"damage-floats"},Ft.map(ut=>s.createElement("span",{key:ut.id,className:`damage-float ${ut.type} ${ut.big?"big":""}`},ut.type==="heal"?`+${ut.amount}`:`-${ut.amount}`))))},ma=({ability:H,index:me,isSelected:Ge,isQueued:He,queuedIndex:nt,onSelect:ct,disabled:Rt,isUltimate:bt,characterMana:Ct,character:wt,tooltipUp:ot})=>{let Be=H.manaCost||0;wt.passive?.manaReduction&&(Be=Math.floor(Be*(1-wt.passive.manaReduction)));const kt=Ct<Be,ra=Rt||kt,y=F.has(H.type);return s.createElement("div",{className:`ability-card ${Ge?"selected":""} ${He?"queued":""} ${ra?"disabled":""} ${bt?"ultimate":""} ${kt?"no-mana":""} ${y?"needs-target":""} ${ot?"tooltip-up":""}`,onClick:()=>!ra&&ct()},nt&&s.createElement("span",{className:"ability-queue-order"},"#",nt),y&&s.createElement("span",{className:"ability-target-tag",title:"Requires a target"},""),s.createElement("div",{className:"ability-card-art"},s.createElement(yt,{ability:H,isUltimate:bt})),s.createElement("div",{className:"ability-name",title:H.name},H.name),H.currentCooldown>0&&s.createElement("div",{className:"ability-cooldown-overlay"},s.createElement("span",null,H.currentCooldown),s.createElement("span",{className:"ability-cooldown-label"},"CD")),s.createElement("div",{className:`ability-mana-cost ${kt?"not-enough":""}`},s.createElement("span",null,"",Be)),s.createElement("div",{className:"ability-tooltip"},s.createElement("div",{className:"tooltip-header"},s.createElement("h4",null,H.name),bt&&s.createElement("span",{className:"tooltip-ultimate"},"DOMAIN EXPANSION")),s.createElement("p",null,H.description),s.createElement("div",{className:"tooltip-stats"},s.createElement("span",{className:kt?"not-enough":""}," ",Be),s.createElement("span",null," ",H.cooldown," CD"),y&&s.createElement("span",null," Target"))))};i.filter(H=>H.hp>0).length,w.length;const ha=L?.display_name||"Player",Je=L?.avatar_url||null,rt=L?.account_level||1,Et=X?"Opponent":"Cursed AI",Ue=X?ve?"Awaiting Turn":"Taking Turn":"Awaiting Turn",$a=H=>{const me=i[H.characterIndex];if(!me)return"Unknown";const Ge=H.isUltimate?me.ultimate:me.abilities[H.abilityIndex],He=H.enemyIndex!=null?n[H.enemyIndex]?.name:null;return`${me.name}: ${Ge?.name||"Technique"}${He?`  ${He}`:""}`},La=(H,me,Ge)=>{const He=f.findIndex(nt=>nt.characterIndex===H&&nt.isUltimate===Ge&&(Ge||nt.abilityIndex===me));return He===-1?null:He+1},Na=H=>f.findIndex(me=>me.characterIndex===H),mn=()=>{X&&!ve||(ge(f),K(!0))},tn=()=>{K(!1),x(fe)},Gn=H=>me=>{me.dataTransfer.setData("text/plain",String(H))},Vn=H=>{H.preventDefault()},$t=H=>me=>{me.preventDefault();const Ge=Number(me.dataTransfer.getData("text/plain"));Number.isNaN(Ge)||ge(He=>{const nt=[...He],[ct]=nt.splice(Ge,1);return nt.splice(H,0,ct),nt})};return s.createElement("div",{className:`battle-screen ${re?"screen-shake":""} ${D?.needsTarget?"targeting-active":""}`},s.createElement("div",{className:"battle-background"}),ce&&s.createElement("div",{className:"turn-banner"},s.createElement("span",null,ce)),s.createElement("div",{className:"battle-hud"},s.createElement("div",{className:"hud-side"},s.createElement("div",{className:"team-indicator player"},s.createElement("span",null,"Your Team"),s.createElement("div",{className:"team-indicator-meta"},s.createElement("div",{className:"team-avatar"},Je?s.createElement("img",{src:Je,alt:ha}):s.createElement("span",null,ha.slice(0,1))),s.createElement("div",null,s.createElement("div",{className:"team-name"},ha),s.createElement("div",{className:"team-subtitle"},"Lv ",rt))))),s.createElement("div",{className:"hud-center"},s.createElement("div",{className:"turn-display"},s.createElement("span",{className:"turn-label"},"TURN"),s.createElement("span",{className:"turn-number"},g)),s.createElement("button",{className:"end-turn-btn",onClick:mn,disabled:X&&!ve},X&&!ve?"Waiting...":"End Turn"),s.createElement("div",{className:"combat-feed-ticker"},s.createElement("span",{className:"ticker-label"},"FEED"),s.createElement("span",{className:"ticker-text"},A||"Awaiting first strike..."),s.createElement("button",{className:"combat-feed-btn",onClick:()=>Xe(!0)},"Combat Feed"))),s.createElement("div",{className:"hud-side right"},s.createElement("div",{className:"team-indicator enemy"},s.createElement("span",null,"Enemy Team"),s.createElement("div",{className:"team-indicator-meta"},s.createElement("div",null,s.createElement("div",{className:"team-name"},Et),s.createElement("div",{className:"team-subtitle"},Ue)),s.createElement("div",{className:"team-avatar"},s.createElement("span",null,X?"VS":"AI"))))),D&&D.needsTarget&&s.createElement("div",{className:"targeting-prompt"},s.createElement("span",null," Select a target for ",D.ability.name,"!"),s.createElement("button",{className:"cancel-btn",onClick:()=>z(null)},"Cancel"))),v&&s.createElement("div",{className:`game-over-overlay ${v}`},s.createElement("div",{className:"game-over-content"},s.createElement("h1",null,v==="win"?" VICTORY! ":" DEFEAT "),!Ce&&Y&&s.createElement("div",{className:"match-summary"},s.createElement("div",{className:"summary-row"},s.createElement("span",null,"Account XP"),s.createElement("strong",null,"+",Y.accountGain," (Lv ",Y.accountLevel,")")),s.createElement("div",{className:"summary-row"},s.createElement("span",null,"Character XP"),s.createElement("strong",null,"+",Y.characterGain," each")),s.createElement("div",{className:"summary-row"},s.createElement("span",null,"Rating"),s.createElement("strong",null,Y.ratingDelta>=0?"+":"",Y.ratingDelta,"  ",Y.rating)),s.createElement("div",{className:"summary-xp-bar"},s.createElement("div",{className:"summary-xp-fill",style:{width:`${Math.min(100,Math.floor(Y.accountXp/Y.accountNeeded*100))}%`}})),Y.characterLevelUps.length>0&&s.createElement("div",{className:"summary-levelups"},Y.characterLevelUps.map(H=>s.createElement("span",{key:H.name},H.name,"  Lv ",H.level))),Y.characterSummaries?.length>0&&s.createElement("div",{className:"summary-characters"},Y.characterSummaries.map(H=>{const me=dc(H.name),Ge=Math.min(100,Math.floor(H.xp/H.xpNeeded*100));return s.createElement("div",{key:H.id,className:"summary-character"},s.createElement("div",{className:"summary-portrait"},me?s.createElement("img",{src:me,alt:H.name}):s.createElement("span",null,H.name[0])),s.createElement("div",{className:"summary-char-info"},s.createElement("div",{className:"summary-char-name"},H.name),s.createElement("div",{className:"summary-char-level"},"Lv ",H.level,"  ",H.xp,"/",H.xpNeeded," XP"),s.createElement("div",{className:"summary-char-bar"},s.createElement("div",{className:"summary-char-fill",style:{width:`${Ge}%`}}))))}))),Ce?s.createElement("div",{className:"battle-result-actions"},s.createElement("button",{onClick:R,className:"play-again-btn",disabled:!R},"Return to Story")):s.createElement("button",{onClick:k,className:"play-again-btn"},"Play Again"))),s.createElement("div",{className:`battle-main ${Ce?"battle-main-story":""} ${i.length<=1&&n.length<=2?"battle-main-compact":""}`},s.createElement("div",{className:"battle-team-row"},s.createElement("div",{className:"team-container player-side"},i.map((H,me)=>s.createElement(Re,{key:H.id,character:H,index:me,isPlayer:!0,onAbilityClick:pe,actedCharacters:w,pendingAbility:D,hpPreview:oe[me]}))),s.createElement("div",{className:"team-container enemy-side"},n.map((H,me)=>s.createElement(Pt,{key:H.id,character:H,index:me,isSelected:r===me,onSelect:ke,onHover:c,pendingAbility:D,hpPreview:Le[me]}))))),Ye&&s.createElement("div",{className:"combat-feed-overlay",onClick:()=>Xe(!1)},s.createElement("div",{className:"combat-feed-panel",onClick:H=>H.stopPropagation()},s.createElement("div",{className:"combat-feed-header"},s.createElement("div",null,s.createElement("h3",null,"Combat Feed"),s.createElement("p",null,"Latest combat events")),s.createElement("button",{className:"combat-feed-close",onClick:()=>Xe(!1)},"")),s.createElement("div",{className:"combat-feed-body"},p.length===0?s.createElement("div",{className:"combat-feed-empty"},"No events yet."):p.slice().reverse().map((H,me)=>s.createElement("p",{key:`${H}-${me}`,className:`${je(H)} ${me===0?"latest":""}`},H))))),Ee&&s.createElement("div",{className:"end-turn-overlay",onClick:()=>K(!1)},s.createElement("div",{className:"end-turn-panel",onClick:H=>H.stopPropagation()},s.createElement("div",{className:"end-turn-header"},s.createElement("div",null,s.createElement("h3",null,"Confirm End Turn"),s.createElement("p",null,"Drag to reorder your queued techniques.")),s.createElement("button",{className:"end-turn-close",onClick:()=>K(!1)},"")),s.createElement("div",{className:"end-turn-body"},fe.length===0?s.createElement("div",{className:"end-turn-empty"},"No actions queued. End turn anyway?"):s.createElement("div",{className:"end-turn-list"},fe.map((H,me)=>s.createElement("div",{key:`${H.characterIndex}-${H.abilityIndex}-${H.isUltimate}-${me}`,className:"end-turn-item",draggable:!0,onDragStart:Gn(me),onDragOver:Vn,onDrop:$t(me)},s.createElement("span",{className:"drag-handle"},""),s.createElement("span",{className:"queue-order"},me+1),s.createElement("span",{className:"queue-text"},$a(H)))))),s.createElement("div",{className:"end-turn-actions"},s.createElement("button",{className:"secondary-btn",onClick:()=>K(!1)},"Cancel"),s.createElement("button",{className:"primary-btn",onClick:tn},fe.length===0?"End Turn":"Confirm & End Turn")))))}function pc(i,n){var r={};for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&n.indexOf(c)<0&&(r[c]=i[c]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,c=Object.getOwnPropertySymbols(i);d<c.length;d++)n.indexOf(c[d])<0&&Object.prototype.propertyIsEnumerable.call(i,c[d])&&(r[c[d]]=i[c[d]]);return r}function zv(i,n,r,c){function d(f){return f instanceof r?f:new r(function(m){m(f)})}return new(r||(r=Promise))(function(f,m){function p(k){try{v(c.next(k))}catch(w){m(w)}}function g(k){try{v(c.throw(k))}catch(w){m(w)}}function v(k){k.done?f(k.value):d(k.value).then(p,g)}v((c=c.apply(i,n||[])).next())})}const qv=i=>i?(...n)=>i(...n):(...n)=>fetch(...n);class Qu extends Error{constructor(n,r="FunctionsError",c){super(n),this.name=r,this.context=c}}class $v extends Qu{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class jh extends Qu{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Bh extends Qu{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Bu;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Bu||(Bu={}));class Lv{constructor(n,{headers:r={},customFetch:c,region:d=Bu.Any}={}){this.url=n,this.headers=r,this.region=d,this.fetch=qv(c)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return zv(this,arguments,void 0,function*(r,c={}){var d;let f,m;try{const{headers:p,method:g,body:v,signal:k,timeout:w}=c;let D={},{region:z}=c;z||(z=this.region);const x=new URL(`${this.url}/${r}`);z&&z!=="any"&&(D["x-region"]=z,x.searchParams.set("forceFunctionRegion",z));let L;v&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(D["Content-Type"]="application/octet-stream",L=v):typeof v=="string"?(D["Content-Type"]="text/plain",L=v):typeof FormData<"u"&&v instanceof FormData?L=v:(D["Content-Type"]="application/json",L=JSON.stringify(v)):v&&typeof v!="string"&&!(typeof Blob<"u"&&v instanceof Blob)&&!(v instanceof ArrayBuffer)&&!(typeof FormData<"u"&&v instanceof FormData)?L=JSON.stringify(v):L=v;let Y=k;w&&(m=new AbortController,f=setTimeout(()=>m.abort(),w),k?(Y=m.signal,k.addEventListener("abort",()=>m.abort())):Y=m.signal);const ne=yield this.fetch(x.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},D),this.headers),p),body:L,signal:Y}).catch(Ce=>{throw new $v(Ce)}),re=ne.headers.get("x-relay-error");if(re&&re==="true")throw new jh(ne);if(!ne.ok)throw new Bh(ne);let X=((d=ne.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),ve;return X==="application/json"?ve=yield ne.json():X==="application/octet-stream"||X==="application/pdf"?ve=yield ne.blob():X==="text/event-stream"?ve=ne:X==="multipart/form-data"?ve=yield ne.formData():ve=yield ne.text(),{data:ve,error:null,response:ne}}catch(p){return{data:null,error:p,response:p instanceof Bh||p instanceof jh?p.context:void 0}}finally{f&&clearTimeout(f)}})}}var Hv=class extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}},Gv=class{constructor(i){var n,r;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(n=i.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=i.signal,this.isMaybeSingle=(r=i.isMaybeSingle)!==null&&r!==void 0?r:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,n){return this.headers=new Headers(this.headers),this.headers.set(i,n),this}then(i,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{let m=null,p=null,g=null,v=f.status,k=f.statusText;if(f.ok){var w,D;if(r.method!=="HEAD"){var z;const ne=await f.text();ne===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((z=r.headers.get("Accept"))===null||z===void 0)&&z.includes("application/vnd.pgrst.plan+text"))?p=ne:p=JSON.parse(ne))}const L=(w=r.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),Y=(D=f.headers.get("content-range"))===null||D===void 0?void 0:D.split("/");L&&Y&&Y.length>1&&(g=parseInt(Y[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(p)&&(p.length>1?(m={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,g=null,v=406,k="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{var x;const L=await f.text();try{m=JSON.parse(L),Array.isArray(m)&&f.status===404&&(p=[],m=null,v=200,k="OK")}catch{f.status===404&&L===""?(v=204,k="No Content"):m={message:L}}if(m&&r.isMaybeSingle&&(!(m==null||(x=m.details)===null||x===void 0)&&x.includes("0 rows"))&&(m=null,v=200,k="OK"),m&&r.shouldThrowOnError)throw new Hv(m)}return{error:m,data:p,count:g,status:v,statusText:k}});return this.shouldThrowOnError||(d=d.catch(f=>{var m;let p="";const g=f?.cause;if(g){var v,k,w,D;const x=(v=g?.message)!==null&&v!==void 0?v:"",L=(k=g?.code)!==null&&k!==void 0?k:"";p=`${(w=f?.name)!==null&&w!==void 0?w:"FetchError"}: ${f?.message}`,p+=`

Caused by: ${(D=g?.name)!==null&&D!==void 0?D:"Error"}: ${x}`,L&&(p+=` (${L})`),g?.stack&&(p+=`
${g.stack}`)}else{var z;p=(z=f?.stack)!==null&&z!==void 0?z:""}return{error:{message:`${(m=f?.name)!==null&&m!==void 0?m:"FetchError"}: ${f?.message}`,details:p,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(i,n)}returns(){return this}overrideTypes(){return this}},Vv=class extends Gv{select(i){let n=!1;const r=(i??"*").split("").map(c=>/\s/.test(c)&&!n?"":(c==='"'&&(n=!n),c)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:n=!0,nullsFirst:r,foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.order`:"order",m=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${m?`${m},`:""}${i}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:n,referencedTable:r=n}={}){const c=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(c,`${i}`),this}range(i,n,{foreignTable:r,referencedTable:c=r}={}){const d=typeof c>"u"?"offset":`${c}.offset`,f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${i}`),this.url.searchParams.set(f,`${n-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:n=!1,settings:r=!1,buffers:c=!1,wal:d=!1,format:f="text"}={}){var m;const p=[i?"analyze":null,n?"verbose":null,r?"settings":null,c?"buffers":null,d?"wal":null].filter(Boolean).join("|"),g=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${g}"; options=${p};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};const zh=new RegExp("[,()]");var Ms=class extends Vv{eq(i,n){return this.url.searchParams.append(i,`eq.${n}`),this}neq(i,n){return this.url.searchParams.append(i,`neq.${n}`),this}gt(i,n){return this.url.searchParams.append(i,`gt.${n}`),this}gte(i,n){return this.url.searchParams.append(i,`gte.${n}`),this}lt(i,n){return this.url.searchParams.append(i,`lt.${n}`),this}lte(i,n){return this.url.searchParams.append(i,`lte.${n}`),this}like(i,n){return this.url.searchParams.append(i,`like.${n}`),this}likeAllOf(i,n){return this.url.searchParams.append(i,`like(all).{${n.join(",")}}`),this}likeAnyOf(i,n){return this.url.searchParams.append(i,`like(any).{${n.join(",")}}`),this}ilike(i,n){return this.url.searchParams.append(i,`ilike.${n}`),this}ilikeAllOf(i,n){return this.url.searchParams.append(i,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(i,n){return this.url.searchParams.append(i,`ilike(any).{${n.join(",")}}`),this}regexMatch(i,n){return this.url.searchParams.append(i,`match.${n}`),this}regexIMatch(i,n){return this.url.searchParams.append(i,`imatch.${n}`),this}is(i,n){return this.url.searchParams.append(i,`is.${n}`),this}isDistinct(i,n){return this.url.searchParams.append(i,`isdistinct.${n}`),this}in(i,n){const r=Array.from(new Set(n)).map(c=>typeof c=="string"&&zh.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${r})`),this}notIn(i,n){const r=Array.from(new Set(n)).map(c=>typeof c=="string"&&zh.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`not.in.(${r})`),this}contains(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cs.{${n.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(n)}`),this}containedBy(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cd.{${n.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(n)}`),this}rangeGt(i,n){return this.url.searchParams.append(i,`sr.${n}`),this}rangeGte(i,n){return this.url.searchParams.append(i,`nxl.${n}`),this}rangeLt(i,n){return this.url.searchParams.append(i,`sl.${n}`),this}rangeLte(i,n){return this.url.searchParams.append(i,`nxr.${n}`),this}rangeAdjacent(i,n){return this.url.searchParams.append(i,`adj.${n}`),this}overlaps(i,n){return typeof n=="string"?this.url.searchParams.append(i,`ov.${n}`):this.url.searchParams.append(i,`ov.{${n.join(",")}}`),this}textSearch(i,n,{config:r,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const f=r===void 0?"":`(${r})`;return this.url.searchParams.append(i,`${d}fts${f}.${n}`),this}match(i){return Object.entries(i).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(i,n,r){return this.url.searchParams.append(i,`not.${n}.${r}`),this}or(i,{foreignTable:n,referencedTable:r=n}={}){const c=r?`${r}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,n,r){return this.url.searchParams.append(i,`${n}.${r}`),this}},Yv=class{constructor(i,{headers:n={},schema:r,fetch:c}){this.url=i,this.headers=new Headers(n),this.schema=r,this.fetch=c}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(i,n){const{head:r=!1,count:c}=n??{},d=r?"HEAD":"GET";let f=!1;const m=(i??"*").split("").map(v=>/\s/.test(v)&&!f?"":(v==='"'&&(f=!f),v)).join(""),{url:p,headers:g}=this.cloneRequestState();return p.searchParams.set("select",m),c&&g.append("Prefer",`count=${c}`),new Ms({method:d,url:p,headers:g,schema:this.schema,fetch:this.fetch})}insert(i,{count:n,defaultToNull:r=!0}={}){var c;const d="POST",{url:f,headers:m}=this.cloneRequestState();if(n&&m.append("Prefer",`count=${n}`),r||m.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(p.length>0){const g=[...new Set(p)].map(v=>`"${v}"`);f.searchParams.set("columns",g.join(","))}}return new Ms({method:d,url:f,headers:m,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(i,{onConflict:n,ignoreDuplicates:r=!1,count:c,defaultToNull:d=!0}={}){var f;const m="POST",{url:p,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&p.searchParams.set("on_conflict",n),c&&g.append("Prefer",`count=${c}`),d||g.append("Prefer","missing=default"),Array.isArray(i)){const v=i.reduce((k,w)=>k.concat(Object.keys(w)),[]);if(v.length>0){const k=[...new Set(v)].map(w=>`"${w}"`);p.searchParams.set("columns",k.join(","))}}return new Ms({method:m,url:p,headers:g,schema:this.schema,body:i,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(i,{count:n}={}){var r;const c="PATCH",{url:d,headers:f}=this.cloneRequestState();return n&&f.append("Prefer",`count=${n}`),new Ms({method:c,url:d,headers:f,schema:this.schema,body:i,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:i}={}){var n;const r="DELETE",{url:c,headers:d}=this.cloneRequestState();return i&&d.append("Prefer",`count=${i}`),new Ms({method:r,url:c,headers:d,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}},Kv=class op{constructor(n,{headers:r={},schema:c,fetch:d}={}){this.url=n,this.headers=new Headers(r),this.schemaName=c,this.fetch=d}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Yv(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new op(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,r={},{head:c=!1,get:d=!1,count:f}={}){var m;let p;const g=new URL(`${this.url}/rpc/${n}`);let v;const k=z=>z!==null&&typeof z=="object"&&(!Array.isArray(z)||z.some(k)),w=c&&Object.values(r).some(k);w?(p="POST",v=r):c||d?(p=c?"HEAD":"GET",Object.entries(r).filter(([z,x])=>x!==void 0).map(([z,x])=>[z,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([z,x])=>{g.searchParams.append(z,x)})):(p="POST",v=r);const D=new Headers(this.headers);return w?D.set("Prefer",f?`count=${f},return=minimal`:"return=minimal"):f&&D.set("Prefer",`count=${f}`),new Ms({method:p,url:g,headers:D,schema:this.schemaName,body:v,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}};class Iv{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const c=r.versions;if(c&&c.node){const d=c.node,f=parseInt(d.replace(/^v/,"").split(".")[0]);return f>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${f} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${f} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const c=this.getWebSocketConstructor();return new c(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Pv="2.91.0",Qv=`realtime-js/${Pv}`,Xv="1.0.0",up="2.0.0",qh=up,zu=1e4,Jv=1e3,Zv=100;var yl;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(yl||(yl={}));var Xt;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Xt||(Xt={}));var fn;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(fn||(fn={}));var qu;(function(i){i.websocket="websocket"})(qu||(qu={}));var Yl;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Yl||(Yl={}));class Fv{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let c=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(c))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,c;const d=(c=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&c!==void 0?c:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,d)}_encodeJsonUserBroadcastPush(n){var r,c;const d=(c=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&c!==void 0?c:{},m=new TextEncoder().encode(JSON.stringify(d)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,m)}_encodeUserBroadcastPush(n,r,c){var d,f;const m=n.topic,p=(d=n.ref)!==null&&d!==void 0?d:"",g=(f=n.join_ref)!==null&&f!==void 0?f:"",v=n.payload.event,k=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},w=Object.keys(k).length===0?"":JSON.stringify(k);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`topic length ${m.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const D=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+p.length+m.length+v.length+w.length,z=new ArrayBuffer(this.HEADER_LENGTH+D);let x=new DataView(z),L=0;x.setUint8(L++,this.KINDS.userBroadcastPush),x.setUint8(L++,g.length),x.setUint8(L++,p.length),x.setUint8(L++,m.length),x.setUint8(L++,v.length),x.setUint8(L++,w.length),x.setUint8(L++,r),Array.from(g,ne=>x.setUint8(L++,ne.charCodeAt(0))),Array.from(p,ne=>x.setUint8(L++,ne.charCodeAt(0))),Array.from(m,ne=>x.setUint8(L++,ne.charCodeAt(0))),Array.from(v,ne=>x.setUint8(L++,ne.charCodeAt(0))),Array.from(w,ne=>x.setUint8(L++,ne.charCodeAt(0)));var Y=new Uint8Array(z.byteLength+c.byteLength);return Y.set(new Uint8Array(z),0),Y.set(new Uint8Array(c),z.byteLength),Y.buffer}decode(n,r){if(this._isArrayBuffer(n)){let c=this._binaryDecode(n);return r(c)}if(typeof n=="string"){const c=JSON.parse(n),[d,f,m,p,g]=c;return r({join_ref:d,ref:f,topic:m,event:p,payload:g})}return r({})}_binaryDecode(n){const r=new DataView(n),c=r.getUint8(0),d=new TextDecoder;if(c===this.KINDS.userBroadcast)return this._decodeUserBroadcast(n,r,d)}_decodeUserBroadcast(n,r,c){const d=r.getUint8(1),f=r.getUint8(2),m=r.getUint8(3),p=r.getUint8(4);let g=this.HEADER_LENGTH+4;const v=c.decode(n.slice(g,g+d));g=g+d;const k=c.decode(n.slice(g,g+f));g=g+f;const w=c.decode(n.slice(g,g+m));g=g+m;const D=n.slice(g,n.byteLength),z=p===this.JSON_ENCODING?JSON.parse(c.decode(D)):D,x={type:this.BROADCAST_EVENT,event:k,payload:z};return m>0&&(x.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([c])=>r.includes(c)))}}class dp{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _t;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(_t||(_t={}));const $h=(i,n,r={})=>{var c;const d=(c=r.skipTypes)!==null&&c!==void 0?c:[];return n?Object.keys(n).reduce((f,m)=>(f[m]=Wv(m,i,n,d),f),{}):{}},Wv=(i,n,r,c)=>{const d=n.find(p=>p.name===i),f=d?.type,m=r[i];return f&&!c.includes(f)?fp(f,m):$u(m)},fp=(i,n)=>{if(i.charAt(0)==="_"){const r=i.slice(1,i.length);return ny(n,r)}switch(i){case _t.bool:return ey(n);case _t.float4:case _t.float8:case _t.int2:case _t.int4:case _t.int8:case _t.numeric:case _t.oid:return ty(n);case _t.json:case _t.jsonb:return ay(n);case _t.timestamp:return ly(n);case _t.abstime:case _t.date:case _t.daterange:case _t.int4range:case _t.int8range:case _t.money:case _t.reltime:case _t.text:case _t.time:case _t.timestamptz:case _t.timetz:case _t.tsrange:case _t.tstzrange:return $u(n);default:return $u(n)}},$u=i=>i,ey=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},ty=i=>{if(typeof i=="string"){const n=parseFloat(i);if(!Number.isNaN(n))return n}return i},ay=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch{return i}return i},ny=(i,n)=>{if(typeof i!="string")return i;const r=i.length-1,c=i[r];if(i[0]==="{"&&c==="}"){let f;const m=i.slice(1,r);try{f=JSON.parse("["+m+"]")}catch{f=m?m.split(","):[]}return f.map(p=>fp(n,p))}return i},ly=i=>typeof i=="string"?i.replace(" ","T"):i,mp=i=>{const n=new URL(i);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Tu{constructor(n,r,c={},d=zu){this.channel=n,this.event=r,this.payload=c,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var c;return this._hasReceived(n)&&r((c=this.receivedResp)===null||c===void 0?void 0:c.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(c=>c.status===n).forEach(c=>c.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Lh;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Lh||(Lh={}));class jr{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const c=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(c.state,{},d=>{const{onJoin:f,onLeave:m,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jr.syncState(this.state,d,f,m),this.pendingDiffs.forEach(g=>{this.state=jr.syncDiff(this.state,g,f,m)}),this.pendingDiffs=[],p()}),this.channel._on(c.diff,{},d=>{const{onJoin:f,onLeave:m,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=jr.syncDiff(this.state,d,f,m),p())}),this.onJoin((d,f,m)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:f,newPresences:m})}),this.onLeave((d,f,m)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:f,leftPresences:m})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,c,d){const f=this.cloneDeep(n),m=this.transformState(r),p={},g={};return this.map(f,(v,k)=>{m[v]||(g[v]=k)}),this.map(m,(v,k)=>{const w=f[v];if(w){const D=k.map(Y=>Y.presence_ref),z=w.map(Y=>Y.presence_ref),x=k.filter(Y=>z.indexOf(Y.presence_ref)<0),L=w.filter(Y=>D.indexOf(Y.presence_ref)<0);x.length>0&&(p[v]=x),L.length>0&&(g[v]=L)}else p[v]=k}),this.syncDiff(f,{joins:p,leaves:g},c,d)}static syncDiff(n,r,c,d){const{joins:f,leaves:m}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return c||(c=()=>{}),d||(d=()=>{}),this.map(f,(p,g)=>{var v;const k=(v=n[p])!==null&&v!==void 0?v:[];if(n[p]=this.cloneDeep(g),k.length>0){const w=n[p].map(z=>z.presence_ref),D=k.filter(z=>w.indexOf(z.presence_ref)<0);n[p].unshift(...D)}c(p,k,g)}),this.map(m,(p,g)=>{let v=n[p];if(!v)return;const k=g.map(w=>w.presence_ref);v=v.filter(w=>k.indexOf(w.presence_ref)<0),n[p]=v,d(p,v,g),v.length===0&&delete n[p]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(c=>r(c,n[c]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,c)=>{const d=n[c];return"metas"in d?r[c]=d.metas.map(f=>(f.presence_ref=f.phx_ref,delete f.phx_ref,delete f.phx_ref_prev,f)):r[c]=d,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Hh;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Hh||(Hh={}));var Br;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Br||(Br={}));var Ln;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Ln||(Ln={}));class Bs{constructor(n,r={config:{}},c){var d,f;if(this.topic=n,this.params=r,this.socket=c,this.bindings={},this.state=Xt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Tu(this,fn.join,this.params,this.timeout),this.rejoinTimer=new dp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(m=>m.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xt.closed,this.socket._remove(this)}),this._onError(m=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,m),this.state=Xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",m=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,m),this.state=Xt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fn.reply,{},(m,p)=>{this._trigger(this._replyEventName(p),m)}),this.presence=new jr(this),this.broadcastEndpointURL=mp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((f=(d=this.params.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var c,d,f;if(this.socket.isConnected()||this.socket.connect(),this.state==Xt.closed){const{config:{broadcast:m,presence:p,private:g}}=this.params,v=(d=(c=this.bindings.postgres_changes)===null||c===void 0?void 0:c.map(z=>z.filter))!==null&&d!==void 0?d:[],k=!!this.bindings[Br.PRESENCE]&&this.bindings[Br.PRESENCE].length>0||((f=this.params.config.presence)===null||f===void 0?void 0:f.enabled)===!0,w={},D={broadcast:m,presence:Object.assign(Object.assign({},p),{enabled:k}),postgres_changes:v,private:g};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(z=>n?.(Ln.CHANNEL_ERROR,z)),this._onClose(()=>n?.(Ln.CLOSED)),this.updateJoinPayload(Object.assign({config:D},w)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:z})=>{var x;if(this.socket._isManualToken()||this.socket.setAuth(),z===void 0){n?.(Ln.SUBSCRIBED);return}else{const L=this.bindings.postgres_changes,Y=(x=L?.length)!==null&&x!==void 0?x:0,ne=[];for(let re=0;re<Y;re++){const X=L[re],{filter:{event:ve,schema:Ce,table:R,filter:ce}}=X,P=z&&z[re];if(P&&P.event===ve&&Bs.isFilterValueEqual(P.schema,Ce)&&Bs.isFilterValueEqual(P.table,R)&&Bs.isFilterValueEqual(P.filter,ce))ne.push(Object.assign(Object.assign({},X),{id:P.id}));else{this.unsubscribe(),this.state=Xt.errored,n?.(Ln.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=ne,n&&n(Ln.SUBSCRIBED);return}}).receive("error",z=>{this.state=Xt.errored,n?.(Ln.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(z).join(", ")||"error")))}).receive("timeout",()=>{n?.(Ln.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,c){return this.state===Xt.joined&&n===Br.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,c)}async httpSend(n,r,c={}){var d;if(r==null)return Promise.reject("Payload is required for httpSend()");const f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(d=c.timeout)!==null&&d!==void 0?d:this.timeout);if(p.status===202)return{success:!0};let g=p.statusText;try{const v=await p.json();g=v.error||v.message||g}catch{}return Promise.reject(new Error(g))}async send(n,r={}){var c,d;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:f,payload:m}=n,p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:f,payload:m,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(c=r.timeout)!==null&&c!==void 0?c:this.timeout);return await((d=v.body)===null||d===void 0?void 0:d.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(f=>{var m,p,g;const v=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(p=(m=this.params)===null||m===void 0?void 0:m.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&f("ok"),v.receive("ok",()=>f("ok")),v.receive("error",()=>f("error")),v.receive("timeout",()=>f("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Xt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fn.close,"leave",this._joinRef())};this.joinPush.destroy();let c=null;return new Promise(d=>{c=new Tu(this,fn.leave,{},n),c.receive("ok",()=>{r(),d("ok")}).receive("timeout",()=>{r(),d("timed out")}).receive("error",()=>{d("error")}),c.send(),this._canPush()||c.trigger("ok",{})}).finally(()=>{c?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Xt.closed,this.bindings={}}async _fetchWithTimeout(n,r,c){const d=new AbortController,f=setTimeout(()=>d.abort(),c),m=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:d.signal}));return clearTimeout(f),m}_push(n,r,c=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new Tu(this,n,r,c);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Zv){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,c){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,c){var d,f;const m=n.toLocaleLowerCase(),{close:p,error:g,leave:v,join:k}=fn;if(c&&[p,g,v,k].indexOf(m)>=0&&c!==this._joinRef())return;let D=this._onMessage(m,r,c);if(r&&!D)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(m)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(z=>{var x,L,Y;return((x=z.filter)===null||x===void 0?void 0:x.event)==="*"||((Y=(L=z.filter)===null||L===void 0?void 0:L.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase())===m}).map(z=>z.callback(D,c)):(f=this.bindings[m])===null||f===void 0||f.filter(z=>{var x,L,Y,ne,re,X,ve,Ce;if(["broadcast","presence","postgres_changes"].includes(m))if("id"in z){const R=z.id,ce=(x=z.filter)===null||x===void 0?void 0:x.event;return R&&((L=r.ids)===null||L===void 0?void 0:L.includes(R))&&(ce==="*"||ce?.toLocaleLowerCase()===((Y=r.data)===null||Y===void 0?void 0:Y.type.toLocaleLowerCase()))&&(!(!((ne=z.filter)===null||ne===void 0)&&ne.table)||z.filter.table===((re=r.data)===null||re===void 0?void 0:re.table))}else{const R=(ve=(X=z?.filter)===null||X===void 0?void 0:X.event)===null||ve===void 0?void 0:ve.toLocaleLowerCase();return R==="*"||R===((Ce=r?.event)===null||Ce===void 0?void 0:Ce.toLocaleLowerCase())}else return z.type.toLocaleLowerCase()===m}).map(z=>{if(typeof D=="object"&&"ids"in D){const x=D.data,{schema:L,table:Y,commit_timestamp:ne,type:re,errors:X}=x;D=Object.assign(Object.assign({},{schema:L,table:Y,commit_timestamp:ne,eventType:re,new:{},old:{},errors:X}),this._getPayloadRecords(x))}z.callback(D,c)})}_isClosed(){return this.state===Xt.closed}_isJoined(){return this.state===Xt.joined}_isJoining(){return this.state===Xt.joining}_isLeaving(){return this.state===Xt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,c){const d=n.toLocaleLowerCase(),f={type:d,filter:r,callback:c};return this.bindings[d]?this.bindings[d].push(f):this.bindings[d]=[f],this}_off(n,r){const c=n.toLocaleLowerCase();return this.bindings[c]&&(this.bindings[c]=this.bindings[c].filter(d=>{var f;return!(((f=d.type)===null||f===void 0?void 0:f.toLocaleLowerCase())===c&&Bs.isEqual(d.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const c in n)if(n[c]!==r[c])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(fn.close,{},n)}_onError(n){this._on(fn.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=$h(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=$h(n.columns,n.old_record)),r}}const ku=()=>{},ac={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},sy=[1e3,2e3,5e3,1e4],ry=1e4,iy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class cy{constructor(n,r){var c;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=zu,this.transport=null,this.heartbeatIntervalMs=ac.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ku,this.ref=0,this.reconnectTimer=null,this.vsn=qh,this.logger=ku,this.conn=null,this.sendBuffer=[],this.serializer=new Fv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=d=>d?(...f)=>d(...f):(...f)=>fetch(...f),!(!((c=r?.params)===null||c===void 0)&&c.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${qu.websocket}`,this.httpEndpoint=mp(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Iv.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const c=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(c),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,c){this.logger(n,r,c)}connectionState(){switch(this.conn&&this.conn.readyState){case yl.connecting:return Yl.Connecting;case yl.open:return Yl.Open;case yl.closing:return Yl.Closing;default:return Yl.Closed}}isConnected(){return this.connectionState()===Yl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const c=`realtime:${n}`,d=this.getChannels().find(f=>f.topic===c);if(d)return d;{const f=new Bs(`realtime:${n}`,r,this);return this.channels.push(f),f}}push(n){const{topic:r,event:c,payload:d,ref:f}=n,m=()=>{this.encode(n,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${r} ${c} (${f})`,d),this.isConnected()?m():this.sendBuffer.push(m)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Jv,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ac.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(c=>c.topic===n&&(c._isJoined()||c._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const v=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",v)}catch(k){this.log("error","error in heartbeat callback",k)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:c,event:d,payload:f,ref:m}=r,p=m?`(${m})`:"",g=f.status||"";this.log("receive",`${g} ${c} ${d} ${p}`.trim(),f),this.channels.filter(v=>v._isMember(c)).forEach(v=>v._trigger(d,f,m)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===yl.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===yl.open||this.conn.readyState===yl.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(fn.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const c=n.match(/\?/)?"&":"?",d=new URLSearchParams(r);return`${n}${c}${d}`}_workerObjectUrl(n){let r;if(n)r=n;else{const c=new Blob([iy],{type:"application/javascript"});r=URL.createObjectURL(c)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,c=!1;if(n)r=n,c=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(d){this.log("error","Error fetching access token from callback",d),r=this.accessTokenValue}else r=this.accessTokenValue;c?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(d=>{const f={access_token:r,version:Qv};r&&d.updateJoinPayload(f),d.joinedOnce&&d._isJoined()&&d._push(fn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(c=>{try{c(r)}catch(d){this.log("error",`error in ${n} callback`,d)}})}catch(c){this.log("error",`error triggering ${n} callbacks`,c)}}_setupReconnectionTimer(){this.reconnectTimer=new dp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ac.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,c,d,f,m,p,g,v,k,w,D,z;switch(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(c=n?.timeout)!==null&&c!==void 0?c:zu,this.heartbeatIntervalMs=(d=n?.heartbeatIntervalMs)!==null&&d!==void 0?d:ac.HEARTBEAT_INTERVAL,this.worker=(f=n?.worker)!==null&&f!==void 0?f:!1,this.accessToken=(m=n?.accessToken)!==null&&m!==void 0?m:null,this.heartbeatCallback=(p=n?.heartbeatCallback)!==null&&p!==void 0?p:ku,this.vsn=(g=n?.vsn)!==null&&g!==void 0?g:qh,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=n?.reconnectAfterMs)!==null&&v!==void 0?v:(x=>sy[x-1]||ry),this.vsn){case Xv:this.encode=(k=n?.encode)!==null&&k!==void 0?k:((x,L)=>L(JSON.stringify(x))),this.decode=(w=n?.decode)!==null&&w!==void 0?w:((x,L)=>L(JSON.parse(x)));break;case up:this.encode=(D=n?.encode)!==null&&D!==void 0?D:this.serializer.encode.bind(this.serializer),this.decode=(z=n?.decode)!==null&&z!==void 0?z:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var zr=class extends Error{constructor(i,n){super(i),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function oy(i,n,r){const c=new URL(n,i);if(r)for(const[d,f]of Object.entries(r))f!==void 0&&c.searchParams.set(d,f);return c.toString()}async function uy(i){return!i||i.type==="none"?{}:i.type==="bearer"?{Authorization:`Bearer ${i.token}`}:i.type==="header"?{[i.name]:i.value}:i.type==="custom"?await i.getHeaders():{}}function dy(i){const n=i.fetchImpl??globalThis.fetch;return{async request({method:r,path:c,query:d,body:f,headers:m}){const p=oy(i.baseUrl,c,d),g=await uy(i.auth),v=await n(p,{method:r,headers:{...f?{"Content-Type":"application/json"}:{},...g,...m},body:f?JSON.stringify(f):void 0}),k=await v.text(),w=(v.headers.get("content-type")||"").includes("application/json"),D=w&&k?JSON.parse(k):k;if(!v.ok){const z=w?D:void 0,x=z?.error;throw new zr(x?.message??`Request failed with status ${v.status}`,{status:v.status,icebergType:x?.type,icebergCode:x?.code,details:z})}return{status:v.status,headers:v.headers,data:D}}}}function nc(i){return i.join("")}var fy=class{constructor(i,n=""){this.client=i,this.prefix=n}async listNamespaces(i){const n=i?{parent:nc(i.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(c=>({namespace:c}))}async createNamespace(i,n){const r={namespace:i.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${nc(i.namespace)}`})}async loadNamespaceMetadata(i){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${nc(i.namespace)}`})).data.properties}}async namespaceExists(i){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${nc(i.namespace)}`}),!0}catch(n){if(n instanceof zr&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(i,n){try{return await this.createNamespace(i,n)}catch(r){if(r instanceof zr&&r.status===409)return;throw r}}};function Ts(i){return i.join("")}var my=class{constructor(i,n="",r){this.client=i,this.prefix=n,this.accessDelegation=r}async listTables(i){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ts(i.namespace)}/tables`})).data.identifiers}async createTable(i,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ts(i.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(i,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ts(i.namespace)}/tables/${i.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(i,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ts(i.namespace)}/tables/${i.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(i){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ts(i.namespace)}/tables/${i.name}`,headers:n})).data.metadata}async tableExists(i){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ts(i.namespace)}/tables/${i.name}`,headers:n}),!0}catch(r){if(r instanceof zr&&r.status===404)return!1;throw r}}async createTableIfNotExists(i,n){try{return await this.createTable(i,n)}catch(r){if(r instanceof zr&&r.status===409)return await this.loadTable({namespace:i.namespace,name:n.name});throw r}}},hy=class{constructor(i){let n="v1";i.catalogName&&(n+=`/${i.catalogName}`);const r=i.baseUrl.endsWith("/")?i.baseUrl:`${i.baseUrl}/`;this.client=dy({baseUrl:r,auth:i.auth,fetchImpl:i.fetch}),this.accessDelegation=i.accessDelegation?.join(","),this.namespaceOps=new fy(this.client,n),this.tableOps=new my(this.client,n,this.accessDelegation)}async listNamespaces(i){return this.namespaceOps.listNamespaces(i)}async createNamespace(i,n){return this.namespaceOps.createNamespace(i,n)}async dropNamespace(i){await this.namespaceOps.dropNamespace(i)}async loadNamespaceMetadata(i){return this.namespaceOps.loadNamespaceMetadata(i)}async listTables(i){return this.tableOps.listTables(i)}async createTable(i,n){return this.tableOps.createTable(i,n)}async updateTable(i,n){return this.tableOps.updateTable(i,n)}async dropTable(i,n){await this.tableOps.dropTable(i,n)}async loadTable(i){return this.tableOps.loadTable(i)}async namespaceExists(i){return this.namespaceOps.namespaceExists(i)}async tableExists(i){return this.tableOps.tableExists(i)}async createNamespaceIfNotExists(i,n){return this.namespaceOps.createNamespaceIfNotExists(i,n)}async createTableIfNotExists(i,n){return this.tableOps.createTableIfNotExists(i,n)}},gc=class extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}};function Ot(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}var py=class extends gc{constructor(i,n,r){super(i),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Lu=class extends gc{constructor(i,n){super(i),this.name="StorageUnknownError",this.originalError=n}};const Xu=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),gy=()=>Response,Hu=i=>{if(Array.isArray(i))return i.map(r=>Hu(r));if(typeof i=="function"||i!==Object(i))return i;const n={};return Object.entries(i).forEach(([r,c])=>{const d=r.replace(/([-_][a-z])/gi,f=>f.toUpperCase().replace(/[-_]/g,""));n[d]=Hu(c)}),n},vy=i=>{if(typeof i!="object"||i===null)return!1;const n=Object.getPrototypeOf(i);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},yy=i=>!i||typeof i!="string"||i.length===0||i.length>100||i.trim()!==i||i.includes("/")||i.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(i);function qr(i){"@babel/helpers - typeof";return qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},qr(i)}function by(i,n){if(qr(i)!="object"||!i)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var c=r.call(i,n);if(qr(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function _y(i){var n=by(i,"string");return qr(n)=="symbol"?n:n+""}function Ey(i,n,r){return(n=_y(n))in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i}function Gh(i,n){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);n&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(i,d).enumerable})),r.push.apply(r,c)}return r}function Me(i){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Gh(Object(r),!0).forEach(function(c){Ey(i,c,r[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):Gh(Object(r)).forEach(function(c){Object.defineProperty(i,c,Object.getOwnPropertyDescriptor(r,c))})}return i}const Au=i=>{var n;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(n=i.error)===null||n===void 0?void 0:n.message)||JSON.stringify(i)},wy=async(i,n,r)=>{i instanceof await gy()&&!r?.noResolveJson?i.json().then(c=>{const d=i.status||500,f=c?.statusCode||d+"";n(new py(Au(c),d,f))}).catch(c=>{n(new Lu(Au(c),c))}):n(new Lu(Au(i),i))},Sy=(i,n,r,c)=>{const d={method:i,headers:n?.headers||{}};return i==="GET"||!c?d:(vy(c)?(d.headers=Me({"Content-Type":"application/json"},n?.headers),d.body=JSON.stringify(c)):d.body=c,n?.duplex&&(d.duplex=n.duplex),Me(Me({},d),r))};async function Vr(i,n,r,c,d,f){return new Promise((m,p)=>{i(r,Sy(n,c,d,f)).then(g=>{if(!g.ok)throw g;return c?.noResolveJson?g:g.json()}).then(g=>m(g)).catch(g=>wy(g,p,c))})}async function $r(i,n,r,c){return Vr(i,"GET",n,r,c)}async function dn(i,n,r,c,d){return Vr(i,"POST",n,c,d,r)}async function Gu(i,n,r,c,d){return Vr(i,"PUT",n,c,d,r)}async function Ny(i,n,r,c){return Vr(i,"HEAD",n,Me(Me({},r),{},{noResolveJson:!0}),c)}async function Ju(i,n,r,c,d){return Vr(i,"DELETE",n,c,d,r)}var Cy=class{constructor(i,n){this.downloadFn=i,this.shouldThrowOnError=n}then(i,n){return this.execute().then(i,n)}async execute(){var i=this;try{return{data:(await i.downloadFn()).body,error:null}}catch(n){if(i.shouldThrowOnError)throw n;if(Ot(n))return{data:null,error:n};throw n}}};let hp;hp=Symbol.toStringTag;var Ty=class{constructor(i,n){this.downloadFn=i,this.shouldThrowOnError=n,this[hp]="BlobDownloadBuilder",this.promise=null}asStream(){return new Cy(this.downloadFn,this.shouldThrowOnError)}then(i,n){return this.getPromise().then(i,n)}catch(i){return this.getPromise().catch(i)}finally(i){return this.getPromise().finally(i)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var i=this;try{return{data:await(await i.downloadFn()).blob(),error:null}}catch(n){if(i.shouldThrowOnError)throw n;if(Ot(n))return{data:null,error:n};throw n}}};const ky={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Ay=class{constructor(i,n={},r,c){this.shouldThrowOnError=!1,this.url=i,this.headers=n,this.bucketId=r,this.fetch=Xu(c)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(i,n,r,c){var d=this;try{let f;const m=Me(Me({},Vh),c);let p=Me(Me({},d.headers),i==="POST"&&{"x-upsert":String(m.upsert)});const g=m.metadata;typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",m.cacheControl),g&&f.append("metadata",d.encodeMetadata(g)),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.has("cacheControl")||f.append("cacheControl",m.cacheControl),g&&!f.has("metadata")&&f.append("metadata",d.encodeMetadata(g))):(f=r,p["cache-control"]=`max-age=${m.cacheControl}`,p["content-type"]=m.contentType,g&&(p["x-metadata"]=d.toBase64(d.encodeMetadata(g))),(typeof ReadableStream<"u"&&f instanceof ReadableStream||f&&typeof f=="object"&&"pipe"in f&&typeof f.pipe=="function")&&!m.duplex&&(m.duplex="half")),c?.headers&&(p=Me(Me({},p),c.headers));const v=d._removeEmptyFolders(n),k=d._getFinalPath(v),w=await(i=="PUT"?Gu:dn)(d.fetch,`${d.url}/object/${k}`,f,Me({headers:p},m?.duplex?{duplex:m.duplex}:{}));return{data:{path:v,id:w.Id,fullPath:w.Key},error:null}}catch(f){if(d.shouldThrowOnError)throw f;if(Ot(f))return{data:null,error:f};throw f}}async upload(i,n,r){return this.uploadOrUpdate("POST",i,n,r)}async uploadToSignedUrl(i,n,r,c){var d=this;const f=d._removeEmptyFolders(i),m=d._getFinalPath(f),p=new URL(d.url+`/object/upload/sign/${m}`);p.searchParams.set("token",n);try{let g;const v=Me({upsert:Vh.upsert},c),k=Me(Me({},d.headers),{"x-upsert":String(v.upsert)});return typeof Blob<"u"&&r instanceof Blob?(g=new FormData,g.append("cacheControl",v.cacheControl),g.append("",r)):typeof FormData<"u"&&r instanceof FormData?(g=r,g.append("cacheControl",v.cacheControl)):(g=r,k["cache-control"]=`max-age=${v.cacheControl}`,k["content-type"]=v.contentType),{data:{path:f,fullPath:(await Gu(d.fetch,p.toString(),g,{headers:k})).Key},error:null}}catch(g){if(d.shouldThrowOnError)throw g;if(Ot(g))return{data:null,error:g};throw g}}async createSignedUploadUrl(i,n){var r=this;try{let c=r._getFinalPath(i);const d=Me({},r.headers);n?.upsert&&(d["x-upsert"]="true");const f=await dn(r.fetch,`${r.url}/object/upload/sign/${c}`,{},{headers:d}),m=new URL(r.url+f.url),p=m.searchParams.get("token");if(!p)throw new gc("No token returned by API");return{data:{signedUrl:m.toString(),path:i,token:p},error:null}}catch(c){if(r.shouldThrowOnError)throw c;if(Ot(c))return{data:null,error:c};throw c}}async update(i,n,r){return this.uploadOrUpdate("PUT",i,n,r)}async move(i,n,r){var c=this;try{return{data:await dn(c.fetch,`${c.url}/object/move`,{bucketId:c.bucketId,sourceKey:i,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:c.headers}),error:null}}catch(d){if(c.shouldThrowOnError)throw d;if(Ot(d))return{data:null,error:d};throw d}}async copy(i,n,r){var c=this;try{return{data:{path:(await dn(c.fetch,`${c.url}/object/copy`,{bucketId:c.bucketId,sourceKey:i,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:c.headers})).Key},error:null}}catch(d){if(c.shouldThrowOnError)throw d;if(Ot(d))return{data:null,error:d};throw d}}async createSignedUrl(i,n,r){var c=this;try{let d=c._getFinalPath(i),f=await dn(c.fetch,`${c.url}/object/sign/${d}`,Me({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:c.headers});const m=r?.download?`&download=${r.download===!0?"":r.download}`:"";return f={signedUrl:encodeURI(`${c.url}${f.signedURL}${m}`)},{data:f,error:null}}catch(d){if(c.shouldThrowOnError)throw d;if(Ot(d))return{data:null,error:d};throw d}}async createSignedUrls(i,n,r){var c=this;try{const d=await dn(c.fetch,`${c.url}/object/sign/${c.bucketId}`,{expiresIn:n,paths:i},{headers:c.headers}),f=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:d.map(m=>Me(Me({},m),{},{signedUrl:m.signedURL?encodeURI(`${c.url}${m.signedURL}${f}`):null})),error:null}}catch(d){if(c.shouldThrowOnError)throw d;if(Ot(d))return{data:null,error:d};throw d}}download(i,n){const r=typeof n?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(n?.transform||{}),d=c?`?${c}`:"",f=this._getFinalPath(i),m=()=>$r(this.fetch,`${this.url}/${r}/${f}${d}`,{headers:this.headers,noResolveJson:!0});return new Ty(m,this.shouldThrowOnError)}async info(i){var n=this;const r=n._getFinalPath(i);try{return{data:Hu(await $r(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})),error:null}}catch(c){if(n.shouldThrowOnError)throw c;if(Ot(c))return{data:null,error:c};throw c}}async exists(i){var n=this;const r=n._getFinalPath(i);try{return await Ny(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(c){if(n.shouldThrowOnError)throw c;if(Ot(c)&&c instanceof Lu){const d=c.originalError;if([400,404].includes(d?.status))return{data:!1,error:c}}throw c}}getPublicUrl(i,n){const r=this._getFinalPath(i),c=[],d=n?.download?`download=${n.download===!0?"":n.download}`:"";d!==""&&c.push(d);const f=typeof n?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(n?.transform||{});m!==""&&c.push(m);let p=c.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${r}${p}`)}}}async remove(i){var n=this;try{return{data:await Ju(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:i},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}}async list(i,n,r){var c=this;try{const d=Me(Me(Me({},ky),n),{},{prefix:i||""});return{data:await dn(c.fetch,`${c.url}/object/list/${c.bucketId}`,d,{headers:c.headers},r),error:null}}catch(d){if(c.shouldThrowOnError)throw d;if(Ot(d))return{data:null,error:d};throw d}}async listV2(i,n){var r=this;try{const c=Me({},i);return{data:await dn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,c,{headers:r.headers},n),error:null}}catch(c){if(r.shouldThrowOnError)throw c;if(Ot(c))return{data:null,error:c};throw c}}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i.replace(/^\/+/,"")}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const n=[];return i.width&&n.push(`width=${i.width}`),i.height&&n.push(`height=${i.height}`),i.resize&&n.push(`resize=${i.resize}`),i.format&&n.push(`format=${i.format}`),i.quality&&n.push(`quality=${i.quality}`),n.join("&")}};const pp="2.91.0",gp={"X-Client-Info":`storage-js/${pp}`};var Oy=class{constructor(i,n={},r,c){this.shouldThrowOnError=!1;const d=new URL(i);c?.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=Me(Me({},gp),n),this.fetch=Xu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(i){var n=this;try{const r=n.listBucketOptionsToQueryString(i);return{data:await $r(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}}async getBucket(i){var n=this;try{return{data:await $r(n.fetch,`${n.url}/bucket/${i}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}}async createBucket(i,n={public:!1}){var r=this;try{return{data:await dn(r.fetch,`${r.url}/bucket`,{id:i,name:i,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(c){if(r.shouldThrowOnError)throw c;if(Ot(c))return{data:null,error:c};throw c}}async updateBucket(i,n){var r=this;try{return{data:await Gu(r.fetch,`${r.url}/bucket/${i}`,{id:i,name:i,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(c){if(r.shouldThrowOnError)throw c;if(Ot(c))return{data:null,error:c};throw c}}async emptyBucket(i){var n=this;try{return{data:await dn(n.fetch,`${n.url}/bucket/${i}/empty`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}}async deleteBucket(i){var n=this;try{return{data:await Ju(n.fetch,`${n.url}/bucket/${i}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(i){const n={};return i&&("limit"in i&&(n.limit=String(i.limit)),"offset"in i&&(n.offset=String(i.offset)),i.search&&(n.search=i.search),i.sortColumn&&(n.sortColumn=i.sortColumn),i.sortOrder&&(n.sortOrder=i.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},Ry=class{constructor(i,n={},r){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Me(Me({},gp),n),this.fetch=Xu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var n=this;try{return{data:await dn(n.fetch,`${n.url}/bucket`,{name:i},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}}async listBuckets(i){var n=this;try{const r=new URLSearchParams;i?.limit!==void 0&&r.set("limit",i.limit.toString()),i?.offset!==void 0&&r.set("offset",i.offset.toString()),i?.sortColumn&&r.set("sortColumn",i.sortColumn),i?.sortOrder&&r.set("sortOrder",i.sortOrder),i?.search&&r.set("search",i.search);const c=r.toString(),d=c?`${n.url}/bucket?${c}`:`${n.url}/bucket`;return{data:await $r(n.fetch,d,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}}async deleteBucket(i){var n=this;try{return{data:await Ju(n.fetch,`${n.url}/bucket/${i}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ot(r))return{data:null,error:r};throw r}}from(i){var n=this;if(!yy(i))throw new gc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new hy({baseUrl:this.url,catalogName:i,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),c=this.shouldThrowOnError;return new Proxy(r,{get(d,f){const m=d[f];return typeof m!="function"?m:async(...p)=>{try{return{data:await m.apply(d,p),error:null}}catch(g){if(c)throw g;return{data:null,error:g}}}}})}};const Zu={"X-Client-Info":`storage-js/${pp}`,"Content-Type":"application/json"};var vp=class extends Error{constructor(i){super(i),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function za(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}var Ou=class extends vp{constructor(i,n,r){super(i),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Dy=class extends vp{constructor(i,n){super(i),this.name="StorageVectorsUnknownError",this.originalError=n}};const Fu=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),xy=i=>{if(typeof i!="object"||i===null)return!1;const n=Object.getPrototypeOf(i);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Yh=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),My=async(i,n,r)=>{if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!r?.noResolveJson){const c=i.status||500,d=i;if(typeof d.json=="function")d.json().then(f=>{const m=f?.statusCode||f?.code||c+"";n(new Ou(Yh(f),c,m))}).catch(()=>{const f=c+"";n(new Ou(d.statusText||`HTTP ${c} error`,c,f))});else{const f=c+"";n(new Ou(d.statusText||`HTTP ${c} error`,c,f))}}else n(new Dy(Yh(i),i))},Uy=(i,n,r,c)=>{const d={method:i,headers:n?.headers||{}};return c?(xy(c)?(d.headers=Me({"Content-Type":"application/json"},n?.headers),d.body=JSON.stringify(c)):d.body=c,Me(Me({},d),r)):d};async function jy(i,n,r,c,d,f){return new Promise((m,p)=>{i(r,Uy(n,c,d,f)).then(g=>{if(!g.ok)throw g;if(c?.noResolveJson)return g;const v=g.headers.get("content-type");return!v||!v.includes("application/json")?{}:g.json()}).then(g=>m(g)).catch(g=>My(g,p,c))})}async function qa(i,n,r,c,d){return jy(i,"POST",n,c,d,r)}var By=class{constructor(i,n={},r){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Me(Me({},Zu),n),this.fetch=Fu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(i){var n=this;try{return{data:await qa(n.fetch,`${n.url}/CreateIndex`,i,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(za(r))return{data:null,error:r};throw r}}async getIndex(i,n){var r=this;try{return{data:await qa(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:i,indexName:n},{headers:r.headers}),error:null}}catch(c){if(r.shouldThrowOnError)throw c;if(za(c))return{data:null,error:c};throw c}}async listIndexes(i){var n=this;try{return{data:await qa(n.fetch,`${n.url}/ListIndexes`,i,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(za(r))return{data:null,error:r};throw r}}async deleteIndex(i,n){var r=this;try{return{data:await qa(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:i,indexName:n},{headers:r.headers})||{},error:null}}catch(c){if(r.shouldThrowOnError)throw c;if(za(c))return{data:null,error:c};throw c}}},zy=class{constructor(i,n={},r){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Me(Me({},Zu),n),this.fetch=Fu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(i){var n=this;try{if(i.vectors.length<1||i.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await qa(n.fetch,`${n.url}/PutVectors`,i,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(za(r))return{data:null,error:r};throw r}}async getVectors(i){var n=this;try{return{data:await qa(n.fetch,`${n.url}/GetVectors`,i,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(za(r))return{data:null,error:r};throw r}}async listVectors(i){var n=this;try{if(i.segmentCount!==void 0){if(i.segmentCount<1||i.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(i.segmentIndex!==void 0&&(i.segmentIndex<0||i.segmentIndex>=i.segmentCount))throw new Error(`segmentIndex must be between 0 and ${i.segmentCount-1}`)}return{data:await qa(n.fetch,`${n.url}/ListVectors`,i,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(za(r))return{data:null,error:r};throw r}}async queryVectors(i){var n=this;try{return{data:await qa(n.fetch,`${n.url}/QueryVectors`,i,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(za(r))return{data:null,error:r};throw r}}async deleteVectors(i){var n=this;try{if(i.keys.length<1||i.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await qa(n.fetch,`${n.url}/DeleteVectors`,i,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(za(r))return{data:null,error:r};throw r}}},qy=class{constructor(i,n={},r){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Me(Me({},Zu),n),this.fetch=Fu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var n=this;try{return{data:await qa(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:i},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(za(r))return{data:null,error:r};throw r}}async getBucket(i){var n=this;try{return{data:await qa(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:i},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(za(r))return{data:null,error:r};throw r}}async listBuckets(i={}){var n=this;try{return{data:await qa(n.fetch,`${n.url}/ListVectorBuckets`,i,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(za(r))return{data:null,error:r};throw r}}async deleteBucket(i){var n=this;try{return{data:await qa(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:i},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(za(r))return{data:null,error:r};throw r}}},$y=class extends qy{constructor(i,n={}){super(i,n.headers||{},n.fetch)}from(i){return new Ly(this.url,this.headers,i,this.fetch)}async createBucket(i){var n=()=>super.createBucket,r=this;return n().call(r,i)}async getBucket(i){var n=()=>super.getBucket,r=this;return n().call(r,i)}async listBuckets(i={}){var n=()=>super.listBuckets,r=this;return n().call(r,i)}async deleteBucket(i){var n=()=>super.deleteBucket,r=this;return n().call(r,i)}},Ly=class extends By{constructor(i,n,r,c){super(i,n,c),this.vectorBucketName=r}async createIndex(i){var n=()=>super.createIndex,r=this;return n().call(r,Me(Me({},i),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(i={}){var n=()=>super.listIndexes,r=this;return n().call(r,Me(Me({},i),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(i){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,i)}async deleteIndex(i){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,i)}index(i){return new Hy(this.url,this.headers,this.vectorBucketName,i,this.fetch)}},Hy=class extends zy{constructor(i,n,r,c,d){super(i,n,d),this.vectorBucketName=r,this.indexName=c}async putVectors(i){var n=()=>super.putVectors,r=this;return n().call(r,Me(Me({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(i){var n=()=>super.getVectors,r=this;return n().call(r,Me(Me({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(i={}){var n=()=>super.listVectors,r=this;return n().call(r,Me(Me({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(i){var n=()=>super.queryVectors,r=this;return n().call(r,Me(Me({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(i){var n=()=>super.deleteVectors,r=this;return n().call(r,Me(Me({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Gy=class extends Oy{constructor(i,n={},r,c){super(i,n,r,c)}from(i){return new Ay(this.url,this.headers,i,this.fetch)}get vectors(){return new $y(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Ry(this.url+"/iceberg",this.headers,this.fetch)}};const yp="2.91.0",Us=30*1e3,Vu=3,Ru=Vu*Us,Vy="http://localhost:9999",Yy="supabase.auth.token",Ky={"X-Client-Info":`gotrue-js/${yp}`},Yu="X-Supabase-Api-Version",bp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Iy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Py=600*1e3;class Lr extends Error{constructor(n,r,c){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=c}}function Te(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class Qy extends Lr{constructor(n,r,c){super(n,r,c),this.name="AuthApiError",this.status=r,this.code=c}}function Xy(i){return Te(i)&&i.name==="AuthApiError"}class Kl extends Lr{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Hn extends Lr{constructor(n,r,c,d){super(n,c,d),this.name=r,this.status=c}}class Ba extends Hn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Jy(i){return Te(i)&&i.name==="AuthSessionMissingError"}class ks extends Hn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class lc extends Hn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class sc extends Hn{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Zy(i){return Te(i)&&i.name==="AuthImplicitGrantRedirectError"}class Kh extends Hn{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fy extends Hn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ku extends Hn{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function Du(i){return Te(i)&&i.name==="AuthRetryableFetchError"}class Ih extends Hn{constructor(n,r,c){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=c}}class Iu extends Hn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const fc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ph=` 	
\r=`.split(""),Wy=(()=>{const i=new Array(128);for(let n=0;n<i.length;n+=1)i[n]=-1;for(let n=0;n<Ph.length;n+=1)i[Ph[n].charCodeAt(0)]=-2;for(let n=0;n<fc.length;n+=1)i[fc[n].charCodeAt(0)]=n;return i})();function Qh(i,n,r){if(i!==null)for(n.queue=n.queue<<8|i,n.queuedBits+=8;n.queuedBits>=6;){const c=n.queue>>n.queuedBits-6&63;r(fc[c]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const c=n.queue>>n.queuedBits-6&63;r(fc[c]),n.queuedBits-=6}}function _p(i,n,r){const c=Wy[i];if(c>-1)for(n.queue=n.queue<<6|c,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(c===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Xh(i){const n=[],r=m=>{n.push(String.fromCodePoint(m))},c={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},f=m=>{a0(m,c,r)};for(let m=0;m<i.length;m+=1)_p(i.charCodeAt(m),d,f);return n.join("")}function e0(i,n){if(i<=127){n(i);return}else if(i<=2047){n(192|i>>6),n(128|i&63);return}else if(i<=65535){n(224|i>>12),n(128|i>>6&63),n(128|i&63);return}else if(i<=1114111){n(240|i>>18),n(128|i>>12&63),n(128|i>>6&63),n(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function t0(i,n){for(let r=0;r<i.length;r+=1){let c=i.charCodeAt(r);if(c>55295&&c<=56319){const d=(c-55296)*1024&65535;c=(i.charCodeAt(r+1)-56320&65535|d)+65536,r+=1}e0(c,n)}}function a0(i,n,r){if(n.utf8seq===0){if(i<=127){r(i);return}for(let c=1;c<6;c+=1)if((i>>7-c&1)===0){n.utf8seq=c;break}if(n.utf8seq===2)n.codepoint=i&31;else if(n.utf8seq===3)n.codepoint=i&15;else if(n.utf8seq===4)n.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|i&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function zs(i){const n=[],r={queue:0,queuedBits:0},c=d=>{n.push(d)};for(let d=0;d<i.length;d+=1)_p(i.charCodeAt(d),r,c);return new Uint8Array(n)}function n0(i){const n=[];return t0(i,r=>n.push(r)),new Uint8Array(n)}function Il(i){const n=[],r={queue:0,queuedBits:0},c=d=>{n.push(d)};return i.forEach(d=>Qh(d,r,c)),Qh(null,r,c),n.join("")}function l0(i){return Math.round(Date.now()/1e3)+i}function s0(){return Symbol("auth-callback")}const sa=()=>typeof window<"u"&&typeof document<"u",Ll={tested:!1,writable:!1},Ep=()=>{if(!sa())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ll.tested)return Ll.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Ll.tested=!0,Ll.writable=!0}catch{Ll.tested=!0,Ll.writable=!1}return Ll.writable};function r0(i){const n={},r=new URL(i);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((d,f)=>{n[f]=d})}catch{}return r.searchParams.forEach((c,d)=>{n[d]=c}),n}const wp=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),i0=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",js=async(i,n,r)=>{await i.setItem(n,JSON.stringify(r))},Hl=async(i,n)=>{const r=await i.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},na=async(i,n)=>{await i.removeItem(n)};class vc{constructor(){this.promise=new vc.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}vc.promiseConstructor=Promise;function xu(i){const n=i.split(".");if(n.length!==3)throw new Iu("Invalid JWT structure");for(let c=0;c<n.length;c++)if(!Iy.test(n[c]))throw new Iu("JWT not in base64url format");return{header:JSON.parse(Xh(n[0])),payload:JSON.parse(Xh(n[1])),signature:zs(n[2]),raw:{header:n[0],payload:n[1]}}}async function c0(i){return await new Promise(n=>{setTimeout(()=>n(null),i)})}function o0(i,n){return new Promise((c,d)=>{(async()=>{for(let f=0;f<1/0;f++)try{const m=await i(f);if(!n(f,null,m)){c(m);return}}catch(m){if(!n(f,m)){d(m);return}}})()})}function u0(i){return("0"+i.toString(16)).substr(-2)}function d0(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",c=r.length;let d="";for(let f=0;f<56;f++)d+=r.charAt(Math.floor(Math.random()*c));return d}return crypto.getRandomValues(n),Array.from(n,u0).join("")}async function f0(i){const r=new TextEncoder().encode(i),c=await crypto.subtle.digest("SHA-256",r),d=new Uint8Array(c);return Array.from(d).map(f=>String.fromCharCode(f)).join("")}async function m0(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const r=await f0(i);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function As(i,n,r=!1){const c=d0();let d=c;r&&(d+="/PASSWORD_RECOVERY"),await js(i,`${n}-code-verifier`,d);const f=await m0(c);return[f,c===f?"plain":"s256"]}const h0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function p0(i){const n=i.headers.get(Yu);if(!n||!n.match(h0))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function g0(i){if(!i)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(i<=n)throw new Error("JWT has expired")}function v0(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const y0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Os(i){if(!y0.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Mu(){const i={};return new Proxy(i,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const c=r.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function b0(i,n){return new Proxy(i,{get:(r,c,d)=>{if(c==="__isInsecureUserWarningProxy")return!0;if(typeof c=="symbol"){const f=c.toString();if(f==="Symbol(Symbol.toPrimitive)"||f==="Symbol(Symbol.toStringTag)"||f==="Symbol(util.inspect.custom)"||f==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,c,d)}return!n.value&&typeof c=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,c,d)}})}function Jh(i){return JSON.parse(JSON.stringify(i))}const Vl=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),_0=[502,503,504];async function Zh(i){var n;if(!i0(i))throw new Ku(Vl(i),0);if(_0.includes(i.status))throw new Ku(Vl(i),i.status);let r;try{r=await i.json()}catch(f){throw new Kl(Vl(f),f)}let c;const d=p0(i);if(d&&d.getTime()>=bp["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?c=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(c=r.error_code),c){if(c==="weak_password")throw new Ih(Vl(r),i.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(c==="session_not_found")throw new Ba}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((f,m)=>f&&typeof m=="string",!0))throw new Ih(Vl(r),i.status,r.weak_password.reasons);throw new Qy(Vl(r),i.status||500,c)}const E0=(i,n,r,c)=>{const d={method:i,headers:n?.headers||{}};return i==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),d.body=JSON.stringify(c),Object.assign(Object.assign({},d),r))};async function xe(i,n,r,c){var d;const f=Object.assign({},c?.headers);f[Yu]||(f[Yu]=bp["2024-01-01"].name),c?.jwt&&(f.Authorization=`Bearer ${c.jwt}`);const m=(d=c?.query)!==null&&d!==void 0?d:{};c?.redirectTo&&(m.redirect_to=c.redirectTo);const p=Object.keys(m).length?"?"+new URLSearchParams(m).toString():"",g=await w0(i,n,r+p,{headers:f,noResolveJson:c?.noResolveJson},{},c?.body);return c?.xform?c?.xform(g):{data:Object.assign({},g),error:null}}async function w0(i,n,r,c,d,f){const m=E0(n,c,d,f);let p;try{p=await i(r,Object.assign({},m))}catch(g){throw console.error(g),new Ku(Vl(g),0)}if(p.ok||await Zh(p),c?.noResolveJson)return p;try{return await p.json()}catch(g){await Zh(g)}}function un(i){var n;let r=null;C0(i)&&(r=Object.assign({},i),i.expires_at||(r.expires_at=l0(i.expires_in)));const c=(n=i.user)!==null&&n!==void 0?n:i;return{data:{session:r,user:c},error:null}}function Fh(i){const n=un(i);return!n.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((r,c)=>r&&typeof c=="string",!0)&&(n.data.weak_password=i.weak_password),n}function bl(i){var n;return{data:{user:(n=i.user)!==null&&n!==void 0?n:i},error:null}}function S0(i){return{data:i,error:null}}function N0(i){const{action_link:n,email_otp:r,hashed_token:c,redirect_to:d,verification_type:f}=i,m=pc(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:r,hashed_token:c,redirect_to:d,verification_type:f},g=Object.assign({},m);return{data:{properties:p,user:g},error:null}}function Wh(i){return i}function C0(i){return i.access_token&&i.refresh_token&&i.expires_in}const Uu=["global","local","others"];class T0{constructor({url:n="",headers:r={},fetch:c}){this.url=n,this.headers=r,this.fetch=wp(c),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=Uu[0]){if(Uu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Uu.join(", ")}`);try{return await xe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(c){if(Te(c))return{data:null,error:c};throw c}}async inviteUserByEmail(n,r={}){try{return await xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:bl})}catch(c){if(Te(c))return{data:{user:null},error:c};throw c}}async generateLink(n){try{const{options:r}=n,c=pc(n,["options"]),d=Object.assign(Object.assign({},c),r);return"newEmail"in c&&(d.new_email=c?.newEmail,delete d.newEmail),await xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:N0,redirectTo:r?.redirectTo})}catch(r){if(Te(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await xe(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:bl})}catch(r){if(Te(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,c,d,f,m,p,g;try{const v={nextPage:null,lastPage:0,total:0},k=await xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(c=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&c!==void 0?c:"",per_page:(f=(d=n?.perPage)===null||d===void 0?void 0:d.toString())!==null&&f!==void 0?f:""},xform:Wh});if(k.error)throw k.error;const w=await k.json(),D=(m=k.headers.get("x-total-count"))!==null&&m!==void 0?m:0,z=(g=(p=k.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return z.length>0&&(z.forEach(x=>{const L=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),Y=JSON.parse(x.split(";")[1].split("=")[1]);v[`${Y}Page`]=L}),v.total=parseInt(D)),{data:Object.assign(Object.assign({},w),v),error:null}}catch(v){if(Te(v))return{data:{users:[]},error:v};throw v}}async getUserById(n){Os(n);try{return await xe(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:bl})}catch(r){if(Te(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){Os(n);try{return await xe(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:bl})}catch(c){if(Te(c))return{data:{user:null},error:c};throw c}}async deleteUser(n,r=!1){Os(n);try{return await xe(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:bl})}catch(c){if(Te(c))return{data:{user:null},error:c};throw c}}async _listFactors(n){Os(n.userId);try{const{data:r,error:c}=await xe(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:r,error:c}}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _deleteFactor(n){Os(n.userId),Os(n.id);try{return{data:await xe(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,c,d,f,m,p,g;try{const v={nextPage:null,lastPage:0,total:0},k=await xe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(c=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&c!==void 0?c:"",per_page:(f=(d=n?.perPage)===null||d===void 0?void 0:d.toString())!==null&&f!==void 0?f:""},xform:Wh});if(k.error)throw k.error;const w=await k.json(),D=(m=k.headers.get("x-total-count"))!==null&&m!==void 0?m:0,z=(g=(p=k.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return z.length>0&&(z.forEach(x=>{const L=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),Y=JSON.parse(x.split(";")[1].split("=")[1]);v[`${Y}Page`]=L}),v.total=parseInt(D)),{data:Object.assign(Object.assign({},w),v),error:null}}catch(v){if(Te(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(n){try{return await xe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await xe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await xe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:c=>({data:c,error:null})})}catch(c){if(Te(c))return{data:null,error:c};throw c}}async _deleteOAuthClient(n){try{return await xe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await xe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Te(r))return{data:null,error:r};throw r}}}function ep(i={}){return{getItem:n=>i[n]||null,setItem:(n,r)=>{i[n]=r},removeItem:n=>{delete i[n]}}}const Rs={debug:!!(globalThis&&Ep()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Sp extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class k0 extends Sp{}async function A0(i,n,r){Rs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,n);const c=new globalThis.AbortController;return n>0&&setTimeout(()=>{c.abort(),Rs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:c.signal},async d=>{if(d){Rs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,d.name);try{return await r()}finally{Rs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,d.name)}}else{if(n===0)throw Rs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new k0(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Rs.debug)try{const f=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(f,null,"  "))}catch(f){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",f)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function O0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Np(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function R0(i){return parseInt(i,16)}function D0(i){const n=new TextEncoder().encode(i);return"0x"+Array.from(n,c=>c.toString(16).padStart(2,"0")).join("")}function x0(i){var n;const{chainId:r,domain:c,expirationTime:d,issuedAt:f=new Date,nonce:m,notBefore:p,requestId:g,resources:v,scheme:k,uri:w,version:D}=i;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!c)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(m&&m.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${m}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(D!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${D}`);if(!((n=i.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const z=Np(i.address),x=k?`${k}://${c}`:c,L=i.statement?`${i.statement}
`:"",Y=`${x} wants you to sign in with your Ethereum account:
${z}

${L}`;let ne=`URI: ${w}
Version: ${D}
Chain ID: ${r}${m?`
Nonce: ${m}`:""}
Issued At: ${f.toISOString()}`;if(d&&(ne+=`
Expiration Time: ${d.toISOString()}`),p&&(ne+=`
Not Before: ${p.toISOString()}`),g&&(ne+=`
Request ID: ${g}`),v){let re=`
Resources:`;for(const X of v){if(!X||typeof X!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${X}`);re+=`
- ${X}`}ne+=re}return`${Y}
${ne}`}class It extends Error{constructor({message:n,code:r,cause:c,name:d}){var f;super(n,{cause:c}),this.__isWebAuthnError=!0,this.name=(f=d??(c instanceof Error?c.name:void 0))!==null&&f!==void 0?f:"Unknown Error",this.code=r}}class mc extends It{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function M0({error:i,options:n}){var r,c,d;const{publicKey:f}=n;if(!f)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(n.signal instanceof AbortSignal)return new It({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((r=f.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new It({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(n.mediation==="conditional"&&((c=f.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new It({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((d=f.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new It({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new It({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new It({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return f.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new It({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new It({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const m=window.location.hostname;if(Cp(m)){if(f.rp.id!==m)return new It({message:`The RP ID "${f.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new It({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(f.user.id.byteLength<1||f.user.id.byteLength>64)return new It({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new It({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new It({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function U0({error:i,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(n.signal instanceof AbortSignal)return new It({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new It({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const c=window.location.hostname;if(Cp(c)){if(r.rpId!==c)return new It({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new It({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new It({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new It({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class j0{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const B0=new j0;function z0(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:n,user:r,excludeCredentials:c}=i,d=pc(i,["challenge","user","excludeCredentials"]),f=zs(n).buffer,m=Object.assign(Object.assign({},r),{id:zs(r.id).buffer}),p=Object.assign(Object.assign({},d),{challenge:f,user:m});if(c&&c.length>0){p.excludeCredentials=new Array(c.length);for(let g=0;g<c.length;g++){const v=c[g];p.excludeCredentials[g]=Object.assign(Object.assign({},v),{id:zs(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return p}function q0(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:n,allowCredentials:r}=i,c=pc(i,["challenge","allowCredentials"]),d=zs(n).buffer,f=Object.assign(Object.assign({},c),{challenge:d});if(r&&r.length>0){f.allowCredentials=new Array(r.length);for(let m=0;m<r.length;m++){const p=r[m];f.allowCredentials[m]=Object.assign(Object.assign({},p),{id:zs(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return f}function $0(i){var n;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const r=i;return{id:i.id,rawId:i.id,response:{attestationObject:Il(new Uint8Array(i.response.attestationObject)),clientDataJSON:Il(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function L0(i){var n;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const r=i,c=i.getClientExtensionResults(),d=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:Il(new Uint8Array(d.authenticatorData)),clientDataJSON:Il(new Uint8Array(d.clientDataJSON)),signature:Il(new Uint8Array(d.signature)),userHandle:d.userHandle?Il(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:c,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Cp(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function tp(){var i,n;return!!(sa()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function H0(i){try{const n=await navigator.credentials.create(i);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new mc("Browser returned unexpected credential type",n)}:{data:null,error:new mc("Empty credential response",n)}}catch(n){return{data:null,error:M0({error:n,options:i})}}}async function G0(i){try{const n=await navigator.credentials.get(i);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new mc("Browser returned unexpected credential type",n)}:{data:null,error:new mc("Empty credential response",n)}}catch(n){return{data:null,error:U0({error:n,options:i})}}}const V0={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Y0={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function hc(...i){const n=d=>d!==null&&typeof d=="object"&&!Array.isArray(d),r=d=>d instanceof ArrayBuffer||ArrayBuffer.isView(d),c={};for(const d of i)if(d)for(const f in d){const m=d[f];if(m!==void 0)if(Array.isArray(m))c[f]=m;else if(r(m))c[f]=m;else if(n(m)){const p=c[f];n(p)?c[f]=hc(p,m):c[f]=hc(m)}else c[f]=m}return c}function K0(i,n){return hc(V0,i,n||{})}function I0(i,n){return hc(Y0,i,n||{})}class P0{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:c,signal:d},f){try{const{data:m,error:p}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!m)return{data:null,error:p};const g=d??B0.createNewAbortSignal();if(m.webauthn.type==="create"){const{user:v}=m.webauthn.credential_options.publicKey;v.name||(v.name=`${v.id}:${c}`),v.displayName||(v.displayName=v.name)}switch(m.webauthn.type){case"create":{const v=K0(m.webauthn.credential_options.publicKey,f?.create),{data:k,error:w}=await H0({publicKey:v,signal:g});return k?{data:{factorId:n,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:k}},error:null}:{data:null,error:w}}case"request":{const v=I0(m.webauthn.credential_options.publicKey,f?.request),{data:k,error:w}=await G0(Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:v,signal:g}));return k?{data:{factorId:n,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:k}},error:null}:{data:null,error:w}}}}catch(m){return Te(m)?{data:null,error:m}:{data:null,error:new Kl("Unexpected error in challenge",m)}}}async _verify({challengeId:n,factorId:r,webauthn:c}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:c})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:c=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},f){if(!r)return{data:null,error:new Lr("rpId is required for WebAuthn authentication")};try{if(!tp())return{data:null,error:new Kl("Browser does not support WebAuthn",null)};const{data:m,error:p}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:c},signal:d},{request:f});if(!m)return{data:null,error:p};const{webauthn:g}=m;return this._verify({factorId:n,challengeId:m.challengeId,webauthn:{type:g.type,rpId:r,rpOrigins:c,credential_response:g.credential_response}})}catch(m){return Te(m)?{data:null,error:m}:{data:null,error:new Kl("Unexpected error in authenticate",m)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:c=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},f){if(!r)return{data:null,error:new Lr("rpId is required for WebAuthn registration")};try{if(!tp())return{data:null,error:new Kl("Browser does not support WebAuthn",null)};const{data:m,error:p}=await this._enroll({friendlyName:n});if(!m)return await this.client.mfa.listFactors().then(k=>{var w;return(w=k.data)===null||w===void 0?void 0:w.all.find(D=>D.factor_type==="webauthn"&&D.friendly_name===n&&D.status!=="unverified")}).then(k=>k?this.client.mfa.unenroll({factorId:k?.id}):void 0),{data:null,error:p};const{data:g,error:v}=await this._challenge({factorId:m.id,friendlyName:m.friendly_name,webauthn:{rpId:r,rpOrigins:c},signal:d},{create:f});return g?this._verify({factorId:m.id,challengeId:g.challengeId,webauthn:{rpId:r,rpOrigins:c,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:v}}catch(m){return Te(m)?{data:null,error:m}:{data:null,error:new Kl("Unexpected error in register",m)}}}}O0();const Q0={url:Vy,storageKey:Yy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ky,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function ap(i,n,r){return await r()}const Ds={};class Hr{get jwks(){var n,r;return(r=(n=Ds[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Ds[this.storageKey]=Object.assign(Object.assign({},Ds[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Ds[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Ds[this.storageKey]=Object.assign(Object.assign({},Ds[this.storageKey]),{cachedAt:n})}constructor(n){var r,c,d;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const f=Object.assign(Object.assign({},Q0),n);if(this.storageKey=f.storageKey,this.instanceID=(r=Hr.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Hr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!f.debug,typeof f.debug=="function"&&(this.logger=f.debug),this.instanceID>0&&sa()){const m=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(m),this.logDebugMessages&&console.trace(m)}if(this.persistSession=f.persistSession,this.autoRefreshToken=f.autoRefreshToken,this.admin=new T0({url:f.url,headers:f.headers,fetch:f.fetch}),this.url=f.url,this.headers=f.headers,this.fetch=wp(f.fetch),this.lock=f.lock||ap,this.detectSessionInUrl=f.detectSessionInUrl,this.flowType=f.flowType,this.hasCustomAuthorizationHeader=f.hasCustomAuthorizationHeader,this.throwOnError=f.throwOnError,this.lockAcquireTimeout=f.lockAcquireTimeout,f.lock?this.lock=f.lock:this.persistSession&&sa()&&(!((c=globalThis?.navigator)===null||c===void 0)&&c.locks)?this.lock=A0:this.lock=ap,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new P0(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(f.storage?this.storage=f.storage:Ep()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ep(this.memoryStorage)),f.userStorage&&(this.userStorage=f.userStorage)):(this.memoryStorage={},this.storage=ep(this.memoryStorage)),sa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(m){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",m)}(d=this.broadcastChannel)===null||d===void 0||d.addEventListener("message",async m=>{this._debug("received broadcast notification from other tab or client",m),await this._notifyAllSubscribers(m.data.event,m.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${yp}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},c="none";if(sa()&&(r=r0(window.location.href),this._isImplicitGrantCallback(r)?c="implicit":await this._isPKCECallback(r)&&(c="pkce")),sa()&&this.detectSessionInUrl&&c!=="none"){const{data:d,error:f}=await this._getSessionFromURL(r,c);if(f){if(this._debug("#_initialize()","error detecting session from URL",f),Zy(f)){const g=(n=f.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:f}}return{error:f}}const{session:m,redirectType:p}=d;return this._debug("#_initialize()","detected session in URL",m,"redirect type",p),await this._saveSession(m),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",m):await this._notifyAllSubscribers("SIGNED_IN",m)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Te(r)?this._returnResult({error:r}):this._returnResult({error:new Kl("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,c,d;try{const f=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(c=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&c!==void 0?c:{},gotrue_meta_security:{captcha_token:(d=n?.options)===null||d===void 0?void 0:d.captchaToken}},xform:un}),{data:m,error:p}=f;if(p||!m)return this._returnResult({data:{user:null,session:null},error:p});const g=m.session,v=m.user;return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:v,session:g},error:null})}catch(f){if(Te(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signUp(n){var r,c,d;try{let f;if("email"in n){const{email:k,password:w,options:D}=n;let z=null,x=null;this.flowType==="pkce"&&([z,x]=await As(this.storage,this.storageKey)),f=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:D?.emailRedirectTo,body:{email:k,password:w,data:(r=D?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:D?.captchaToken},code_challenge:z,code_challenge_method:x},xform:un})}else if("phone"in n){const{phone:k,password:w,options:D}=n;f=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:k,password:w,data:(c=D?.data)!==null&&c!==void 0?c:{},channel:(d=D?.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:D?.captchaToken}},xform:un})}else throw new lc("You must provide either an email or phone number and a password");const{data:m,error:p}=f;if(p||!m)return await na(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const g=m.session,v=m.user;return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:v,session:g},error:null})}catch(f){if(await na(this.storage,`${this.storageKey}-code-verifier`),Te(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signInWithPassword(n){try{let r;if("email"in n){const{email:f,password:m,options:p}=n;r=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:f,password:m,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Fh})}else if("phone"in n){const{phone:f,password:m,options:p}=n;r=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:f,password:m,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Fh})}else throw new lc("You must provide either an email or phone number and a password");const{data:c,error:d}=r;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const f=new ks;return this._returnResult({data:{user:null,session:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign({user:c.user,session:c.session},c.weak_password?{weakPassword:c.weak_password}:null),error:d})}catch(r){if(Te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,c,d,f;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(c=n.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=n.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(f=n.options)===null||f===void 0?void 0:f.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,c,d,f,m,p,g,v,k,w,D;let z,x;if("message"in n)z=n.message,x=n.signature;else{const{chain:L,wallet:Y,statement:ne,options:re}=n;let X;if(sa())if(typeof Y=="object")X=Y;else{const oe=window;if("ethereum"in oe&&typeof oe.ethereum=="object"&&"request"in oe.ethereum&&typeof oe.ethereum.request=="function")X=oe.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof Y!="object"||!re?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");X=Y}const ve=new URL((r=re?.url)!==null&&r!==void 0?r:window.location.href),Ce=await X.request({method:"eth_requestAccounts"}).then(oe=>oe).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Ce||Ce.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=Np(Ce[0]);let ce=(c=re?.signInWithEthereum)===null||c===void 0?void 0:c.chainId;if(!ce){const oe=await X.request({method:"eth_chainId"});ce=R0(oe)}const P={domain:ve.host,address:R,statement:ne,uri:ve.href,version:"1",chainId:ce,nonce:(d=re?.signInWithEthereum)===null||d===void 0?void 0:d.nonce,issuedAt:(m=(f=re?.signInWithEthereum)===null||f===void 0?void 0:f.issuedAt)!==null&&m!==void 0?m:new Date,expirationTime:(p=re?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(g=re?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(v=re?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(k=re?.signInWithEthereum)===null||k===void 0?void 0:k.resources};z=x0(P),x=await X.request({method:"personal_sign",params:[D0(z),R]})}try{const{data:L,error:Y}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:z,signature:x},!((w=n.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(D=n.options)===null||D===void 0?void 0:D.captchaToken}}:null),xform:un});if(Y)throw Y;if(!L||!L.session||!L.user){const ne=new ks;return this._returnResult({data:{user:null,session:null},error:ne})}return L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),this._returnResult({data:Object.assign({},L),error:Y})}catch(L){if(Te(L))return this._returnResult({data:{user:null,session:null},error:L});throw L}}async signInWithSolana(n){var r,c,d,f,m,p,g,v,k,w,D,z;let x,L;if("message"in n)x=n.message,L=n.signature;else{const{chain:Y,wallet:ne,statement:re,options:X}=n;let ve;if(sa())if(typeof ne=="object")ve=ne;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))ve=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof ne!="object"||!X?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ve=ne}const Ce=new URL((r=X?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in ve&&ve.signIn){const R=await ve.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},X?.signInWithSolana),{version:"1",domain:Ce.host,uri:Ce.href}),re?{statement:re}:null));let ce;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")ce=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)ce=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ce&&"signature"in ce&&(typeof ce.signedMessage=="string"||ce.signedMessage instanceof Uint8Array)&&ce.signature instanceof Uint8Array)x=typeof ce.signedMessage=="string"?ce.signedMessage:new TextDecoder().decode(ce.signedMessage),L=ce.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ve)||typeof ve.signMessage!="function"||!("publicKey"in ve)||typeof ve!="object"||!ve.publicKey||!("toBase58"in ve.publicKey)||typeof ve.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${Ce.host} wants you to sign in with your Solana account:`,ve.publicKey.toBase58(),...re?["",re,""]:[""],"Version: 1",`URI: ${Ce.href}`,`Issued At: ${(d=(c=X?.signInWithSolana)===null||c===void 0?void 0:c.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((f=X?.signInWithSolana)===null||f===void 0)&&f.notBefore?[`Not Before: ${X.signInWithSolana.notBefore}`]:[],...!((m=X?.signInWithSolana)===null||m===void 0)&&m.expirationTime?[`Expiration Time: ${X.signInWithSolana.expirationTime}`]:[],...!((p=X?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${X.signInWithSolana.chainId}`]:[],...!((g=X?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${X.signInWithSolana.nonce}`]:[],...!((v=X?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${X.signInWithSolana.requestId}`]:[],...!((w=(k=X?.signInWithSolana)===null||k===void 0?void 0:k.resources)===null||w===void 0)&&w.length?["Resources",...X.signInWithSolana.resources.map(ce=>`- ${ce}`)]:[]].join(`
`);const R=await ve.signMessage(new TextEncoder().encode(x),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");L=R}}try{const{data:Y,error:ne}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Il(L)},!((D=n.options)===null||D===void 0)&&D.captchaToken?{gotrue_meta_security:{captcha_token:(z=n.options)===null||z===void 0?void 0:z.captchaToken}}:null),xform:un});if(ne)throw ne;if(!Y||!Y.session||!Y.user){const re=new ks;return this._returnResult({data:{user:null,session:null},error:re})}return Y.session&&(await this._saveSession(Y.session),await this._notifyAllSubscribers("SIGNED_IN",Y.session)),this._returnResult({data:Object.assign({},Y),error:ne})}catch(Y){if(Te(Y))return this._returnResult({data:{user:null,session:null},error:Y});throw Y}}async _exchangeCodeForSession(n){const r=await Hl(this.storage,`${this.storageKey}-code-verifier`),[c,d]=(r??"").split("/");try{if(!c&&this.flowType==="pkce")throw new Fy;const{data:f,error:m}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:c},xform:un});if(await na(this.storage,`${this.storageKey}-code-verifier`),m)throw m;if(!f||!f.session||!f.user){const p=new ks;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return f.session&&(await this._saveSession(f.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",f.session)},0)),this._returnResult({data:Object.assign(Object.assign({},f),{redirectType:d??null}),error:m})}catch(f){if(await na(this.storage,`${this.storageKey}-code-verifier`),Te(f))return this._returnResult({data:{user:null,session:null,redirectType:null},error:f});throw f}}async signInWithIdToken(n){try{const{options:r,provider:c,token:d,access_token:f,nonce:m}=n,p=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:c,id_token:d,access_token:f,nonce:m,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:un}),{data:g,error:v}=p;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!g||!g.session||!g.user){const k=new ks;return this._returnResult({data:{user:null,session:null},error:k})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:v})}catch(r){if(Te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,c,d,f,m;try{if("email"in n){const{email:p,options:g}=n;let v=null,k=null;this.flowType==="pkce"&&([v,k]=await As(this.storage,this.storageKey));const{error:w}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(r=g?.data)!==null&&r!==void 0?r:{},create_user:(c=g?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:v,code_challenge_method:k},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in n){const{phone:p,options:g}=n,{data:v,error:k}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(d=g?.data)!==null&&d!==void 0?d:{},create_user:(f=g?.shouldCreateUser)!==null&&f!==void 0?f:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(m=g?.channel)!==null&&m!==void 0?m:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v?.message_id},error:k})}throw new lc("You must provide either an email or phone number.")}catch(p){if(await na(this.storage,`${this.storageKey}-code-verifier`),Te(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(n){var r,c;try{let d,f;"options"in n&&(d=(r=n.options)===null||r===void 0?void 0:r.redirectTo,f=(c=n.options)===null||c===void 0?void 0:c.captchaToken);const{data:m,error:p}=await xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:f}}),redirectTo:d,xform:un});if(p)throw p;if(!m)throw new Error("An error occurred on token verification.");const g=m.session,v=m.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:v,session:g},error:null})}catch(d){if(Te(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithSSO(n){var r,c,d,f,m;try{let p=null,g=null;this.flowType==="pkce"&&([p,g]=await As(this.storage,this.storageKey));const v=await xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(c=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&c!==void 0?c:void 0}),!((d=n?.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:g}),headers:this.headers,xform:S0});return!((f=v.data)===null||f===void 0)&&f.url&&sa()&&!(!((m=n.options)===null||m===void 0)&&m.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(p){if(await na(this.storage,`${this.storageKey}-code-verifier`),Te(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:c}=n;if(c)throw c;if(!r)throw new Ba;const{error:d}=await xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(n){if(Te(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:c,type:d,options:f}=n,{error:m}=await xe(this.fetch,"POST",r,{headers:this.headers,body:{email:c,type:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}else if("phone"in n){const{phone:c,type:d,options:f}=n,{data:m,error:p}=await xe(this.fetch,"POST",r,{headers:this.headers,body:{phone:c,type:d,gotrue_meta_security:{captcha_token:f?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:m?.message_id},error:p})}throw new lc("You must provide either an email or phone number and a type")}catch(r){if(Te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const c=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await c,await r()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const c=r();for(this.pendingInLock.push((async()=>{try{await c}catch{}})()),await c;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await c}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await Hl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const c=n.expires_at?n.expires_at*1e3-Date.now()<Ru:!1;if(this._debug("#__loadSession()",`session has${c?"":" not"} expired`,"expires_at",n.expires_at),!c){if(this.userStorage){const m=await Hl(this.userStorage,this.storageKey+"-user");m?.user?n.user=m.user:n.user=Mu()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const m={value:this.suppressGetSessionWarning};n.user=b0(n.user,m),m.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:d,error:f}=await this._callRefreshToken(n.refresh_token);return f?this._returnResult({data:{session:null},error:f}):this._returnResult({data:{session:d},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:bl}):await this._useSession(async r=>{var c,d,f;const{data:m,error:p}=r;if(p)throw p;return!(!((c=m.session)===null||c===void 0)&&c.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ba}:await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(f=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0,xform:bl})})}catch(r){if(Te(r))return Jy(r)&&(await this._removeSession(),await na(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async c=>{const{data:d,error:f}=c;if(f)throw f;if(!d.session)throw new Ba;const m=d.session;let p=null,g=null;this.flowType==="pkce"&&n.email!=null&&([p,g]=await As(this.storage,this.storageKey));const{data:v,error:k}=await xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:g}),jwt:m.access_token,xform:bl});if(k)throw k;return m.user=v.user,await this._saveSession(m),await this._notifyAllSubscribers("USER_UPDATED",m),this._returnResult({data:{user:m.user},error:null})})}catch(c){if(await na(this.storage,`${this.storageKey}-code-verifier`),Te(c))return this._returnResult({data:{user:null},error:c});throw c}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Ba;const r=Date.now()/1e3;let c=r,d=!0,f=null;const{payload:m}=xu(n.access_token);if(m.exp&&(c=m.exp,d=c<=r),d){const{data:p,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p)return{data:{user:null,session:null},error:null};f=p}else{const{data:p,error:g}=await this._getUser(n.access_token);if(g)throw g;f={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:c-r,expires_at:c},await this._saveSession(f),await this._notifyAllSubscribers("SIGNED_IN",f)}return this._returnResult({data:{user:f.user,session:f},error:null})}catch(r){if(Te(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var c;if(!n){const{data:m,error:p}=r;if(p)throw p;n=(c=m.session)!==null&&c!==void 0?c:void 0}if(!n?.refresh_token)throw new Ba;const{data:d,error:f}=await this._callRefreshToken(n.refresh_token);return f?this._returnResult({data:{user:null,session:null},error:f}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!sa())throw new sc("No browser detected.");if(n.error||n.error_description||n.error_code)throw new sc(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Kh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new sc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Kh("No code detected.");const{data:re,error:X}=await this._exchangeCodeForSession(n.code);if(X)throw X;const ve=new URL(window.location.href);return ve.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ve.toString()),{data:{session:re.session,redirectType:null},error:null}}const{provider_token:c,provider_refresh_token:d,access_token:f,refresh_token:m,expires_in:p,expires_at:g,token_type:v}=n;if(!f||!p||!m||!v)throw new sc("No session defined in URL");const k=Math.round(Date.now()/1e3),w=parseInt(p);let D=k+w;g&&(D=parseInt(g));const z=D-k;z*1e3<=Us&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${z}s, should have been closer to ${w}s`);const x=D-w;k-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,D,k):k-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,D,k);const{data:L,error:Y}=await this._getUser(f);if(Y)throw Y;const ne={provider_token:c,provider_refresh_token:d,access_token:f,expires_in:w,expires_at:D,refresh_token:m,token_type:v,user:L.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:ne,redirectType:n.type},error:null})}catch(c){if(Te(c))return this._returnResult({data:{session:null,redirectType:null},error:c});throw c}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await Hl(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var c;const{data:d,error:f}=r;if(f)return this._returnResult({error:f});const m=(c=d.session)===null||c===void 0?void 0:c.access_token;if(m){const{error:p}=await this.admin.signOut(m,n);if(p&&!(Xy(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return n!=="others"&&(await this._removeSession(),await na(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=s0(),c={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,c),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:c}}}async _emitInitialSession(n){return await this._useSession(async r=>{var c,d;try{const{data:{session:f},error:m}=r;if(m)throw m;await((c=this.stateChangeEmitters.get(n))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",f)),this._debug("INITIAL_SESSION","callback id",n,"session",f)}catch(f){await((d=this.stateChangeEmitters.get(n))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",f),console.error(f)}})}async resetPasswordForEmail(n,r={}){let c=null,d=null;this.flowType==="pkce"&&([c,d]=await As(this.storage,this.storageKey,!0));try{return await xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:c,code_challenge_method:d,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(f){if(await na(this.storage,`${this.storageKey}-code-verifier`),Te(f))return this._returnResult({data:null,error:f});throw f}}async getUserIdentities(){var n;try{const{data:r,error:c}=await this.getUser();if(c)throw c;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:c,error:d}=await this._useSession(async f=>{var m,p,g,v,k;const{data:w,error:D}=f;if(D)throw D;const z=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(m=n.options)===null||m===void 0?void 0:m.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await xe(this.fetch,"GET",z,{headers:this.headers,jwt:(k=(v=w.session)===null||v===void 0?void 0:v.access_token)!==null&&k!==void 0?k:void 0})});if(d)throw d;return sa()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(c?.url),this._returnResult({data:{provider:n.provider,url:c?.url},error:null})}catch(c){if(Te(c))return this._returnResult({data:{provider:n.provider,url:null},error:c});throw c}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var c;try{const{error:d,data:{session:f}}=r;if(d)throw d;const{options:m,provider:p,token:g,access_token:v,nonce:k}=n,w=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(c=f?.access_token)!==null&&c!==void 0?c:void 0,body:{provider:p,id_token:g,access_token:v,nonce:k,link_identity:!0,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:un}),{data:D,error:z}=w;return z?this._returnResult({data:{user:null,session:null},error:z}):!D||!D.session||!D.user?this._returnResult({data:{user:null,session:null},error:new ks}):(D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("USER_UPDATED",D.session)),this._returnResult({data:D,error:z}))}catch(d){if(await na(this.storage,`${this.storageKey}-code-verifier`),Te(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var c,d;const{data:f,error:m}=r;if(m)throw m;return await xe(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const c=Date.now();return await o0(async d=>(d>0&&await c0(200*Math.pow(2,d-1)),this._debug(r,"refreshing attempt",d),await xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:un})),(d,f)=>{const m=200*Math.pow(2,d);return f&&Du(f)&&Date.now()+m-c<Us})}catch(c){if(this._debug(r,"error",c),Te(c))return this._returnResult({data:{session:null,user:null},error:c});throw c}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const c=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",c),sa()&&!r.skipBrowserRedirect&&window.location.assign(c),{data:{provider:n,url:c},error:null}}async _recoverAndRefresh(){var n,r;const c="#_recoverAndRefresh()";this._debug(c,"begin");try{const d=await Hl(this.storage,this.storageKey);if(d&&this.userStorage){let m=await Hl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!m&&(m={user:d.user},await js(this.userStorage,this.storageKey+"-user",m)),d.user=(n=m?.user)!==null&&n!==void 0?n:Mu()}else if(d&&!d.user&&!d.user){const m=await Hl(this.storage,this.storageKey+"-user");m&&m?.user?(d.user=m.user,await na(this.storage,this.storageKey+"-user"),await js(this.storage,this.storageKey,d)):d.user=Mu()}if(this._debug(c,"session from storage",d),!this._isValidSession(d)){this._debug(c,"session is not valid"),d!==null&&await this._removeSession();return}const f=((r=d.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ru;if(this._debug(c,`session has${f?"":" not"} expired with margin of ${Ru}s`),f){if(this.autoRefreshToken&&d.refresh_token){const{error:m}=await this._callRefreshToken(d.refresh_token);m&&(console.error(m),Du(m)||(this._debug(c,"refresh failed with a non-retryable error, removing the session",m),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:m,error:p}=await this._getUser(d.access_token);!p&&m?.user?(d.user=m.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(c,"could not get user data, skipping SIGNED_IN notification")}catch(m){console.error("Error getting user data:",m),this._debug(c,"error getting user data, skipping SIGNED_IN notification",m)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(c,"error",d),console.error(d);return}finally{this._debug(c,"end")}}async _callRefreshToken(n){var r,c;if(!n)throw new Ba;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new vc;const{data:f,error:m}=await this._refreshAccessToken(n);if(m)throw m;if(!f.session)throw new Ba;await this._saveSession(f.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",f.session);const p={data:f.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(f){if(this._debug(d,"error",f),Te(f)){const m={data:null,error:f};return Du(f)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(m),m}throw(c=this.refreshingDeferred)===null||c===void 0||c.reject(f),f}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(n,r,c=!0){const d=`#_notifyAllSubscribers(${n})`;this._debug(d,"begin",r,`broadcast = ${c}`);try{this.broadcastChannel&&c&&this.broadcastChannel.postMessage({event:n,session:r});const f=[],m=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,r)}catch(g){f.push(g)}});if(await Promise.all(m),f.length>0){for(let p=0;p<f.length;p+=1)console.error(f[p]);throw f[0]}}finally{this._debug(d,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await na(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),c=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!c&&r.user&&await js(this.userStorage,this.storageKey+"-user",{user:r.user});const d=Object.assign({},r);delete d.user;const f=Jh(d);await js(this.storage,this.storageKey,f)}else{const d=Jh(r);await js(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await na(this.storage,this.storageKey),await na(this.storage,this.storageKey+"-code-verifier"),await na(this.storage,this.storageKey+"-user"),this.userStorage&&await na(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&sa()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Us);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:c}}=r;if(!c||!c.refresh_token||!c.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((c.expires_at*1e3-n)/Us);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${Us}ms, refresh threshold is ${Vu} ticks`),d<=Vu&&await this._callRefreshToken(c.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Sp)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!sa()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,c){const d=[`provider=${encodeURIComponent(r)}`];if(c?.redirectTo&&d.push(`redirect_to=${encodeURIComponent(c.redirectTo)}`),c?.scopes&&d.push(`scopes=${encodeURIComponent(c.scopes)}`),this.flowType==="pkce"){const[f,m]=await As(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(f)}`,code_challenge_method:`${encodeURIComponent(m)}`});d.push(p.toString())}if(c?.queryParams){const f=new URLSearchParams(c.queryParams);d.push(f.toString())}return c?.skipBrowserRedirect&&d.push(`skip_http_redirect=${c.skipBrowserRedirect}`),`${n}?${d.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var c;const{data:d,error:f}=r;return f?this._returnResult({data:null,error:f}):await xe(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(c=d?.session)===null||c===void 0?void 0:c.access_token})})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var c,d;const{data:f,error:m}=r;if(m)return this._returnResult({data:null,error:m});const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:g,error:v}=await xe(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(c=f?.session)===null||c===void 0?void 0:c.access_token});return v?this._returnResult({data:null,error:v}):(n.factorType==="totp"&&g.type==="totp"&&(!((d=g?.totp)===null||d===void 0)&&d.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var c;const{data:d,error:f}=r;if(f)return this._returnResult({data:null,error:f});const m=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?$0(n.webauthn.credential_response):L0(n.webauthn.credential_response)})}:{code:n.code}),{data:p,error:g}=await xe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:m,headers:this.headers,jwt:(c=d?.session)===null||c===void 0?void 0:c.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:g}))})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var c;const{data:d,error:f}=r;if(f)return this._returnResult({data:null,error:f});const m=await xe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(c=d?.session)===null||c===void 0?void 0:c.access_token});if(m.error)return m;const{data:p}=m;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:z0(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:q0(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:c}=await this._challenge({factorId:n.factorId});return c?this._returnResult({data:null,error:c}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:c}=await this.getUser();if(c)return{data:null,error:c};const d={all:[],phone:[],totp:[],webauthn:[]};for(const f of(n=r?.factors)!==null&&n!==void 0?n:[])d.all.push(f),f.status==="verified"&&d[f.factor_type].push(f);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(){var n,r;const{data:{session:c},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=xu(c.access_token);let m=null;f.aal&&(m=f.aal);let p=m;((r=(n=c.user.factors)===null||n===void 0?void 0:n.filter(k=>k.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(p="aal2");const v=f.amr||[];return{data:{currentLevel:m,nextLevel:p,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:c},error:d}=r;return d?this._returnResult({data:null,error:d}):c?await xe(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:c.access_token,xform:f=>({data:f,error:null})}):this._returnResult({data:null,error:new Ba})})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async c=>{const{data:{session:d},error:f}=c;if(f)return this._returnResult({data:null,error:f});if(!d)return this._returnResult({data:null,error:new Ba});const m=await xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return m.data&&m.data.redirect_url&&sa()&&!r?.skipBrowserRedirect&&window.location.assign(m.data.redirect_url),m})}catch(c){if(Te(c))return this._returnResult({data:null,error:c});throw c}}async _denyAuthorization(n,r){try{return await this._useSession(async c=>{const{data:{session:d},error:f}=c;if(f)return this._returnResult({data:null,error:f});if(!d)return this._returnResult({data:null,error:new Ba});const m=await xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return m.data&&m.data.redirect_url&&sa()&&!r?.skipBrowserRedirect&&window.location.assign(m.data.redirect_url),m})}catch(c){if(Te(c))return this._returnResult({data:null,error:c});throw c}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:c}=n;return c?this._returnResult({data:null,error:c}):r?await xe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new Ba})})}catch(n){if(Te(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:c},error:d}=r;return d?this._returnResult({data:null,error:d}):c?(await xe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:c.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ba})})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let c=r.keys.find(p=>p.kid===n);if(c)return c;const d=Date.now();if(c=this.jwks.keys.find(p=>p.kid===n),c&&this.jwks_cached_at+Py>d)return c;const{data:f,error:m}=await xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(m)throw m;return!f.keys||f.keys.length===0||(this.jwks=f,this.jwks_cached_at=d,c=f.keys.find(p=>p.kid===n),!c)?null:c}async getClaims(n,r={}){try{let c=n;if(!c){const{data:z,error:x}=await this.getSession();if(x||!z.session)return this._returnResult({data:null,error:x});c=z.session.access_token}const{header:d,payload:f,signature:m,raw:{header:p,payload:g}}=xu(c);r?.allowExpired||g0(f.exp);const v=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!v){const{error:z}=await this.getUser(c);if(z)throw z;return{data:{claims:f,header:d,signature:m},error:null}}const k=v0(d.alg),w=await crypto.subtle.importKey("jwk",v,k,!0,["verify"]);if(!await crypto.subtle.verify(k,w,m,n0(`${p}.${g}`)))throw new Iu("Invalid JWT signature");return{data:{claims:f,header:d,signature:m},error:null}}catch(c){if(Te(c))return this._returnResult({data:null,error:c});throw c}}}Hr.nextInstanceID={};const X0=Hr,J0="2.91.0";let Ur="";typeof Deno<"u"?Ur="deno":typeof document<"u"?Ur="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ur="react-native":Ur="node";const Z0={"X-Client-Info":`supabase-js-${Ur}/${J0}`},F0={headers:Z0},W0={schema:"public"},eb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tb={};function Gr(i){"@babel/helpers - typeof";return Gr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Gr(i)}function ab(i,n){if(Gr(i)!="object"||!i)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var c=r.call(i,n);if(Gr(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function nb(i){var n=ab(i,"string");return Gr(n)=="symbol"?n:n+""}function lb(i,n,r){return(n=nb(n))in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i}function np(i,n){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);n&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(i,d).enumerable})),r.push.apply(r,c)}return r}function jt(i){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?np(Object(r),!0).forEach(function(c){lb(i,c,r[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):np(Object(r)).forEach(function(c){Object.defineProperty(i,c,Object.getOwnPropertyDescriptor(r,c))})}return i}const sb=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),rb=()=>Headers,ib=(i,n,r)=>{const c=sb(r),d=rb();return async(f,m)=>{var p;const g=(p=await n())!==null&&p!==void 0?p:i;let v=new d(m?.headers);return v.has("apikey")||v.set("apikey",i),v.has("Authorization")||v.set("Authorization",`Bearer ${g}`),c(f,jt(jt({},m),{},{headers:v}))}};function cb(i){return i.endsWith("/")?i:i+"/"}function ob(i,n){var r,c;const{db:d,auth:f,realtime:m,global:p}=i,{db:g,auth:v,realtime:k,global:w}=n,D={db:jt(jt({},g),d),auth:jt(jt({},v),f),realtime:jt(jt({},k),m),storage:{},global:jt(jt(jt({},w),p),{},{headers:jt(jt({},(r=w?.headers)!==null&&r!==void 0?r:{}),(c=p?.headers)!==null&&c!==void 0?c:{})}),accessToken:async()=>""};return i.accessToken?D.accessToken=i.accessToken:delete D.accessToken,D}function ub(i){const n=i?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(cb(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var db=class extends X0{constructor(i){super(i)}},fb=class{constructor(i,n,r){var c,d;this.supabaseUrl=i,this.supabaseKey=n;const f=ub(i);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const m=`sb-${f.hostname.split(".")[0]}-auth-token`,p={db:W0,realtime:tb,auth:jt(jt({},eb),{},{storageKey:m}),global:F0},g=ob(r??{},p);if(this.storageKey=(c=g.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(d=g.global.headers)!==null&&d!==void 0?d:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(k,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var v;this.auth=this._initSupabaseAuthClient((v=g.auth)!==null&&v!==void 0?v:{},this.headers,g.global.fetch)}this.fetch=ib(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(jt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(k=>this.realtime.setAuth(k)).catch(k=>console.warn("Failed to set initial Realtime auth token:",k)),this.rest=new Kv(new URL("rest/v1",f).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new Gy(this.storageUrl.href,this.headers,this.fetch,r?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new Lv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(i,n,r)}channel(i,n={config:{}}){return this.realtime.channel(i,n)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var i=this,n,r;if(i.accessToken)return await i.accessToken();const{data:c}=await i.auth.getSession();return(n=(r=c.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:i.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:n,detectSessionInUrl:r,storage:c,userStorage:d,storageKey:f,flowType:m,lock:p,debug:g,throwOnError:v},k,w){const D={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new db({url:this.authUrl.href,headers:jt(jt({},D),k),storageKey:f,autoRefreshToken:i,persistSession:n,detectSessionInUrl:r,storage:c,userStorage:d,flowType:m,lock:p,debug:g,throwOnError:v,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(z=>z.toLowerCase()==="authorization")})}_initRealtimeClient(i){return new cy(this.realtimeUrl.href,jt(jt({},i),{},{params:jt(jt({},{apikey:this.supabaseKey}),i?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,n)=>{this._handleTokenChanged(i,"CLIENT",n?.access_token)})}_handleTokenChanged(i,n,r){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):i==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const mb=(i,n,r)=>new fb(i,n,r);function hb(){if(typeof window<"u")return!1;const i=globalThis.process;if(!i)return!1;const n=i.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}hb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const pb="https://mzpfwxrdituexjpwqlqz.supabase.co",gb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im16cGZ3eHJkaXR1ZXhqcHdxbHF6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwMTA3MjIsImV4cCI6MjA4NDU4NjcyMn0.eggtdN05BCQGrE2KzITYne2i8qxNhXSULt_7a1YIOIY",ee=mb(pb,gb),lp=i=>{if(!i||typeof i!="string")return{valid:!1,error:"Email is required"};const n=i.trim();return n.length===0?{valid:!1,error:"Email cannot be empty"}:n.length>254?{valid:!1,error:"Email is too long"}:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)?{valid:!0,value:n}:{valid:!1,error:"Please enter a valid email address"}},vb=i=>!i||typeof i!="string"?{valid:!1,error:"Password is required"}:i.length<8?{valid:!1,error:"Password must be at least 8 characters"}:i.length>128?{valid:!1,error:"Password is too long (max 128 characters)"}:/\d/.test(i)?/[a-zA-Z]/.test(i)?{valid:!0,value:i}:{valid:!1,error:"Password must contain at least one letter"}:{valid:!1,error:"Password must contain at least one number"},yb=i=>{if(!i||typeof i!="string")return{valid:!1,error:"Display name is required"};const n=i.trim();return n.length===0?{valid:!1,error:"Display name cannot be empty"}:n.length<2?{valid:!1,error:"Display name must be at least 2 characters"}:n.length>32?{valid:!1,error:"Display name cannot exceed 32 characters"}:/^[a-zA-Z0-9\s\-_'.]+$/.test(n)?/[a-zA-Z0-9]/.test(n)?{valid:!0,value:n}:{valid:!1,error:"Display name must contain letters or numbers"}:{valid:!1,error:"Display name contains invalid characters"}};function bb({children:i,onSession:n,onProfile:r,navItems:c=[],onProfileClick:d,compact:f=!1}){const[m,p]=Z.useState(null),[g,v]=Z.useState(null),[k,w]=Z.useState(!0),[D,z]=Z.useState(""),[x,L]=Z.useState(""),[Y,ne]=Z.useState(""),[re,X]=Z.useState("");Z.useEffect(()=>{let be=!0;(async()=>{const{data:Ee}=await ee.auth.getSession();be&&(p(Ee.session??null),w(!1))})();const{data:Xe}=ee.auth.onAuthStateChange((Ee,K)=>{p(K),v(null),X(""),n&&n(K)});return()=>{be=!1,Xe?.subscription?.unsubscribe()}},[]),Z.useEffect(()=>{(async()=>{if(!m)return;const{data:Ye,error:Xe}=await ee.from("profiles").select("id, display_name, account_xp, account_level, rating, avatar_url, soft_currency, premium_currency, role").eq("id",m.user.id).maybeSingle();if(Xe){X(Xe.message);return}v(Ye||null),r&&r(Ye||null)})()},[m]);const ve=async()=>{X("");const be=lp(D);if(!be.valid){X(be.error);return}if(!x||x.length===0){X("Password is required");return}const{error:Ye}=await ee.auth.signInWithPassword({email:be.value,password:x});Ye&&(Ye.message.includes("Invalid login credentials")?X("Invalid email or password. Please try again."):Ye.message.includes("Email not confirmed")?X("Please confirm your email address before signing in."):X(Ye.message))},Ce=async()=>{X("");const be=lp(D);if(!be.valid){X(be.error);return}const Ye=vb(x);if(!Ye.valid){X(Ye.error);return}const{error:Xe}=await ee.auth.signUp({email:be.value,password:Ye.value});Xe?Xe.message.includes("already registered")?X("This email is already registered. Please sign in instead."):Xe.message.includes("invalid email")?X("Please enter a valid email address."):X(Xe.message):X("")},R=async()=>{if(!m)return;X("");const be=yb(Y);if(!be.valid){X(be.error);return}const{error:Ye}=await ee.from("profiles").upsert({id:m.user.id,display_name:be.value,updated_at:new Date().toISOString()});if(Ye){Ye.message.includes("duplicate key")?X("This display name is already taken. Please choose another."):Ye.message.includes("violates")?X("Display name contains invalid characters."):X(`Failed to save profile: ${Ye.message}`);return}const Xe={id:m.user.id,display_name:be.value,account_xp:0,account_level:1,rating:1e3,avatar_url:null,soft_currency:0,premium_currency:0,role:"player"};v(Xe),r&&r(Xe)},ce=async()=>{await ee.auth.signOut(),v(null),r&&r(null),n&&n(null)};if(k)return s.createElement("div",{className:"auth-screen"},s.createElement("div",{className:"auth-panel"},s.createElement("div",{className:"auth-logo"},""),s.createElement("h1",null,"CURSED ARENA"),s.createElement("p",{className:"auth-subtitle"},"Loading your experience..."),s.createElement("div",{className:"auth-loading"},s.createElement("div",{className:"auth-loading-bar"}))));if(!m)return s.createElement("div",{className:"auth-screen"},s.createElement("div",{className:"auth-panel"},s.createElement("div",{className:"auth-logo"},""),s.createElement("h1",null,"CURSED ARENA"),s.createElement("p",{className:"auth-subtitle"},"Sign in or create an account to save your progress and compete with others."),s.createElement("label",{className:"auth-label"},s.createElement("span",{className:"auth-label-text"},"Email Address"),s.createElement("input",{type:"email",value:D,onChange:be=>z(be.target.value),className:"auth-input",placeholder:"you@example.com"})),s.createElement("label",{className:"auth-label"},s.createElement("span",{className:"auth-label-text"},"Password"),s.createElement("input",{type:"password",value:x,onChange:be=>L(be.target.value),className:"auth-input",placeholder:"At least 8 characters, include number & letter"})),re&&s.createElement("p",{className:"auth-error"}," ",re),s.createElement("div",{className:"auth-actions"},s.createElement("button",{className:"auth-btn primary",onClick:ve},s.createElement("span",null,"Sign In")),s.createElement("button",{className:"auth-btn secondary",onClick:Ce},s.createElement("span",null,"Create Account")))));if(!g)return s.createElement("div",{className:"auth-screen"},s.createElement("div",{className:"auth-panel"},s.createElement("div",{className:"auth-logo"},""),s.createElement("h1",null,"WELCOME WARRIOR"),s.createElement("p",{className:"auth-subtitle"},"Choose a display name to begin your journey in the Cursed Arena."),s.createElement("label",{className:"auth-label"},s.createElement("span",{className:"auth-label-text"},"Display Name"),s.createElement("input",{type:"text",value:Y,onChange:be=>ne(be.target.value),className:"auth-input",placeholder:"Your in-game name",maxLength:32})),re&&s.createElement("p",{className:"auth-error"}," ",re),s.createElement("div",{className:"auth-actions"},s.createElement("button",{className:"auth-btn primary",onClick:R},s.createElement("span",null,"Start Playing")),s.createElement("button",{className:"auth-btn secondary",onClick:ce},s.createElement("span",null,"Sign Out")))));const P=g?.account_level||1,oe=g?.account_xp||0,ze=100+P*25,Le=g?.display_name?.[0]?.toUpperCase()||"?";return s.createElement("div",{className:"auth-wrapper"},s.createElement("div",{className:`auth-bar ${f?"compact":""}`},s.createElement("button",{className:"auth-user-card",type:"button",onClick:d,disabled:!d},s.createElement("div",{className:"auth-avatar"},g?.avatar_url?s.createElement("img",{src:g.avatar_url,alt:g.display_name}):s.createElement("span",null,Le)),s.createElement("div",{className:"auth-user-meta"},s.createElement("span",{className:"auth-user-name"},g.display_name),s.createElement("span",{className:"auth-user-level"},"Lv ",P,"  ",oe,"/",ze," XP"))),s.createElement("div",{className:"auth-center"},s.createElement("div",{className:"auth-title"},"Cursed Arena"),c.length>0&&s.createElement("div",{className:"auth-nav"},c.map(be=>s.createElement("button",{key:be.label,type:"button",className:`auth-nav-btn ${be.active?"active":""}`,onClick:be.onClick,disabled:be.disabled},be.label)))),s.createElement("div",{className:"auth-actions"},s.createElement("div",{className:"auth-currency"},s.createElement("span",null,"Soft ",g?.soft_currency??0),s.createElement("span",null,"Premium ",g?.premium_currency??0)),!f&&s.createElement("button",{className:"auth-link",onClick:ce},"Sign Out"))),s.createElement("div",{className:"auth-content"},i))}function _b({profile:i,matchHistory:n,onBack:r,onProfileUpdate:c,titles:d,onSetActiveTitle:f}){const m=i?.display_name||"Unknown",p=i?.account_level||1,g=i?.account_xp||0,v=i?.rating??1e3,k=100+p*25,w=Math.min(100,Math.floor(g/k*100)),D=n.filter(P=>P.result==="win").length,z=n.filter(P=>P.result==="lose").length,x=D+z,L=x>0?Math.round(D/x*100):0,Y=m.slice(0,2).toUpperCase(),ne=(d||[]).find(P=>P.active),re=Z.useRef(null),[X,ve]=Z.useState(!1),[Ce,R]=Z.useState(""),ce=async P=>{const oe=P.target.files?.[0];if(!oe||!i?.id)return;ve(!0),R("");const ze=oe.name.split(".").pop(),Le=`${i.id}/${Date.now()}.${ze}`,{error:be}=await ee.storage.from("avatars").upload(Le,oe,{upsert:!0});if(be){R(be.message),ve(!1);return}const{data:Ye}=ee.storage.from("avatars").getPublicUrl(Le),Xe=Ye?.publicUrl||null,{error:Ee}=await ee.from("profiles").update({avatar_url:Xe,updated_at:new Date().toISOString()}).eq("id",i.id);if(Ee){R(Ee.message),ve(!1);return}c?.({...i,avatar_url:Xe}),ve(!1)};return s.createElement("div",{className:"profile-page"},s.createElement("div",{className:"profile-header"},s.createElement("button",{className:"profile-back",onClick:r}," Back"),s.createElement("h1",null,"Player Profile")),s.createElement("div",{className:"profile-grid"},s.createElement("div",{className:"profile-card primary"},s.createElement("div",{className:"profile-hero"},s.createElement("div",{className:"profile-avatar"},i?.avatar_url?s.createElement("img",{src:i.avatar_url,alt:m}):Y),s.createElement("div",null,s.createElement("h2",null,m),s.createElement("p",{className:"profile-subtitle"},"Active  ",ne?`Title: ${ne.title_id.replace(/_/g," ")}`:"Clanless"),s.createElement("div",{className:"profile-avatar-actions"},s.createElement("button",{className:"profile-avatar-btn",onClick:()=>re.current?.click(),disabled:X},X?"Uploading...":"Upload Avatar"),Ce&&s.createElement("span",{className:"profile-upload-error"},Ce),s.createElement("input",{ref:re,type:"file",accept:"image/*",className:"profile-avatar-input",onChange:ce})))),s.createElement("div",{className:"profile-stats"},s.createElement("div",null,s.createElement("span",null,"Account Level"),s.createElement("strong",null,"Lv ",p)),s.createElement("div",null,s.createElement("span",null,"Rating"),s.createElement("strong",null,v)),s.createElement("div",null,s.createElement("span",null,"Record"),s.createElement("strong",null,D,"W / ",z,"L")),s.createElement("div",null,s.createElement("span",null,"Win Rate"),s.createElement("strong",null,L,"%"))),s.createElement("div",{className:"profile-xp"},s.createElement("div",{className:"profile-xp-text"},"Account XP ",g,"/",k),s.createElement("div",{className:"profile-xp-bar"},s.createElement("div",{className:"profile-xp-fill",style:{width:`${w}%`}})))),s.createElement("div",{className:"profile-card"},s.createElement("h3",null,"Match History"),n.length===0?s.createElement("p",{className:"profile-empty"},"No matches yet. Jump in and play!"):s.createElement("div",{className:"match-list"},n.map(P=>s.createElement("div",{key:P.id,className:`match-row ${P.result}`},s.createElement("div",{className:"match-result"},P.result==="win"?"WIN":"LOSS"),s.createElement("div",{className:"match-meta"},s.createElement("span",null,"Turns: ",P.turns??"-"),s.createElement("span",null,"Rating: ",P.rating_delta>=0?"+":"",P.rating_delta)),s.createElement("div",{className:"match-xp"},s.createElement("span",null,"Account +",P.account_xp_gain),s.createElement("span",null,"Team +",P.character_xp_gain)),s.createElement("div",{className:"match-date"},new Date(P.created_at).toLocaleString()))))),s.createElement("div",{className:"profile-card"},s.createElement("h3",null,"Activity"),s.createElement("div",{className:"activity-grid"},s.createElement("div",null,s.createElement("span",null,"Status"),s.createElement("strong",null,"Online")),s.createElement("div",null,s.createElement("span",null,"Clan"),s.createElement("strong",null,"None")),s.createElement("div",null,s.createElement("span",null,"Favorite Mode"),s.createElement("strong",null,"Unranked")),s.createElement("div",null,s.createElement("span",null,"Last Match"),s.createElement("strong",null,n[0]?.result?n[0].result.toUpperCase():"N/A")))),s.createElement("div",{className:"profile-card"},s.createElement("h3",null,"Titles"),(d||[]).length===0?s.createElement("p",{className:"profile-empty"},"No titles unlocked yet."):s.createElement("div",{className:"profile-title-grid"},(d||[]).map(P=>s.createElement("button",{key:P.title_id,className:`profile-title-pill ${P.active?"active":""}`,onClick:()=>f?.(P.title_id),type:"button"},P.title_id.replace(/_/g," ")))))))}function Eb({missions:i,userMissions:n,onBack:r,onClaim:c}){const d=new Map(n.map(p=>[p.mission_id,p])),f=p=>i.filter(g=>g.type===p),m=p=>{const g=d.get(p.id),v=g?.progress??0;g?.claimed;const k=Math.min(100,Math.floor(v/p.target*100));return s.createElement("div",{key:p.id,className:"mission-card"},s.createElement("div",null,s.createElement("h4",null,p.title),s.createElement("p",null,p.description),s.createElement("div",{className:"mission-progress"},s.createElement("div",{className:"mission-progress-bar"},s.createElement("div",{className:"mission-progress-fill",style:{width:`${k}%`}})),s.createElement("span",null,v,"/",p.target))),s.createElement("div",{className:"mission-reward"},s.createElement("span",null,"Soft +",p.reward_soft),s.createElement("span",null,"Premium +",p.reward_premium),p.reward_shard_character_id&&p.reward_shard_amount>0&&s.createElement("span",null,"Shard +",p.reward_shard_amount)))};return s.createElement("div",{className:"meta-page"},s.createElement("div",{className:"meta-header"},s.createElement("button",{className:"profile-back",onClick:r}," Back"),s.createElement("h1",null,"Missions")),s.createElement("div",{className:"meta-grid"},s.createElement("section",null,s.createElement("h3",null,"Daily"),s.createElement("div",{className:"mission-list"},f("daily").map(p=>s.createElement("div",{key:p.id},m(p),s.createElement("button",{className:"mission-claim",onClick:()=>c?.(p.id),disabled:(d.get(p.id)?.claimed??!1)||(d.get(p.id)?.progress??0)<p.target},d.get(p.id)?.claimed?"Claimed":"Claim Reward"))))),s.createElement("section",null,s.createElement("h3",null,"Weekly"),s.createElement("div",{className:"mission-list"},f("weekly").map(p=>s.createElement("div",{key:p.id},m(p),s.createElement("button",{className:"mission-claim",onClick:()=>c?.(p.id),disabled:(d.get(p.id)?.claimed??!1)||(d.get(p.id)?.progress??0)<p.target},d.get(p.id)?.claimed?"Claimed":"Claim Reward"))))),s.createElement("section",null,s.createElement("h3",null,"Limited Time"),s.createElement("div",{className:"mission-list"},f("limited").map(p=>s.createElement("div",{key:p.id},m(p),s.createElement("button",{className:"mission-claim",onClick:()=>c?.(p.id),disabled:(d.get(p.id)?.claimed??!1)||(d.get(p.id)?.progress??0)<p.target},d.get(p.id)?.claimed?"Claimed":"Claim Reward")))))))}function wb({offers:i,profile:n,onBack:r,onPurchase:c}){const[d,f]=Z.useState(null),[m,p]=Z.useState(null),g=n?.soft_currency??0,v=n?.premium_currency??0,k=async w=>{f(w),p(null),await c?.(w),f(null),p(w),setTimeout(()=>p(null),2e3)};return s.createElement("div",{className:"shop-page"},s.createElement("div",{className:"shop-header"},s.createElement("button",{className:"shop-back",onClick:r},s.createElement("span",null,""),s.createElement("span",null,"Back")),s.createElement("div",{className:"shop-title"},s.createElement("h1",null,"Item Shop"),s.createElement("div",{className:"shop-currency-display"},s.createElement("div",{className:"currency-badge soft"},s.createElement("span",{className:"currency-icon"},""),s.createElement("span",{className:"currency-amount"},g.toLocaleString())),s.createElement("div",{className:"currency-badge premium"},s.createElement("span",{className:"currency-icon"},""),s.createElement("span",{className:"currency-amount"},v.toLocaleString()))))),s.createElement("div",{className:"shop-container"},i.length===0?s.createElement("div",{className:"shop-empty-state"},s.createElement("div",{className:"empty-icon"},""),s.createElement("h2",null,"Shop is Restocking"),s.createElement("p",null,"Check back soon for new items!")):s.createElement("div",{className:"shop-offers-grid"},i.map(w=>{const D=g>=w.cost_soft&&v>=w.cost_premium,z=d===w.id,x=m===w.id;return s.createElement("div",{key:w.id,className:`shop-offer-card ${x?"just-purchased":""} ${D?"":"locked"}`},s.createElement("div",{className:"offer-header"},s.createElement("h3",null,w.name),x&&s.createElement("div",{className:"purchased-badge"}," Purchased")),s.createElement("div",{className:"offer-body"},s.createElement("p",{className:"offer-description"},w.description),s.createElement("div",{className:"offer-rewards"},s.createElement("div",{className:"rewards-label"},"You Get:"),s.createElement("div",{className:"rewards-list"},w.item_type==="shards"&&w.shard_amount>0&&s.createElement("div",{className:"reward-item"},s.createElement("span",{className:"reward-icon"},""),s.createElement("span",{className:"reward-text"},w.shard_amount," Character Shards")),w.item_type==="currency"&&s.createElement(s.Fragment,null,w.soft_currency>0&&s.createElement("div",{className:"reward-item"},s.createElement("span",{className:"reward-icon"},""),s.createElement("span",{className:"reward-text"},w.soft_currency.toLocaleString()," Soft Currency")),w.premium_currency>0&&s.createElement("div",{className:"reward-item"},s.createElement("span",{className:"reward-icon"},""),s.createElement("span",{className:"reward-text"},w.premium_currency.toLocaleString()," Premium Currency")))))),s.createElement("div",{className:"offer-footer"},s.createElement("div",{className:"offer-price"},w.cost_soft>0&&s.createElement("div",{className:`price-tag soft ${g<w.cost_soft?"insufficient":""}`},s.createElement("span",{className:"price-icon"},""),s.createElement("span",{className:"price-value"},w.cost_soft.toLocaleString())),w.cost_premium>0&&s.createElement("div",{className:`price-tag premium ${v<w.cost_premium?"insufficient":""}`},s.createElement("span",{className:"price-icon"},""),s.createElement("span",{className:"price-value"},w.cost_premium.toLocaleString()))),s.createElement("button",{className:`offer-buy-button ${x?"purchased":""} ${D?"":"disabled"}`,onClick:()=>k(w.id),disabled:!D||z},z?s.createElement(s.Fragment,null,s.createElement("span",{className:"button-spinner"}),s.createElement("span",null,"Purchasing...")):x?s.createElement(s.Fragment,null,s.createElement("span",null,""),s.createElement("span",null,"Purchased!")):D?s.createElement(s.Fragment,null,s.createElement("span",null,""),s.createElement("span",null,"Purchase")):s.createElement(s.Fragment,null,s.createElement("span",null,""),s.createElement("span",null,"Insufficient Funds")))))}))))}function Sb({banners:i,bannerItems:n,profile:r,items:c,characters:d,onBack:f,onPull:m,result:p,onClearResult:g}){const[v,k]=Z.useState(!1),[w,D]=Z.useState(!1),z=r?.premium_currency??0,x=c?.finger_fragment??0,L=100,Y=i[0],ne=Y?n.filter(P=>P.banner_id===Y.id):[],re=ne.reduce((P,oe)=>P+(oe.weight||0),0),X=Z.useMemo(()=>{const P=new Map;return(d||[]).forEach(oe=>P.set(oe.id,oe)),P},[d]);Z.useEffect(()=>{p&&(D(!0),k(!1))},[p]);const ve=async(P,oe={})=>{k(!0),D(!1),await m?.(P,oe)},Ce=()=>{D(!1),setTimeout(()=>{g?.()},300)},R=P=>{if(P.item_type==="character"&&P.character_id)return X.get(P.character_id)?.name||`Character #${P.character_id}`;if(P.item_type==="shards"&&P.character_id)return`${X.get(P.character_id)?.name||`Character #${P.character_id}`} Shards`;if(P.item_type==="currency"){if(P.soft_currency>0)return"Soft Currency";if(P.premium_currency>0)return"Premium Currency"}return P.item_type},ce=P=>P.item_type==="character"?"rarity-ssr":P.item_type==="shards"?"rarity-sr":"rarity-r";return s.createElement("div",{className:"gacha-page"},s.createElement("div",{className:"gacha-header"},s.createElement("button",{className:"gacha-back",onClick:f},s.createElement("span",null,""),s.createElement("span",null,"Back")),s.createElement("div",{className:"gacha-title"},s.createElement("h1",null,"Summoning Portal"),s.createElement("div",{className:"gacha-currency-display"},s.createElement("div",{className:"currency-badge premium"},s.createElement("span",{className:"currency-icon"},""),s.createElement("span",{className:"currency-amount"},z)),s.createElement("div",{className:"currency-badge fragment"},s.createElement("span",{className:"currency-icon"},""),s.createElement("span",{className:"currency-amount"},x))))),s.createElement("div",{className:"gacha-container"},s.createElement("div",{className:"gacha-main"},s.createElement("div",{className:"banner-showcase"},s.createElement("div",{className:"banner-art"},s.createElement("div",{className:"banner-glow"}),s.createElement("div",{className:"banner-content"},s.createElement("h2",null,Y?Y.name:"No Active Banner"),s.createElement("p",null,Y?.description||"Check back soon for the next featured banner."))),!Y&&s.createElement("div",{className:"banner-empty"},s.createElement("div",{className:"empty-icon"},""),s.createElement("p",null,"No active summoning banner"),s.createElement("span",null,"Check back soon!")),Y&&s.createElement("div",{className:"pull-actions"},s.createElement("button",{className:`pull-button primary ${v?"pulling":""}`,onClick:()=>ve(Y.id),disabled:z<L||v},s.createElement("div",{className:"pull-button-content"},s.createElement("span",{className:"pull-icon"},""),s.createElement("div",{className:"pull-text"},s.createElement("span",{className:"pull-label"},v?"Summoning...":"Single Summon"),s.createElement("span",{className:"pull-cost"},L," Premium"))),z<L&&s.createElement("div",{className:"pull-overlay"},"Insufficient Funds")),s.createElement("button",{className:`pull-button fragment ${v?"pulling":""}`,onClick:()=>ve(Y.id,{useFragment:!0}),disabled:x<=0||v},s.createElement("div",{className:"pull-button-content"},s.createElement("span",{className:"pull-icon"},""),s.createElement("div",{className:"pull-text"},s.createElement("span",{className:"pull-label"},v?"Summoning...":"Fragment Summon"),s.createElement("span",{className:"pull-cost"},"1 Fragment"))),x<=0&&s.createElement("div",{className:"pull-overlay"},"No Fragments"))),v&&!p&&s.createElement("div",{className:"summoning-animation"},s.createElement("div",{className:"summon-circle"},s.createElement("div",{className:"summon-ring ring-1"}),s.createElement("div",{className:"summon-ring ring-2"}),s.createElement("div",{className:"summon-ring ring-3"}),s.createElement("div",{className:"summon-core"})),s.createElement("p",{className:"summon-text"},"Summoning...")),p&&s.createElement("div",{className:`summon-result ${w?"revealed":""}`},s.createElement("button",{className:"result-close",onClick:Ce},""),s.createElement("div",{className:"result-backdrop"}),s.createElement("div",{className:"result-card"},s.createElement("div",{className:`result-rarity ${ce(p)}`},p.item_type==="character"&&s.createElement(s.Fragment,null,s.createElement("div",{className:"rarity-stars"},""),s.createElement("div",{className:"rarity-label"},"NEW CHARACTER"))),s.createElement("div",{className:"result-name"},R(p)),s.createElement("div",{className:"result-rewards"},p.item_type==="character"&&s.createElement("span",{className:"reward-badge"},"+30 Shards"),p.item_type==="shards"&&s.createElement("span",{className:"reward-badge"},"+",p.shard_amount," Shards"),p.soft_currency>0&&s.createElement("span",{className:"reward-badge"},"+",p.soft_currency," Soft"),p.premium_currency>0&&s.createElement("span",{className:"reward-badge"},"+",p.premium_currency," Premium")))))),s.createElement("div",{className:"gacha-sidebar"},s.createElement("div",{className:"drop-rates"},s.createElement("h3",null,"Drop Rates"),s.createElement("div",{className:"rates-list"},ne.map((P,oe)=>{const ze=re>0?((P.weight||0)/re*100).toFixed(1):0;return s.createElement("div",{key:`${P.item_type}-${oe}`,className:`rate-item ${ce(P)}`},s.createElement("div",{className:"rate-info"},s.createElement("span",{className:"rate-name"},R(P)),P.item_type==="shards"&&s.createElement("span",{className:"rate-amount"},"",P.shard_amount),P.soft_currency>0&&s.createElement("span",{className:"rate-amount"},"",P.soft_currency),P.premium_currency>0&&s.createElement("span",{className:"rate-amount"},"",P.premium_currency)),s.createElement("div",{className:"rate-bar"},s.createElement("div",{className:"rate-fill",style:{width:`${ze}%`}})),s.createElement("span",{className:"rate-percent"},ze,"%"))}))))))}function Nb({characters:i,inventory:n,characterProgress:r,items:c,titles:d,onBack:f,onLimitBreak:m,limitBreakCost:p}){const[g,v]=Z.useState("characters"),[k,w]=Z.useState(""),[D,z]=Z.useState("name"),[x,L]=Z.useState("all"),Y=Object.entries(c||{}),ne=(d||[]).filter(R=>R.unlocked),re=k.trim().toLowerCase(),X=Z.useMemo(()=>i.map(R=>{const ce=r[R.id],P=n[R.id]||0;return{character:R,shards:P,unlocked:!!ce,progress:ce||{level:1,xp:0,limit_break:0}}}),[i,r,n]),ve=Z.useMemo(()=>{let R=X;x==="unlocked"&&(R=R.filter(P=>P.unlocked)),x==="locked"&&(R=R.filter(P=>!P.unlocked)),re&&(R=R.filter(P=>P.character.name.toLowerCase().includes(re)));const ce=[...R];return ce.sort((P,oe)=>{switch(D){case"level":return(oe.progress.level||1)-(P.progress.level||1);case"shards":return oe.shards-P.shards;case"limit_break":return(oe.progress.limit_break||0)-(P.progress.limit_break||0);default:return P.character.name.localeCompare(oe.character.name)}}),ce},[X,x,re,D]),Ce=R=>{const{character:ce,shards:P,progress:oe,unlocked:ze}=R,Le=oe.limit_break+1,be=ze&&Le<=5&&P>=p(Le),Ye=ce.portraitUrl||dc(ce.name);return s.createElement("div",{key:ce.id,className:`inventory-card ${ze?"unlocked":"locked"}`},s.createElement("div",{className:"inventory-portrait"},Ye?s.createElement("img",{src:Ye,alt:ce.name}):s.createElement("span",null,ce.name[0])),s.createElement("div",{className:"inventory-info"},s.createElement("h4",null,ce.name),s.createElement("div",{className:"inventory-stats"},s.createElement("span",null,"Lv ",oe.level),s.createElement("span",null,"LB ",oe.limit_break,"/5")),s.createElement("div",{className:"inventory-shards"},"Shards: ",P),s.createElement("button",{className:"mission-claim",onClick:()=>m?.(ce.id),disabled:!be},ze?Le>5?"Maxed":`Limit Break (+${p(Le)})`:"Locked")))};return s.createElement("div",{className:"meta-page"},s.createElement("div",{className:"meta-header"},s.createElement("button",{className:"profile-back",onClick:f}," Back"),s.createElement("h1",null,"Inventory")),s.createElement("div",{className:"inventory-tabs"},["characters","items","titles"].map(R=>s.createElement("button",{key:R,type:"button",className:`inventory-tab ${g===R?"active":""}`,onClick:()=>v(R)},R))),g==="characters"&&s.createElement(s.Fragment,null,s.createElement("div",{className:"inventory-toolbar"},s.createElement("input",{className:"inventory-search",type:"search",placeholder:"Search characters",value:k,onChange:R=>w(R.target.value)}),s.createElement("select",{className:"inventory-select",value:x,onChange:R=>L(R.target.value)},s.createElement("option",{value:"all"},"All"),s.createElement("option",{value:"unlocked"},"Unlocked"),s.createElement("option",{value:"locked"},"Locked")),s.createElement("select",{className:"inventory-select",value:D,onChange:R=>z(R.target.value)},s.createElement("option",{value:"name"},"Sort: Name"),s.createElement("option",{value:"level"},"Sort: Level"),s.createElement("option",{value:"shards"},"Sort: Shards"),s.createElement("option",{value:"limit_break"},"Sort: Limit Break"))),s.createElement("div",{className:"meta-grid inventory-grid"},ve.map(Ce))),g==="items"&&s.createElement("div",{className:"meta-grid inventory-extras"},s.createElement("section",{className:"inventory-section"},s.createElement("h2",null,"Items"),Y.length===0?s.createElement("p",{className:"inventory-empty"},"No items yet."):s.createElement("div",{className:"inventory-item-grid"},Y.map(([R,ce])=>s.createElement("div",{key:R,className:"inventory-item-card"},s.createElement("strong",null,R.replace(/_/g," ")),s.createElement("span",null,"x",ce)))))),g==="titles"&&s.createElement("div",{className:"meta-grid inventory-extras"},s.createElement("section",{className:"inventory-section"},s.createElement("h2",null,"Titles"),ne.length===0?s.createElement("p",{className:"inventory-empty"},"No titles unlocked."):s.createElement("div",{className:"inventory-item-grid"},ne.map(R=>s.createElement("div",{key:R.title_id,className:`inventory-item-card ${R.active?"active":""}`},s.createElement("strong",null,R.title_id.replace(/_/g," ")),s.createElement("span",null,R.active?"Active":"Unlocked")))))))}function Cb({chapter:i,completedNodes:n,activeNodeId:r,onSelectNode:c,onCompleteNode:d,onStartBattle:f,storyResult:m,onClearResult:p,onClaimRewards:g,rewardsClaimed:v}){const k=i?.nodes||[],w=k.find(L=>L.id===r)||k[0],D=L=>{if(!k.length)return!1;const Y=k.findIndex(ne=>ne.id===L);return Y<=0?!0:n.includes(k[Y-1].id)},z=Z.useMemo(()=>{const L={};return k.forEach(Y=>{L[Y.id]=n.includes(Y.id)?"completed":D(Y.id)?"available":"locked"}),L},[k,n]),x=n.length===k.length;return i?s.createElement("div",{className:"story-container"},s.createElement("div",{className:"story-header"},s.createElement("div",null,s.createElement("h1",null,i.title),s.createElement("span",{className:"story-subtitle"},i.subtitle)),s.createElement("div",{className:"story-progress"},s.createElement("span",null,n.length,"/",k.length," nodes cleared"))),s.createElement("div",{className:"story-layout"},s.createElement("div",{className:"story-map"},s.createElement("div",{className:"story-map-title"},"Chapter Map"),s.createElement("div",{className:"story-map-nodes"},k.map((L,Y)=>s.createElement("button",{key:L.id,type:"button",className:`story-node ${z[L.id]} ${r===L.id?"active":""}`,disabled:z[L.id]==="locked",onClick:()=>c(L.id)},z[L.id]==="completed"&&s.createElement("div",{className:"story-node-badge"},""),s.createElement("div",{className:"story-node-id"},L.id),s.createElement("div",{className:"story-node-title"},L.title),s.createElement("div",{className:`story-node-type ${L.type}`},L.type==="battle"?"Battle":"Story"),Y<k.length-1&&s.createElement("div",{className:"story-node-link"}))))),s.createElement("div",{className:"story-detail"},s.createElement("div",{className:"story-detail-header"},s.createElement("div",null,s.createElement("h2",null,w?.title),s.createElement("div",{className:"story-location"},w?.location)),s.createElement("div",{className:`story-status ${z[w?.id]||"locked"}`},z[w?.id]==="completed"?"Completed":z[w?.id]==="available"?"Available":"Locked")),m&&m.nodeId===w?.id&&s.createElement("div",{className:`story-result ${m.result}`},s.createElement("strong",null,m.result==="win"?"Objective Complete":"Defeat"),s.createElement("p",null,m.result==="win"?"Return to the story to continue.":"Try the battle again when you are ready."),s.createElement("button",{className:"mode-btn primary",onClick:p},"Continue")),w?.type==="story"&&s.createElement("div",{className:"story-scroll"},s.createElement("div",{className:"story-scene"},w.lines?.map((L,Y)=>s.createElement("div",{key:`${w.id}-${Y}`,className:"story-line"},s.createElement("span",{className:"story-speaker"},L.speaker),s.createElement("span",{className:"story-text"},L.text))),w.system&&s.createElement("div",{className:"story-system"},"System: ",w.system)),s.createElement("div",{className:"story-actions"},s.createElement("button",{className:"mode-btn primary",onClick:()=>d(w.id),disabled:z[w.id]!=="available"},"Continue"))),w?.type==="battle"&&s.createElement("div",{className:"story-scroll"},s.createElement("div",{className:"story-scene"},w.intro?.map((L,Y)=>s.createElement("div",{key:`${w.id}-intro-${Y}`,className:"story-text"},L)),w.battle&&s.createElement("div",{className:"story-battle-info"},s.createElement("div",null,s.createElement("strong",null,"Mode:")," ",w.battle.mode),s.createElement("div",null,s.createElement("strong",null,"Objective:")," ",w.battle.objective),w.battle.type==="survival"&&s.createElement("div",null,s.createElement("strong",null,"Condition:")," Survive ",w.battle.turnLimit," turns."),w.battle.unlocks?.length>0&&s.createElement("div",null,s.createElement("strong",null,"Unlock:")," ",w.battle.unlocks.join(", "))),w.battle?.prompts?.length>0&&s.createElement("div",{className:"story-prompts"},w.battle.prompts.map((L,Y)=>s.createElement("div",{key:`${w.id}-prompt-${Y}`,className:"story-prompt"}," ",L))),w.outro?.length>0&&s.createElement("div",{className:"story-outro"},s.createElement("div",{className:"story-outro-title"},"After Battle"),w.outro.map((L,Y)=>s.createElement("div",{key:`${w.id}-outro-${Y}`,className:"story-text"},L)))),s.createElement("div",{className:"story-actions"},s.createElement("button",{className:"mode-btn primary",onClick:()=>f(w),disabled:z[w.id]!=="available"},"Start Battle"))))),s.createElement("div",{className:"story-footer"},s.createElement("div",{className:"story-rewards"},s.createElement("h3",null,"Chapter Rewards"),s.createElement("div",{className:"story-reward-grid"},i.rewards.map((L,Y)=>s.createElement("div",{key:`${L.label}-${Y}`,className:"story-reward-card"},s.createElement("span",{className:"story-reward-label"},L.label))))),s.createElement("div",{className:"story-preview"},s.createElement("h3",null,"Next Chapter Preview"),i.preview.map((L,Y)=>s.createElement("div",{key:`${i.id}-preview-${Y}`,className:"story-preview-line"},L)),s.createElement("button",{className:"mode-btn ghost",onClick:g,disabled:v||!x},v?"Rewards Claimed":x?"Claim Chapter Rewards":"Complete Chapter to Claim")))):s.createElement("div",{className:"story-container"},s.createElement("div",{className:"story-panel"},"Story mode not available."))}function Tb({isOpen:i,title:n,message:r,details:c,confirmText:d="Confirm",cancelText:f="Cancel",onConfirm:m,onCancel:p,danger:g=!1}){return i?s.createElement("div",{className:"confirm-overlay",onClick:p},s.createElement("div",{className:"confirm-dialog",onClick:v=>v.stopPropagation()},s.createElement("div",{className:"confirm-header"},s.createElement("h3",null,n),s.createElement("button",{className:"confirm-close",onClick:p},"")),s.createElement("div",{className:"confirm-body"},s.createElement("p",{className:"confirm-message"},r),c&&s.createElement("div",{className:"confirm-details"},c)),s.createElement("div",{className:"confirm-actions"},s.createElement("button",{className:"confirm-btn cancel",onClick:p},f),s.createElement("button",{className:`confirm-btn ${g?"danger":"primary"}`,onClick:()=>{m(),p()}},d)))):null}function kb({id:i,message:n,type:r="success",onDismiss:c}){const[d,f]=Z.useState(!1);Z.useEffect(()=>{const p=setTimeout(()=>{f(!0),setTimeout(()=>c(i),300)},3e3);return()=>clearTimeout(p)},[i,c]);const m={success:"",error:"",warning:"",info:""};return s.createElement("div",{className:`toast toast-${r} ${d?"toast-exit":""}`},s.createElement("span",{className:"toast-icon"},m[r]||m.info),s.createElement("span",{className:"toast-message"},n),s.createElement("button",{className:"toast-close",onClick:()=>{f(!0),setTimeout(()=>c(i),300)}},""))}function Ab({toasts:i,onDismiss:n}){return s.createElement("div",{className:"toast-container"},i.map(r=>s.createElement(kb,{key:r.id,id:r.id,message:r.message,type:r.type,onDismiss:n})))}const rc=i=>{if(!i)return"";const n=new Date(i),r=n.getTimezoneOffset()*6e4;return new Date(n.getTime()-r).toISOString().slice(0,16)},ic=i=>{if(!i)return null;const n=new Date(i);return Number.isNaN(n.getTime())?null:n.toISOString()},cc={type:"daily",condition:"match_any",condition_value:"",title:"",description:"",target:1,reward_soft:0,reward_premium:0,reward_shard_character_id:null,reward_shard_amount:0,starts_at:null,ends_at:null},oc={name:"",description:"",starts_at:null,ends_at:null},ju={banner_id:null,item_type:"character",character_id:null,shard_amount:0,soft_currency:0,premium_currency:0,weight:1},uc={name:"",description:"",cost_soft:0,cost_premium:0,item_type:"shards",character_id:null,shard_amount:0,soft_currency:0,premium_currency:0,active:!0},xs={name:"",rarity:"SR",max_hp:80,max_mana:100,attack:20,defense:20,cursed_output:20,cursed_resistance:20,crit_chance:.05,portrait_url:"",card_art_url:""},Mr={skill_type:"ability",slot:1,skill_key:"",name:"",description:"",damage:0,manaCost:0,targetType:"single",damageType:"physical",statusEffect:"",statusChance:0,statusDuration:0,image_url:""};function la({title:i,defaultOpen:n=!0,children:r,badge:c}){const[d,f]=Z.useState(n);return s.createElement("div",{className:`collapsible-section ${d?"open":""}`},s.createElement("button",{className:"collapsible-header",onClick:()=>f(!d),type:"button"},s.createElement("span",{className:"collapsible-title"},i,c&&s.createElement("span",{className:"section-badge"},c)),s.createElement("span",{className:"collapsible-icon"},d?"":"")),d&&s.createElement("div",{className:"collapsible-content"},r))}function Gl({text:i,children:n}){const[r,c]=Z.useState(!1);return s.createElement("span",{className:"tooltip-wrapper",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},n,r&&s.createElement("div",{className:"tooltip-bubble"},i))}function sp({url:i,alt:n}){const[r,c]=Z.useState(!1),[d,f]=Z.useState(!0);return i?s.createElement("div",{className:"image-preview"},d&&s.createElement("div",{className:"image-loading"},"Loading..."),r&&s.createElement("div",{className:"image-error"},"Failed to load"),!r&&s.createElement("img",{src:i,alt:n,onLoad:()=>f(!1),onError:()=>{c(!0),f(!1)},style:{display:d?"none":"block"}})):s.createElement("div",{className:"image-preview empty"},s.createElement("span",null,"No image"))}function Ob({profile:i,onBack:n,characters:r=[]}){const[c,d]=Z.useState("players"),[f,m]=Z.useState(""),[p,g]=Z.useState([]),[v,k]=Z.useState({isOpen:!1}),[w,D]=Z.useState([]),[z,x]=Z.useState(null),[L,Y]=Z.useState(""),[ne,re]=Z.useState([]),[X,ve]=Z.useState(r[0]?.id||1),[Ce,R]=Z.useState("0"),[ce,P]=Z.useState([]),[oe,ze]=Z.useState({...xs}),[Le,be]=Z.useState(""),[Ye,Xe]=Z.useState([]),[Ee,K]=Z.useState({...Mr}),[fe,ge]=Z.useState([]),[Q,ye]=Z.useState({...cc}),[A,F]=Z.useState([]),[ie,pe]=Z.useState({...oc}),[ke,je]=Z.useState(""),[Ke,yt]=Z.useState([]),[Re,Pt]=Z.useState({...ju}),[ma,ha]=Z.useState([]),[Je,rt]=Z.useState({...uc}),Et=i?.role==="admin",Ue=(y,C="success")=>{const se=Date.now();g(Ie=>[...Ie,{id:se,message:y,type:C}])},$a=Z.useMemo(()=>w.find(y=>y.id===L)||null,[w,L]),La=Z.useMemo(()=>{if(!f)return w;const y=f.toLowerCase();return w.filter(C=>(C.display_name||"").toLowerCase().includes(y)||(C.role||"").toLowerCase().includes(y))},[w,f]),Na=Z.useMemo(()=>{if(!f)return ce;const y=f.toLowerCase();return ce.filter(C=>(C.name||"").toLowerCase().includes(y)||(C.rarity||"").toLowerCase().includes(y))},[ce,f]),mn=Z.useMemo(()=>{if(!f)return fe;const y=f.toLowerCase();return fe.filter(C=>(C.title||"").toLowerCase().includes(y)||(C.type||"").toLowerCase().includes(y))},[fe,f]),tn=Z.useMemo(()=>{if(!f)return A;const y=f.toLowerCase();return A.filter(C=>(C.name||"").toLowerCase().includes(y))},[A,f]),Gn=Z.useMemo(()=>{if(!f)return ma;const y=f.toLowerCase();return ma.filter(C=>(C.name||"").toLowerCase().includes(y)||(C.description||"").toLowerCase().includes(y))},[ma,f]);Z.useEffect(()=>{r?.length&&(X||ve(r[0].id))},[r,X]),Z.useEffect(()=>{if(!Et)return;(async()=>{const{data:C}=await ee.from("profiles").select("id, display_name, role, account_xp, account_level, rating, soft_currency, premium_currency").order("display_name");D(C||[]),!L&&C?.length&&Y(C[0].id)})()},[Et,L]),Z.useEffect(()=>{if(!$a){x(null);return}x({...$a})},[$a]),Z.useEffect(()=>{if(!Le){ze({...xs});return}const y=ce.find(C=>String(C.id)===String(Le));if(!y){ze({...xs});return}ze({id:y.id,name:y.name||"",rarity:y.rarity||"SR",max_hp:y.max_hp??80,max_mana:y.max_mana??100,attack:y.attack??20,defense:y.defense??20,cursed_output:y.cursed_output??20,cursed_resistance:y.cursed_resistance??20,crit_chance:y.crit_chance??.05,portrait_url:y.portrait_url||"",card_art_url:y.card_art_url||""})},[ce,Le]),Z.useEffect(()=>{if(!L){re([]);return}(async()=>{const{data:C}=await ee.from("character_progress").select("character_id, level, xp, limit_break").eq("user_id",L);re(C||[])})()},[L]),Z.useEffect(()=>{if(!Et)return;(async()=>{const{data:C}=await ee.from("missions").select("*").order("id");ge(C||[])})()},[Et]),Z.useEffect(()=>{if(!Et)return;(async()=>{const{data:C}=await ee.from("banners").select("*").order("id");F(C||[]),!ke&&C?.length&&je(String(C[0].id))})()},[Et,ke]),Z.useEffect(()=>{if(!ke){yt([]);return}(async()=>{const{data:C}=await ee.from("banner_items").select("*").eq("banner_id",Number(ke)).order("id");yt(C||[])})()},[ke]),Z.useEffect(()=>{if(!Et)return;(async()=>{const{data:C}=await ee.from("shop_offers").select("*").order("id");ha(C||[])})()},[Et]),Z.useEffect(()=>{if(!Et)return;(async()=>{const{data:C}=await ee.from("characters").select("*").order("id");P(C||[]),!Le&&C?.length&&be(String(C[0].id))})()},[Et,Le]),Z.useEffect(()=>{if(!Le){Xe([]);return}(async()=>{const{data:C}=await ee.from("character_skills").select("*").eq("character_id",Number(Le)).order("id");Xe(C||[])})()},[Le]),Z.useEffect(()=>{K({...Mr})},[Le]),Z.useEffect(()=>{m("")},[c]);const Vn=async()=>{if(z)try{const y={role:z.role,account_xp:Number(z.account_xp)||0,account_level:Number(z.account_level)||1,rating:Number(z.rating)||0,soft_currency:Number(z.soft_currency)||0,premium_currency:Number(z.premium_currency)||0,updated_at:new Date().toISOString()},{error:C}=await ee.from("profiles").update(y).eq("id",z.id);if(C)throw C;D(se=>se.map(Ie=>Ie.id===z.id?{...Ie,...y}:Ie)),Ue("Player profile updated successfully")}catch(y){Ue("Failed to save player profile","error"),console.error(y)}},$t=Z.useMemo(()=>new Set(ne.map(y=>y.character_id)),[ne]),H=async(y,C)=>{if(L)try{if(C){const{error:Ie}=await ee.from("character_progress").upsert({user_id:L,character_id:y,level:1,xp:0,limit_break:0,updated_at:new Date().toISOString()},{onConflict:"user_id,character_id"});if(Ie)throw Ie}else{const{error:Ie}=await ee.from("character_progress").delete().eq("user_id",L).eq("character_id",y);if(Ie)throw Ie}const{data:se}=await ee.from("character_progress").select("character_id, level, xp, limit_break").eq("user_id",L);re(se||[]),Ue(C?"Character unlocked":"Character locked")}catch(se){Ue("Failed to update character unlock","error"),console.error(se)}},me=async()=>{if(L)try{const y=Math.max(0,Number(Ce)||0),{error:C}=await ee.from("user_inventory").upsert({user_id:L,character_id:Number(X),shard_amount:y,updated_at:new Date().toISOString()},{onConflict:"user_id,character_id"});if(C)throw C;Ue(`Set shards to ${y}`)}catch(y){Ue("Failed to update shards","error"),console.error(y)}},Ge=async()=>{try{const y={name:oe.name.trim(),rarity:oe.rarity,max_hp:Number(oe.max_hp)||1,max_mana:Number(oe.max_mana)||1,attack:Number(oe.attack)||1,defense:Number(oe.defense)||0,cursed_output:Number(oe.cursed_output)||0,cursed_resistance:Number(oe.cursed_resistance)||0,crit_chance:Number(oe.crit_chance)||0,portrait_url:oe.portrait_url?.trim()||null,card_art_url:oe.card_art_url?.trim()||null};if(!y.name){Ue("Character name is required","warning");return}if(oe.id){const{error:se}=await ee.from("characters").update(y).eq("id",oe.id);if(se)throw se;Ue("Character updated successfully")}else{const{error:se}=await ee.from("characters").insert(y);if(se)throw se;Ue("Character created successfully")}const{data:C}=await ee.from("characters").select("*").order("id");P(C||[]),ze({...xs})}catch(y){Ue("Failed to save character","error"),console.error(y)}},He=async(y,C)=>{k({isOpen:!0,title:"Delete Character",message:`Are you sure you want to delete "${C}"? This will also delete all associated skills and player progress.`,confirmText:"Delete",onConfirm:async()=>{try{const{error:se}=await ee.from("characters").delete().eq("id",y);if(se)throw se;const{data:Ie}=await ee.from("characters").select("*").order("id");P(Ie||[]),ze({...xs}),be(""),Ue("Character deleted")}catch(se){Ue("Failed to delete character","error"),console.error(se)}},danger:!0})},nt=async()=>{try{const y={damage:Number(Ee.damage)||0,manaCost:Number(Ee.manaCost)||0,targetType:Ee.targetType||"single",damageType:Ee.damageType||"physical"};Ee.statusEffect&&(y.statusEffect=Ee.statusEffect,y.statusChance=Number(Ee.statusChance)||0,y.statusDuration=Number(Ee.statusDuration)||0);const C=Ee.skill_key?.trim()||`${Le}-${Ee.skill_type}-${Ee.slot||0}`,se={character_id:Number(Le),skill_key:C,skill_type:Ee.skill_type,slot:Ee.skill_type==="ability"?Number(Ee.slot)||1:null,name:Ee.name.trim(),description:Ee.description.trim(),payload:y,image_url:Ee.image_url?.trim()||null};if(!se.name||!se.character_id){Ue("Skill name is required","warning");return}if(Ee.id){const{error:At}=await ee.from("character_skills").update(se).eq("id",Ee.id);if(At)throw At;Ue("Skill updated successfully")}else{const{error:At}=await ee.from("character_skills").insert(se);if(At)throw At;Ue("Skill created successfully")}const{data:Ie}=await ee.from("character_skills").select("*").eq("character_id",Number(Le)).order("id");Xe(Ie||[]),K({...Mr})}catch(y){Ue("Failed to save skill","error"),console.error(y)}},ct=async(y,C)=>{k({isOpen:!0,title:"Delete Skill",message:`Are you sure you want to delete "${C}"?`,confirmText:"Delete",onConfirm:async()=>{try{const{error:se}=await ee.from("character_skills").delete().eq("id",y);if(se)throw se;const{data:Ie}=await ee.from("character_skills").select("*").eq("character_id",Number(Le)).order("id");Xe(Ie||[]),K({...Mr}),Ue("Skill deleted")}catch(se){Ue("Failed to delete skill","error"),console.error(se)}},danger:!0})},Rt=async()=>{try{const y={...Q,target:Number(Q.target)||1,reward_soft:Number(Q.reward_soft)||0,reward_premium:Number(Q.reward_premium)||0,reward_shard_character_id:Q.reward_shard_character_id?Number(Q.reward_shard_character_id):null,reward_shard_amount:Number(Q.reward_shard_amount)||0,starts_at:ic(Q.starts_at),ends_at:ic(Q.ends_at)};if(Q.id){const{error:se}=await ee.from("missions").update(y).eq("id",Q.id);if(se)throw se;Ue("Mission updated successfully")}else{const{error:se}=await ee.from("missions").insert(y);if(se)throw se;Ue("Mission created successfully")}const{data:C}=await ee.from("missions").select("*").order("id");ge(C||[]),ye({...cc})}catch(y){Ue("Failed to save mission","error"),console.error(y)}},bt=async(y,C)=>{k({isOpen:!0,title:"Delete Mission",message:`Are you sure you want to delete "${C}"?`,confirmText:"Delete",onConfirm:async()=>{try{const{error:se}=await ee.from("missions").delete().eq("id",y);if(se)throw se;const{data:Ie}=await ee.from("missions").select("*").order("id");ge(Ie||[]),ye({...cc}),Ue("Mission deleted")}catch(se){Ue("Failed to delete mission","error"),console.error(se)}},danger:!0})},Ct=async()=>{try{const y={...ie,starts_at:ic(ie.starts_at),ends_at:ic(ie.ends_at)};if(ie.id){const{error:se}=await ee.from("banners").update(y).eq("id",ie.id);if(se)throw se;Ue("Banner updated successfully")}else{const{error:se}=await ee.from("banners").insert(y);if(se)throw se;Ue("Banner created successfully")}const{data:C}=await ee.from("banners").select("*").order("id");F(C||[]),pe({...oc})}catch(y){Ue("Failed to save banner","error"),console.error(y)}},wt=async(y,C)=>{k({isOpen:!0,title:"Delete Banner",message:`Are you sure you want to delete "${C}"? This will also delete all banner items.`,confirmText:"Delete",onConfirm:async()=>{try{const{error:se}=await ee.from("banners").delete().eq("id",y);if(se)throw se;const{data:Ie}=await ee.from("banners").select("*").order("id");F(Ie||[]),pe({...oc}),Ue("Banner deleted")}catch(se){Ue("Failed to delete banner","error"),console.error(se)}},danger:!0})},ot=async()=>{try{const y={...Re,banner_id:Number(ke||Re.banner_id),character_id:Re.character_id?Number(Re.character_id):null,shard_amount:Number(Re.shard_amount)||0,soft_currency:Number(Re.soft_currency)||0,premium_currency:Number(Re.premium_currency)||0,weight:Number(Re.weight)||1};if(Re.id){const{error:se}=await ee.from("banner_items").update(y).eq("id",Re.id);if(se)throw se;Ue("Banner item updated successfully")}else{const{error:se}=await ee.from("banner_items").insert(y);if(se)throw se;Ue("Banner item created successfully")}const{data:C}=await ee.from("banner_items").select("*").eq("banner_id",Number(ke)).order("id");yt(C||[]),Pt({...ju})}catch(y){Ue("Failed to save banner item","error"),console.error(y)}},Be=async y=>{k({isOpen:!0,title:"Delete Banner Item",message:"Are you sure you want to delete this banner item?",confirmText:"Delete",onConfirm:async()=>{try{const{error:C}=await ee.from("banner_items").delete().eq("id",y);if(C)throw C;const{data:se}=await ee.from("banner_items").select("*").eq("banner_id",Number(ke)).order("id");yt(se||[]),Pt({...ju}),Ue("Banner item deleted")}catch(C){Ue("Failed to delete banner item","error"),console.error(C)}},danger:!0})},kt=async()=>{try{const y={...Je,cost_soft:Number(Je.cost_soft)||0,cost_premium:Number(Je.cost_premium)||0,character_id:Je.character_id?Number(Je.character_id):null,shard_amount:Number(Je.shard_amount)||0,soft_currency:Number(Je.soft_currency)||0,premium_currency:Number(Je.premium_currency)||0,active:!!Je.active};if(Je.id){const{error:se}=await ee.from("shop_offers").update(y).eq("id",Je.id);if(se)throw se;Ue("Shop offer updated successfully")}else{const{error:se}=await ee.from("shop_offers").insert(y);if(se)throw se;Ue("Shop offer created successfully")}const{data:C}=await ee.from("shop_offers").select("*").order("id");ha(C||[]),rt({...uc})}catch(y){Ue("Failed to save shop offer","error"),console.error(y)}},ra=async(y,C)=>{k({isOpen:!0,title:"Delete Shop Offer",message:`Are you sure you want to delete "${C}"?`,confirmText:"Delete",onConfirm:async()=>{try{const{error:se}=await ee.from("shop_offers").delete().eq("id",y);if(se)throw se;const{data:Ie}=await ee.from("shop_offers").select("*").order("id");ha(Ie||[]),rt({...uc}),Ue("Shop offer deleted")}catch(se){Ue("Failed to delete offer","error"),console.error(se)}},danger:!0})};return Et?s.createElement("div",{className:"admin-panel-wrapper"},s.createElement(Ab,{toasts:p,onDismiss:y=>g(C=>C.filter(se=>se.id!==y))}),s.createElement(Tb,{isOpen:v.isOpen,title:v.title,message:v.message,confirmText:v.confirmText,onConfirm:v.onConfirm,onCancel:()=>k({isOpen:!1}),danger:v.danger}),s.createElement("div",{className:"admin-sidebar"},s.createElement("div",{className:"admin-sidebar-header"},s.createElement("h2",null,"Admin Panel")),s.createElement("nav",{className:"admin-nav"},s.createElement("button",{className:`admin-nav-item ${c==="players"?"active":""}`,onClick:()=>d("players")},s.createElement("span",{className:"nav-icon"},""),s.createElement("span",{className:"nav-label"},"Players")),s.createElement("button",{className:`admin-nav-item ${c==="characters"?"active":""}`,onClick:()=>d("characters")},s.createElement("span",{className:"nav-icon"},""),s.createElement("span",{className:"nav-label"},"Characters")),s.createElement("button",{className:`admin-nav-item ${c==="missions"?"active":""}`,onClick:()=>d("missions")},s.createElement("span",{className:"nav-icon"},""),s.createElement("span",{className:"nav-label"},"Missions")),s.createElement("button",{className:`admin-nav-item ${c==="banners"?"active":""}`,onClick:()=>d("banners")},s.createElement("span",{className:"nav-icon"},""),s.createElement("span",{className:"nav-label"},"Banners")),s.createElement("button",{className:`admin-nav-item ${c==="shop"?"active":""}`,onClick:()=>d("shop")},s.createElement("span",{className:"nav-icon"},""),s.createElement("span",{className:"nav-label"},"Shop"))),s.createElement("button",{className:"admin-sidebar-back",onClick:n},s.createElement("span",null,""),s.createElement("span",null,"Exit Admin"))),s.createElement("div",{className:"admin-content"},s.createElement("div",{className:"admin-content-header"},s.createElement("h1",null,c.charAt(0).toUpperCase()+c.slice(1)),s.createElement("div",{className:"admin-search"},s.createElement("input",{type:"text",placeholder:`Search ${c}...`,value:f,onChange:y=>m(y.target.value),className:"admin-search-input"}),f&&s.createElement("button",{className:"admin-search-clear",onClick:()=>m("")},""))),c==="players"&&s.createElement("div",{className:"admin-layout"},s.createElement("div",{className:"admin-panel-list"},s.createElement("div",{className:"admin-panel-list-header"},s.createElement("h3",null,"All Players"),s.createElement("span",{className:"item-count"},La.length)),s.createElement("div",{className:"admin-panel-list-items"},La.map(y=>s.createElement("button",{key:y.id,className:`admin-card-item ${L===y.id?"active":""}`,onClick:()=>Y(y.id)},s.createElement("div",{className:"item-header"},s.createElement("strong",null,y.display_name||"Unnamed"),s.createElement("span",{className:`badge ${y.role==="admin"?"badge-admin":"badge-player"}`},y.role)),s.createElement("div",{className:"item-meta"},s.createElement("span",null,"Level ",y.account_level),s.createElement("span",null,""),s.createElement("span",null,"Rating ",y.rating)))))),s.createElement("div",{className:"admin-panel-detail"},z?s.createElement(s.Fragment,null,s.createElement("div",{className:"admin-detail-header"},s.createElement("h2",null,z.display_name||"Unnamed Player")),s.createElement(la,{title:"Account Settings",defaultOpen:!0},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Role",s.createElement(Gl,{text:"Admin role grants access to this panel"},s.createElement("span",{className:"help-icon"},"?"))),s.createElement("select",{className:"form-input",value:z.role||"player",onChange:y=>x(C=>({...C,role:y.target.value}))},s.createElement("option",{value:"player"},"Player"),s.createElement("option",{value:"admin"},"Admin"))),s.createElement("div",{className:"form-row"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Account Level"),s.createElement("input",{className:"form-input",type:"number",value:z.account_level??1,onChange:y=>x(C=>({...C,account_level:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Account XP"),s.createElement("input",{className:"form-input",type:"number",value:z.account_xp??0,onChange:y=>x(C=>({...C,account_xp:y.target.value}))}))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Rating"),s.createElement("input",{className:"form-input",type:"number",value:z.rating??1e3,onChange:y=>x(C=>({...C,rating:y.target.value}))})))),s.createElement(la,{title:"Currency",defaultOpen:!0},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Soft Currency",s.createElement(Gl,{text:"Earned through gameplay, used for basic purchases"},s.createElement("span",{className:"help-icon"},"?"))),s.createElement("input",{className:"form-input",type:"number",value:z.soft_currency??0,onChange:y=>x(C=>({...C,soft_currency:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Premium Currency",s.createElement(Gl,{text:"Premium currency for gacha and special items"},s.createElement("span",{className:"help-icon"},"?"))),s.createElement("input",{className:"form-input",type:"number",value:z.premium_currency??0,onChange:y=>x(C=>({...C,premium_currency:y.target.value}))})))),s.createElement("div",{className:"form-actions"},s.createElement("button",{className:"btn-primary",onClick:Vn},"Save Changes")),s.createElement(la,{title:"Character Unlocks",defaultOpen:!1,badge:$t.size},s.createElement("div",{className:"character-unlock-grid"},r.map(y=>{const C=$t.has(y.id);return s.createElement("label",{key:y.id,className:`unlock-card ${C?"unlocked":"locked"}`},s.createElement("input",{type:"checkbox",checked:C,onChange:se=>H(y.id,se.target.checked)}),s.createElement("span",{className:"unlock-name"},y.name),s.createElement("span",{className:`unlock-rarity rarity-${y.rarity?.toLowerCase()}`},y.rarity))}))),s.createElement(la,{title:"Set Shards",defaultOpen:!1},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Character"),s.createElement("select",{className:"form-input",value:X,onChange:y=>ve(y.target.value)},r.map(y=>s.createElement("option",{key:y.id,value:y.id},y.name," (",y.rarity,")")))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Shard Amount"),s.createElement("input",{className:"form-input",type:"number",value:Ce,onChange:y=>R(y.target.value)})),s.createElement("button",{className:"btn-primary",onClick:me},"Apply Shards")))):s.createElement("div",{className:"admin-empty-state"},s.createElement("p",null,"Select a player to view details")))),c==="characters"&&s.createElement("div",{className:"admin-layout"},s.createElement("div",{className:"admin-panel-list"},s.createElement("div",{className:"admin-panel-list-header"},s.createElement("h3",null,"All Characters"),s.createElement("span",{className:"item-count"},Na.length)),s.createElement("div",{className:"admin-panel-list-items"},Na.map(y=>s.createElement("button",{key:y.id,className:`admin-card-item ${String(Le)===String(y.id)?"active":""}`,onClick:()=>be(String(y.id))},s.createElement("div",{className:"item-header"},s.createElement("strong",null,y.name),s.createElement("span",{className:`badge rarity-${y.rarity?.toLowerCase()}`},y.rarity)),s.createElement("div",{className:"item-meta"},s.createElement("span",null,"HP ",y.max_hp),s.createElement("span",null,""),s.createElement("span",null,"ATK ",y.attack))))),s.createElement("button",{className:"btn-secondary btn-block",onClick:()=>{be(""),ze({...xs}),K({...Mr})}},"+ New Character")),s.createElement("div",{className:"admin-panel-detail"},s.createElement("div",{className:"admin-detail-header"},s.createElement("h2",null,oe.id?`Edit: ${oe.name}`:"New Character")),s.createElement(la,{title:"Basic Info",defaultOpen:!0},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Name"),s.createElement("input",{className:"form-input",value:oe.name,onChange:y=>ze(C=>({...C,name:y.target.value})),placeholder:"Character name"})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Rarity"),s.createElement("select",{className:"form-input",value:oe.rarity,onChange:y=>ze(C=>({...C,rarity:y.target.value}))},s.createElement("option",{value:"UR"},"UR (Ultra Rare)"),s.createElement("option",{value:"SSR"},"SSR (Super Super Rare)"),s.createElement("option",{value:"SR"},"SR (Super Rare)"),s.createElement("option",{value:"R"},"R (Rare)"))))),s.createElement(la,{title:"Combat Stats",defaultOpen:!1},s.createElement("div",{className:"admin-form"},s.createElement("div",{className:"form-row"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Max HP"),s.createElement("input",{className:"form-input",type:"number",value:oe.max_hp,onChange:y=>ze(C=>({...C,max_hp:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Max Cursed Energy"),s.createElement("input",{className:"form-input",type:"number",value:oe.max_mana,onChange:y=>ze(C=>({...C,max_mana:y.target.value}))}))),s.createElement("div",{className:"form-row"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Attack"),s.createElement("input",{className:"form-input",type:"number",value:oe.attack,onChange:y=>ze(C=>({...C,attack:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Defense"),s.createElement("input",{className:"form-input",type:"number",value:oe.defense,onChange:y=>ze(C=>({...C,defense:y.target.value}))}))),s.createElement("div",{className:"form-row"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Cursed Output"),s.createElement("input",{className:"form-input",type:"number",value:oe.cursed_output,onChange:y=>ze(C=>({...C,cursed_output:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Cursed Resistance"),s.createElement("input",{className:"form-input",type:"number",value:oe.cursed_resistance,onChange:y=>ze(C=>({...C,cursed_resistance:y.target.value}))}))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Crit Chance",s.createElement(Gl,{text:"Value between 0 and 1 (e.g., 0.05 = 5%)"},s.createElement("span",{className:"help-icon"},"?"))),s.createElement("input",{className:"form-input",type:"number",step:"0.01",value:oe.crit_chance,onChange:y=>ze(C=>({...C,crit_chance:y.target.value}))})))),s.createElement(la,{title:"Visual Assets",defaultOpen:!1},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Portrait URL"),s.createElement("input",{className:"form-input",value:oe.portrait_url,onChange:y=>ze(C=>({...C,portrait_url:y.target.value})),placeholder:"https://..."})),s.createElement(sp,{url:oe.portrait_url,alt:"Portrait"}),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Card Art URL"),s.createElement("input",{className:"form-input",value:oe.card_art_url,onChange:y=>ze(C=>({...C,card_art_url:y.target.value})),placeholder:"https://..."})),s.createElement(sp,{url:oe.card_art_url,alt:"Card Art"}))),s.createElement("div",{className:"form-actions"},s.createElement("button",{className:"btn-primary",onClick:Ge},oe.id?"Save Changes":"Create Character"),oe.id&&s.createElement("button",{className:"btn-danger",onClick:()=>He(oe.id,oe.name)},"Delete Character")),oe.id&&s.createElement(la,{title:"Techniques",defaultOpen:!1,badge:Ye.length},s.createElement("div",{className:"subsection-list"},Ye.map(y=>{const C=y.skill_type==="ultimate"?"Domain":y.skill_type==="ability"?"Technique":"Passive";return s.createElement("button",{key:y.id,className:`subsection-item ${Ee.id===y.id?"active":""}`,onClick:()=>{const se=y.payload||{};K({id:y.id,skill_type:y.skill_type,slot:y.slot??1,skill_key:y.skill_key||"",name:y.name||"",description:y.description||"",damage:se.damage||0,manaCost:se.manaCost||0,targetType:se.targetType||"single",damageType:se.damageType||"physical",statusEffect:se.statusEffect||"",statusChance:se.statusChance||0,statusDuration:se.statusDuration||0,image_url:y.image_url||""})}},s.createElement("div",{className:"subsection-item-header"},s.createElement("strong",null,y.name||y.skill_key),s.createElement("span",{className:"subsection-badge"},C)),s.createElement("div",{className:"subsection-item-meta"},y.slot&&s.createElement("span",null,"Slot ",y.slot)))})),s.createElement("div",{className:"admin-form"},s.createElement("h4",null,Ee.id?"Edit Technique":"New Technique"),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Technique Type"),s.createElement("select",{className:"form-input",value:Ee.skill_type,onChange:y=>K(C=>({...C,skill_type:y.target.value}))},s.createElement("option",{value:"ability"},"Technique (active skill)"),s.createElement("option",{value:"ultimate"},"Domain (ultimate skill)"),s.createElement("option",{value:"passive"},"Passive (always active)"))),Ee.skill_type==="ability"&&s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Slot"),s.createElement("select",{className:"form-input",value:Ee.slot,onChange:y=>K(C=>({...C,slot:y.target.value}))},s.createElement("option",{value:"1"},"Slot 1"),s.createElement("option",{value:"2"},"Slot 2"),s.createElement("option",{value:"3"},"Slot 3"),s.createElement("option",{value:"4"},"Slot 4"))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Name"),s.createElement("input",{className:"form-input",value:Ee.name,onChange:y=>K(C=>({...C,name:y.target.value})),placeholder:"Technique name"})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Description"),s.createElement("textarea",{className:"form-textarea",value:Ee.description,onChange:y=>K(C=>({...C,description:y.target.value})),placeholder:"Describe what this technique does"})),s.createElement("div",{className:"form-row"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Damage"),s.createElement("input",{className:"form-input",type:"number",value:Ee.damage,onChange:y=>K(C=>({...C,damage:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Cursed Energy Cost"),s.createElement("input",{className:"form-input",type:"number",value:Ee.manaCost,onChange:y=>K(C=>({...C,manaCost:y.target.value}))}))),s.createElement("div",{className:"form-row"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Target Type"),s.createElement("select",{className:"form-input",value:Ee.targetType,onChange:y=>K(C=>({...C,targetType:y.target.value}))},s.createElement("option",{value:"single"},"Single Enemy"),s.createElement("option",{value:"all"},"All Enemies"),s.createElement("option",{value:"self"},"Self"),s.createElement("option",{value:"ally"},"Single Ally"))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Damage Type"),s.createElement("select",{className:"form-input",value:Ee.damageType,onChange:y=>K(C=>({...C,damageType:y.target.value}))},s.createElement("option",{value:"physical"},"Physical"),s.createElement("option",{value:"cursed"},"Cursed Energy"),s.createElement("option",{value:"true"},"True Damage")))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Status Effect (optional)"),s.createElement("select",{className:"form-input",value:Ee.statusEffect,onChange:y=>K(C=>({...C,statusEffect:y.target.value}))},s.createElement("option",{value:""},"None"),s.createElement("option",{value:"stun"},"Stun"),s.createElement("option",{value:"burn"},"Burn"),s.createElement("option",{value:"poison"},"Poison"),s.createElement("option",{value:"freeze"},"Freeze"),s.createElement("option",{value:"slow"},"Slow"))),Ee.statusEffect&&s.createElement("div",{className:"form-row"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Effect Chance (0-1)"),s.createElement("input",{className:"form-input",type:"number",step:"0.1",value:Ee.statusChance,onChange:y=>K(C=>({...C,statusChance:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Duration (turns)"),s.createElement("input",{className:"form-input",type:"number",value:Ee.statusDuration,onChange:y=>K(C=>({...C,statusDuration:y.target.value}))}))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Image URL (optional)"),s.createElement("input",{className:"form-input",value:Ee.image_url,onChange:y=>K(C=>({...C,image_url:y.target.value})),placeholder:"https://..."})),s.createElement("div",{className:"form-actions"},s.createElement("button",{className:"btn-primary",onClick:nt},Ee.id?"Save Technique":"Create Technique"),Ee.id&&s.createElement("button",{className:"btn-danger",onClick:()=>ct(Ee.id,Ee.name)},"Delete")))))),c==="missions"&&s.createElement("div",{className:"admin-layout"},s.createElement("div",{className:"admin-panel-list"},s.createElement("div",{className:"admin-panel-list-header"},s.createElement("h3",null,"All Missions"),s.createElement("span",{className:"item-count"},mn.length)),s.createElement("div",{className:"admin-panel-list-items"},mn.map(y=>s.createElement("button",{key:y.id,className:`admin-card-item ${Q.id===y.id?"active":""}`,onClick:()=>ye({...y,starts_at:rc(y.starts_at),ends_at:rc(y.ends_at)})},s.createElement("div",{className:"item-header"},s.createElement("strong",null,y.title),s.createElement("span",{className:`badge badge-${y.type}`},y.type)),s.createElement("div",{className:"item-meta"},s.createElement("span",null,"Target: ",y.target))))),s.createElement("button",{className:"btn-secondary btn-block",onClick:()=>ye({...cc})},"+ New Mission")),s.createElement("div",{className:"admin-panel-detail"},s.createElement("div",{className:"admin-detail-header"},s.createElement("h2",null,Q.id?"Edit Mission":"New Mission")),s.createElement(la,{title:"Basic Info",defaultOpen:!0},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Type"),s.createElement("select",{className:"form-input",value:Q.type,onChange:y=>ye(C=>({...C,type:y.target.value}))},s.createElement("option",{value:"daily"},"Daily (resets every day)"),s.createElement("option",{value:"weekly"},"Weekly (resets every week)"),s.createElement("option",{value:"limited"},"Limited (one-time only)"))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Title"),s.createElement("input",{className:"form-input",value:Q.title,onChange:y=>ye(C=>({...C,title:y.target.value})),placeholder:"Mission title"})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Description"),s.createElement("textarea",{className:"form-textarea",value:Q.description,onChange:y=>ye(C=>({...C,description:y.target.value})),placeholder:"Describe the mission objective"})))),s.createElement(la,{title:"Conditions",defaultOpen:!1},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Condition",s.createElement(Gl,{text:"The type of action required (e.g., win_battle, use_ability, etc.)"},s.createElement("span",{className:"help-icon"},"?"))),s.createElement("input",{className:"form-input",value:Q.condition,onChange:y=>ye(C=>({...C,condition:y.target.value})),placeholder:"e.g., match_any, win_battle"})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Condition Value",s.createElement(Gl,{text:"Additional parameter for the condition"},s.createElement("span",{className:"help-icon"},"?"))),s.createElement("input",{className:"form-input",value:Q.condition_value||"",onChange:y=>ye(C=>({...C,condition_value:y.target.value})),placeholder:"Optional value"})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Target"),s.createElement("input",{className:"form-input",type:"number",value:Q.target,onChange:y=>ye(C=>({...C,target:y.target.value}))})))),s.createElement(la,{title:"Rewards",defaultOpen:!1},s.createElement("div",{className:"admin-form"},s.createElement("div",{className:"form-row"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Soft Currency"),s.createElement("input",{className:"form-input",type:"number",value:Q.reward_soft,onChange:y=>ye(C=>({...C,reward_soft:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Premium Currency"),s.createElement("input",{className:"form-input",type:"number",value:Q.reward_premium,onChange:y=>ye(C=>({...C,reward_premium:y.target.value}))}))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Character Shards (optional)"),s.createElement("select",{className:"form-input",value:Q.reward_shard_character_id||"",onChange:y=>ye(C=>({...C,reward_shard_character_id:y.target.value||null}))},s.createElement("option",{value:""},"No shards"),r.map(y=>s.createElement("option",{key:y.id,value:y.id},y.name," (",y.rarity,")")))),Q.reward_shard_character_id&&s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Shard Amount"),s.createElement("input",{className:"form-input",type:"number",value:Q.reward_shard_amount,onChange:y=>ye(C=>({...C,reward_shard_amount:y.target.value}))})))),s.createElement(la,{title:"Schedule",defaultOpen:!1},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Starts At (optional)"),s.createElement("input",{className:"form-input",type:"datetime-local",value:Q.starts_at||"",onChange:y=>ye(C=>({...C,starts_at:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Ends At (optional)"),s.createElement("input",{className:"form-input",type:"datetime-local",value:Q.ends_at||"",onChange:y=>ye(C=>({...C,ends_at:y.target.value}))})))),s.createElement("div",{className:"form-actions"},s.createElement("button",{className:"btn-primary",onClick:Rt},Q.id?"Save Changes":"Create Mission"),Q.id&&s.createElement("button",{className:"btn-danger",onClick:()=>bt(Q.id,Q.title)},"Delete Mission")))),c==="banners"&&s.createElement("div",{className:"admin-layout"},s.createElement("div",{className:"admin-panel-list"},s.createElement("div",{className:"admin-panel-list-header"},s.createElement("h3",null,"All Banners"),s.createElement("span",{className:"item-count"},tn.length)),s.createElement("div",{className:"admin-panel-list-items"},tn.map(y=>s.createElement("button",{key:y.id,className:`admin-card-item ${ie.id===y.id?"active":""}`,onClick:()=>{pe({...y,starts_at:rc(y.starts_at),ends_at:rc(y.ends_at)}),je(String(y.id))}},s.createElement("div",{className:"item-header"},s.createElement("strong",null,y.name)),s.createElement("div",{className:"item-meta"},s.createElement("span",null,"ID: ",y.id))))),s.createElement("button",{className:"btn-secondary btn-block",onClick:()=>pe({...oc})},"+ New Banner")),s.createElement("div",{className:"admin-panel-detail"},s.createElement("div",{className:"admin-detail-header"},s.createElement("h2",null,ie.id?"Edit Banner":"New Banner")),s.createElement(la,{title:"Banner Settings",defaultOpen:!0},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Name"),s.createElement("input",{className:"form-input",value:ie.name,onChange:y=>pe(C=>({...C,name:y.target.value})),placeholder:"Banner name"})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Description"),s.createElement("textarea",{className:"form-textarea",value:ie.description,onChange:y=>pe(C=>({...C,description:y.target.value})),placeholder:"Describe this banner"})),s.createElement("div",{className:"form-row"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Starts At"),s.createElement("input",{className:"form-input",type:"datetime-local",value:ie.starts_at||"",onChange:y=>pe(C=>({...C,starts_at:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Ends At"),s.createElement("input",{className:"form-input",type:"datetime-local",value:ie.ends_at||"",onChange:y=>pe(C=>({...C,ends_at:y.target.value}))}))))),s.createElement("div",{className:"form-actions"},s.createElement("button",{className:"btn-primary",onClick:Ct},ie.id?"Save Changes":"Create Banner"),ie.id&&s.createElement("button",{className:"btn-danger",onClick:()=>wt(ie.id,ie.name)},"Delete Banner")),ie.id&&s.createElement(la,{title:"Banner Items",defaultOpen:!1,badge:Ke.length},s.createElement("div",{className:"subsection-list"},Ke.map(y=>s.createElement("button",{key:y.id,className:`subsection-item ${Re.id===y.id?"active":""}`,onClick:()=>Pt({...y})},s.createElement("div",{className:"subsection-item-header"},s.createElement("strong",null,y.item_type),s.createElement("span",{className:"subsection-badge"},"Weight ",y.weight)),s.createElement("div",{className:"subsection-item-meta"},y.character_id&&s.createElement("span",null,"Character ID: ",y.character_id))))),s.createElement("div",{className:"admin-form"},s.createElement("h4",null,Re.id?"Edit Item":"New Item"),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Item Type"),s.createElement("select",{className:"form-input",value:Re.item_type,onChange:y=>Pt(C=>({...C,item_type:y.target.value}))},s.createElement("option",{value:"character"},"Character (full unlock)"),s.createElement("option",{value:"shards"},"Character Shards"),s.createElement("option",{value:"currency"},"Currency"),s.createElement("option",{value:"item"},"Item"),s.createElement("option",{value:"title"},"Title"))),(Re.item_type==="character"||Re.item_type==="shards")&&s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Character"),s.createElement("select",{className:"form-input",value:Re.character_id||"",onChange:y=>Pt(C=>({...C,character_id:y.target.value}))},s.createElement("option",{value:""},"Select character"),r.map(y=>s.createElement("option",{key:y.id,value:y.id},y.name," (",y.rarity,")")))),Re.item_type==="shards"&&s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Shard Amount"),s.createElement("input",{className:"form-input",type:"number",value:Re.shard_amount,onChange:y=>Pt(C=>({...C,shard_amount:y.target.value}))})),Re.item_type==="currency"&&s.createElement(s.Fragment,null,s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Soft Currency"),s.createElement("input",{className:"form-input",type:"number",value:Re.soft_currency,onChange:y=>Pt(C=>({...C,soft_currency:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Premium Currency"),s.createElement("input",{className:"form-input",type:"number",value:Re.premium_currency,onChange:y=>Pt(C=>({...C,premium_currency:y.target.value}))}))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Weight",s.createElement(Gl,{text:"Higher weight = more likely to be pulled"},s.createElement("span",{className:"help-icon"},"?"))),s.createElement("input",{className:"form-input",type:"number",value:Re.weight,onChange:y=>Pt(C=>({...C,weight:y.target.value}))})),s.createElement("div",{className:"form-actions"},s.createElement("button",{className:"btn-primary",onClick:ot},Re.id?"Save Item":"Add Item"),Re.id&&s.createElement("button",{className:"btn-danger",onClick:()=>Be(Re.id)},"Delete")))))),c==="shop"&&s.createElement("div",{className:"admin-layout"},s.createElement("div",{className:"admin-panel-list"},s.createElement("div",{className:"admin-panel-list-header"},s.createElement("h3",null,"All Offers"),s.createElement("span",{className:"item-count"},Gn.length)),s.createElement("div",{className:"admin-panel-list-items"},Gn.map(y=>s.createElement("button",{key:y.id,className:`admin-card-item ${Je.id===y.id?"active":""}`,onClick:()=>rt({...y})},s.createElement("div",{className:"item-header"},s.createElement("strong",null,y.name),s.createElement("span",{className:`badge ${y.active?"badge-success":"badge-inactive"}`},y.active?"Active":"Inactive")),s.createElement("div",{className:"item-meta"},s.createElement("span",null,y.item_type))))),s.createElement("button",{className:"btn-secondary btn-block",onClick:()=>rt({...uc})},"+ New Offer")),s.createElement("div",{className:"admin-panel-detail"},s.createElement("div",{className:"admin-detail-header"},s.createElement("h2",null,Je.id?"Edit Offer":"New Offer")),s.createElement(la,{title:"Basic Info",defaultOpen:!0},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Name"),s.createElement("input",{className:"form-input",value:Je.name,onChange:y=>rt(C=>({...C,name:y.target.value})),placeholder:"Offer name"})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Description"),s.createElement("textarea",{className:"form-textarea",value:Je.description,onChange:y=>rt(C=>({...C,description:y.target.value})),placeholder:"Describe this offer"})),s.createElement("label",{className:"form-field"},s.createElement("div",{className:"checkbox-field"},s.createElement("input",{type:"checkbox",checked:!!Je.active,onChange:y=>rt(C=>({...C,active:y.target.checked}))}),s.createElement("span",{className:"field-label"},"Active (visible in shop)"))))),s.createElement(la,{title:"Cost",defaultOpen:!1},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Soft Currency Cost"),s.createElement("input",{className:"form-input",type:"number",value:Je.cost_soft,onChange:y=>rt(C=>({...C,cost_soft:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Premium Currency Cost"),s.createElement("input",{className:"form-input",type:"number",value:Je.cost_premium,onChange:y=>rt(C=>({...C,cost_premium:y.target.value}))})))),s.createElement(la,{title:"Rewards",defaultOpen:!1},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Item Type"),s.createElement("select",{className:"form-input",value:Je.item_type,onChange:y=>rt(C=>({...C,item_type:y.target.value}))},s.createElement("option",{value:"shards"},"Character Shards"),s.createElement("option",{value:"currency"},"Currency"),s.createElement("option",{value:"item"},"Item"))),Je.item_type==="shards"&&s.createElement(s.Fragment,null,s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Character"),s.createElement("select",{className:"form-input",value:Je.character_id||"",onChange:y=>rt(C=>({...C,character_id:y.target.value}))},s.createElement("option",{value:""},"Select character"),r.map(y=>s.createElement("option",{key:y.id,value:y.id},y.name," (",y.rarity,")")))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Shard Amount"),s.createElement("input",{className:"form-input",type:"number",value:Je.shard_amount,onChange:y=>rt(C=>({...C,shard_amount:y.target.value}))}))),Je.item_type==="currency"&&s.createElement(s.Fragment,null,s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Soft Currency Amount"),s.createElement("input",{className:"form-input",type:"number",value:Je.soft_currency,onChange:y=>rt(C=>({...C,soft_currency:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Premium Currency Amount"),s.createElement("input",{className:"form-input",type:"number",value:Je.premium_currency,onChange:y=>rt(C=>({...C,premium_currency:y.target.value}))}))))),s.createElement("div",{className:"form-actions"},s.createElement("button",{className:"btn-primary",onClick:kt},Je.id?"Save Changes":"Create Offer"),Je.id&&s.createElement("button",{className:"btn-danger",onClick:()=>ra(Je.id,Je.name)},"Delete Offer")))))):s.createElement("div",{className:"meta-page"},s.createElement("div",{className:"meta-header"},s.createElement("button",{className:"profile-back",onClick:n}," Back"),s.createElement("h1",null,"Admin Control Panel")),s.createElement("div",{className:"admin-panel admin-empty"},"You do not have admin access."))}function Rb({dailyReward:i,onClaim:n,onBack:r}){const[c,d]=Z.useState(!1),[f,m]=Z.useState(!1),p=i?.current_streak||0,g=i?.longest_streak||0,v=i?.total_logins||0,k=i?.last_claim_date,w=new Date().toISOString().split("T")[0],D=k!==w,z=D?p%7+1:(p-1)%7+1,x=[{day:1,soft:50,premium:0,icon:""},{day:2,soft:75,premium:0,icon:""},{day:3,soft:100,premium:5,icon:""},{day:4,soft:125,premium:0,icon:""},{day:5,soft:150,premium:10,icon:""},{day:6,soft:200,premium:0,icon:""},{day:7,soft:300,premium:25,icon:""}],L=async()=>{!D||c||(d(!0),await n?.(),d(!1),m(!0),setTimeout(()=>m(!1),3e3))};return s.createElement("div",{className:"daily-rewards-page"},s.createElement("div",{className:"daily-rewards-header"},s.createElement("button",{className:"daily-rewards-back",onClick:r},s.createElement("span",null,""),s.createElement("span",null,"Back")),s.createElement("h1",null,"Daily Login Rewards")),s.createElement("div",{className:"daily-rewards-container"},s.createElement("div",{className:"daily-rewards-stats"},s.createElement("div",{className:"stat-card"},s.createElement("div",{className:"stat-icon"},""),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},p),s.createElement("div",{className:"stat-label"},"Current Streak"))),s.createElement("div",{className:"stat-card"},s.createElement("div",{className:"stat-icon"},""),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},g),s.createElement("div",{className:"stat-label"},"Longest Streak"))),s.createElement("div",{className:"stat-card"},s.createElement("div",{className:"stat-icon"},""),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},v),s.createElement("div",{className:"stat-label"},"Total Logins")))),s.createElement("div",{className:"reward-calendar"},s.createElement("h2",null,"Weekly Rewards"),s.createElement("div",{className:"calendar-grid"},x.map(Y=>{const ne=Y.day===z&&D,re=Y.day<z||Y.day===z&&!D,X=Y.day>z||Y.day===z&&!D&&p===0;return s.createElement("div",{key:Y.day,className:`calendar-day ${ne?"today":""} ${re?"claimed":""} ${X?"upcoming":""}`},s.createElement("div",{className:"day-header"},s.createElement("span",{className:"day-number"},"Day ",Y.day),re&&s.createElement("span",{className:"claimed-badge"},""),ne&&s.createElement("span",{className:"today-badge"},"Today")),s.createElement("div",{className:"day-icon"},Y.icon),s.createElement("div",{className:"day-rewards"},Y.soft>0&&s.createElement("div",{className:"reward-item"},s.createElement("span",{className:"reward-icon"},""),s.createElement("span",{className:"reward-amount"},Y.soft)),Y.premium>0&&s.createElement("div",{className:"reward-item premium"},s.createElement("span",{className:"reward-icon"},""),s.createElement("span",{className:"reward-amount"},Y.premium))),Y.day===7&&s.createElement("div",{className:"bonus-badge"},"Bonus!"))}))),D?s.createElement("button",{className:`claim-button ${c?"claiming":""} ${f?"claimed":""}`,onClick:L,disabled:c||f},c?s.createElement(s.Fragment,null,s.createElement("span",{className:"button-spinner"}),s.createElement("span",null,"Claiming...")):f?s.createElement(s.Fragment,null,s.createElement("span",null,""),s.createElement("span",null,"Claimed!")):s.createElement(s.Fragment,null,s.createElement("span",null,""),s.createElement("span",null,"Claim Today's Reward"))):s.createElement("div",{className:"claim-cooldown"},s.createElement("div",{className:"cooldown-icon"},""),s.createElement("div",{className:"cooldown-text"},s.createElement("div",{className:"cooldown-title"},"Already Claimed Today"),s.createElement("div",{className:"cooldown-subtitle"},"Come back tomorrow for your next reward!"))),s.createElement("div",{className:"daily-rewards-info"},s.createElement("h3",null,"How it Works"),s.createElement("ul",null,s.createElement("li",null," Login every day to claim rewards and build your streak"),s.createElement("li",null," Consecutive logins increase your rewards"),s.createElement("li",null," Day 7 gives bonus premium currency!"),s.createElement("li",null," Missing a day resets your streak to Day 1")))))}function Db({achievements:i,progress:n,onClaimReward:r,onBack:c}){const[d,f]=Z.useState("all"),[m,p]=Z.useState(null),g=[{id:"all",label:"All",icon:""},{id:"battle",label:"Battle",icon:""},{id:"pvp",label:"PvP",icon:""},{id:"collection",label:"Collection",icon:""},{id:"progression",label:"Progress",icon:""},{id:"economy",label:"Economy",icon:""},{id:"story",label:"Story",icon:""},{id:"daily",label:"Daily",icon:""},{id:"special",label:"Special",icon:""}],v=Z.useMemo(()=>i.map(x=>{const L=n.find(Y=>Y.achievement_id===x.id);return{...x,progress:L?.progress||0,is_completed:L?.is_completed||!1,rewards_claimed:L?.rewards_claimed||!1,completed_at:L?.completed_at}}),[i,n]),k=Z.useMemo(()=>d==="all"?v:v.filter(x=>x.category===d),[v,d]),w=Z.useMemo(()=>{const x=v.filter(re=>re.is_completed).length,L=v.length,Y=v.filter(re=>re.rewards_claimed).reduce((re,X)=>re+X.reward_soft_currency,0),ne=v.filter(re=>re.rewards_claimed).reduce((re,X)=>re+X.reward_premium_currency,0);return{completed:x,total:L,totalSoftEarned:Y,totalPremiumEarned:ne}},[v]),D=async x=>{p(x),await r?.(x),p(null)},z=x=>{switch(x){case"legendary":return"linear-gradient(135deg, #ff6b6b, #feca57)";case"epic":return"linear-gradient(135deg, #a29bfe, #fd79a8)";case"rare":return"linear-gradient(135deg, #74b9ff, #a29bfe)";default:return"linear-gradient(135deg, #95a5a6, #bdc3c7)"}};return s.createElement("div",{className:"achievements-page"},s.createElement("div",{className:"achievements-header"},s.createElement("button",{className:"achievements-back",onClick:c},s.createElement("span",null,""),s.createElement("span",null,"Back")),s.createElement("h1",null,"Achievements")),s.createElement("div",{className:"achievements-container"},s.createElement("div",{className:"achievements-stats"},s.createElement("div",{className:"stat-card"},s.createElement("div",{className:"stat-icon"},""),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},w.completed," / ",w.total),s.createElement("div",{className:"stat-label"},"Completed"))),s.createElement("div",{className:"stat-card"},s.createElement("div",{className:"stat-icon"},""),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},w.totalSoftEarned.toLocaleString()),s.createElement("div",{className:"stat-label"},"Soft Earned"))),s.createElement("div",{className:"stat-card"},s.createElement("div",{className:"stat-icon"},""),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},w.totalPremiumEarned),s.createElement("div",{className:"stat-label"},"Premium Earned"))),s.createElement("div",{className:"stat-card"},s.createElement("div",{className:"stat-icon"},""),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},Math.round(w.completed/w.total*100),"%"),s.createElement("div",{className:"stat-label"},"Completion")))),s.createElement("div",{className:"category-filter"},g.map(x=>{const L=x.id==="all"?v.length:v.filter(Y=>Y.category===x.id).length;return s.createElement("button",{key:x.id,className:`category-btn ${d===x.id?"active":""}`,onClick:()=>f(x.id)},s.createElement("span",{className:"category-icon"},x.icon),s.createElement("span",{className:"category-label"},x.label),s.createElement("span",{className:"category-count"},L))})),s.createElement("div",{className:"achievements-list"},k.length===0?s.createElement("div",{className:"achievements-empty"},s.createElement("div",{className:"empty-icon"},""),s.createElement("div",{className:"empty-text"},"No achievements in this category")):k.map(x=>{const L=Math.min(100,x.progress/x.requirement_target*100),Y=x.is_completed&&!x.rewards_claimed,ne=m===x.id;return s.createElement("div",{key:x.id,className:`achievement-card ${x.is_completed?"completed":""} ${x.rewards_claimed?"claimed":""}`,style:{borderImage:z(x.rarity)}},s.createElement("div",{className:"achievement-icon-wrapper"},s.createElement("div",{className:"achievement-icon"},x.icon||""),x.is_completed&&s.createElement("div",{className:"completion-badge"},"")),s.createElement("div",{className:"achievement-content"},s.createElement("div",{className:"achievement-header"},s.createElement("div",{className:"achievement-title"},s.createElement("h3",null,x.name),s.createElement("span",{className:`rarity-badge rarity-${x.rarity}`},x.rarity)),s.createElement("p",{className:"achievement-description"},x.description)),s.createElement("div",{className:"achievement-progress"},s.createElement("div",{className:"progress-bar-container"},s.createElement("div",{className:"progress-bar-fill",style:{width:`${L}%`}})),s.createElement("div",{className:"progress-text"},x.progress," / ",x.requirement_target)),s.createElement("div",{className:"achievement-footer"},s.createElement("div",{className:"achievement-rewards"},x.reward_soft_currency>0&&s.createElement("div",{className:"reward-badge"},s.createElement("span",{className:"reward-icon"},""),s.createElement("span",null,x.reward_soft_currency)),x.reward_premium_currency>0&&s.createElement("div",{className:"reward-badge premium"},s.createElement("span",{className:"reward-icon"},""),s.createElement("span",null,x.reward_premium_currency)),x.reward_title&&s.createElement("div",{className:"reward-badge title"},s.createElement("span",{className:"reward-icon"},""),s.createElement("span",null,x.reward_title))),Y&&s.createElement("button",{className:`claim-reward-btn ${ne?"claiming":""}`,onClick:()=>D(x.id),disabled:ne},ne?"Claiming...":"Claim Reward"),x.rewards_claimed&&s.createElement("div",{className:"claimed-badge"},"Claimed "))))}))))}const rp={"fly-head":{id:"fly-head",name:"Fly Head Curse",maxHp:55,hp:55,maxMana:60,mana:60,attack:14,rarity:"SR",passive:{name:"Cursed Instinct",description:"Attacks deal 10% bonus damage.",type:"damage-boost",value:.1},abilities:[{id:"fly-head-1",name:"Claw Swipe",description:"Deals 18 damage to one enemy.",type:"attack",damage:18,manaCost:15,cooldown:1,currentCooldown:0},{id:"fly-head-2",name:"Shriek",description:"Deals 12 damage and stuns for 1 turn.",type:"attack-stun",damage:12,stunDuration:1,manaCost:20,cooldown:2,currentCooldown:0}],ultimate:{id:"fly-head-ult",name:"Swarm Rush",description:"Deals 20 damage to all enemies.",type:"attack-all",damage:20,manaCost:35,cooldown:4,currentCooldown:0}},"finger-bearer":{id:"finger-bearer",name:"Finger Bearer",maxHp:200,hp:200,maxMana:120,mana:120,attack:26,rarity:"SSR",passive:{name:"Cursed Giant",description:"Attacks deal +4 bonus damage.",type:"stacking-attack",value:4},abilities:[{id:"finger-bearer-1",name:"Crushing Slam",description:"Deals 28 damage to one enemy.",type:"attack",damage:28,manaCost:20,cooldown:1,currentCooldown:0},{id:"finger-bearer-2",name:"Malice Burst",description:"Deals 20 damage and stuns for 1 turn.",type:"attack-stun",damage:20,stunDuration:1,manaCost:35,cooldown:3,currentCooldown:0}],ultimate:{id:"finger-bearer-ult",name:"Cursed Howl",description:"Deals 30 damage to all enemies.",type:"attack-all",damage:30,manaCost:60,cooldown:4,currentCooldown:0}}},ip=[{id:"chapter-1",title:"Chapter 1  The Vessel",subtitle:"Sugisawa High Incident",nodes:[{id:"1-1",title:"Last Words",type:"story",location:"Sugisawa Hospital  Evening",system:"Some promises are harder to keep than others.",lines:[{speaker:"Grandpa Itadori",text:"Yuji... come closer."},{speaker:"Yuji Itadori",text:"Save your strength, old man. The doctor said"},{speaker:"Grandpa Itadori",text:"Forget what he said. I'm dying. And I need to tell you something."},{speaker:"Grandpa Itadori",text:"You're strong, Yuji. Stronger than you know. But strength alone won't save you."},{speaker:"Yuji Itadori",text:"What are you talking about?"},{speaker:"Grandpa Itadori",text:"When I'm gone... don't be alone. Find people. Protect them."},{speaker:"Grandpa Itadori",text:"And when your time comes... die surrounded by others. Not like me. Promise me."},{speaker:"Yuji Itadori",text:"...I promise."}]},{id:"1-2",title:"The Occult Club",type:"story",location:"Sugisawa High School  Night",system:"Cursed energy attracts curses. The finger has been unsealed.",lines:[{speaker:"Sasaki",text:"Itadori! Finally! We've been waiting for you!"},{speaker:"Iguchi",text:"Dude, you gotta see what we found. This is the real deal."},{speaker:"Yuji Itadori",text:"Wait. You removed the seals?"},{speaker:"Yuji Itadori",text:"...Something's wrong."},{speaker:"Iguchi",text:"What the hell was that?!"},{speaker:"Yuji Itadori",text:"Both of you. Get behind me. Now."}]},{id:"1-3",title:"First Contact",type:"battle",location:"Sugisawa High School  Hallway",intro:["A grotesque curse lunges from the shadows.","Yuji shoves his friends aside and braces for impact."],battle:{mode:"Tutorial Battle",playerIds:["Yuji"],enemyIds:["fly-head","fly-head"],objective:"Defeat all enemies.",prompts:["Tap a technique to queue it for this turn.","Techniques cost cursed energy. Manage your reserves carefully.","End your turn when you have selected your actions."]}},{id:"1-4",title:"Cornered",type:"battle",location:"Sugisawa High School  Third Floor",intro:["Megumi calls out Divine Dogs as the Finger Bearer emerges.","This is a holding action. Survive."],battle:{mode:"Story Battle",playerIds:["Megumi"],enemyIds:["finger-bearer"],objective:"Survive 4 turns.",type:"survival",turnLimit:4,enemyCannotDie:!0,prompts:["Some battles require survival, not victory.","Use defensive techniques to reduce incoming damage.","Megumi's Divine Dogs can attack and intercept."]},outro:["Megumi is thrown against the wall. His shikigami flicker.",'A voice calls out from the doorway: "HEY! UGLY!"']},{id:"1-5",title:"The King of Curses",type:"battle",location:"Sugisawa High School  Rooftop",intro:["Yuji has nowhere left to run. The finger pulses in his hand.","He swallows it. Power surges."],battle:{mode:"Boss Battle",playerIds:["Yuji"],enemyIds:["finger-bearer"],objective:"Defeat the Finger Bearer.",type:"boss",playerBuffs:{Yuji:{hpBonus:60,manaBonus:30,attackBonus:10}},unlocks:["Divergent Fist"]},outro:["The Finger Bearer dissolves into cursed mist.",'Megumi stares, stunned. "You became Sukunas vessel."','Yuji exhales. "Apparently."','Megumi nods. "Come with me. Theres someone you need to meet."']}],rewards:[{type:"character",label:"Yuji Itadori  Playable Character",character_id:2},{type:"character",label:"Megumi Fushiguro  Playable Character",character_id:3},{type:"soft_currency",label:"Cursed Energy x500",amount:500},{type:"premium_currency",label:"Premium Currency x100",amount:100},{type:"item",label:"Finger Fragment x3 (Gacha Material)",item_id:"finger_fragment",amount:3},{type:"title",label:'Title: "The Vessel"',title_id:"the_vessel"}],preview:['Gojo Satoru: "So youre the kid who ate Sukunas finger and lived? Interesting."',"Chapter 2: Execution  Coming Soon"]}],en=i=>JSON.parse(JSON.stringify(i));function xb(){const[i,n]=Z.useState([]),[r,c]=Z.useState([]),[d,f]=Z.useState(null),[m,p]=Z.useState(["Battle Start! Queue actions, then End Turn."]),[g,v]=Z.useState(null),[k,w]=Z.useState(1),[D,z]=Z.useState("select"),[x,L]=Z.useState([]),[Y,ne]=Z.useState([]),[re,X]=Z.useState(null),[ve,Ce]=Z.useState([]),[R,ce]=Z.useState(null),[P,oe]=Z.useState(null),[ze,Le]=Z.useState({}),[be,Ye]=Z.useState(Cu),[Xe,Ee]=Z.useState(null),[K,fe]=Z.useState([]),[ge,Q]=Z.useState("team"),[ye,A]=Z.useState({}),[F,ie]=Z.useState(null),[pe,ke]=Z.useState([]),[je,Ke]=Z.useState([]),[yt,Re]=Z.useState([]),[Pt,ma]=Z.useState([]),[ha,Je]=Z.useState([]),[rt,Et]=Z.useState({}),[Ue,$a]=Z.useState({}),[La,Na]=Z.useState([]),[mn,tn]=Z.useState(null),[Gn,Vn]=Z.useState([]),[$t,H]=Z.useState(!1),[me,Ge]=Z.useState({chapterId:"chapter-1",activeNodeId:"1-1",completedNodes:[]}),[He,nt]=Z.useState(null),[ct,Rt]=Z.useState(null),[bt,Ct]=Z.useState(!1),[wt,ot]=Z.useState(!1),[Be,kt]=Z.useState(null),[ra,y]=Z.useState(null),[C,se]=Z.useState(null),[Ie,At]=Z.useState(null),[Zt,Ft]=Z.useState([]),[Ca,ut]=Z.useState([]),Ha=S=>100+S*25,pa=(S,E,N)=>{let j=Math.max(1,S||1),U=Math.max(0,E||0)+N,le=Ha(j);for(;U>=le;)U-=le,j+=1,le=Ha(j);return{level:j,xp:U}},_l=S=>{const E=`${Date.now()}-${Math.random()}`,N={id:E,...S};Vn(j=>[...j,N]),setTimeout(()=>{Vn(j=>j.filter(U=>U.id!==E))},800)},El=()=>{H(!0),setTimeout(()=>H(!1),220)},ga=S=>{const E=S;return E.effects||(E.effects={buffs:[],debuffs:[],dots:[],barriers:[]}),E.states||(E.states={binding:0,sleep:0}),E.stacks||(E.stacks={speechMark:0}),E.counters||(E.counters={techniqueCount:0}),E.flags||(E.flags={gorillaCoreTurns:0,flowStateTurns:0,nextBasicDouble:!1}),E.barrier||(E.barrier={value:0,duration:0}),E},Yn=(S,E)=>{const N=E?.level||1,j=E?.limit_break||0,U=(N-1)*3+j*12,le=(N-1)*2+j*4,O=(N-1)*1+j*3,_=(N-1)*1+j*2,B=(N-1)*1+j*3,de=(N-1)*1+j*2,Ae={...en(S),level:N,xp:E?.xp||0,limit_break:j,maxHp:S.maxHp+U,hp:S.maxHp+U,maxMana:S.maxMana+le,mana:S.maxMana+le,attack:S.attack+O,defense:(S.defense||0)+_,cursedOutput:(S.cursedOutput||0)+B,cursedResistance:(S.cursedResistance||0)+de};return ga(Ae)},Ta=(S,E=!1)=>S.map(N=>be.find(j=>j.id===N)).filter(Boolean).map(N=>E?Yn(N,ka[N.id]):ga(en(N))),ka=Z.useMemo(()=>ze,[ze]),Ze=!!Be,Ga=Ze&&Be?.turn_owner===R?.user?.id,Dt=Z.useMemo(()=>ip.find(S=>S.id===me.chapterId)||ip[0],[me.chapterId]),Bt=Z.useRef(!1),ia=S=>{S&&Ge(E=>E.completedNodes.includes(S)?E:{...E,completedNodes:[...E.completedNodes,S]})},Kn=S=>{S&&Ge(E=>{const N=Dt?.nodes||[],j=N.findIndex(le=>le.id===S),U=N[j+1]?.id||S;return{...E,activeNodeId:U}})},qs=S=>{Ge(E=>{if(E.completedNodes.includes(S))return E;const N=Dt?.nodes||[],j=N.findIndex(le=>le.id===S),U=N[j+1]?.id||S;return{...E,completedNodes:[...E.completedNodes,S],activeNodeId:U}})},Yr=S=>{if(!S)return null;if(rp[S])return en(rp[S]);const E=be.find(N=>N.id===S||N.name===S);return E?en(E):null},Kr=(S,E)=>{if(!E)return S;const N={...S};return E.hpBonus&&(N.maxHp+=E.hpBonus,N.hp+=E.hpBonus),E.manaBonus&&(N.maxMana+=E.manaBonus,N.mana+=E.manaBonus),E.attackBonus&&(N.attack+=E.attackBonus),N},Ir=S=>{if(!S?.battle)return;const E=S.battle,N=E.playerIds.map(O=>Yr(O)).filter(Boolean),j=E.enemyIds.map(O=>Yr(O)).filter(Boolean),U=E.playerBuffs||{},le=N.map(O=>{if(typeof O.id=="number"){const _=Yn(O,ka[O.id]);return Kr(_,U[O.name])}return Kr(O,U[O.name])});n(le),c(j),nt({nodeId:S.id,objective:E.objective,type:E.type||"standard",turnLimit:E.turnLimit,enemyCannotDie:E.enemyCannotDie,prompts:E.prompts||[],mode:E.mode}),Rt(null),z("battle"),p([`Story Battle: ${S.title}`,`Objective: ${E.objective}`,...E.prompts.map(O=>`Tip: ${O}`)]),w(1),ne([]),Ce([])},wl=()=>{ct?.result==="win"&&ct.nodeId&&Kn(ct.nodeId),Rt(null)},$s=async()=>{if(bt||!Dt)return;const S=Dt.rewards.find(_=>_.type==="soft_currency"),E=Dt.rewards.find(_=>_.type==="premium_currency"),N=S?.amount||0,j=E?.amount||0,U=Dt.rewards.filter(_=>_.type==="character"),le=Dt.rewards.filter(_=>_.type==="item"),O=Dt.rewards.filter(_=>_.type==="title");if(R&&(N>0||j>0)){const _=(P?.soft_currency||0)+N,B=(P?.premium_currency||0)+j;await ee.from("profiles").update({soft_currency:_,premium_currency:B,updated_at:new Date().toISOString()}).eq("id",R.user.id),oe(de=>({...de||{},soft_currency:_,premium_currency:B}))}if(R&&U.length>0){const _=U.map(B=>B.character_id).filter(Boolean);if(_.length>0){const B=new Set(Object.keys(ka).map(Number)),de=_.filter(Ae=>!B.has(Ae));if(de.length>0){const Ae=de.map($e=>({user_id:R.user.id,character_id:$e,level:1,xp:0,limit_break:0,updated_at:new Date().toISOString()})),{data:qe}=await ee.from("character_progress").upsert(Ae,{onConflict:"user_id,character_id"}).select("character_id, level, xp, limit_break");qe&&Le($e=>{const $={...$e};return qe.forEach(he=>{$[he.character_id]={level:he.level,xp:he.xp,limit_break:he.limit_break}}),$})}}}if(R&&le.length>0){const _=[],B={...Ue};le.forEach(de=>{if(!de.item_id||!de.amount)return;const Ae=(B[de.item_id]||0)+de.amount;B[de.item_id]=Ae,_.push({user_id:R.user.id,item_id:de.item_id,quantity:Ae,updated_at:new Date().toISOString()})}),_.length>0&&(await ee.from("user_items").upsert(_,{onConflict:"user_id,item_id"}),$a(B))}if(R&&O.length>0){const _=O.map(B=>B.title_id).filter(Boolean).map(B=>({user_id:R.user.id,title_id:B,unlocked:!0,active:!1,updated_at:new Date().toISOString()}));if(_.length>0){const{data:B}=await ee.from("user_titles").upsert(_,{onConflict:"user_id,title_id"}).select();B&&Na(de=>{const Ae=[...de];return B.forEach(qe=>{Ae.some($e=>$e.title_id===qe.title_id)||Ae.push(qe)}),Ae})}}Ct(!0)};Z.useEffect(()=>{if(!R){Le({}),Ye(Cu),fe([]),A({}),ke([]),Ke([]),Re([]),ma([]),Je([]),Et({}),$a({}),Na([]),ot(!1),Bt.current=!1;return}(async()=>{const{data:E,error:N}=await ee.from("character_progress").select("character_id, level, xp, limit_break").eq("user_id",R.user.id);if(N)return;const j={};E.forEach(U=>{j[U.character_id]={level:U.level,xp:U.xp,limit_break:U.limit_break}}),Le(j)})()},[R]),Z.useEffect(()=>{if(!R)return;(async()=>{const{data:E}=await ee.from("characters").select("id, name, rarity, max_hp, max_mana, attack, defense, cursed_output, cursed_resistance, crit_chance, portrait_url, card_art_url").order("id"),{data:N}=await ee.from("character_skills").select("id, character_id, skill_key, skill_type, slot, name, description, payload, image_url").order("character_id");if(!E||E.length===0){Ye(Cu);return}const j=new Map;(N||[]).forEach(O=>{j.has(O.character_id)||j.set(O.character_id,[]),j.get(O.character_id).push(O)});const U=O=>{const _=O.payload||{};return{id:O.skill_key||`skill-${O.id}`,name:O.name,description:O.description,..._,currentCooldown:0}},le=E.map(O=>{const _=j.get(O.id)||[],B=_.filter($e=>$e.skill_type==="ability").sort(($e,$)=>($e.slot||0)-($.slot||0)).map(U),de=_.find($e=>$e.skill_type==="ultimate"),Ae=_.find($e=>$e.skill_type==="passive"),qe={id:O.id,name:O.name,maxHp:O.max_hp,hp:O.max_hp,maxMana:O.max_mana,mana:O.max_mana,attack:O.attack,defense:O.defense??0,cursedOutput:O.cursed_output??0,cursedResistance:O.cursed_resistance??0,critChance:O.crit_chance??0,rarity:O.rarity,portraitUrl:O.portrait_url,cardArtUrl:O.card_art_url,passive:Ae?{id:Ae.skill_key||`passive-${Ae.id}`,name:Ae.name,description:Ae.description,...Ae.payload||{}}:null,abilities:B,ultimate:de?U(de):null};return ga(qe)});Ye(le)})()},[R]),Z.useEffect(()=>{if(!R)return;(async()=>{ot(!1);const{data:E,error:N}=await ee.from("story_progress").select("chapter_id, active_node_id, completed_nodes, rewards_claimed").eq("user_id",R.user.id).eq("chapter_id",me.chapterId).maybeSingle();!N&&E?(Ge(j=>({...j,chapterId:E.chapter_id||j.chapterId,activeNodeId:E.active_node_id||j.activeNodeId,completedNodes:Array.isArray(E.completed_nodes)?E.completed_nodes:j.completedNodes})),Ct(!!E.rewards_claimed)):Ct(!1),ot(!0),Bt.current=!0})()},[R,me.chapterId]),Z.useEffect(()=>{if(!R||!Bt.current)return;const S={user_id:R.user.id,chapter_id:me.chapterId,active_node_id:me.activeNodeId,completed_nodes:me.completedNodes,rewards_claimed:bt,updated_at:new Date().toISOString()};ee.from("story_progress").upsert(S,{onConflict:"user_id,chapter_id"})},[R,me.chapterId,me.activeNodeId,me.completedNodes,bt]),Z.useEffect(()=>{if(!R)return;(async()=>{const{data:E,error:N}=await ee.from("team_presets").select("slot, name, character_ids").eq("user_id",R.user.id);if(N)return;const j={};E.forEach(U=>{j[U.slot]=U}),A(j)})()},[R]),Z.useEffect(()=>{if(!R)return;(async()=>{const[{data:E},{data:N},{data:j},{data:U},{data:le},{data:O},{data:_},{data:B}]=await Promise.all([ee.from("missions").select("*").order("id"),ee.from("user_missions").select("*").eq("user_id",R.user.id),ee.from("shop_offers").select("*").eq("active",!0).order("id"),ee.from("banners").select("*").order("id"),ee.from("banner_items").select("*").order("banner_id"),ee.from("user_inventory").select("*").eq("user_id",R.user.id),ee.from("user_items").select("*").eq("user_id",R.user.id),ee.from("user_titles").select("*").eq("user_id",R.user.id)]);ke(E||[]),Ke(N||[]),Re(j||[]),ma(U||[]),Je(le||[]);const de={};(O||[]).forEach(qe=>{de[qe.character_id]=qe.shard_amount}),Et(de);const Ae={};(_||[]).forEach(qe=>{Ae[qe.item_id]=qe.quantity}),$a(Ae),Na(B||[])})()},[R]),Z.useEffect(()=>{if(!R||pe.length===0)return;(async()=>{const E=new Set(je.map(le=>le.mission_id)),N=pe.filter(le=>!E.has(le.id));if(N.length===0)return;const j=N.map(le=>({user_id:R.user.id,mission_id:le.id,progress:0,claimed:!1,updated_at:new Date().toISOString()})),{data:U}=await ee.from("user_missions").insert(j).select();U&&Ke(le=>[...le,...U])})()},[pe,R,je]),Z.useEffect(()=>{if(!R)return;(async()=>{const{data:E,error:N}=await ee.from("match_history").select("id, result, turns, rating_delta, account_xp_gain, character_xp_gain, created_at").eq("user_id",R.user.id).order("created_at",{ascending:!1}).limit(20);N||fe(E||[])})()},[R]),Z.useEffect(()=>{if(!R)return;(async()=>{const{data:E}=await ee.from("daily_rewards").select("*").eq("user_id",R.user.id).single();if(E)At(E);else{const{data:N}=await ee.from("daily_rewards").insert({user_id:R.user.id}).select().single();At(N)}})()},[R]),Z.useEffect(()=>{if(!R)return;(async()=>{const[E,N]=await Promise.all([ee.from("achievements").select("*").order("category"),ee.from("achievement_progress").select("*").eq("user_id",R.user.id)]);Ft(E.data||[]),ut(N.data||[])})()},[R]);const En=(S,E)=>{const N=(S.effects?.buffs||[]).filter(U=>U.stat===E),j=(S.effects?.debuffs||[]).filter(U=>U.stat===E);return[...N,...j]},hn=(S,E)=>{const N=S[E]||0,j=En(S,E),U=j.filter(O=>O.isPercent).reduce((O,_)=>O+_.value,0),le=j.filter(O=>!O.isPercent).reduce((O,_)=>O+_.value,0);return Math.max(0,Math.floor(N*(1+U)+le))},wn=(S,E)=>En(S,E).reduce((j,U)=>j+U.value,0),Lt=(S,E,N)=>{ga(S),S.effects[E].push({id:`${N.stat}-${Date.now()}-${Math.random()}`,duration:N.duration??1,...N})},Ht=S=>(ga(S),S.effects.debuffs.length===0?!1:(S.effects.debuffs.shift(),!0)),Pl=(S,E)=>{let N=E.manaCost||0;return S.passive?.manaReduction&&(N=Math.floor(N*(1-S.passive.manaReduction))),S.flags?.flowStateTurns>0&&(N=Math.max(0,N-10)),N},ca=(S,E)=>{const N=E.damageBase??E.damage??0,j=E.scaling||0,U=E.scalingStat||(E.damageType==="cursed"?"cursedOutput":"attack"),le=hn(S,U);let O=Math.floor(N+le*j);return S.passive?.type==="damage-boost"&&(O=Math.floor(O*(1+S.passive.value))),O},xt=(S,E,N,j,U,le,O,_,B={})=>{const Ae=hn(E,j==="cursed"?"cursedResistance":"defense");let qe=Math.floor(U*(100/(100+Ae)));const $e=wn(E,"damageAmp"),$=wn(E,"damageReduction");qe=Math.floor(qe*Math.max(0,1+$e-$)),B.crit&&(qe=Math.floor(qe*(N.critMultiplier||1.5)));let he=qe;if(E.barrier?.value>0){const ue=Math.min(E.barrier.value,he);E.barrier.value-=ue,he-=ue,_&&ue>0&&_.push(` ${E.name}'s cursed barrier absorbs ${ue} damage.`)}return he>0&&(E.hp=Math.max(0,E.hp-he),Sn(le,O,he,he>=45),_&&_.push(` ${S.name}  ${N.name}  ${E.name} for ${he} damage${B.crit?" (CRIT)":""}!`),E.states?.sleep>0&&(E.states.sleep=0,_.push(` ${E.name} is jolted awake!`))),he},In=(S,E,N,j)=>{S.effects?.dots?.length&&S.effects.dots.forEach(U=>{if(U.type==="burn"||U.type==="poison"){const le=Math.max(0,U.damage||0);le>0&&S.hp>0&&(S.hp=Math.max(0,S.hp-le),Sn(E,N,le,!1),j.push(` ${S.name} suffers ${le} ${U.type==="burn"?"cursed burn":"cursed poison"} damage!`))}})},Ls=(S,E,N)=>{ga(S),S.stacks.speechMark=Math.min(3,(S.stacks.speechMark||0)+E),S.stacks.speechMark>=3?(Lt(S,"debuffs",{stat:"damageAmp",value:.3,isPercent:!0,duration:2}),S.stacks.speechMark=0,N.push(` ${S.name} is overwhelmed by Speech Mark!`)):N.push(` ${S.name} gains Speech Mark (${S.stacks.speechMark}/3).`)},Va=(S,E,N,j)=>{N.speechMarkStacks&&Ls(E,N.speechMarkStacks,j),N.defenseDebuffPercent&&(Lt(E,"debuffs",{stat:"defense",value:-N.defenseDebuffPercent,isPercent:!0,duration:N.defenseDebuffDuration||2}),j.push(` ${E.name}'s Defense is weakened!`)),N.attackDebuffPercent&&(Lt(E,"debuffs",{stat:"attack",value:-N.attackDebuffPercent,isPercent:!0,duration:N.attackDebuffDuration||2}),j.push(` ${E.name}'s Attack is lowered!`)),N.damageAmp&&(Lt(E,"debuffs",{stat:"damageAmp",value:N.damageAmp,isPercent:!0,duration:N.damageAmpDuration||2}),j.push(` ${E.name} is exposed to curse amplification!`)),N.selfDefenseBuffPercent&&(Lt(S,"buffs",{stat:"defense",value:N.selfDefenseBuffPercent,isPercent:!0,duration:N.selfDefenseBuffDuration||2}),j.push(` ${S.name}'s Defense rises!`)),N.selfAttackBuffPercent&&(Lt(S,"buffs",{stat:"attack",value:N.selfAttackBuffPercent,isPercent:!0,duration:N.selfAttackBuffDuration||2}),j.push(` ${S.name}'s Attack surges!`))},Sl=(S,E)=>{const N=en(S),j=[];return N.forEach((U,le)=>{if(ga(U),U.hp<=0)return;if(In(U,E,le,j),U.passive?.type==="regen"){const B=Math.min(U.passive.value,U.maxHp-U.hp);B>0&&(U.hp=Math.min(U.maxHp,U.hp+U.passive.value),j.push(` ${U.name}'s ${U.passive.name} restores ${B} HP!`),an(E,le,B))}const O=U.passive?.type==="cooldown-reduction"?U.passive.value:0;if(U.hp>0&&U.passive?.type!=="heavenly-restriction"&&(U.mana=Math.min(U.maxMana,U.mana+25)),U.abilities.forEach(B=>{B.currentCooldown>0&&(B.currentCooldown=Math.max(0,B.currentCooldown-1-O))}),U.ultimate?.currentCooldown>0&&(U.ultimate.currentCooldown=Math.max(0,U.ultimate.currentCooldown-1-O)),U.states.binding&&(U.states.binding=Math.max(0,U.states.binding-1)),U.states.sleep&&(U.states.sleep=Math.max(0,U.states.sleep-1)),U.flags.gorillaCoreTurns>0&&(U.flags.gorillaCoreTurns-=1,U.flags.gorillaCoreTurns===0)){const B=Math.floor(U.maxHp*.15);U.hp=Math.min(U.maxHp,U.hp+B),j.push(` ${U.name}'s Gorilla Core fades  +${B} HP!`),an(E,le,B),U.counters.techniqueCount=0}U.flags.flowStateTurns>0&&(U.flags.flowStateTurns-=1),U.barrier?.duration>0&&(U.barrier.duration-=1,U.barrier.duration<=0&&(U.barrier.value=0));const _=B=>{U.effects[B]=U.effects[B].map(de=>({...de,duration:de.duration-1})).filter(de=>de.duration>0)};_("buffs"),_("debuffs"),_("dots")}),{team:N,logs:j}},Pn=(S,E,N=[])=>{if(N.length>0&&p(j=>[...j,...N]),v(S==="win"?"win":"lose"),He){S==="win"&&ia(He.nodeId),Rt({nodeId:He.nodeId,result:S}),Ge(j=>({...j,activeNodeId:He.nodeId}));return}Zr(S,E)},Sn=(S,E,N,j=!1)=>{N<=0||E==null||(_l({team:S,index:E,amount:N,type:"damage",big:j}),j&&El())},an=(S,E,N)=>{N<=0||E==null||_l({team:S,index:E,amount:N,type:"heal"})},nn=(S,E,N,j,U,le)=>{const O=U[S];if(!O||O.hp<=0)return{logs:[]};if(ga(O),O.states.binding>0||O.states.sleep>0)return{logs:[` ${O.name} is bound and cannot act!`]};const _=N?O.ultimate:O.abilities[E];if(!_)return{logs:[]};let B=[];const de=O.flags.gorillaCoreTurns>0;if(_.requiresGorillaCore&&!de)return{logs:[` ${O.name} cannot use ${_.name} without Gorilla Core.`]};N?U[S].ultimate.currentCooldown=_.cooldown:U[S].abilities[E].currentCooldown=_.cooldown;const Ae=Pl(O,_);if(O.mana<Ae)return{logs:[` ${O.name} doesn't have enough cursed energy for ${_.name}.`]};U[S].mana-=Ae;const qe=()=>{if(_.guaranteedCrit)return!0;const $=(O.critChance||0)+(O.passive?.critBonus||0)+wn(O,"critChance");return Math.random()<$},$e=$=>$.passive?.type==="dodge-chance"&&Math.random()<$.passive.value;switch(_.type){case"attack":{if(_.coreAllEnemies&&de){B.push(` ${O.name}'s Gorilla Core amplifies ${_.name}!`);const he=ca(O,_);le.forEach((ue,we)=>{if(ue.hp>0){const Se=qe();xt(O,ue,_,_.damageType||"physical",he,"enemy",we,B,{crit:Se}),Va(O,ue,_,B)}});break}const $=le[j];if(!$||$.hp<=0)break;if($e($))B.push(` ${$.name} DODGES ${O.name}'s ${_.name}!`);else{const he=qe(),ue=ca(O,_);xt(O,$,_,_.damageType||"physical",ue,"enemy",j,B,{crit:he}),de&&_.coreDefenseDebuffPercent?(Lt($,"debuffs",{stat:"defense",value:-_.coreDefenseDebuffPercent,isPercent:!0,duration:_.coreDefenseDebuffDuration||2}),B.push(` ${$.name}'s Defense is shattered by Gorilla Core!`)):Va(O,$,_,B),$.hp<=0&&B.push(` ${$.name} defeated!`),O.passive?.type==="burn"&&(Lt($,"dots",{stat:"dot",type:"burn",damage:O.passive.value,duration:2}),B.push(` ${$.name} is afflicted with Cursed Burn!`)),(O.passive?.type==="double-hit"&&Math.random()<O.passive.value||_.isBasic&&O.flags.flowStateTurns>0||_.isBasic&&O.flags.nextBasicDouble)&&(xt(O,$,_,_.damageType||"physical",ue,"enemy",j,B,{crit:he}),O.flags.nextBasicDouble=!1,$.hp<=0&&B.push(` ${$.name} defeated!`)),_.onCritCooldownReduction&&he&&(O.abilities.forEach((Se,gt)=>{gt>0&&Se.currentCooldown>0&&(Se.currentCooldown=Math.max(0,Se.currentCooldown-1))}),B.push(` ${O.name}'s momentum reduces cooldowns!`))}break}case"attack-execute":{const $=le[j];if(!$||$.hp<=0)break;if($e($))B.push(` ${$.name} DODGES ${O.name}'s ${_.name}!`);else{let ue=ca(O,_);$.hp/$.maxHp<_.threshold&&(ue+=_.bonusDamage||0,B.push(" Weak point strike!"));const we=qe();xt(O,$,_,_.damageType||"physical",ue,"enemy",j,B,{crit:we}),Va(O,$,_,B),$.hp<=0&&B.push(` ${$.name} defeated!`)}break}case"attack-all":{N?B.push(` ${O.name} unleashes Domain Expansion: ${_.name}!`):B.push(` ${O.name} uses ${_.name}!`);let $=0;const he=de&&_.coreDamageBase?Math.floor((_.coreDamageBase||0)+hn(O,_.scalingStat||"attack")*(_.coreScaling||_.scaling||0)):ca(O,_);if(le.forEach((ue,we)=>{if(ue.hp>0)if($e(ue))B.push(`   ${ue.name} DODGES!`);else{const Se=qe();xt(O,ue,_,_.damageType||"physical",he,"enemy",we,B,{crit:Se}),Va(O,ue,_,B),$+=1,_.speechMarkAllStacks&&Ls(ue,_.speechMarkAllStacks,B),_.bindingAllDuration&&(ue.states.binding=_.bindingAllDuration),de&&_.coreBindDuration&&(ue.states.binding=_.coreBindDuration),ue.hp<=0&&B.push(`   ${ue.name} defeated!`)}}),_.energyRestorePerHit&&$>0){const ue=$*_.energyRestorePerHit;O.mana=Math.min(O.maxMana,O.mana+ue),B.push(` ${O.name} recovers ${ue} cursed energy.`)}if(_.recoilPercent){const ue=Math.floor(O.maxHp*_.recoilPercent);O.hp=Math.max(1,O.hp-ue),B.push(` ${O.name} suffers ${ue} recoil.`),Sn("player",S,ue,!1)}break}case"attack-stun":{const $=le[j];if(!$||$.hp<=0)break;if($e($))B.push(` ${$.name} DODGES ${O.name}'s ${_.name}!`);else{const he=qe(),ue=ca(O,_);xt(O,$,_,_.damageType||"physical",ue,"enemy",j,B,{crit:he}),Va(O,$,_,B),$.states.binding=_.bindingDuration||_.stunDuration||1,B.push(` ${$.name} is bound!`),$.hp<=0&&B.push(` ${$.name} defeated!`)}break}case"stun-only":{const $=le[j];if(!$||$.hp<=0)break;$.states.binding=_.bindingDuration||_.stunDuration||1,B.push(` ${O.name}  ${_.name}  ${$.name} bound for ${_.bindingDuration||_.stunDuration} turn(s)!`);break}case"defensive":{const $=_.barrierValue||Math.max(30,Math.floor(O.maxHp*.35));U[S].barrier.value+=$,U[S].barrier.duration=Math.max(U[S].barrier.duration,_.barrierDuration||1),B.push(` ${O.name} raises a Cursed Barrier (${$}).`);break}case"buff":{Lt(U[S],"buffs",{stat:_.buffStat||"attack",value:_.buffAmount??0,isPercent:!!_.isPercent,duration:_.duration||2}),B.push(` ${O.name} uses ${_.name}  ${_.buffStat||"Attack"} reinforced!`);break}case"buff-self-damage":{Lt(U[S],"buffs",{stat:_.buffStat||"attack",value:_.buffAmount??0,isPercent:!!_.isPercent,duration:_.duration||2}),U[S].hp=Math.max(1,U[S].hp-(_.selfDamage||0)),B.push(` ${O.name} pushes beyond limits, trading HP for power!`),Sn("player",S,_.selfDamage||0,!1);break}case"heal-self":{const $=_.healPercent?Math.floor(O.maxHp*_.healPercent):_.healAmount,he=Math.min($,O.maxHp-O.hp);U[S].hp=Math.min(O.maxHp,O.hp+he),B.push(` ${O.name} uses ${_.name}  +${he} HP!`),an("player",S,he),_.cleanseDebuff&&Ht(U[S])&&B.push(` ${O.name} cleanses an affliction!`),_.resetTechniqueCounter&&(U[S].counters.techniqueCount=0,B.push(` ${O.name}'s technique counter resets.`));break}case"heal-all":{B.push(` ${O.name} uses ${_.name}!`),U.forEach($=>{if($.hp>0){const he=_.healPercent?Math.floor($.maxHp*_.healPercent):_.healAmount,ue=Math.min(he,$.maxHp-$.hp);if($.hp=Math.min($.maxHp,$.hp+ue),ue>0&&B.push(`   ${$.name} +${ue} HP!`),ue>0){const we=U.findIndex(Se=>Se.id===$.id);an("player",we,ue)}}});break}case"ultimate-megumi":{const $=ca(O,_);B.push(` ${O.name} unveils Domain Expansion: ${_.name}!`),le.forEach((he,ue)=>{he.hp>0&&(xt(O,he,_,_.damageType||"cursed",$,"enemy",ue,B),he.hp<=0&&B.push(`   ${he.name} defeated!`))}),U.forEach((he,ue)=>{if(he.hp>0){const we=_.healPercent?Math.floor(he.maxHp*_.healPercent):_.healAmount,Se=Math.min(we,he.maxHp-he.hp);he.hp=Math.min(he.maxHp,he.hp+Se),Se>0&&B.push(`   ${he.name} +${Se} HP!`),Se>0&&an("player",ue,Se)}});break}case"ultimate-mahito":{const $=le[j];if(!$||$.hp<=0)break;U[S].barrier.value+=Math.max(40,Math.floor(O.maxHp*.25)),U[S].barrier.duration=Math.max(U[S].barrier.duration,1);const he=ca(O,_);xt(O,$,_,_.damageType||"cursed",he,"enemy",j,B),$.hp<=0&&B.push(` ${$.name} defeated!`);break}case"debuff-mark":{const $=le[j];if(!$||$.hp<=0)break;Lt($,"debuffs",{stat:"damageAmp",value:_.damageAmp??.15,isPercent:!0,duration:_.duration||2}),B.push(` ${O.name}  ${_.name}  ${$.name} is afflicted!`);break}case"attack-all-primary-mark":{const $=le[j];if(!$||$.hp<=0)break;B.push(` ${O.name} releases ${_.name}!`);const he=ca(O,_);le.forEach((ue,we)=>{ue.hp>0&&xt(O,ue,_,_.damageType||"cursed",he,"enemy",we,B)}),_.applySpeechMark&&($.stacks.speechMark=Math.min(3,$.stacks.speechMark+1),$.stacks.speechMark>=3?(Lt($,"debuffs",{stat:"damageAmp",value:.3,isPercent:!0,duration:2}),$.stacks.speechMark=0,B.push(` ${$.name} is overwhelmed by Speech Mark!`)):B.push(` ${$.name} gains a Speech Mark stack (${$.stacks.speechMark}/3).`));break}case"attack-random":{const $=le.map((ue,we)=>({enemy:ue,idx:we})).filter(ue=>ue.enemy.hp>0),he=Math.min(_.targetCount||2,$.length);for(let ue=0;ue<he;ue+=1){const we=Math.floor(Math.random()*$.length),Se=$.splice(we,1)[0],gt=ca(O,_);xt(O,Se.enemy,_,_.damageType||"physical",gt,"enemy",Se.idx,B),Va(O,Se.enemy,_,B)}break}case"utility":{B.push(` ${O.name} uses ${_.name}!`);break}case"buff-ally":{const $=U.filter((he,ue)=>he.hp>0&&ue!==S);if($.length>0){const he=$[Math.floor(Math.random()*$.length)],ue=U.findIndex(we=>we.id===he.id);Lt(U[ue],"buffs",{stat:_.buffStat||"attack",value:_.buffAmount??0,isPercent:!!_.isPercent,duration:_.duration||2}),B.push(` ${O.name}  ${_.name}  ${he.name} reinforced!`)}break}}if(_.grantFlowStateTurns&&(O.flags.flowStateTurns=Math.max(O.flags.flowStateTurns,_.grantFlowStateTurns),B.push(` ${O.name} enters Flow State!`)),_.setNextBasicDouble&&(O.flags.nextBasicDouble=!0,B.push(` ${O.name}'s next basic strike will hit twice!`)),O.passive?.type==="gorilla-core"&&!_.isBasic&&(O.counters.techniqueCount+=1,O.counters.techniqueCount>=3&&O.flags.gorillaCoreTurns===0&&(O.flags.gorillaCoreTurns=2,O.counters.techniqueCount=0,B.push(` ${O.name} awakens Gorilla Core!`))),O.passive?.type==="heavenly-restriction"){const $=(_.isBasic?15:0)+10;O.mana=Math.min(O.maxMana,O.mana+$),B.push(` ${O.name} recovers ${$} cursed energy.`)}return{logs:B}},va=(S,E,N,j)=>{g||Ze&&!Ga||(Ce(U=>[...U,{characterIndex:S,abilityIndex:E,isUltimate:N,enemyIndex:j}]),ne(U=>[...U,S]),X(null))},Pr=S=>{Ce(E=>{const N=E.filter((U,le)=>le!==S),j=new Set(N.map(U=>U.characterIndex));return ne(U=>U.filter(le=>j.has(le))),N})},yc=(S=i,E=r)=>{let N=[],j=en(E),U=en(S);const le=Sl(j,"enemy");j=le.team,N.push(...le.logs),j.filter(B=>B.hp>0&&B.states?.binding===0).forEach(B=>{const de=j.findIndex($=>$.id===B.id);if(U.filter($=>$.hp>0).length===0)return;const qe=[...B.abilities];B.ultimate?.currentCooldown===0&&qe.push({...B.ultimate,isUlt:!0});const $e=qe.filter($=>$.currentCooldown!==0||$.requiresGorillaCore&&B.flags?.gorillaCoreTurns<=0?!1:(Pl(B,$)||0)<=B.mana);if($e.length>0){const $=$e[Math.floor(Math.random()*$e.length)];if($.isUlt)j[de].ultimate.currentCooldown=$.cooldown;else{const Se=B.abilities.findIndex(gt=>gt.id===$.id);Se>=0&&(j[de].abilities[Se].currentCooldown=$.cooldown)}const he=Pl(B,$);j[de].mana-=he;const ue=U.findIndex(Se=>Se.hp>0),we=U[ue];if($.type==="attack"||$.type==="attack-execute"||$.type==="attack-stun")if(we.passive?.type==="dodge-chance"&&Math.random()<we.passive.value)N.push(` ${we.name} DODGES ${B.name}'s ${$.name}!`);else{const Se=ca(B,$);xt(B,we,$,$.damageType||"physical",Se,"player",ue,N),Va(B,we,$,N),$.type==="attack-stun"&&(we.states.binding=$.bindingDuration||$.stunDuration||1,N.push(` ${we.name} is bound!`)),we.hp<=0&&N.push(` ${we.name} KO'd!`)}else if($.type==="attack-all"){$.isUlt?N.push(` ${B.name} unleashes Domain Expansion: ${$.name}!`):N.push(` ${B.name} uses ${$.name}!`);const Se=ca(B,$);U.forEach((gt,oa)=>{gt.hp>0&&(xt(B,gt,$,$.damageType||"physical",Se,"player",oa,N),Va(B,gt,$,N),gt.hp<=0&&N.push(`   ${gt.name} KO'd!`))})}else if($.type==="attack-all-primary-mark"){const Se=ca(B,$);U.forEach((gt,oa)=>{gt.hp>0&&xt(B,gt,$,$.damageType||"cursed",Se,"player",oa,N)}),we&&we.hp>0&&$.applySpeechMark&&Ls(we,1,N)}else if($.type==="attack-random"){const Se=U.map((oa,pn)=>({ally:oa,idx:pn})).filter(oa=>oa.ally.hp>0),gt=Math.min($.targetCount||2,Se.length);for(let oa=0;oa<gt;oa+=1){const pn=Math.floor(Math.random()*Se.length),gn=Se.splice(pn,1)[0],Sc=ca(B,$);xt(B,gn.ally,$,$.damageType||"physical",Sc,"player",gn.idx,N),Va(B,gn.ally,$,N)}}else if($.type==="heal-self"){const Se=$.healPercent?Math.floor(B.maxHp*$.healPercent):$.healAmount,gt=Math.min(Se,B.maxHp-B.hp);j[de].hp=Math.min(B.maxHp,B.hp+gt),N.push(` ${B.name} heals ${gt} HP!`),an("enemy",de,gt)}else if($.type==="defensive"){const Se=$.barrierValue||Math.max(30,Math.floor(B.maxHp*.35));j[de].barrier.value+=Se,j[de].barrier.duration=Math.max(j[de].barrier.duration,$.barrierDuration||1),N.push(` ${B.name} raises a barrier!`)}if(B.passive?.type==="heavenly-restriction"){const Se=($.isBasic?15:0)+10;j[de].mana=Math.min(B.maxMana,j[de].mana+Se),N.push(` ${B.name} recovers ${Se} cursed energy.`)}}}),j.forEach(B=>{B.states?.binding&&B.hp>0&&N.push(` ${B.name} is bound and misses their turn!`)});const _=Sl(U,"player");if(U=_.team,N.push(..._.logs),n(U),c(j),U.every(B=>B.hp<=0)){N.push(" DEFEAT!"),Pn("lose",S,N);return}p(B=>[...B,...N]),ne([]),w(B=>B+1)},Hs=async(S=null)=>{if(D!=="battle"||g||Ze&&!Ga)return;X(null);let E=en(r),N=en(i),j=[];const U=S??ve,le=[...U];if(U.forEach(_=>{const B=nn(_.characterIndex,_.abilityIndex,_.isUltimate,_.enemyIndex,N,E);j.push(...B.logs)}),Ce([]),He?.enemyCannotDie){let _=!1;E.forEach(B=>{B.hp<=0&&(_=!0,B.hp=1)}),_&&j.push(" The enemy cannot be defeated yet.")}if((!He||He.type!=="survival")&&E.every(_=>_.hp<=0)){j.push(" VICTORY!"),Pn("win",N,j);return}if(Ze&&Be&&R){const _=Be.player1_id===R.user.id,B=_?Be.player2_id:Be.player1_id,de=Be.state?.log||m,Ae=Sl(N,"player");N=Ae.team,j.push(...Ae.logs);const qe=Sl(E,"enemy");if(E=qe.team,j.push(...qe.logs),E.every(he=>he.hp<=0)){const he={player1Team:_?N:E,player2Team:_?E:N,turn:Be.state?.turn||k,log:[...de,...j," VICTORY!"]};await ee.from("pvp_matches").update({state:he,status:"completed",winner_id:R.user.id,turn_owner:null,updated_at:new Date().toISOString()}).eq("id",Be.id),Pn("win",N,[]);return}if(N.every(he=>he.hp<=0)){const he={player1Team:_?N:E,player2Team:_?E:N,turn:Be.state?.turn||k,log:[...de,...j," DEFEAT!"]};await ee.from("pvp_matches").update({state:he,status:"completed",winner_id:B,turn_owner:null,updated_at:new Date().toISOString()}).eq("id",Be.id),Pn("lose",N,[]);return}const $e=(Be.state?.turn||k)+1,$={player1Team:_?N:E,player2Team:_?E:N,turn:$e,log:[...de,...j]};p($.log),n(N),c(E),ne([]),w($e),await ee.from("pvp_turns").insert({match_id:Be.id,user_id:R.user.id,turn_number:$e-1,actions:{queuedActions:le}}),await ee.from("pvp_matches").update({state:$,turn:$e,turn_owner:B,updated_at:new Date().toISOString()}).eq("id",Be.id);return}p(_=>[..._,...j]),yc(N,E)};Z.useEffect(()=>{if(!(!He||D!=="battle"||g)&&He.type==="survival"&&k>He.turnLimit){const S=[` Objective complete! Survived ${He.turnLimit} turns.`];Pn("win",i,S)}},[k,He,D,g,i]);const Ql=()=>{z("select"),L([]),n([]),c([]),f(null),p(["Battle Start! Queue actions, then End Turn."]),v(null),w(1),ne([]),X(null),Ce([]),ie(null),nt(null),kt(null),y(null),C&&(C.unsubscribe(),se(null))},Xl=()=>{z("select"),n([]),c([]),f(null),p(["Battle Start! Queue actions, then End Turn."]),v(null),w(1),ne([]),X(null),Ce([]),ie(null),nt(null),Q("story")},bc=()=>{const S=x.map(j=>Yn(j,ka[j.id]));n(S);const N=[...be.filter(j=>!x.some(U=>U.id===j.id))].sort(()=>Math.random()-.5);c(en(N.slice(0,3))),z("battle"),p(["Battle Start! Queue actions, then End Turn."]),ne([]),Ce([]),nt(null)},da=S=>{if(!S||!R)return;const E=S.player1_id===R.user.id,N=S.state||{},j=N.player1Team||Ta(S.player1_team||[],!1),U=N.player2Team||Ta(S.player2_team||[],!1);n(en(E?j:U)),c(en(E?U:j)),p(N.log?.length?N.log:["PvP Match Start!"]),w(N.turn||S.turn||1),Ce([]),ne([]),X(null),v(null),z("battle"),nt(null)},Gs=S=>{if(!S)return;C&&C.unsubscribe();const E=ee.channel(`pvp-match-${S}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"pvp_matches",filter:`id=eq.${S}`},N=>{if(kt(N.new),da(N.new),N.new.status==="completed"&&N.new.winner_id&&R){const j=N.new.winner_id===R.user.id?"win":"lose";Pn(j,i,[])}}).subscribe();se(E)},Vs=async S=>{if(!R||x.length<3)return;y("searching");const E=x.map(_=>_.id),N=Ta(E,!0),j=P?.rating||1e3;await ee.from("pvp_queue").delete().eq("user_id",R.user.id);const U=S==="ranked"?200:999999,{data:le}=await ee.from("pvp_queue").select("*").eq("mode",S).neq("user_id",R.user.id).gte("rating",j-U).lte("rating",j+U).order("created_at",{ascending:!0}).limit(1),O=le?.[0];if(O){try{await Promise.all([ee.from("pvp_queue").delete().eq("id",O.id),ee.from("pvp_queue").delete().eq("user_id",R.user.id)]);const _=Array.isArray(O.team_state)&&O.team_state.length?O.team_state:Ta(O.team_ids||[],!1),B={mode:S,player1_id:O.user_id,player2_id:R.user.id,player1_team:O.team_ids||[],player2_team:E,player1_rating:O.rating||1e3,player2_rating:j,state:{player1Team:_,player2Team:N,turn:1,log:["PvP Match Start! Queue actions, then End Turn."]},turn:1,turn_owner:O.user_id,status:"waiting",player1_ready:!1,player2_ready:!0,updated_at:new Date().toISOString()},{data:de,error:Ae}=await ee.from("pvp_matches").insert(B).select().single();if(Ae)throw Ae;de&&(kt(de),y("match_found"),ln(de.id))}catch(_){console.error("Failed to create match:",_),y("error"),setTimeout(()=>y(null),3e3)}return}try{await ee.from("pvp_queue").insert({user_id:R.user.id,mode:S,team_ids:E,team_state:N,rating:j}),y("searching"),C&&(C.unsubscribe(),se(null));const _=ee.channel(`pvp-lobby-${R.user.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"pvp_matches"},async B=>{const de=B.new;(de.player1_id===R.user.id||de.player2_id===R.user.id)&&(kt(de),y("match_found"),de.player1_id===R.user.id&&await ee.from("pvp_matches").update({player1_ready:!0,updated_at:new Date().toISOString()}).eq("id",de.id),await ee.from("pvp_queue").delete().eq("user_id",R.user.id),_.unsubscribe(),ln(de.id))}).subscribe();se(_),Jl(S)}catch(_){console.error("Failed to join queue:",_),y("error"),setTimeout(()=>y(null),3e3)}},Jl=async(S,E=0)=>{if(!(E>=15||!R||ra!=="searching")){try{const{data:N}=await ee.from("pvp_matches").select("*").or(`player1_id.eq.${R.user.id},player2_id.eq.${R.user.id}`).eq("status","waiting").order("created_at",{ascending:!1}).limit(1);if(N&&N.length>0){const j=N[0];kt(j),y("match_found"),j.player1_id===R.user.id&&!j.player1_ready&&await ee.from("pvp_matches").update({player1_ready:!0,updated_at:new Date().toISOString()}).eq("id",j.id),await ee.from("pvp_queue").delete().eq("user_id",R.user.id),C&&(C.unsubscribe(),se(null)),ln(j.id);return}}catch(N){console.error("Poll error:",N)}setTimeout(()=>Jl(S,E+1),2e3)}},ln=async(S,E=0)=>{if(E>=30||!R){y("timeout"),setTimeout(()=>y(null),3e3);return}try{const{data:N}=await ee.from("pvp_matches").select("*").eq("id",S).single();if(!N){y("error"),setTimeout(()=>y(null),3e3);return}if(N.player1_ready&&N.player2_ready&&N.status==="waiting"){N.player1_id===R.user.id&&await ee.from("pvp_matches").update({status:"active",updated_at:new Date().toISOString()}).eq("id",S).eq("status","waiting"),setTimeout(async()=>{const{data:U}=await ee.from("pvp_matches").select("*").eq("id",S).single();U&&U.status==="active"&&(kt(U),y(null),da(U),Gs(U.id))},500);return}}catch(N){console.error("Ready poll error:",N)}setTimeout(()=>ln(S,E+1),1e3)},Qr=()=>Vs("quick"),Xr=()=>Vs("ranked"),Qn=async()=>{R&&(await ee.from("pvp_queue").delete().eq("user_id",R.user.id),C&&(C.unsubscribe(),se(null)),y(null),kt(null))},_c=async(S,E,N)=>{if(!R)return;const j={user_id:R.user.id,slot:S,name:E||`Preset ${S}`,character_ids:N,updated_at:new Date().toISOString()},{error:U}=await ee.from("team_presets").upsert(j,{onConflict:"user_id,slot"});U||A(le=>({...le,[S]:j}))},Jr=S=>{const E=S.map(N=>be.find(j=>j.id===N)).filter(Boolean);L(E)},Zr=async(S,E)=>{if(!R)return;const N=S==="win"?60:40,j=S==="win"?35:25,U=P?.account_level||1,le=P?.account_xp||0,O=P?.rating??1e3,_=pa(U,le,N),B=S==="win"?20:-15,de=Math.max(0,O+B),Ae=[];_.level>U&&Ae.push(`Account leveled up to ${_.level}!`),oe(ue=>({...ue||{},account_level:_.level,account_xp:_.xp,rating:de}));const qe={...ka},$e=[],$=[],he=[];if(E.forEach(ue=>{const we=qe[ue.id]||{level:1,xp:0,limit_break:0},Se=pa(we.level,we.xp,j);qe[ue.id]={...we,...Se},Se.level>we.level&&(Ae.push(`${ue.name} reached Lv ${Se.level}!`),$.push({name:ue.name,level:Se.level})),he.push({id:ue.id,name:ue.name,level:Se.level,xp:Se.xp,xpNeeded:Ha(Se.level)}),$e.push({user_id:R.user.id,character_id:ue.id,level:Se.level,xp:Se.xp,limit_break:we.limit_break||0,updated_at:new Date().toISOString()})}),Le(qe),await ee.from("profiles").update({account_level:_.level,account_xp:_.xp,rating:de,updated_at:new Date().toISOString()}).eq("id",R.user.id),$e.length>0&&await ee.from("character_progress").upsert($e,{onConflict:"user_id,character_id"}),await ee.from("match_history").insert({user_id:R.user.id,result:S,turns:k,rating_delta:B,account_xp_gain:N,character_xp_gain:j}).select().then(({data:ue,error:we})=>{!we&&ue&&fe(Se=>[...ue,...Se].slice(0,20))}),Ae.length>0&&(Ee(Ae.join(" ")),setTimeout(()=>{Ee(null)},2800)),await Ys(S,$.length),S==="win"){const{count:ue}=await ee.from("match_history").select("*",{count:"exact",head:!0}).eq("user_id",R.user.id).eq("result","win");ue!==null&&Aa("battles_won",ue)}Aa("account_level",_.level),E.forEach(ue=>{const we=qe[ue.id];we&&we.level>=50&&Aa("max_level_characters",1)}),ie({result:S,accountGain:N,characterGain:j,accountLevel:_.level,accountXp:_.xp,accountNeeded:Ha(_.level),ratingDelta:B,rating:de,characterLevelUps:$,characterSummaries:he})},Ys=async(S,E=0)=>{if(!R||pe.length===0)return;const N=[],j=[...je];pe.forEach(U=>{const le=j.findIndex(qe=>qe.mission_id===U.id);if(le===-1)return;const O=j[le];if(O.claimed)return;const _=U.condition||"match_any";if(!(_==="match_any"||_==="match_win"&&S==="win"||_==="match_loss"&&S==="lose"||_==="character_level_up"&&E>0))return;const de=_==="character_level_up"?E:1,Ae=Math.min(U.target,O.progress+de);Ae!==O.progress&&(j[le]={...O,progress:Ae},N.push({user_id:R.user.id,mission_id:U.id,progress:Ae,claimed:O.claimed,updated_at:new Date().toISOString()}))}),N.length!==0&&(await ee.from("user_missions").upsert(N,{onConflict:"user_id,mission_id"}),Ke(j))},Ec=async S=>{if(!R)return;const E=pe.find(O=>O.id===S),N=je.find(O=>O.mission_id===S);if(!E||!N||N.claimed||N.progress<E.target)return;const j=(P?.soft_currency??0)+E.reward_soft,U=(P?.premium_currency??0)+E.reward_premium,le=[];if(E.reward_shard_character_id&&E.reward_shard_amount>0){const _=(rt[E.reward_shard_character_id]||0)+E.reward_shard_amount;le.push({user_id:R.user.id,character_id:E.reward_shard_character_id,shard_amount:_,updated_at:new Date().toISOString()}),Et(B=>({...B,[E.reward_shard_character_id]:_}))}await ee.from("profiles").update({soft_currency:j,premium_currency:U,updated_at:new Date().toISOString()}).eq("id",R.user.id),await ee.from("user_missions").update({claimed:!0,updated_at:new Date().toISOString()}).eq("user_id",R.user.id).eq("mission_id",S),le.length>0&&await ee.from("user_inventory").upsert(le,{onConflict:"user_id,character_id"}),oe(O=>({...O||{},soft_currency:j,premium_currency:U})),Ke(O=>O.map(_=>_.mission_id===S?{..._,claimed:!0}:_))},wc=async()=>{if(!R||!Ie)return;const S=new Date().toISOString().split("T")[0],E=Ie.last_claim_date;if(E===S)return;const N=new Date;N.setDate(N.getDate()-1);const j=N.toISOString().split("T")[0],le=E===j?Ie.current_streak+1:1,O=Math.max(le,Ie.longest_streak),_=(le-1)%7+1,de={1:{soft:50,premium:0},2:{soft:75,premium:0},3:{soft:100,premium:5},4:{soft:125,premium:0},5:{soft:150,premium:10},6:{soft:200,premium:0},7:{soft:300,premium:25}}[_];await ee.from("daily_rewards").update({current_streak:le,longest_streak:O,last_claim_date:S,total_logins:Ie.total_logins+1,updated_at:new Date().toISOString()}).eq("user_id",R.user.id);const Ae=(P?.soft_currency||0)+de.soft,qe=(P?.premium_currency||0)+de.premium;await ee.from("profiles").update({soft_currency:Ae,premium_currency:qe,updated_at:new Date().toISOString()}).eq("id",R.user.id),At($e=>({...$e,current_streak:le,longest_streak:O,last_claim_date:S,total_logins:$e.total_logins+1})),oe($e=>({...$e,soft_currency:Ae,premium_currency:qe})),Aa("login_streak",le),Aa("total_logins",Ie.total_logins+1)},Aa=async(S,E)=>{if(!R)return;const N=Zt.filter(j=>j.requirement_type===S&&E>=j.requirement_target);for(const j of N){const U=Ca.find(le=>le.achievement_id===j.id);if(!U||!U.is_completed){await ee.from("achievement_progress").upsert({user_id:R.user.id,achievement_id:j.id,progress:E,is_completed:E>=j.requirement_target,completed_at:E>=j.requirement_target?new Date().toISOString():null,updated_at:new Date().toISOString()});const{data:le}=await ee.from("achievement_progress").select("*").eq("user_id",R.user.id);ut(le||[])}}},sn=async S=>{if(!R)return;const E=Zt.find(le=>le.id===S);if(!E)return;const N=Ca.find(le=>le.achievement_id===S);if(!N||!N.is_completed||N.rewards_claimed)return;const j=(P?.soft_currency||0)+E.reward_soft_currency,U=(P?.premium_currency||0)+E.reward_premium_currency;await ee.from("profiles").update({soft_currency:j,premium_currency:U,updated_at:new Date().toISOString()}).eq("id",R.user.id),E.reward_title&&await ee.from("user_titles").upsert({user_id:R.user.id,title_id:E.id,unlocked:!0}),await ee.from("achievement_progress").update({rewards_claimed:!0,updated_at:new Date().toISOString()}).eq("user_id",R.user.id).eq("achievement_id",S),oe(le=>({...le,soft_currency:j,premium_currency:U})),ut(le=>le.map(O=>O.achievement_id===S?{...O,rewards_claimed:!0}:O))},Ks=async S=>{if(!R)return;const E=yt.find(_=>_.id===S);if(!E)return;const N=P?.soft_currency??0,j=P?.premium_currency??0;if(N<E.cost_soft||j<E.cost_premium){console.error("Insufficient funds");return}const U=N-E.cost_soft+(E.item_type==="currency"&&E.soft_currency||0),le=j-E.cost_premium+(E.item_type==="currency"&&E.premium_currency||0),O=[];if(E.item_type==="shards"&&E.character_id&&E.shard_amount>0){const B=(rt[E.character_id]||0)+E.shard_amount;O.push({user_id:R.user.id,character_id:E.character_id,shard_amount:B,updated_at:new Date().toISOString()})}try{const{error:_}=await ee.from("profiles").update({soft_currency:U,premium_currency:le,updated_at:new Date().toISOString()}).eq("id",R.user.id);if(_){console.error("Failed to update profile:",_);return}if(O.length>0){const{error:B}=await ee.from("user_inventory").upsert(O,{onConflict:"user_id,character_id"});if(B){console.error("Failed to update inventory:",B);return}Et(de=>({...de,[E.character_id]:O[0].shard_amount}))}oe(B=>({...B||{},soft_currency:U,premium_currency:le}))}catch(_){console.error("Purchase failed:",_)}},Is=async(S,E={})=>{if(!R)return;const N=P?.premium_currency??0,j=Ue.finger_fragment||0,U=100,le=E.useFragment===!0;if(le){if(j<=0)return}else if(N<U)return;const O=ha.filter(he=>he.banner_id===S);if(O.length===0)return;const _=O.reduce((he,ue)=>he+ue.weight,0);let B=Math.random()*_,de=O[0];for(const he of O)if(B-=he.weight,B<=0){de=he;break}const Ae=le?N:N-U;let qe=P?.soft_currency??0;const $e=[],$=[];if(de.item_type==="currency"&&(qe+=de.soft_currency||0),de.item_type==="shards"&&de.character_id){const ue=(rt[de.character_id]||0)+(de.shard_amount||0);$e.push({user_id:R.user.id,character_id:de.character_id,shard_amount:ue,updated_at:new Date().toISOString()}),Et(we=>({...we,[de.character_id]:ue}))}if(de.item_type==="character"&&de.character_id){const ue=(rt[de.character_id]||0)+30;$e.push({user_id:R.user.id,character_id:de.character_id,shard_amount:ue,updated_at:new Date().toISOString()}),Et(we=>({...we,[de.character_id]:ue})),ka[de.character_id]||$.push(de.character_id)}try{const{error:he}=await ee.from("profiles").update({soft_currency:qe,premium_currency:Ae,updated_at:new Date().toISOString()}).eq("id",R.user.id);if(he){console.error("Failed to update profile:",he);return}if(le){const we=Math.max(0,j-1),{error:Se}=await ee.from("user_items").upsert({user_id:R.user.id,item_id:"finger_fragment",quantity:we,updated_at:new Date().toISOString()},{onConflict:"user_id,item_id"});if(Se){console.error("Failed to deduct fragment:",Se);return}$a(gt=>({...gt,finger_fragment:we}))}if($e.length>0){const{error:we}=await ee.from("user_inventory").upsert($e,{onConflict:"user_id,character_id"});we&&console.error("Failed to update inventory:",we)}if($.length>0){const we=$.map(oa=>({user_id:R.user.id,character_id:oa,level:1,xp:0,limit_break:0,updated_at:new Date().toISOString()})),{data:Se,error:gt}=await ee.from("character_progress").upsert(we,{onConflict:"user_id,character_id"}).select("character_id, level, xp, limit_break");gt?console.error("Failed to unlock character:",gt):Se&&Le(oa=>{const pn={...oa};return Se.forEach(gn=>{pn[gn.character_id]={level:gn.level,xp:gn.xp,limit_break:gn.limit_break}}),pn})}oe(we=>({...we||{},soft_currency:qe,premium_currency:Ae})),tn(de);const{count:ue}=await ee.from("match_history").select("*",{count:"exact",head:!0}).eq("user_id",R.user.id);if(ue!==null&&Aa("gacha_pulls",ue+1),$.length>0){const we=Object.keys(ka).length+$.length;Aa("characters_unlocked",we)}}catch(he){console.error("Gacha pull failed:",he)}},Nn=S=>S*25,Xn=async S=>{if(!R||!S)return;const E=La.map(j=>({user_id:R.user.id,title_id:j.title_id,unlocked:j.unlocked,active:j.title_id===S,updated_at:new Date().toISOString()}));if(E.length===0)return;const{data:N}=await ee.from("user_titles").upsert(E,{onConflict:"user_id,title_id"}).select();N&&Na(N)},Fr=async S=>{if(!R)return;const E=rt[S]||0,N=ze[S]||{level:1,xp:0,limit_break:0},j=N.limit_break+1;if(j>5)return;const U=Nn(j);if(E<U)return;const le=E-U;await ee.from("user_inventory").upsert({user_id:R.user.id,character_id:S,shard_amount:le,updated_at:new Date().toISOString()},{onConflict:"user_id,character_id"}),await ee.from("character_progress").upsert({user_id:R.user.id,character_id:S,level:N.level,xp:N.xp,limit_break:j,updated_at:new Date().toISOString()},{onConflict:"user_id,character_id"}),Et(_=>({..._,[S]:le})),Le(_=>({..._,[S]:{...N,limit_break:j}}));const O=Object.values(ze).reduce((_,B)=>_+(B.limit_break||0),0)+1;Aa("limit_breaks",O)},Ps=()=>{Q("team"),D==="battle"&&Ql()},Ya=S=>{D==="battle"&&Ql(),Q(S)},ya=D==="battle",Ka=P?.role==="admin",Qs=[{label:"Home",onClick:Ps,active:ge==="team"&&D==="select"},{label:"Story",onClick:()=>Ya("story"),active:ge==="story",disabled:ya},{label:"Daily",onClick:()=>Ya("daily"),active:ge==="daily",disabled:ya},{label:"Achievements",onClick:()=>Ya("achievements"),active:ge==="achievements",disabled:ya},{label:"Shop",onClick:()=>Ya("shop"),active:ge==="shop",disabled:ya},{label:"Gacha",onClick:()=>Ya("gacha"),active:ge==="gacha",disabled:ya},{label:"Inventory",onClick:()=>Ya("inventory"),active:ge==="inventory",disabled:ya},{label:"Missions",onClick:()=>Ya("missions"),active:ge==="missions",disabled:ya},...Ka?[{label:"Admin",onClick:()=>Ya("admin"),active:ge==="admin",disabled:ya}]:[]],Nl=D!=="battle";return s.createElement(bb,{onSession:ce,onProfile:oe,navItems:Qs,onProfileClick:Nl?()=>Ya("profile"):null,compact:D==="battle"},Xe&&s.createElement("div",{className:"level-toast"},s.createElement("span",null,Xe)),D==="battle"?s.createElement(Bv,{playerTeam:i,enemyTeam:r,selectedEnemy:d,setSelectedEnemy:f,queueAbility:va,queuedActions:ve,removeQueuedAction:Pr,battleLog:m,turn:k,gameOver:g,resetGame:Ql,actedCharacters:Y,pendingAbility:re,setPendingAbility:X,setActedCharacters:ne,endTurn:Hs,profile:P,matchSummary:F,combatEvents:Gn,battleShake:$t,isPvp:Ze,isMyTurn:Ga,storyBattle:He,onExitStory:Xl}):ge==="profile"?s.createElement(_b,{profile:P,matchHistory:K,onBack:()=>Q("team"),onProfileUpdate:oe,titles:La,onSetActiveTitle:Xn}):ge==="missions"?s.createElement(Eb,{missions:pe,userMissions:je,onBack:()=>Q("team"),onClaim:Ec}):ge==="inventory"?s.createElement(Nb,{characters:be,inventory:rt,characterProgress:ze,items:Ue,titles:La,onBack:()=>Q("team"),onLimitBreak:Fr,limitBreakCost:Nn}):ge==="shop"?s.createElement(wb,{offers:yt,profile:P,onBack:()=>Q("team"),onPurchase:Ks}):ge==="gacha"?s.createElement(Sb,{banners:Pt,bannerItems:ha,profile:P,items:Ue,characters:be,onBack:()=>Q("team"),onPull:Is,result:mn,onClearResult:()=>tn(null)}):ge==="story"?s.createElement(Cb,{chapter:Dt,completedNodes:me.completedNodes,activeNodeId:me.activeNodeId,onSelectNode:S=>Ge(E=>({...E,activeNodeId:S})),onCompleteNode:qs,onStartBattle:Ir,storyResult:ct,onClearResult:wl,onClaimRewards:$s,rewardsClaimed:bt}):ge==="daily"?s.createElement(Rb,{dailyReward:Ie,onClaim:wc,onBack:()=>Q("team")}):ge==="achievements"?s.createElement(Db,{achievements:Zt,progress:Ca,onClaimReward:sn,onBack:()=>Q("team")}):ge==="admin"&&Ka?s.createElement(Ob,{profile:P,characters:be,onBack:()=>Q("team")}):s.createElement(jv,{characters:be,selectedTeam:x,onSelect:L,onStartBattle:bc,onStartPvpQuick:Qr,onStartPvpRanked:Xr,onCancelPvpQueue:Qn,pvpStatus:ra,characterProgress:ze,teamPresets:ye,onSavePreset:_c,onApplyPreset:Jr}))}class Mb extends s.Component{constructor(n){super(n),this.state={hasError:!1,error:null,errorInfo:null,errorCount:0}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r),this.setState(c=>({error:n,errorInfo:r,errorCount:c.errorCount+1}))}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()};handleGoHome=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.href="/"};render(){return this.state.hasError?s.createElement("div",{className:"error-boundary-screen"},s.createElement("div",{className:"error-boundary-panel"},s.createElement("div",{className:"error-boundary-icon"},""),s.createElement("h1",{className:"error-boundary-title"},"Something went wrong"),s.createElement("p",{className:"error-boundary-message"},"We encountered an unexpected error. Don't worry, your progress has been saved."),!1,s.createElement("div",{className:"error-boundary-actions"},s.createElement("button",{className:"error-boundary-btn primary",onClick:this.handleReset},"Reload Page"),s.createElement("button",{className:"error-boundary-btn secondary",onClick:this.handleGoHome},"Go to Home")),this.state.errorCount>3&&s.createElement("div",{className:"error-boundary-warning"},s.createElement("p",null,s.createElement("strong",null,"Multiple errors detected.")," If this keeps happening, try:"),s.createElement("ul",null,s.createElement("li",null,"Clearing your browser cache"),s.createElement("li",null,"Using a different browser"),s.createElement("li",null,"Contacting support if the issue persists"))))):this.props.children}}Rv.createRoot(document.getElementById("root")).render(s.createElement(s.StrictMode,null,s.createElement(Mb,null,s.createElement(xb,null))));
