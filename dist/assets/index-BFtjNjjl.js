(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))c(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const f of m.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&c(f)}).observe(document,{childList:!0,subtree:!0});function r(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function c(d){if(d.ep)return;d.ep=!0;const m=r(d);fetch(d.href,m)}})();function mp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Cu={exports:{}},Ve={};var Dh;function wg(){if(Dh)return Ve;Dh=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),R=Symbol.iterator;function z(O){return O===null||typeof O!="object"?null:(O=R&&O[R]||O["@@iterator"],typeof O=="function"?O:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,j={};function ee(O,W,ie){this.props=O,this.context=W,this.refs=j,this.updater=ie||x}ee.prototype.isReactComponent={},ee.prototype.setState=function(O,W){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,W,"setState")},ee.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function se(){}se.prototype=ee.prototype;function J(O,W,ie){this.props=O,this.context=W,this.refs=j,this.updater=ie||x}var ge=J.prototype=new se;ge.constructor=J,H(ge,ee.prototype),ge.isPureReactComponent=!0;var Se=Array.isArray;function D(){}var ce={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function oe(O,W,ie){var fe=ie.ref;return{$$typeof:i,type:O,key:W,ref:fe!==void 0?fe:null,props:ie}}function $e(O,W){return oe(O.type,W,O.props)}function Le(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function be(O){var W={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ie){return W[ie]})}var Ye=/\/+/g;function Xe(O,W){return typeof O=="object"&&O!==null&&O.key!=null?be(""+O.key):W.toString(36)}function _e(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(D,D):(O.status="pending",O.then(function(W){O.status==="pending"&&(O.status="fulfilled",O.value=W)},function(W){O.status==="pending"&&(O.status="rejected",O.reason=W)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function I(O,W,ie,fe,Te){var ze=typeof O;(ze==="undefined"||ze==="boolean")&&(O=null);var Ie=!1;if(O===null)Ie=!0;else switch(ze){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(O.$$typeof){case i:case n:Ie=!0;break;case T:return Ie=O._init,I(Ie(O._payload),W,ie,fe,Te)}}if(Ie)return Te=Te(O),Ie=fe===""?"."+Xe(O,0):fe,Se(Te)?(ie="",Ie!=null&&(ie=Ie.replace(Ye,"$&/")+"/"),I(Te,W,ie,"",function(Qt){return Qt})):Te!=null&&(Le(Te)&&(Te=$e(Te,ie+(Te.key==null||O&&O.key===Te.key?"":(""+Te.key).replace(Ye,"$&/")+"/")+Ie)),W.push(Te)),1;Ie=0;var yt=fe===""?".":fe+":";if(Se(O))for(var Re=0;Re<O.length;Re++)fe=O[Re],ze=yt+Xe(fe,Re),Ie+=I(fe,W,ie,ze,Te);else if(Re=z(O),typeof Re=="function")for(O=Re.call(O),Re=0;!(fe=O.next()).done;)fe=fe.value,ze=yt+Xe(fe,Re++),Ie+=I(fe,W,ie,ze,Te);else if(ze==="object"){if(typeof O.then=="function")return I(_e(O),W,ie,fe,Te);throw W=String(O),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function ue(O,W,ie){if(O==null)return O;var fe=[],Te=0;return I(O,fe,"","",function(ze){return W.call(ie,ze,Te++)}),fe}function ve(O){if(O._status===-1){var W=O._result;W=W(),W.then(function(ie){(O._status===0||O._status===-1)&&(O._status=1,O._result=ie)},function(ie){(O._status===0||O._status===-1)&&(O._status=2,O._result=ie)}),O._status===-1&&(O._status=0,O._result=W)}if(O._status===1)return O._result.default;throw O._result}var Q=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},ye={map:ue,forEach:function(O,W,ie){ue(O,function(){W.apply(this,arguments)},ie)},count:function(O){var W=0;return ue(O,function(){W++}),W},toArray:function(O){return ue(O,function(W){return W})||[]},only:function(O){if(!Le(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ve.Activity=E,Ve.Children=ye,Ve.Component=ee,Ve.Fragment=r,Ve.Profiler=d,Ve.PureComponent=J,Ve.StrictMode=c,Ve.Suspense=v,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(O){return ce.H.useMemoCache(O)}},Ve.cache=function(O){return function(){return O.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(O,W,ie){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var fe=H({},O.props),Te=O.key;if(W!=null)for(ze in W.key!==void 0&&(Te=""+W.key),W)!P.call(W,ze)||ze==="key"||ze==="__self"||ze==="__source"||ze==="ref"&&W.ref===void 0||(fe[ze]=W[ze]);var ze=arguments.length-2;if(ze===1)fe.children=ie;else if(1<ze){for(var Ie=Array(ze),yt=0;yt<ze;yt++)Ie[yt]=arguments[yt+2];fe.children=Ie}return oe(O.type,Te,fe)},Ve.createContext=function(O){return O={$$typeof:f,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:m,_context:O},O},Ve.createElement=function(O,W,ie){var fe,Te={},ze=null;if(W!=null)for(fe in W.key!==void 0&&(ze=""+W.key),W)P.call(W,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Te[fe]=W[fe]);var Ie=arguments.length-2;if(Ie===1)Te.children=ie;else if(1<Ie){for(var yt=Array(Ie),Re=0;Re<Ie;Re++)yt[Re]=arguments[Re+2];Te.children=yt}if(O&&O.defaultProps)for(fe in Ie=O.defaultProps,Ie)Te[fe]===void 0&&(Te[fe]=Ie[fe]);return oe(O,ze,Te)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(O){return{$$typeof:p,render:O}},Ve.isValidElement=Le,Ve.lazy=function(O){return{$$typeof:T,_payload:{_status:-1,_result:O},_init:ve}},Ve.memo=function(O,W){return{$$typeof:g,type:O,compare:W===void 0?null:W}},Ve.startTransition=function(O){var W=ce.T,ie={};ce.T=ie;try{var fe=O(),Te=ce.S;Te!==null&&Te(ie,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(D,Q)}catch(ze){Q(ze)}finally{W!==null&&ie.types!==null&&(W.types=ie.types),ce.T=W}},Ve.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},Ve.use=function(O){return ce.H.use(O)},Ve.useActionState=function(O,W,ie){return ce.H.useActionState(O,W,ie)},Ve.useCallback=function(O,W){return ce.H.useCallback(O,W)},Ve.useContext=function(O){return ce.H.useContext(O)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(O,W){return ce.H.useDeferredValue(O,W)},Ve.useEffect=function(O,W){return ce.H.useEffect(O,W)},Ve.useEffectEvent=function(O){return ce.H.useEffectEvent(O)},Ve.useId=function(){return ce.H.useId()},Ve.useImperativeHandle=function(O,W,ie){return ce.H.useImperativeHandle(O,W,ie)},Ve.useInsertionEffect=function(O,W){return ce.H.useInsertionEffect(O,W)},Ve.useLayoutEffect=function(O,W){return ce.H.useLayoutEffect(O,W)},Ve.useMemo=function(O,W){return ce.H.useMemo(O,W)},Ve.useOptimistic=function(O,W){return ce.H.useOptimistic(O,W)},Ve.useReducer=function(O,W,ie){return ce.H.useReducer(O,W,ie)},Ve.useRef=function(O){return ce.H.useRef(O)},Ve.useState=function(O){return ce.H.useState(O)},Ve.useSyncExternalStore=function(O,W,ie){return ce.H.useSyncExternalStore(O,W,ie)},Ve.useTransition=function(){return ce.H.useTransition()},Ve.version="19.2.3",Ve}var xh;function Fu(){return xh||(xh=1,Cu.exports=wg()),Cu.exports}var X=Fu();const s=mp(X);var Tu={exports:{}},$r={},ku={exports:{}},Au={};var Mh;function Sg(){return Mh||(Mh=1,(function(i){function n(I,ue){var ve=I.length;I.push(ue);e:for(;0<ve;){var Q=ve-1>>>1,ye=I[Q];if(0<d(ye,ue))I[Q]=ue,I[ve]=ye,ve=Q;else break e}}function r(I){return I.length===0?null:I[0]}function c(I){if(I.length===0)return null;var ue=I[0],ve=I.pop();if(ve!==ue){I[0]=ve;e:for(var Q=0,ye=I.length,O=ye>>>1;Q<O;){var W=2*(Q+1)-1,ie=I[W],fe=W+1,Te=I[fe];if(0>d(ie,ve))fe<ye&&0>d(Te,ie)?(I[Q]=Te,I[fe]=ve,Q=fe):(I[Q]=ie,I[W]=ve,Q=W);else if(fe<ye&&0>d(Te,ve))I[Q]=Te,I[fe]=ve,Q=fe;else break e}}return ue}function d(I,ue){var ve=I.sortIndex-ue.sortIndex;return ve!==0?ve:I.id-ue.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;i.unstable_now=function(){return m.now()}}else{var f=Date,p=f.now();i.unstable_now=function(){return f.now()-p}}var v=[],g=[],T=1,E=null,R=3,z=!1,x=!1,H=!1,j=!1,ee=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function ge(I){for(var ue=r(g);ue!==null;){if(ue.callback===null)c(g);else if(ue.startTime<=I)c(g),ue.sortIndex=ue.expirationTime,n(v,ue);else break;ue=r(g)}}function Se(I){if(H=!1,ge(I),!x)if(r(v)!==null)x=!0,D||(D=!0,be());else{var ue=r(g);ue!==null&&_e(Se,ue.startTime-I)}}var D=!1,ce=-1,P=5,oe=-1;function $e(){return j?!0:!(i.unstable_now()-oe<P)}function Le(){if(j=!1,D){var I=i.unstable_now();oe=I;var ue=!0;try{e:{x=!1,H&&(H=!1,se(ce),ce=-1),z=!0;var ve=R;try{t:{for(ge(I),E=r(v);E!==null&&!(E.expirationTime>I&&$e());){var Q=E.callback;if(typeof Q=="function"){E.callback=null,R=E.priorityLevel;var ye=Q(E.expirationTime<=I);if(I=i.unstable_now(),typeof ye=="function"){E.callback=ye,ge(I),ue=!0;break t}E===r(v)&&c(v),ge(I)}else c(v);E=r(v)}if(E!==null)ue=!0;else{var O=r(g);O!==null&&_e(Se,O.startTime-I),ue=!1}}break e}finally{E=null,R=ve,z=!1}ue=void 0}}finally{ue?be():D=!1}}}var be;if(typeof J=="function")be=function(){J(Le)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,Xe=Ye.port2;Ye.port1.onmessage=Le,be=function(){Xe.postMessage(null)}}else be=function(){ee(Le,0)};function _e(I,ue){ce=ee(function(){I(i.unstable_now())},ue)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(I){I.callback=null},i.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<I?Math.floor(1e3/I):5},i.unstable_getCurrentPriorityLevel=function(){return R},i.unstable_next=function(I){switch(R){case 1:case 2:case 3:var ue=3;break;default:ue=R}var ve=R;R=ue;try{return I()}finally{R=ve}},i.unstable_requestPaint=function(){j=!0},i.unstable_runWithPriority=function(I,ue){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var ve=R;R=I;try{return ue()}finally{R=ve}},i.unstable_scheduleCallback=function(I,ue,ve){var Q=i.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Q+ve:Q):ve=Q,I){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=ve+ye,I={id:T++,callback:ue,priorityLevel:I,startTime:ve,expirationTime:ye,sortIndex:-1},ve>Q?(I.sortIndex=ve,n(g,I),r(v)===null&&I===r(g)&&(H?(se(ce),ce=-1):H=!0,_e(Se,ve-Q))):(I.sortIndex=ye,n(v,I),x||z||(x=!0,D||(D=!0,be()))),I},i.unstable_shouldYield=$e,i.unstable_wrapCallback=function(I){var ue=R;return function(){var ve=R;R=ue;try{return I.apply(this,arguments)}finally{R=ve}}}})(Au)),Au}var Uh;function Ng(){return Uh||(Uh=1,ku.exports=Sg()),ku.exports}var Ou={exports:{}},pa={};var jh;function Cg(){if(jh)return pa;jh=1;var i=Fu();function n(v){var g="https://react.dev/errors/"+v;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)g+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+v+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var c={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},d=Symbol.for("react.portal");function m(v,g,T){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:E==null?null:""+E,children:v,containerInfo:g,implementation:T}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(v,g){if(v==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return pa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,pa.createPortal=function(v,g){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return m(v,g,null,T)},pa.flushSync=function(v){var g=f.T,T=c.p;try{if(f.T=null,c.p=2,v)return v()}finally{f.T=g,c.p=T,c.d.f()}},pa.preconnect=function(v,g){typeof v=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,c.d.C(v,g))},pa.prefetchDNS=function(v){typeof v=="string"&&c.d.D(v)},pa.preinit=function(v,g){if(typeof v=="string"&&g&&typeof g.as=="string"){var T=g.as,E=p(T,g.crossOrigin),R=typeof g.integrity=="string"?g.integrity:void 0,z=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;T==="style"?c.d.S(v,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:R,fetchPriority:z}):T==="script"&&c.d.X(v,{crossOrigin:E,integrity:R,fetchPriority:z,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},pa.preinitModule=function(v,g){if(typeof v=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var T=p(g.as,g.crossOrigin);c.d.M(v,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&c.d.M(v)},pa.preload=function(v,g){if(typeof v=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var T=g.as,E=p(T,g.crossOrigin);c.d.L(v,T,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},pa.preloadModule=function(v,g){if(typeof v=="string")if(g){var T=p(g.as,g.crossOrigin);c.d.m(v,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else c.d.m(v)},pa.requestFormReset=function(v){c.d.r(v)},pa.unstable_batchedUpdates=function(v,g){return v(g)},pa.useFormState=function(v,g,T){return f.H.useFormState(v,g,T)},pa.useFormStatus=function(){return f.H.useHostTransitionStatus()},pa.version="19.2.3",pa}var Bh;function Tg(){if(Bh)return Ou.exports;Bh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Ou.exports=Cg(),Ou.exports}var zh;function kg(){if(zh)return $r;zh=1;var i=Ng(),n=Fu(),r=Tg();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function m(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(m(e)!==e)throw Error(c(188))}function g(e){var t=e.alternate;if(!t){if(t=m(e),t===null)throw Error(c(188));return t!==e?null:e}for(var a=e,l=t;;){var o=a.return;if(o===null)break;var u=o.alternate;if(u===null){if(l=o.return,l!==null){a=l;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===a)return v(o),e;if(u===l)return v(o),t;u=u.sibling}throw Error(c(188))}if(a.return!==l.return)a=o,l=u;else{for(var h=!1,b=o.child;b;){if(b===a){h=!0,a=o,l=u;break}if(b===l){h=!0,l=o,a=u;break}b=b.sibling}if(!h){for(b=u.child;b;){if(b===a){h=!0,a=u,l=o;break}if(b===l){h=!0,l=u,a=o;break}b=b.sibling}if(!h)throw Error(c(189))}}if(a.alternate!==l)throw Error(c(190))}if(a.tag!==3)throw Error(c(188));return a.stateNode.current===a?e:t}function T(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=T(e),t!==null)return t;e=e.sibling}return null}var E=Object.assign,R=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),se=Symbol.for("react.consumer"),J=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),oe=Symbol.for("react.activity"),$e=Symbol.for("react.memo_cache_sentinel"),Le=Symbol.iterator;function be(e){return e===null||typeof e!="object"?null:(e=Le&&e[Le]||e["@@iterator"],typeof e=="function"?e:null)}var Ye=Symbol.for("react.client.reference");function Xe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ye?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case H:return"Fragment";case ee:return"Profiler";case j:return"StrictMode";case Se:return"Suspense";case D:return"SuspenseList";case oe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case x:return"Portal";case J:return e.displayName||"Context";case se:return(e._context.displayName||"Context")+".Consumer";case ge:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ce:return t=e.displayName||null,t!==null?t:Xe(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return Xe(e(t))}catch{}}return null}var _e=Array.isArray,I=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Q=[],ye=-1;function O(e){return{current:e}}function W(e){0>ye||(e.current=Q[ye],Q[ye]=null,ye--)}function ie(e,t){ye++,Q[ye]=e.current,e.current=t}var fe=O(null),Te=O(null),ze=O(null),Ie=O(null);function yt(e,t){switch(ie(ze,t),ie(Te,e),ie(fe,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?eh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=eh(t),e=th(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(fe),ie(fe,e)}function Re(){W(fe),W(Te),W(ze)}function Qt(e){e.memoizedState!==null&&ie(Ie,e);var t=fe.current,a=th(t,e.type);t!==a&&(ie(Te,e),ie(fe,a))}function ba(e){Te.current===e&&(W(fe),W(Te)),Ie.current===e&&(W(Ie),jr._currentValue=ve)}var Ea,Je;function it(e){if(Ea===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Ea=t&&t[1]||"",Je=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ea+e+Je}var _t=!1;function Be(e,t){if(!e||_t)return"";_t=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(Z){var K=Z}Reflect.construct(e,[],le)}else{try{le.call()}catch(Z){K=Z}e.call(le.prototype)}}else{try{throw Error()}catch(Z){K=Z}(le=e())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(Z){if(Z&&K&&typeof Z.stack=="string")return[Z.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=l.DetermineComponentFrameRoot(),h=u[0],b=u[1];if(h&&b){var A=h.split(`
`),Y=b.split(`
`);for(o=l=0;l<A.length&&!A[l].includes("DetermineComponentFrameRoot");)l++;for(;o<Y.length&&!Y[o].includes("DetermineComponentFrameRoot");)o++;if(l===A.length||o===Y.length)for(l=A.length-1,o=Y.length-1;1<=l&&0<=o&&A[l]!==Y[o];)o--;for(;1<=l&&0<=o;l--,o--)if(A[l]!==Y[o]){if(l!==1||o!==1)do if(l--,o--,0>o||A[l]!==Y[o]){var te=`
`+A[l].replace(" at new "," at ");return e.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",e.displayName)),te}while(1<=l&&0<=o);break}}}finally{_t=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?it(a):""}function Ha(e,t){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return e.child!==t&&t!==null?it("Suspense Fallback"):it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return Be(e.type,!1);case 11:return Be(e.type.render,!1);case 1:return Be(e.type,!0);case 31:return it("Activity");default:return""}}function Ga(e){try{var t="",a=null;do t+=Ha(e,a),a=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Aa=Object.prototype.hasOwnProperty,pn=i.unstable_scheduleCallback,an=i.unstable_cancelCallback,Yn=i.unstable_shouldYield,In=i.unstable_requestPaint,Ht=i.unstable_now,G=i.unstable_getCurrentPriorityLevel,de=i.unstable_ImmediatePriority,Ge=i.unstable_UserBlockingPriority,He=i.unstable_NormalPriority,nt=i.unstable_LowPriority,ot=i.unstable_IdlePriority,Dt=i.log,bt=i.unstable_setDisableYieldValue,Ct=null,wt=null;function ut(e){if(typeof Dt=="function"&&bt(e),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(Ct,e)}catch{}}var qe=Math.clz32?Math.clz32:y,At=Math.log,da=Math.LN2;function y(e){return e>>>=0,e===0?32:31-(At(e)/da|0)|0}var C=256,re=262144,Ke=4194304;function Ot(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function aa(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var o=0,u=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var b=l&134217727;return b!==0?(l=b&~u,l!==0?o=Ot(l):(h&=b,h!==0?o=Ot(h):a||(a=b&~e,a!==0&&(o=Ot(a))))):(b=l&~u,b!==0?o=Ot(b):h!==0?o=Ot(h):a||(a=l&~e,a!==0&&(o=Ot(a)))),o===0?0:t!==0&&t!==o&&(t&u)===0&&(u=o&-o,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:o}function na(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Oa(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dt(){var e=Ke;return Ke<<=1,(Ke&62914560)===0&&(Ke=4194304),e}function nn(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function va(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Sn(e,t,a,l,o,u){var h=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var b=e.entanglements,A=e.expirationTimes,Y=e.hiddenUpdates;for(a=h&~a;0<a;){var te=31-qe(a),le=1<<te;b[te]=0,A[te]=-1;var K=Y[te];if(K!==null)for(Y[te]=null,te=0;te<K.length;te++){var Z=K[te];Z!==null&&(Z.lane&=-536870913)}a&=~le}l!==0&&Kn(e,l,0),u!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=u&~(h&~t))}function Kn(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-qe(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function Pn(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-qe(a),o=1<<l;o&t|e[l]&t&&(e[l]|=t),a&=~o}}function Jl(e,t){var a=t&-t;return a=(a&42)!==0?1:ea(a),(a&(e.suspendedLanes|t))!==0?0:a}function ea(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Nn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ze(){var e=ue.p;return e!==0?e:(e=window.event,e===void 0?32:Nh(e.type))}function ma(e,t){var a=ue.p;try{return ue.p=e,t()}finally{ue.p=a}}var Xt=Math.random().toString(36).slice(2),zt="__reactFiber$"+Xt,Tt="__reactProps$"+Xt,vn="__reactContainer$"+Xt,Gs="__reactEvents$"+Xt,Sc="__reactListeners$"+Xt,Nc="__reactHandles$"+Xt,Vs="__reactResources$"+Xt,Qn="__reactMarker$"+Xt;function Ys(e){delete e[zt],delete e[Tt],delete e[Gs],delete e[Sc],delete e[Nc]}function Xn(e){var t=e[zt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[vn]||a[zt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=ch(e);e!==null;){if(a=e[zt])return a;e=ch(e)}return t}e=a,a=e.parentNode}return null}function Jn(e){if(e=e[zt]||e[vn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Zn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function gn(e){var t=e[Vs];return t||(t=e[Vs]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function xt(e){e[Qn]=!0}var fa=new Set,Fr={};function ln(e,t){Gt(e,t),Gt(e+"Capture",t)}function Gt(e,t){for(Fr[e]=t,e=0;e<t.length;e++)fa.add(t[e])}var ha=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wr={},Zl={};function sn(e){return Aa.call(Zl,e)?!0:Aa.call(Wr,e)?!1:ha.test(e)?Zl[e]=!0:(Wr[e]=!0,!1)}function Cn(e,t,a){if(sn(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function rn(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function _a(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}function Jt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ei(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Cc(e,t,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var o=l.get,u=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(h){a=""+h,u.call(this,h)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(h){a=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Is(e){if(!e._valueTracker){var t=ei(e)?"checked":"value";e._valueTracker=Cc(e,t,""+e[t])}}function ti(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=ei(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function Fl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Wl=/[\n"\\]/g;function wa(e){return e.replace(Wl,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ks(e,t,a,l,o,u,h,b){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Jt(t)):e.value!==""+Jt(t)&&(e.value=""+Jt(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?Qs(e,h,Jt(t)):a!=null?Qs(e,h,Jt(a)):l!=null&&e.removeAttribute("value"),o==null&&u!=null&&(e.defaultChecked=!!u),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+Jt(b):e.removeAttribute("name")}function Ps(e,t,a,l,o,u,h,b){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Is(e);return}a=a!=null?""+Jt(a):"",t=t!=null?""+Jt(t):a,b||t===e.value||(e.value=t),e.defaultValue=t}l=l??o,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=b?e.checked:!!l,e.defaultChecked=!!l,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h),Is(e)}function Qs(e,t,a){t==="number"&&Fl(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Tn(e,t,a,l){if(e=e.options,t){t={};for(var o=0;o<a.length;o++)t["$"+a[o]]=!0;for(a=0;a<e.length;a++)o=t.hasOwnProperty("$"+e[a].value),e[a].selected!==o&&(e[a].selected=o),o&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Jt(a),t=null,o=0;o<e.length;o++){if(e[o].value===a){e[o].selected=!0,l&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Xs(e,t,a){if(t!=null&&(t=""+Jt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Jt(a):""}function Tl(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(c(92));if(_e(l)){if(1<l.length)throw Error(c(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=Jt(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),Is(e)}function Fn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Tc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ai(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||Tc.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function ni(e,t,a){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var o in t)l=t[o],t.hasOwnProperty(o)&&a[o]!==l&&ai(e,o,l)}else for(var u in t)t.hasOwnProperty(u)&&ai(e,u,t[u])}function Js(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ac=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function es(e){return Ac.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function cn(){}var Va=null;function Zs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wn=null,el=null;function Fs(e){var t=Jn(e);if(t&&(e=t.stateNode)){var a=e[Tt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ks(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+wa(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var o=l[Tt]||null;if(!o)throw Error(c(90));Ks(l,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&ti(l)}break e;case"textarea":Xs(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Tn(e,!!a.multiple,t,!1)}}}var Ws=!1;function li(e,t,a){if(Ws)return e(t,a);Ws=!0;try{var l=e(t);return l}finally{if(Ws=!1,(Wn!==null||el!==null)&&(Li(),Wn&&(t=Wn,e=el,el=Wn=null,Fs(t),e)))for(t=0;t<e.length;t++)Fs(e[t])}}function kl(e,t){var a=e.stateNode;if(a===null)return null;var l=a[Tt]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(c(231,t,typeof a));return a}var Zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ya=!1;if(Zt)try{var tl={};Object.defineProperty(tl,"passive",{get:function(){Ya=!0}}),window.addEventListener("test",tl,tl),window.removeEventListener("test",tl,tl)}catch{Ya=!1}var yn=null,er=null,S=null;function _(){if(S)return S;var e,t=er,a=t.length,l,o="value"in yn?yn.value:yn.textContent,u=o.length;for(e=0;e<a&&t[e]===o[e];e++);var h=a-e;for(l=1;l<=h&&t[a-l]===o[u-l];l++);return S=o.slice(e,1<l?1-l:void 0)}function N(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function B(){return!0}function U(){return!1}function F(e){function t(a,l,o,u,h){this._reactName=a,this._targetInst=o,this.type=l,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(a=e[b],this[b]=a?a(u):u[b]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?B:U,this.isPropagationStopped=U,this}return E(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=B)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=B)},persist:function(){},isPersistent:B}),t}var k={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},w=F(k),q=E({},k,{view:0,detail:0}),me=F(q),De,Ce,Me,$=E({},q,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Me&&(Me&&e.type==="mousemove"?(De=e.screenX-Me.screenX,Ce=e.screenY-Me.screenY):Ce=De=0,Me=e),De)},movementY:function(e){return"movementY"in e?e.movementY:Ce}}),he=F($),pe=E({},$,{dataTransfer:0}),Ae=F(pe),Oe=E({},q,{relatedTarget:0}),lt=F(Oe),qt=E({},k,{animationName:0,elapsedTime:0,pseudoElement:0}),Ia=F(qt),Ka=E({},k,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tr=F(Ka),Mt=E({},k,{data:0}),ga=F(Mt),Ra={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Dp[e])?!!t[e]:!1}function Oc(){return xp}var Mp=E({},q,{key:function(e){if(e.key){var t=Ra[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=N(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Rp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oc,charCode:function(e){return e.type==="keypress"?N(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?N(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Up=F(Mp),jp=E({},$,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ld=F(jp),Bp=E({},q,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oc}),zp=F(Bp),qp=E({},k,{propertyName:0,elapsedTime:0,pseudoElement:0}),$p=F(qp),Lp=E({},$,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Hp=F(Lp),Gp=E({},k,{newState:0,oldState:0}),Vp=F(Gp),Yp=[9,13,27,32],Rc=Zt&&"CompositionEvent"in window,ar=null;Zt&&"documentMode"in document&&(ar=document.documentMode);var Ip=Zt&&"TextEvent"in window&&!ar,sd=Zt&&(!Rc||ar&&8<ar&&11>=ar),rd=" ",id=!1;function cd(e,t){switch(e){case"keyup":return Yp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function od(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ts=!1;function Kp(e,t){switch(e){case"compositionend":return od(t);case"keypress":return t.which!==32?null:(id=!0,rd);case"textInput":return e=t.data,e===rd&&id?null:e;default:return null}}function Pp(e,t){if(ts)return e==="compositionend"||!Rc&&cd(e,t)?(e=_(),S=er=yn=null,ts=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sd&&t.locale!=="ko"?null:t.data;default:return null}}var Qp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ud(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Qp[e.type]:t==="textarea"}function dd(e,t,a,l){Wn?el?el.push(l):el=[l]:Wn=l,t=Pi(t,"onChange"),0<t.length&&(a=new w("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var nr=null,lr=null;function Xp(e){Qf(e,0)}function si(e){var t=Zn(e);if(ti(t))return e}function md(e,t){if(e==="change")return t}var fd=!1;if(Zt){var Dc;if(Zt){var xc="oninput"in document;if(!xc){var hd=document.createElement("div");hd.setAttribute("oninput","return;"),xc=typeof hd.oninput=="function"}Dc=xc}else Dc=!1;fd=Dc&&(!document.documentMode||9<document.documentMode)}function pd(){nr&&(nr.detachEvent("onpropertychange",vd),lr=nr=null)}function vd(e){if(e.propertyName==="value"&&si(lr)){var t=[];dd(t,lr,e,Zs(e)),li(Xp,t)}}function Jp(e,t,a){e==="focusin"?(pd(),nr=t,lr=a,nr.attachEvent("onpropertychange",vd)):e==="focusout"&&pd()}function Zp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return si(lr)}function Fp(e,t){if(e==="click")return si(t)}function Wp(e,t){if(e==="input"||e==="change")return si(t)}function ev(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Da=typeof Object.is=="function"?Object.is:ev;function sr(e,t){if(Da(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var o=a[l];if(!Aa.call(t,o)||!Da(e[o],t[o]))return!1}return!0}function gd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yd(e,t){var a=gd(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=gd(a)}}function bd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ed(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Fl(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Fl(e.document)}return t}function Mc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var tv=Zt&&"documentMode"in document&&11>=document.documentMode,as=null,Uc=null,rr=null,jc=!1;function _d(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;jc||as==null||as!==Fl(l)||(l=as,"selectionStart"in l&&Mc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),rr&&sr(rr,l)||(rr=l,l=Pi(Uc,"onSelect"),0<l.length&&(t=new w("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=as)))}function Al(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var ns={animationend:Al("Animation","AnimationEnd"),animationiteration:Al("Animation","AnimationIteration"),animationstart:Al("Animation","AnimationStart"),transitionrun:Al("Transition","TransitionRun"),transitionstart:Al("Transition","TransitionStart"),transitioncancel:Al("Transition","TransitionCancel"),transitionend:Al("Transition","TransitionEnd")},Bc={},wd={};Zt&&(wd=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function Ol(e){if(Bc[e])return Bc[e];if(!ns[e])return e;var t=ns[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in wd)return Bc[e]=t[a];return e}var Sd=Ol("animationend"),Nd=Ol("animationiteration"),Cd=Ol("animationstart"),av=Ol("transitionrun"),nv=Ol("transitionstart"),lv=Ol("transitioncancel"),Td=Ol("transitionend"),kd=new Map,zc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zc.push("scrollEnd");function on(e,t){kd.set(e,t),ln(t,[e])}var ri=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Pa=[],ls=0,qc=0;function ii(){for(var e=ls,t=qc=ls=0;t<e;){var a=Pa[t];Pa[t++]=null;var l=Pa[t];Pa[t++]=null;var o=Pa[t];Pa[t++]=null;var u=Pa[t];if(Pa[t++]=null,l!==null&&o!==null){var h=l.pending;h===null?o.next=o:(o.next=h.next,h.next=o),l.pending=o}u!==0&&Ad(a,o,u)}}function ci(e,t,a,l){Pa[ls++]=e,Pa[ls++]=t,Pa[ls++]=a,Pa[ls++]=l,qc|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function $c(e,t,a,l){return ci(e,t,a,l),oi(e)}function Rl(e,t){return ci(e,null,null,t),oi(e)}function Ad(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var o=!1,u=e.return;u!==null;)u.childLanes|=a,l=u.alternate,l!==null&&(l.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(o=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,o&&t!==null&&(o=31-qe(a),e=u.hiddenUpdates,l=e[o],l===null?e[o]=[t]:l.push(t),t.lane=a|536870912),u):null}function oi(e){if(50<Ar)throw Ar=0,Xo=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ss={};function sv(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xa(e,t,a,l){return new sv(e,t,a,l)}function Lc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function kn(e,t){var a=e.alternate;return a===null?(a=xa(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Od(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ui(e,t,a,l,o,u){var h=0;if(l=e,typeof e=="function")Lc(e)&&(h=1);else if(typeof e=="string")h=ug(e,a,fe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case oe:return e=xa(31,a,t,o),e.elementType=oe,e.lanes=u,e;case H:return Dl(a.children,o,u,t);case j:h=8,o|=24;break;case ee:return e=xa(12,a,t,o|2),e.elementType=ee,e.lanes=u,e;case Se:return e=xa(13,a,t,o),e.elementType=Se,e.lanes=u,e;case D:return e=xa(19,a,t,o),e.elementType=D,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case J:h=10;break e;case se:h=9;break e;case ge:h=11;break e;case ce:h=14;break e;case P:h=16,l=null;break e}h=29,a=Error(c(130,e===null?"null":typeof e,"")),l=null}return t=xa(h,a,t,o),t.elementType=e,t.type=l,t.lanes=u,t}function Dl(e,t,a,l){return e=xa(7,e,l,t),e.lanes=a,e}function Hc(e,t,a){return e=xa(6,e,null,t),e.lanes=a,e}function Rd(e){var t=xa(18,null,null,0);return t.stateNode=e,t}function Gc(e,t,a){return t=xa(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Dd=new WeakMap;function Qa(e,t){if(typeof e=="object"&&e!==null){var a=Dd.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Ga(t)},Dd.set(e,t),t)}return{value:e,source:t,stack:Ga(t)}}var rs=[],is=0,di=null,ir=0,Xa=[],Ja=0,al=null,bn=1,En="";function An(e,t){rs[is++]=ir,rs[is++]=di,di=e,ir=t}function xd(e,t,a){Xa[Ja++]=bn,Xa[Ja++]=En,Xa[Ja++]=al,al=e;var l=bn;e=En;var o=32-qe(l)-1;l&=~(1<<o),a+=1;var u=32-qe(t)+o;if(30<u){var h=o-o%5;u=(l&(1<<h)-1).toString(32),l>>=h,o-=h,bn=1<<32-qe(t)+o|a<<o|l,En=u+e}else bn=1<<u|a<<o|l,En=e}function Vc(e){e.return!==null&&(An(e,1),xd(e,1,0))}function Yc(e){for(;e===di;)di=rs[--is],rs[is]=null,ir=rs[--is],rs[is]=null;for(;e===al;)al=Xa[--Ja],Xa[Ja]=null,En=Xa[--Ja],Xa[Ja]=null,bn=Xa[--Ja],Xa[Ja]=null}function Md(e,t){Xa[Ja++]=bn,Xa[Ja++]=En,Xa[Ja++]=al,bn=t.id,En=t.overflow,al=e}var la=null,St=null,at=!1,nl=null,Za=!1,Ic=Error(c(519));function ll(e){var t=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cr(Qa(t,e)),Ic}function Ud(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[zt]=e,t[Tt]=l,a){case"dialog":We("cancel",t),We("close",t);break;case"iframe":case"object":case"embed":We("load",t);break;case"video":case"audio":for(a=0;a<Rr.length;a++)We(Rr[a],t);break;case"source":We("error",t);break;case"img":case"image":case"link":We("error",t),We("load",t);break;case"details":We("toggle",t);break;case"input":We("invalid",t),Ps(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":We("invalid",t);break;case"textarea":We("invalid",t),Tl(t,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||Ff(t.textContent,a)?(l.popover!=null&&(We("beforetoggle",t),We("toggle",t)),l.onScroll!=null&&We("scroll",t),l.onScrollEnd!=null&&We("scrollend",t),l.onClick!=null&&(t.onclick=cn),t=!0):t=!1,t||ll(e,!0)}function jd(e){for(la=e.return;la;)switch(la.tag){case 5:case 31:case 13:Za=!1;return;case 27:case 3:Za=!0;return;default:la=la.return}}function cs(e){if(e!==la)return!1;if(!at)return jd(e),at=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||uu(e.type,e.memoizedProps)),a=!a),a&&St&&ll(e),jd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));St=ih(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));St=ih(e)}else t===27?(t=St,yl(e.type)?(e=pu,pu=null,St=e):St=t):St=la?Wa(e.stateNode.nextSibling):null;return!0}function xl(){St=la=null,at=!1}function Kc(){var e=nl;return e!==null&&(Ta===null?Ta=e:Ta.push.apply(Ta,e),nl=null),e}function cr(e){nl===null?nl=[e]:nl.push(e)}var Pc=O(null),Ml=null,On=null;function sl(e,t,a){ie(Pc,t._currentValue),t._currentValue=a}function Rn(e){e._currentValue=Pc.current,W(Pc)}function Qc(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function Xc(e,t,a,l){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){var h=o.child;u=u.firstContext;e:for(;u!==null;){var b=u;u=o;for(var A=0;A<t.length;A++)if(b.context===t[A]){u.lanes|=a,b=u.alternate,b!==null&&(b.lanes|=a),Qc(u.return,a,e),l||(h=null);break e}u=b.next}}else if(o.tag===18){if(h=o.return,h===null)throw Error(c(341));h.lanes|=a,u=h.alternate,u!==null&&(u.lanes|=a),Qc(h,a,e),h=null}else h=o.child;if(h!==null)h.return=o;else for(h=o;h!==null;){if(h===e){h=null;break}if(o=h.sibling,o!==null){o.return=h.return,h=o;break}h=h.return}o=h}}function os(e,t,a,l){e=null;for(var o=t,u=!1;o!==null;){if(!u){if((o.flags&524288)!==0)u=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var h=o.alternate;if(h===null)throw Error(c(387));if(h=h.memoizedProps,h!==null){var b=o.type;Da(o.pendingProps.value,h.value)||(e!==null?e.push(b):e=[b])}}else if(o===Ie.current){if(h=o.alternate,h===null)throw Error(c(387));h.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(jr):e=[jr])}o=o.return}e!==null&&Xc(t,e,a,l),t.flags|=262144}function mi(e){for(e=e.firstContext;e!==null;){if(!Da(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ul(e){Ml=e,On=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function sa(e){return Bd(Ml,e)}function fi(e,t){return Ml===null&&Ul(e),Bd(e,t)}function Bd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},On===null){if(e===null)throw Error(c(308));On=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else On=On.next=t;return a}var rv=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},iv=i.unstable_scheduleCallback,cv=i.unstable_NormalPriority,Vt={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jc(){return{controller:new rv,data:new Map,refCount:0}}function or(e){e.refCount--,e.refCount===0&&iv(cv,function(){e.controller.abort()})}var ur=null,Zc=0,us=0,ds=null;function ov(e,t){if(ur===null){var a=ur=[];Zc=0,us=tu(),ds={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Zc++,t.then(zd,zd),t}function zd(){if(--Zc===0&&ur!==null){ds!==null&&(ds.status="fulfilled");var e=ur;ur=null,us=0,ds=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function uv(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(o){a.push(o)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var o=0;o<a.length;o++)(0,a[o])(t)},function(o){for(l.status="rejected",l.reason=o,o=0;o<a.length;o++)(0,a[o])(void 0)}),l}var qd=I.S;I.S=function(e,t){wf=Ht(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&ov(e,t),qd!==null&&qd(e,t)};var jl=O(null);function Fc(){var e=jl.current;return e!==null?e:gt.pooledCache}function hi(e,t){t===null?ie(jl,jl.current):ie(jl,t.pool)}function $d(){var e=Fc();return e===null?null:{parent:Vt._currentValue,pool:e}}var ms=Error(c(460)),Wc=Error(c(474)),pi=Error(c(542)),vi={then:function(){}};function Ld(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Hd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(cn,cn),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Vd(e),e;default:if(typeof t.status=="string")t.then(cn,cn);else{if(e=gt,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=l}},function(l){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Vd(e),e}throw zl=t,ms}}function Bl(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(zl=a,ms):a}}var zl=null;function Gd(){if(zl===null)throw Error(c(459));var e=zl;return zl=null,e}function Vd(e){if(e===ms||e===pi)throw Error(c(483))}var fs=null,dr=0;function gi(e){var t=dr;return dr+=1,fs===null&&(fs=[]),Hd(fs,e,t)}function mr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function yi(e,t){throw t.$$typeof===R?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Yd(e){function t(L,M){if(e){var V=L.deletions;V===null?(L.deletions=[M],L.flags|=16):V.push(M)}}function a(L,M){if(!e)return null;for(;M!==null;)t(L,M),M=M.sibling;return null}function l(L){for(var M=new Map;L!==null;)L.key!==null?M.set(L.key,L):M.set(L.index,L),L=L.sibling;return M}function o(L,M){return L=kn(L,M),L.index=0,L.sibling=null,L}function u(L,M,V){return L.index=V,e?(V=L.alternate,V!==null?(V=V.index,V<M?(L.flags|=67108866,M):V):(L.flags|=67108866,M)):(L.flags|=1048576,M)}function h(L){return e&&L.alternate===null&&(L.flags|=67108866),L}function b(L,M,V,ne){return M===null||M.tag!==6?(M=Hc(V,L.mode,ne),M.return=L,M):(M=o(M,V),M.return=L,M)}function A(L,M,V,ne){var ke=V.type;return ke===H?te(L,M,V.props.children,ne,V.key):M!==null&&(M.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===P&&Bl(ke)===M.type)?(M=o(M,V.props),mr(M,V),M.return=L,M):(M=ui(V.type,V.key,V.props,null,L.mode,ne),mr(M,V),M.return=L,M)}function Y(L,M,V,ne){return M===null||M.tag!==4||M.stateNode.containerInfo!==V.containerInfo||M.stateNode.implementation!==V.implementation?(M=Gc(V,L.mode,ne),M.return=L,M):(M=o(M,V.children||[]),M.return=L,M)}function te(L,M,V,ne,ke){return M===null||M.tag!==7?(M=Dl(V,L.mode,ne,ke),M.return=L,M):(M=o(M,V),M.return=L,M)}function le(L,M,V){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Hc(""+M,L.mode,V),M.return=L,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case z:return V=ui(M.type,M.key,M.props,null,L.mode,V),mr(V,M),V.return=L,V;case x:return M=Gc(M,L.mode,V),M.return=L,M;case P:return M=Bl(M),le(L,M,V)}if(_e(M)||be(M))return M=Dl(M,L.mode,V,null),M.return=L,M;if(typeof M.then=="function")return le(L,gi(M),V);if(M.$$typeof===J)return le(L,fi(L,M),V);yi(L,M)}return null}function K(L,M,V,ne){var ke=M!==null?M.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return ke!==null?null:b(L,M,""+V,ne);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case z:return V.key===ke?A(L,M,V,ne):null;case x:return V.key===ke?Y(L,M,V,ne):null;case P:return V=Bl(V),K(L,M,V,ne)}if(_e(V)||be(V))return ke!==null?null:te(L,M,V,ne,null);if(typeof V.then=="function")return K(L,M,gi(V),ne);if(V.$$typeof===J)return K(L,M,fi(L,V),ne);yi(L,V)}return null}function Z(L,M,V,ne,ke){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return L=L.get(V)||null,b(M,L,""+ne,ke);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case z:return L=L.get(ne.key===null?V:ne.key)||null,A(M,L,ne,ke);case x:return L=L.get(ne.key===null?V:ne.key)||null,Y(M,L,ne,ke);case P:return ne=Bl(ne),Z(L,M,V,ne,ke)}if(_e(ne)||be(ne))return L=L.get(V)||null,te(M,L,ne,ke,null);if(typeof ne.then=="function")return Z(L,M,V,gi(ne),ke);if(ne.$$typeof===J)return Z(L,M,V,fi(M,ne),ke);yi(M,ne)}return null}function Ee(L,M,V,ne){for(var ke=null,st=null,we=M,Qe=M=0,tt=null;we!==null&&Qe<V.length;Qe++){we.index>Qe?(tt=we,we=null):tt=we.sibling;var rt=K(L,we,V[Qe],ne);if(rt===null){we===null&&(we=tt);break}e&&we&&rt.alternate===null&&t(L,we),M=u(rt,M,Qe),st===null?ke=rt:st.sibling=rt,st=rt,we=tt}if(Qe===V.length)return a(L,we),at&&An(L,Qe),ke;if(we===null){for(;Qe<V.length;Qe++)we=le(L,V[Qe],ne),we!==null&&(M=u(we,M,Qe),st===null?ke=we:st.sibling=we,st=we);return at&&An(L,Qe),ke}for(we=l(we);Qe<V.length;Qe++)tt=Z(we,L,Qe,V[Qe],ne),tt!==null&&(e&&tt.alternate!==null&&we.delete(tt.key===null?Qe:tt.key),M=u(tt,M,Qe),st===null?ke=tt:st.sibling=tt,st=tt);return e&&we.forEach(function(Sl){return t(L,Sl)}),at&&An(L,Qe),ke}function xe(L,M,V,ne){if(V==null)throw Error(c(151));for(var ke=null,st=null,we=M,Qe=M=0,tt=null,rt=V.next();we!==null&&!rt.done;Qe++,rt=V.next()){we.index>Qe?(tt=we,we=null):tt=we.sibling;var Sl=K(L,we,rt.value,ne);if(Sl===null){we===null&&(we=tt);break}e&&we&&Sl.alternate===null&&t(L,we),M=u(Sl,M,Qe),st===null?ke=Sl:st.sibling=Sl,st=Sl,we=tt}if(rt.done)return a(L,we),at&&An(L,Qe),ke;if(we===null){for(;!rt.done;Qe++,rt=V.next())rt=le(L,rt.value,ne),rt!==null&&(M=u(rt,M,Qe),st===null?ke=rt:st.sibling=rt,st=rt);return at&&An(L,Qe),ke}for(we=l(we);!rt.done;Qe++,rt=V.next())rt=Z(we,L,Qe,rt.value,ne),rt!==null&&(e&&rt.alternate!==null&&we.delete(rt.key===null?Qe:rt.key),M=u(rt,M,Qe),st===null?ke=rt:st.sibling=rt,st=rt);return e&&we.forEach(function(_g){return t(L,_g)}),at&&An(L,Qe),ke}function vt(L,M,V,ne){if(typeof V=="object"&&V!==null&&V.type===H&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case z:e:{for(var ke=V.key;M!==null;){if(M.key===ke){if(ke=V.type,ke===H){if(M.tag===7){a(L,M.sibling),ne=o(M,V.props.children),ne.return=L,L=ne;break e}}else if(M.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===P&&Bl(ke)===M.type){a(L,M.sibling),ne=o(M,V.props),mr(ne,V),ne.return=L,L=ne;break e}a(L,M);break}else t(L,M);M=M.sibling}V.type===H?(ne=Dl(V.props.children,L.mode,ne,V.key),ne.return=L,L=ne):(ne=ui(V.type,V.key,V.props,null,L.mode,ne),mr(ne,V),ne.return=L,L=ne)}return h(L);case x:e:{for(ke=V.key;M!==null;){if(M.key===ke)if(M.tag===4&&M.stateNode.containerInfo===V.containerInfo&&M.stateNode.implementation===V.implementation){a(L,M.sibling),ne=o(M,V.children||[]),ne.return=L,L=ne;break e}else{a(L,M);break}else t(L,M);M=M.sibling}ne=Gc(V,L.mode,ne),ne.return=L,L=ne}return h(L);case P:return V=Bl(V),vt(L,M,V,ne)}if(_e(V))return Ee(L,M,V,ne);if(be(V)){if(ke=be(V),typeof ke!="function")throw Error(c(150));return V=ke.call(V),xe(L,M,V,ne)}if(typeof V.then=="function")return vt(L,M,gi(V),ne);if(V.$$typeof===J)return vt(L,M,fi(L,V),ne);yi(L,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,M!==null&&M.tag===6?(a(L,M.sibling),ne=o(M,V),ne.return=L,L=ne):(a(L,M),ne=Hc(V,L.mode,ne),ne.return=L,L=ne),h(L)):a(L,M)}return function(L,M,V,ne){try{dr=0;var ke=vt(L,M,V,ne);return fs=null,ke}catch(we){if(we===ms||we===pi)throw we;var st=xa(29,we,null,L.mode);return st.lanes=ne,st.return=L,st}}}var ql=Yd(!0),Id=Yd(!1),rl=!1;function eo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function to(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function il(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function cl(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ct&2)!==0){var o=l.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),l.pending=t,t=oi(e),Ad(e,null,a),t}return ci(e,l,t,a),oi(e)}function fr(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Pn(e,a)}}function ao(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var o=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var h={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?o=u=h:u=u.next=h,a=a.next}while(a!==null);u===null?o=u=t:u=u.next=t}else o=u=t;a={baseState:l.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var no=!1;function hr(){if(no){var e=ds;if(e!==null)throw e}}function pr(e,t,a,l){no=!1;var o=e.updateQueue;rl=!1;var u=o.firstBaseUpdate,h=o.lastBaseUpdate,b=o.shared.pending;if(b!==null){o.shared.pending=null;var A=b,Y=A.next;A.next=null,h===null?u=Y:h.next=Y,h=A;var te=e.alternate;te!==null&&(te=te.updateQueue,b=te.lastBaseUpdate,b!==h&&(b===null?te.firstBaseUpdate=Y:b.next=Y,te.lastBaseUpdate=A))}if(u!==null){var le=o.baseState;h=0,te=Y=A=null,b=u;do{var K=b.lane&-536870913,Z=K!==b.lane;if(Z?(et&K)===K:(l&K)===K){K!==0&&K===us&&(no=!0),te!==null&&(te=te.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Ee=e,xe=b;K=t;var vt=a;switch(xe.tag){case 1:if(Ee=xe.payload,typeof Ee=="function"){le=Ee.call(vt,le,K);break e}le=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=xe.payload,K=typeof Ee=="function"?Ee.call(vt,le,K):Ee,K==null)break e;le=E({},le,K);break e;case 2:rl=!0}}K=b.callback,K!==null&&(e.flags|=64,Z&&(e.flags|=8192),Z=o.callbacks,Z===null?o.callbacks=[K]:Z.push(K))}else Z={lane:K,tag:b.tag,payload:b.payload,callback:b.callback,next:null},te===null?(Y=te=Z,A=le):te=te.next=Z,h|=K;if(b=b.next,b===null){if(b=o.shared.pending,b===null)break;Z=b,b=Z.next,Z.next=null,o.lastBaseUpdate=Z,o.shared.pending=null}}while(!0);te===null&&(A=le),o.baseState=A,o.firstBaseUpdate=Y,o.lastBaseUpdate=te,u===null&&(o.shared.lanes=0),fl|=h,e.lanes=h,e.memoizedState=le}}function Kd(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function Pd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Kd(a[e],t)}var hs=O(null),bi=O(0);function Qd(e,t){e=$n,ie(bi,e),ie(hs,t),$n=e|t.baseLanes}function lo(){ie(bi,$n),ie(hs,hs.current)}function so(){$n=bi.current,W(hs),W(bi)}var Ma=O(null),Fa=null;function ol(e){var t=e.alternate;ie($t,$t.current&1),ie(Ma,e),Fa===null&&(t===null||hs.current!==null||t.memoizedState!==null)&&(Fa=e)}function ro(e){ie($t,$t.current),ie(Ma,e),Fa===null&&(Fa=e)}function Xd(e){e.tag===22?(ie($t,$t.current),ie(Ma,e),Fa===null&&(Fa=e)):ul()}function ul(){ie($t,$t.current),ie(Ma,Ma.current)}function Ua(e){W(Ma),Fa===e&&(Fa=null),W($t)}var $t=O(0);function Ei(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||fu(a)||hu(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Dn=0,Pe=null,ht=null,Yt=null,_i=!1,ps=!1,$l=!1,wi=0,vr=0,vs=null,dv=0;function Ut(){throw Error(c(321))}function io(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Da(e[a],t[a]))return!1;return!0}function co(e,t,a,l,o,u){return Dn=u,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=e===null||e.memoizedState===null?xm:No,$l=!1,u=a(l,o),$l=!1,ps&&(u=Zd(t,a,l,o)),Jd(e),u}function Jd(e){I.H=br;var t=ht!==null&&ht.next!==null;if(Dn=0,Yt=ht=Pe=null,_i=!1,vr=0,vs=null,t)throw Error(c(300));e===null||It||(e=e.dependencies,e!==null&&mi(e)&&(It=!0))}function Zd(e,t,a,l){Pe=e;var o=0;do{if(ps&&(vs=null),vr=0,ps=!1,25<=o)throw Error(c(301));if(o+=1,Yt=ht=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}I.H=Mm,u=t(a,l)}while(ps);return u}function mv(){var e=I.H,t=e.useState()[0];return t=typeof t.then=="function"?gr(t):t,e=e.useState()[0],(ht!==null?ht.memoizedState:null)!==e&&(Pe.flags|=1024),t}function oo(){var e=wi!==0;return wi=0,e}function uo(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function mo(e){if(_i){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}_i=!1}Dn=0,Yt=ht=Pe=null,ps=!1,vr=wi=0,vs=null}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Pe.memoizedState=Yt=e:Yt=Yt.next=e,Yt}function Lt(){if(ht===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=ht.next;var t=Yt===null?Pe.memoizedState:Yt.next;if(t!==null)Yt=t,ht=e;else{if(e===null)throw Pe.alternate===null?Error(c(467)):Error(c(310));ht=e,e={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Yt===null?Pe.memoizedState=Yt=e:Yt=Yt.next=e}return Yt}function Si(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gr(e){var t=vr;return vr+=1,vs===null&&(vs=[]),e=Hd(vs,e,t),t=Pe,(Yt===null?t.memoizedState:Yt.next)===null&&(t=t.alternate,I.H=t===null||t.memoizedState===null?xm:No),e}function Ni(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return gr(e);if(e.$$typeof===J)return sa(e)}throw Error(c(438,String(e)))}function fo(e){var t=null,a=Pe.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=Pe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Si(),Pe.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=$e;return t.index++,a}function xn(e,t){return typeof t=="function"?t(e):t}function Ci(e){var t=Lt();return ho(t,ht,e)}function ho(e,t,a){var l=e.queue;if(l===null)throw Error(c(311));l.lastRenderedReducer=a;var o=e.baseQueue,u=l.pending;if(u!==null){if(o!==null){var h=o.next;o.next=u.next,u.next=h}t.baseQueue=o=u,l.pending=null}if(u=e.baseState,o===null)e.memoizedState=u;else{t=o.next;var b=h=null,A=null,Y=t,te=!1;do{var le=Y.lane&-536870913;if(le!==Y.lane?(et&le)===le:(Dn&le)===le){var K=Y.revertLane;if(K===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),le===us&&(te=!0);else if((Dn&K)===K){Y=Y.next,K===us&&(te=!0);continue}else le={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},A===null?(b=A=le,h=u):A=A.next=le,Pe.lanes|=K,fl|=K;le=Y.action,$l&&a(u,le),u=Y.hasEagerState?Y.eagerState:a(u,le)}else K={lane:le,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},A===null?(b=A=K,h=u):A=A.next=K,Pe.lanes|=le,fl|=le;Y=Y.next}while(Y!==null&&Y!==t);if(A===null?h=u:A.next=b,!Da(u,e.memoizedState)&&(It=!0,te&&(a=ds,a!==null)))throw a;e.memoizedState=u,e.baseState=h,e.baseQueue=A,l.lastRenderedState=u}return o===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function po(e){var t=Lt(),a=t.queue;if(a===null)throw Error(c(311));a.lastRenderedReducer=e;var l=a.dispatch,o=a.pending,u=t.memoizedState;if(o!==null){a.pending=null;var h=o=o.next;do u=e(u,h.action),h=h.next;while(h!==o);Da(u,t.memoizedState)||(It=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,l]}function Fd(e,t,a){var l=Pe,o=Lt(),u=at;if(u){if(a===void 0)throw Error(c(407));a=a()}else a=t();var h=!Da((ht||o).memoizedState,a);if(h&&(o.memoizedState=a,It=!0),o=o.queue,yo(tm.bind(null,l,o,e),[e]),o.getSnapshot!==t||h||Yt!==null&&Yt.memoizedState.tag&1){if(l.flags|=2048,gs(9,{destroy:void 0},em.bind(null,l,o,a,t),null),gt===null)throw Error(c(349));u||(Dn&127)!==0||Wd(l,t,a)}return a}function Wd(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Pe.updateQueue,t===null?(t=Si(),Pe.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function em(e,t,a,l){t.value=a,t.getSnapshot=l,am(t)&&nm(e)}function tm(e,t,a){return a(function(){am(t)&&nm(e)})}function am(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Da(e,a)}catch{return!0}}function nm(e){var t=Rl(e,2);t!==null&&ka(t,e,2)}function vo(e){var t=ya();if(typeof e=="function"){var a=e;if(e=a(),$l){ut(!0);try{a()}finally{ut(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xn,lastRenderedState:e},t}function lm(e,t,a,l){return e.baseState=a,ho(e,ht,typeof l=="function"?l:xn)}function fv(e,t,a,l,o){if(Ai(e))throw Error(c(485));if(e=t.action,e!==null){var u={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){u.listeners.push(h)}};I.T!==null?a(!0):u.isTransition=!1,l(u),a=t.pending,a===null?(u.next=t.pending=u,sm(t,u)):(u.next=a.next,t.pending=a.next=u)}}function sm(e,t){var a=t.action,l=t.payload,o=e.state;if(t.isTransition){var u=I.T,h={};I.T=h;try{var b=a(o,l),A=I.S;A!==null&&A(h,b),rm(e,t,b)}catch(Y){go(e,t,Y)}finally{u!==null&&h.types!==null&&(u.types=h.types),I.T=u}}else try{u=a(o,l),rm(e,t,u)}catch(Y){go(e,t,Y)}}function rm(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){im(e,t,l)},function(l){return go(e,t,l)}):im(e,t,a)}function im(e,t,a){t.status="fulfilled",t.value=a,cm(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,sm(e,a)))}function go(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,cm(t),t=t.next;while(t!==l)}e.action=null}function cm(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function om(e,t){return t}function um(e,t){if(at){var a=gt.formState;if(a!==null){e:{var l=Pe;if(at){if(St){t:{for(var o=St,u=Za;o.nodeType!==8;){if(!u){o=null;break t}if(o=Wa(o.nextSibling),o===null){o=null;break t}}u=o.data,o=u==="F!"||u==="F"?o:null}if(o){St=Wa(o.nextSibling),l=o.data==="F!";break e}}ll(l)}l=!1}l&&(t=a[0])}}return a=ya(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:om,lastRenderedState:t},a.queue=l,a=Om.bind(null,Pe,l),l.dispatch=a,l=vo(!1),u=So.bind(null,Pe,!1,l.queue),l=ya(),o={state:t,dispatch:null,action:e,pending:null},l.queue=o,a=fv.bind(null,Pe,o,u,a),o.dispatch=a,l.memoizedState=e,[t,a,!1]}function dm(e){var t=Lt();return mm(t,ht,e)}function mm(e,t,a){if(t=ho(e,t,om)[0],e=Ci(xn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=gr(t)}catch(h){throw h===ms?pi:h}else l=t;t=Lt();var o=t.queue,u=o.dispatch;return a!==t.memoizedState&&(Pe.flags|=2048,gs(9,{destroy:void 0},hv.bind(null,o,a),null)),[l,u,e]}function hv(e,t){e.action=t}function fm(e){var t=Lt(),a=ht;if(a!==null)return mm(t,a,e);Lt(),t=t.memoizedState,a=Lt();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function gs(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=Pe.updateQueue,t===null&&(t=Si(),Pe.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function hm(){return Lt().memoizedState}function Ti(e,t,a,l){var o=ya();Pe.flags|=e,o.memoizedState=gs(1|t,{destroy:void 0},a,l===void 0?null:l)}function ki(e,t,a,l){var o=Lt();l=l===void 0?null:l;var u=o.memoizedState.inst;ht!==null&&l!==null&&io(l,ht.memoizedState.deps)?o.memoizedState=gs(t,u,a,l):(Pe.flags|=e,o.memoizedState=gs(1|t,u,a,l))}function pm(e,t){Ti(8390656,8,e,t)}function yo(e,t){ki(2048,8,e,t)}function pv(e){Pe.flags|=4;var t=Pe.updateQueue;if(t===null)t=Si(),Pe.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function vm(e){var t=Lt().memoizedState;return pv({ref:t,nextImpl:e}),function(){if((ct&2)!==0)throw Error(c(440));return t.impl.apply(void 0,arguments)}}function gm(e,t){return ki(4,2,e,t)}function ym(e,t){return ki(4,4,e,t)}function bm(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Em(e,t,a){a=a!=null?a.concat([e]):null,ki(4,4,bm.bind(null,t,e),a)}function bo(){}function _m(e,t){var a=Lt();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&io(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function wm(e,t){var a=Lt();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&io(t,l[1]))return l[0];if(l=e(),$l){ut(!0);try{e()}finally{ut(!1)}}return a.memoizedState=[l,t],l}function Eo(e,t,a){return a===void 0||(Dn&1073741824)!==0&&(et&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Nf(),Pe.lanes|=e,fl|=e,a)}function Sm(e,t,a,l){return Da(a,t)?a:hs.current!==null?(e=Eo(e,a,l),Da(e,t)||(It=!0),e):(Dn&42)===0||(Dn&1073741824)!==0&&(et&261930)===0?(It=!0,e.memoizedState=a):(e=Nf(),Pe.lanes|=e,fl|=e,t)}function Nm(e,t,a,l,o){var u=ue.p;ue.p=u!==0&&8>u?u:8;var h=I.T,b={};I.T=b,So(e,!1,t,a);try{var A=o(),Y=I.S;if(Y!==null&&Y(b,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var te=uv(A,l);yr(e,t,te,za(e))}else yr(e,t,l,za(e))}catch(le){yr(e,t,{then:function(){},status:"rejected",reason:le},za())}finally{ue.p=u,h!==null&&b.types!==null&&(h.types=b.types),I.T=h}}function vv(){}function _o(e,t,a,l){if(e.tag!==5)throw Error(c(476));var o=Cm(e).queue;Nm(e,o,t,ve,a===null?vv:function(){return Tm(e),a(l)})}function Cm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xn,lastRenderedState:ve},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xn,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Tm(e){var t=Cm(e);t.next===null&&(t=e.alternate.memoizedState),yr(e,t.next.queue,{},za())}function wo(){return sa(jr)}function km(){return Lt().memoizedState}function Am(){return Lt().memoizedState}function gv(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=za();e=il(a);var l=cl(t,e,a);l!==null&&(ka(l,t,a),fr(l,t,a)),t={cache:Jc()},e.payload=t;return}t=t.return}}function yv(e,t,a){var l=za();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ai(e)?Rm(t,a):(a=$c(e,t,a,l),a!==null&&(ka(a,e,l),Dm(a,t,l)))}function Om(e,t,a){var l=za();yr(e,t,a,l)}function yr(e,t,a,l){var o={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ai(e))Rm(t,o);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var h=t.lastRenderedState,b=u(h,a);if(o.hasEagerState=!0,o.eagerState=b,Da(b,h))return ci(e,t,o,0),gt===null&&ii(),!1}catch{}if(a=$c(e,t,o,l),a!==null)return ka(a,e,l),Dm(a,t,l),!0}return!1}function So(e,t,a,l){if(l={lane:2,revertLane:tu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ai(e)){if(t)throw Error(c(479))}else t=$c(e,a,l,2),t!==null&&ka(t,e,2)}function Ai(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function Rm(e,t){ps=_i=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Dm(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Pn(e,a)}}var br={readContext:sa,use:Ni,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut};br.useEffectEvent=Ut;var xm={readContext:sa,use:Ni,useCallback:function(e,t){return ya().memoizedState=[e,t===void 0?null:t],e},useContext:sa,useEffect:pm,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Ti(4194308,4,bm.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Ti(4194308,4,e,t)},useInsertionEffect:function(e,t){Ti(4,2,e,t)},useMemo:function(e,t){var a=ya();t=t===void 0?null:t;var l=e();if($l){ut(!0);try{e()}finally{ut(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=ya();if(a!==void 0){var o=a(t);if($l){ut(!0);try{a(t)}finally{ut(!1)}}}else o=t;return l.memoizedState=l.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},l.queue=e,e=e.dispatch=yv.bind(null,Pe,e),[l.memoizedState,e]},useRef:function(e){var t=ya();return e={current:e},t.memoizedState=e},useState:function(e){e=vo(e);var t=e.queue,a=Om.bind(null,Pe,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:bo,useDeferredValue:function(e,t){var a=ya();return Eo(a,e,t)},useTransition:function(){var e=vo(!1);return e=Nm.bind(null,Pe,e.queue,!0,!1),ya().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=Pe,o=ya();if(at){if(a===void 0)throw Error(c(407));a=a()}else{if(a=t(),gt===null)throw Error(c(349));(et&127)!==0||Wd(l,t,a)}o.memoizedState=a;var u={value:a,getSnapshot:t};return o.queue=u,pm(tm.bind(null,l,u,e),[e]),l.flags|=2048,gs(9,{destroy:void 0},em.bind(null,l,u,a,t),null),a},useId:function(){var e=ya(),t=gt.identifierPrefix;if(at){var a=En,l=bn;a=(l&~(1<<32-qe(l)-1)).toString(32)+a,t="_"+t+"R_"+a,a=wi++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=dv++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:wo,useFormState:um,useActionState:um,useOptimistic:function(e){var t=ya();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=So.bind(null,Pe,!0,a),a.dispatch=t,[e,t]},useMemoCache:fo,useCacheRefresh:function(){return ya().memoizedState=gv.bind(null,Pe)},useEffectEvent:function(e){var t=ya(),a={impl:e};return t.memoizedState=a,function(){if((ct&2)!==0)throw Error(c(440));return a.impl.apply(void 0,arguments)}}},No={readContext:sa,use:Ni,useCallback:_m,useContext:sa,useEffect:yo,useImperativeHandle:Em,useInsertionEffect:gm,useLayoutEffect:ym,useMemo:wm,useReducer:Ci,useRef:hm,useState:function(){return Ci(xn)},useDebugValue:bo,useDeferredValue:function(e,t){var a=Lt();return Sm(a,ht.memoizedState,e,t)},useTransition:function(){var e=Ci(xn)[0],t=Lt().memoizedState;return[typeof e=="boolean"?e:gr(e),t]},useSyncExternalStore:Fd,useId:km,useHostTransitionStatus:wo,useFormState:dm,useActionState:dm,useOptimistic:function(e,t){var a=Lt();return lm(a,ht,e,t)},useMemoCache:fo,useCacheRefresh:Am};No.useEffectEvent=vm;var Mm={readContext:sa,use:Ni,useCallback:_m,useContext:sa,useEffect:yo,useImperativeHandle:Em,useInsertionEffect:gm,useLayoutEffect:ym,useMemo:wm,useReducer:po,useRef:hm,useState:function(){return po(xn)},useDebugValue:bo,useDeferredValue:function(e,t){var a=Lt();return ht===null?Eo(a,e,t):Sm(a,ht.memoizedState,e,t)},useTransition:function(){var e=po(xn)[0],t=Lt().memoizedState;return[typeof e=="boolean"?e:gr(e),t]},useSyncExternalStore:Fd,useId:km,useHostTransitionStatus:wo,useFormState:fm,useActionState:fm,useOptimistic:function(e,t){var a=Lt();return ht!==null?lm(a,ht,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:fo,useCacheRefresh:Am};Mm.useEffectEvent=vm;function Co(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:E({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var To={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=za(),o=il(l);o.payload=t,a!=null&&(o.callback=a),t=cl(e,o,l),t!==null&&(ka(t,e,l),fr(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=za(),o=il(l);o.tag=1,o.payload=t,a!=null&&(o.callback=a),t=cl(e,o,l),t!==null&&(ka(t,e,l),fr(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=za(),l=il(a);l.tag=2,t!=null&&(l.callback=t),t=cl(e,l,a),t!==null&&(ka(t,e,a),fr(t,e,a))}};function Um(e,t,a,l,o,u,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,u,h):t.prototype&&t.prototype.isPureReactComponent?!sr(a,l)||!sr(o,u):!0}function jm(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&To.enqueueReplaceState(t,t.state,null)}function Ll(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=E({},a));for(var o in e)a[o]===void 0&&(a[o]=e[o])}return a}function Bm(e){ri(e)}function zm(e){console.error(e)}function qm(e){ri(e)}function Oi(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function $m(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function ko(e,t,a){return a=il(a),a.tag=3,a.payload={element:null},a.callback=function(){Oi(e,t)},a}function Lm(e){return e=il(e),e.tag=3,e}function Hm(e,t,a,l){var o=a.type.getDerivedStateFromError;if(typeof o=="function"){var u=l.value;e.payload=function(){return o(u)},e.callback=function(){$m(t,a,l)}}var h=a.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){$m(t,a,l),typeof o!="function"&&(hl===null?hl=new Set([this]):hl.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function bv(e,t,a,l,o){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&os(t,a,o,!0),a=Ma.current,a!==null){switch(a.tag){case 31:case 13:return Fa===null?Hi():a.alternate===null&&jt===0&&(jt=3),a.flags&=-257,a.flags|=65536,a.lanes=o,l===vi?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),Fo(e,l,o)),!1;case 22:return a.flags|=65536,l===vi?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),Fo(e,l,o)),!1}throw Error(c(435,a.tag))}return Fo(e,l,o),Hi(),!1}if(at)return t=Ma.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,l!==Ic&&(e=Error(c(422),{cause:l}),cr(Qa(e,a)))):(l!==Ic&&(t=Error(c(423),{cause:l}),cr(Qa(t,a))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,l=Qa(l,a),o=ko(e.stateNode,l,o),ao(e,o),jt!==4&&(jt=2)),!1;var u=Error(c(520),{cause:l});if(u=Qa(u,a),kr===null?kr=[u]:kr.push(u),jt!==4&&(jt=2),t===null)return!0;l=Qa(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=o&-o,a.lanes|=e,e=ko(a.stateNode,l,e),ao(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(hl===null||!hl.has(u))))return a.flags|=65536,o&=-o,a.lanes|=o,o=Lm(o),Hm(o,e,a,l),ao(a,o),!1}a=a.return}while(a!==null);return!1}var Ao=Error(c(461)),It=!1;function ra(e,t,a,l){t.child=e===null?Id(t,null,a,l):ql(t,e.child,a,l)}function Gm(e,t,a,l,o){a=a.render;var u=t.ref;if("ref"in l){var h={};for(var b in l)b!=="ref"&&(h[b]=l[b])}else h=l;return Ul(t),l=co(e,t,a,h,u,o),b=oo(),e!==null&&!It?(uo(e,t,o),Mn(e,t,o)):(at&&b&&Vc(t),t.flags|=1,ra(e,t,l,o),t.child)}function Vm(e,t,a,l,o){if(e===null){var u=a.type;return typeof u=="function"&&!Lc(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,Ym(e,t,u,l,o)):(e=ui(a.type,null,l,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Bo(e,o)){var h=u.memoizedProps;if(a=a.compare,a=a!==null?a:sr,a(h,l)&&e.ref===t.ref)return Mn(e,t,o)}return t.flags|=1,e=kn(u,l),e.ref=t.ref,e.return=t,t.child=e}function Ym(e,t,a,l,o){if(e!==null){var u=e.memoizedProps;if(sr(u,l)&&e.ref===t.ref)if(It=!1,t.pendingProps=l=u,Bo(e,o))(e.flags&131072)!==0&&(It=!0);else return t.lanes=e.lanes,Mn(e,t,o)}return Oo(e,t,a,l,o)}function Im(e,t,a,l){var o=l.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|a:a,e!==null){for(l=t.child=e.child,o=0;l!==null;)o=o|l.lanes|l.childLanes,l=l.sibling;l=o&~u}else l=0,t.child=null;return Km(e,t,u,a,l)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&hi(t,u!==null?u.cachePool:null),u!==null?Qd(t,u):lo(),Xd(t);else return l=t.lanes=536870912,Km(e,t,u!==null?u.baseLanes|a:a,a,l)}else u!==null?(hi(t,u.cachePool),Qd(t,u),ul(),t.memoizedState=null):(e!==null&&hi(t,null),lo(),ul());return ra(e,t,o,a),t.child}function Er(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Km(e,t,a,l,o){var u=Fc();return u=u===null?null:{parent:Vt._currentValue,pool:u},t.memoizedState={baseLanes:a,cachePool:u},e!==null&&hi(t,null),lo(),Xd(t),e!==null&&os(e,t,l,!0),t.childLanes=o,null}function Ri(e,t){return t=xi({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Pm(e,t,a){return ql(t,e.child,null,a),e=Ri(t,t.pendingProps),e.flags|=2,Ua(t),t.memoizedState=null,e}function Ev(e,t,a){var l=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(at){if(l.mode==="hidden")return e=Ri(t,l),t.lanes=536870912,Er(null,e);if(ro(t),(e=St)?(e=rh(e,Za),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:al!==null?{id:bn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},a=Rd(e),a.return=t,t.child=a,la=t,St=null)):e=null,e===null)throw ll(t);return t.lanes=536870912,null}return Ri(t,l)}var u=e.memoizedState;if(u!==null){var h=u.dehydrated;if(ro(t),o)if(t.flags&256)t.flags&=-257,t=Pm(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(c(558));else if(It||os(e,t,a,!1),o=(a&e.childLanes)!==0,It||o){if(l=gt,l!==null&&(h=Jl(l,a),h!==0&&h!==u.retryLane))throw u.retryLane=h,Rl(e,h),ka(l,e,h),Ao;Hi(),t=Pm(e,t,a)}else e=u.treeContext,St=Wa(h.nextSibling),la=t,at=!0,nl=null,Za=!1,e!==null&&Md(t,e),t=Ri(t,l),t.flags|=4096;return t}return e=kn(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Di(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(c(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Oo(e,t,a,l,o){return Ul(t),a=co(e,t,a,l,void 0,o),l=oo(),e!==null&&!It?(uo(e,t,o),Mn(e,t,o)):(at&&l&&Vc(t),t.flags|=1,ra(e,t,a,o),t.child)}function Qm(e,t,a,l,o,u){return Ul(t),t.updateQueue=null,a=Zd(t,l,a,o),Jd(e),l=oo(),e!==null&&!It?(uo(e,t,u),Mn(e,t,u)):(at&&l&&Vc(t),t.flags|=1,ra(e,t,a,u),t.child)}function Xm(e,t,a,l,o){if(Ul(t),t.stateNode===null){var u=ss,h=a.contextType;typeof h=="object"&&h!==null&&(u=sa(h)),u=new a(l,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=To,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=l,u.state=t.memoizedState,u.refs={},eo(t),h=a.contextType,u.context=typeof h=="object"&&h!==null?sa(h):ss,u.state=t.memoizedState,h=a.getDerivedStateFromProps,typeof h=="function"&&(Co(t,a,h,l),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(h=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),h!==u.state&&To.enqueueReplaceState(u,u.state,null),pr(t,l,u,o),hr(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){u=t.stateNode;var b=t.memoizedProps,A=Ll(a,b);u.props=A;var Y=u.context,te=a.contextType;h=ss,typeof te=="object"&&te!==null&&(h=sa(te));var le=a.getDerivedStateFromProps;te=typeof le=="function"||typeof u.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,te||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(b||Y!==h)&&jm(t,u,l,h),rl=!1;var K=t.memoizedState;u.state=K,pr(t,l,u,o),hr(),Y=t.memoizedState,b||K!==Y||rl?(typeof le=="function"&&(Co(t,a,le,l),Y=t.memoizedState),(A=rl||Um(t,a,A,l,K,Y,h))?(te||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=Y),u.props=l,u.state=Y,u.context=h,l=A):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{u=t.stateNode,to(e,t),h=t.memoizedProps,te=Ll(a,h),u.props=te,le=t.pendingProps,K=u.context,Y=a.contextType,A=ss,typeof Y=="object"&&Y!==null&&(A=sa(Y)),b=a.getDerivedStateFromProps,(Y=typeof b=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==le||K!==A)&&jm(t,u,l,A),rl=!1,K=t.memoizedState,u.state=K,pr(t,l,u,o),hr();var Z=t.memoizedState;h!==le||K!==Z||rl||e!==null&&e.dependencies!==null&&mi(e.dependencies)?(typeof b=="function"&&(Co(t,a,b,l),Z=t.memoizedState),(te=rl||Um(t,a,te,l,K,Z,A)||e!==null&&e.dependencies!==null&&mi(e.dependencies))?(Y||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(l,Z,A),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(l,Z,A)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=Z),u.props=l,u.state=Z,u.context=A,l=te):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),l=!1)}return u=l,Di(e,t),l=(t.flags&128)!==0,u||l?(u=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&l?(t.child=ql(t,e.child,null,o),t.child=ql(t,null,a,o)):ra(e,t,a,o),t.memoizedState=u.state,e=t.child):e=Mn(e,t,o),e}function Jm(e,t,a,l){return xl(),t.flags|=256,ra(e,t,a,l),t.child}var Ro={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Do(e){return{baseLanes:e,cachePool:$d()}}function xo(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Ba),e}function Zm(e,t,a){var l=t.pendingProps,o=!1,u=(t.flags&128)!==0,h;if((h=u)||(h=e!==null&&e.memoizedState===null?!1:($t.current&2)!==0),h&&(o=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(at){if(o?ol(t):ul(),(e=St)?(e=rh(e,Za),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:al!==null?{id:bn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},a=Rd(e),a.return=t,t.child=a,la=t,St=null)):e=null,e===null)throw ll(t);return hu(e)?t.lanes=32:t.lanes=536870912,null}var b=l.children;return l=l.fallback,o?(ul(),o=t.mode,b=xi({mode:"hidden",children:b},o),l=Dl(l,o,a,null),b.return=t,l.return=t,b.sibling=l,t.child=b,l=t.child,l.memoizedState=Do(a),l.childLanes=xo(e,h,a),t.memoizedState=Ro,Er(null,l)):(ol(t),Mo(t,b))}var A=e.memoizedState;if(A!==null&&(b=A.dehydrated,b!==null)){if(u)t.flags&256?(ol(t),t.flags&=-257,t=Uo(e,t,a)):t.memoizedState!==null?(ul(),t.child=e.child,t.flags|=128,t=null):(ul(),b=l.fallback,o=t.mode,l=xi({mode:"visible",children:l.children},o),b=Dl(b,o,a,null),b.flags|=2,l.return=t,b.return=t,l.sibling=b,t.child=l,ql(t,e.child,null,a),l=t.child,l.memoizedState=Do(a),l.childLanes=xo(e,h,a),t.memoizedState=Ro,t=Er(null,l));else if(ol(t),hu(b)){if(h=b.nextSibling&&b.nextSibling.dataset,h)var Y=h.dgst;h=Y,l=Error(c(419)),l.stack="",l.digest=h,cr({value:l,source:null,stack:null}),t=Uo(e,t,a)}else if(It||os(e,t,a,!1),h=(a&e.childLanes)!==0,It||h){if(h=gt,h!==null&&(l=Jl(h,a),l!==0&&l!==A.retryLane))throw A.retryLane=l,Rl(e,l),ka(h,e,l),Ao;fu(b)||Hi(),t=Uo(e,t,a)}else fu(b)?(t.flags|=192,t.child=e.child,t=null):(e=A.treeContext,St=Wa(b.nextSibling),la=t,at=!0,nl=null,Za=!1,e!==null&&Md(t,e),t=Mo(t,l.children),t.flags|=4096);return t}return o?(ul(),b=l.fallback,o=t.mode,A=e.child,Y=A.sibling,l=kn(A,{mode:"hidden",children:l.children}),l.subtreeFlags=A.subtreeFlags&65011712,Y!==null?b=kn(Y,b):(b=Dl(b,o,a,null),b.flags|=2),b.return=t,l.return=t,l.sibling=b,t.child=l,Er(null,l),l=t.child,b=e.child.memoizedState,b===null?b=Do(a):(o=b.cachePool,o!==null?(A=Vt._currentValue,o=o.parent!==A?{parent:A,pool:A}:o):o=$d(),b={baseLanes:b.baseLanes|a,cachePool:o}),l.memoizedState=b,l.childLanes=xo(e,h,a),t.memoizedState=Ro,Er(e.child,l)):(ol(t),a=e.child,e=a.sibling,a=kn(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=a,t.memoizedState=null,a)}function Mo(e,t){return t=xi({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function xi(e,t){return e=xa(22,e,null,t),e.lanes=0,e}function Uo(e,t,a){return ql(t,e.child,null,a),e=Mo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Fm(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Qc(e.return,t,a)}function jo(e,t,a,l,o,u){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:o,treeForkCount:u}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=a,h.tailMode=o,h.treeForkCount=u)}function Wm(e,t,a){var l=t.pendingProps,o=l.revealOrder,u=l.tail;l=l.children;var h=$t.current,b=(h&2)!==0;if(b?(h=h&1|2,t.flags|=128):h&=1,ie($t,h),ra(e,t,l,a),l=at?ir:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fm(e,a,t);else if(e.tag===19)Fm(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(a=t.child,o=null;a!==null;)e=a.alternate,e!==null&&Ei(e)===null&&(o=a),a=a.sibling;a=o,a===null?(o=t.child,t.child=null):(o=a.sibling,a.sibling=null),jo(t,!1,o,a,u,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Ei(e)===null){t.child=o;break}e=o.sibling,o.sibling=a,a=o,o=e}jo(t,!0,a,null,u,l);break;case"together":jo(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Mn(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),fl|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(os(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,a=kn(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=kn(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Bo(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&mi(e)))}function _v(e,t,a){switch(t.tag){case 3:yt(t,t.stateNode.containerInfo),sl(t,Vt,e.memoizedState.cache),xl();break;case 27:case 5:Qt(t);break;case 4:yt(t,t.stateNode.containerInfo);break;case 10:sl(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ro(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(ol(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Zm(e,t,a):(ol(t),e=Mn(e,t,a),e!==null?e.sibling:null);ol(t);break;case 19:var o=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(os(e,t,a,!1),l=(a&t.childLanes)!==0),o){if(l)return Wm(e,t,a);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ie($t,$t.current),l)break;return null;case 22:return t.lanes=0,Im(e,t,a,t.pendingProps);case 24:sl(t,Vt,e.memoizedState.cache)}return Mn(e,t,a)}function ef(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)It=!0;else{if(!Bo(e,a)&&(t.flags&128)===0)return It=!1,_v(e,t,a);It=(e.flags&131072)!==0}else It=!1,at&&(t.flags&1048576)!==0&&xd(t,ir,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=Bl(t.elementType),t.type=e,typeof e=="function")Lc(e)?(l=Ll(e,l),t.tag=1,t=Xm(null,t,e,l,a)):(t.tag=0,t=Oo(null,t,e,l,a));else{if(e!=null){var o=e.$$typeof;if(o===ge){t.tag=11,t=Gm(null,t,e,l,a);break e}else if(o===ce){t.tag=14,t=Vm(null,t,e,l,a);break e}}throw t=Xe(e)||e,Error(c(306,t,""))}}return t;case 0:return Oo(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,o=Ll(l,t.pendingProps),Xm(e,t,l,o,a);case 3:e:{if(yt(t,t.stateNode.containerInfo),e===null)throw Error(c(387));l=t.pendingProps;var u=t.memoizedState;o=u.element,to(e,t),pr(t,l,null,a);var h=t.memoizedState;if(l=h.cache,sl(t,Vt,l),l!==u.cache&&Xc(t,[Vt],a,!0),hr(),l=h.element,u.isDehydrated)if(u={element:l,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Jm(e,t,l,a);break e}else if(l!==o){o=Qa(Error(c(424)),t),cr(o),t=Jm(e,t,l,a);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,St=Wa(e.firstChild),la=t,at=!0,nl=null,Za=!0,a=Id(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(xl(),l===o){t=Mn(e,t,a);break e}ra(e,t,l,a)}t=t.child}return t;case 26:return Di(e,t),e===null?(a=mh(t.type,null,t.pendingProps,null))?t.memoizedState=a:at||(a=t.type,e=t.pendingProps,l=Qi(ze.current).createElement(a),l[zt]=t,l[Tt]=e,ia(l,a,e),xt(l),t.stateNode=l):t.memoizedState=mh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Qt(t),e===null&&at&&(l=t.stateNode=oh(t.type,t.pendingProps,ze.current),la=t,Za=!0,o=St,yl(t.type)?(pu=o,St=Wa(l.firstChild)):St=o),ra(e,t,t.pendingProps.children,a),Di(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&at&&((o=l=St)&&(l=Zv(l,t.type,t.pendingProps,Za),l!==null?(t.stateNode=l,la=t,St=Wa(l.firstChild),Za=!1,o=!0):o=!1),o||ll(t)),Qt(t),o=t.type,u=t.pendingProps,h=e!==null?e.memoizedProps:null,l=u.children,uu(o,u)?l=null:h!==null&&uu(o,h)&&(t.flags|=32),t.memoizedState!==null&&(o=co(e,t,mv,null,null,a),jr._currentValue=o),Di(e,t),ra(e,t,l,a),t.child;case 6:return e===null&&at&&((e=a=St)&&(a=Fv(a,t.pendingProps,Za),a!==null?(t.stateNode=a,la=t,St=null,e=!0):e=!1),e||ll(t)),null;case 13:return Zm(e,t,a);case 4:return yt(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=ql(t,null,l,a):ra(e,t,l,a),t.child;case 11:return Gm(e,t,t.type,t.pendingProps,a);case 7:return ra(e,t,t.pendingProps,a),t.child;case 8:return ra(e,t,t.pendingProps.children,a),t.child;case 12:return ra(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,sl(t,t.type,l.value),ra(e,t,l.children,a),t.child;case 9:return o=t.type._context,l=t.pendingProps.children,Ul(t),o=sa(o),l=l(o),t.flags|=1,ra(e,t,l,a),t.child;case 14:return Vm(e,t,t.type,t.pendingProps,a);case 15:return Ym(e,t,t.type,t.pendingProps,a);case 19:return Wm(e,t,a);case 31:return Ev(e,t,a);case 22:return Im(e,t,a,t.pendingProps);case 24:return Ul(t),l=sa(Vt),e===null?(o=Fc(),o===null&&(o=gt,u=Jc(),o.pooledCache=u,u.refCount++,u!==null&&(o.pooledCacheLanes|=a),o=u),t.memoizedState={parent:l,cache:o},eo(t),sl(t,Vt,o)):((e.lanes&a)!==0&&(to(e,t),pr(t,null,null,a),hr()),o=e.memoizedState,u=t.memoizedState,o.parent!==l?(o={parent:l,cache:l},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),sl(t,Vt,l)):(l=u.cache,sl(t,Vt,l),l!==o.cache&&Xc(t,[Vt],a,!0))),ra(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function Un(e){e.flags|=4}function zo(e,t,a,l,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(Af())e.flags|=8192;else throw zl=vi,Wc}else e.flags&=-16777217}function tf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!gh(t))if(Af())e.flags|=8192;else throw zl=vi,Wc}function Mi(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?dt():536870912,e.lanes|=t,_s|=t)}function _r(e,t){if(!at)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var o=e.child;o!==null;)a|=o.lanes|o.childLanes,l|=o.subtreeFlags&65011712,l|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)a|=o.lanes|o.childLanes,l|=o.subtreeFlags,l|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function wv(e,t,a){var l=t.pendingProps;switch(Yc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(t),null;case 1:return Nt(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Rn(Vt),Re(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(cs(t)?Un(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Kc())),Nt(t),null;case 26:var o=t.type,u=t.memoizedState;return e===null?(Un(t),u!==null?(Nt(t),tf(t,u)):(Nt(t),zo(t,o,null,l,a))):u?u!==e.memoizedState?(Un(t),Nt(t),tf(t,u)):(Nt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&Un(t),Nt(t),zo(t,o,e,l,a)),null;case 27:if(ba(t),a=ze.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Un(t);else{if(!l){if(t.stateNode===null)throw Error(c(166));return Nt(t),null}e=fe.current,cs(t)?Ud(t):(e=oh(o,l,a),t.stateNode=e,Un(t))}return Nt(t),null;case 5:if(ba(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Un(t);else{if(!l){if(t.stateNode===null)throw Error(c(166));return Nt(t),null}if(u=fe.current,cs(t))Ud(t);else{var h=Qi(ze.current);switch(u){case 1:u=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:u=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":u=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":u=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":u=h.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?u.multiple=!0:l.size&&(u.size=l.size);break;default:u=typeof l.is=="string"?h.createElement(o,{is:l.is}):h.createElement(o)}}u[zt]=t,u[Tt]=l;e:for(h=t.child;h!==null;){if(h.tag===5||h.tag===6)u.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}t.stateNode=u;e:switch(ia(u,o,l),o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Un(t)}}return Nt(t),zo(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&Un(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(c(166));if(e=ze.current,cs(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,o=la,o!==null)switch(o.tag){case 27:case 5:l=o.memoizedProps}e[zt]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Ff(e.nodeValue,a)),e||ll(t,!0)}else e=Qi(e).createTextNode(l),e[zt]=t,t.stateNode=e}return Nt(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(l=cs(t),a!==null){if(e===null){if(!l)throw Error(c(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[zt]=t}else xl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Nt(t),e=!1}else a=Kc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Ua(t),t):(Ua(t),null);if((t.flags&128)!==0)throw Error(c(558))}return Nt(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=cs(t),l!==null&&l.dehydrated!==null){if(e===null){if(!o)throw Error(c(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(c(317));o[zt]=t}else xl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Nt(t),o=!1}else o=Kc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(Ua(t),t):(Ua(t),null)}return Ua(t),(t.flags&128)!==0?(t.lanes=a,t):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=t.child,o=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(o=l.alternate.memoizedState.cachePool.pool),u=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(u=l.memoizedState.cachePool.pool),u!==o&&(l.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Mi(t,t.updateQueue),Nt(t),null);case 4:return Re(),e===null&&su(t.stateNode.containerInfo),Nt(t),null;case 10:return Rn(t.type),Nt(t),null;case 19:if(W($t),l=t.memoizedState,l===null)return Nt(t),null;if(o=(t.flags&128)!==0,u=l.rendering,u===null)if(o)_r(l,!1);else{if(jt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Ei(e),u!==null){for(t.flags|=128,_r(l,!1),e=u.updateQueue,t.updateQueue=e,Mi(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Od(a,e),a=a.sibling;return ie($t,$t.current&1|2),at&&An(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Ht()>qi&&(t.flags|=128,o=!0,_r(l,!1),t.lanes=4194304)}else{if(!o)if(e=Ei(u),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Mi(t,e),_r(l,!0),l.tail===null&&l.tailMode==="hidden"&&!u.alternate&&!at)return Nt(t),null}else 2*Ht()-l.renderingStartTime>qi&&a!==536870912&&(t.flags|=128,o=!0,_r(l,!1),t.lanes=4194304);l.isBackwards?(u.sibling=t.child,t.child=u):(e=l.last,e!==null?e.sibling=u:t.child=u,l.last=u)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Ht(),e.sibling=null,a=$t.current,ie($t,o?a&1|2:a&1),at&&An(t,l.treeForkCount),e):(Nt(t),null);case 22:case 23:return Ua(t),so(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(Nt(t),t.subtreeFlags&6&&(t.flags|=8192)):Nt(t),a=t.updateQueue,a!==null&&Mi(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&W(jl),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Rn(Vt),Nt(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function Sv(e,t){switch(Yc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rn(Vt),Re(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ba(t),null;case 31:if(t.memoizedState!==null){if(Ua(t),t.alternate===null)throw Error(c(340));xl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Ua(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));xl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return W($t),null;case 4:return Re(),null;case 10:return Rn(t.type),null;case 22:case 23:return Ua(t),so(),e!==null&&W(jl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Rn(Vt),null;case 25:return null;default:return null}}function af(e,t){switch(Yc(t),t.tag){case 3:Rn(Vt),Re();break;case 26:case 27:case 5:ba(t);break;case 4:Re();break;case 31:t.memoizedState!==null&&Ua(t);break;case 13:Ua(t);break;case 19:W($t);break;case 10:Rn(t.type);break;case 22:case 23:Ua(t),so(),e!==null&&W(jl);break;case 24:Rn(Vt)}}function wr(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var o=l.next;a=o;do{if((a.tag&e)===e){l=void 0;var u=a.create,h=a.inst;l=u(),h.destroy=l}a=a.next}while(a!==o)}}catch(b){ft(t,t.return,b)}}function dl(e,t,a){try{var l=t.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var u=o.next;l=u;do{if((l.tag&e)===e){var h=l.inst,b=h.destroy;if(b!==void 0){h.destroy=void 0,o=t;var A=a,Y=b;try{Y()}catch(te){ft(o,A,te)}}}l=l.next}while(l!==u)}}catch(te){ft(t,t.return,te)}}function nf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Pd(t,a)}catch(l){ft(e,e.return,l)}}}function lf(e,t,a){a.props=Ll(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){ft(e,t,l)}}function Sr(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(o){ft(e,t,o)}}function _n(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(o){ft(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(o){ft(e,t,o)}else a.current=null}function sf(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(o){ft(e,e.return,o)}}function qo(e,t,a){try{var l=e.stateNode;Iv(l,e.type,a,t),l[Tt]=t}catch(o){ft(e,e.return,o)}}function rf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&yl(e.type)||e.tag===4}function $o(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&yl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Lo(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=cn));else if(l!==4&&(l===27&&yl(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Lo(e,t,a),e=e.sibling;e!==null;)Lo(e,t,a),e=e.sibling}function Ui(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&yl(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ui(e,t,a),e=e.sibling;e!==null;)Ui(e,t,a),e=e.sibling}function cf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);ia(t,l,a),t[zt]=e,t[Tt]=a}catch(u){ft(e,e.return,u)}}var jn=!1,Kt=!1,Ho=!1,of=typeof WeakSet=="function"?WeakSet:Set,ta=null;function Nv(e,t){if(e=e.containerInfo,cu=tc,e=Ed(e),Mc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var o=l.anchorOffset,u=l.focusNode;l=l.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var h=0,b=-1,A=-1,Y=0,te=0,le=e,K=null;t:for(;;){for(var Z;le!==a||o!==0&&le.nodeType!==3||(b=h+o),le!==u||l!==0&&le.nodeType!==3||(A=h+l),le.nodeType===3&&(h+=le.nodeValue.length),(Z=le.firstChild)!==null;)K=le,le=Z;for(;;){if(le===e)break t;if(K===a&&++Y===o&&(b=h),K===u&&++te===l&&(A=h),(Z=le.nextSibling)!==null)break;le=K,K=le.parentNode}le=Z}a=b===-1||A===-1?null:{start:b,end:A}}else a=null}a=a||{start:0,end:0}}else a=null;for(ou={focusedElem:e,selectionRange:a},tc=!1,ta=t;ta!==null;)if(t=ta,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ta=e;else for(;ta!==null;){switch(t=ta,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)o=e[a],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,o=u.memoizedProps,u=u.memoizedState,l=a.stateNode;try{var Ee=Ll(a.type,o);e=l.getSnapshotBeforeUpdate(Ee,u),l.__reactInternalSnapshotBeforeUpdate=e}catch(xe){ft(a,a.return,xe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)mu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":mu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,ta=e;break}ta=t.return}}function uf(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:zn(e,a),l&4&&wr(5,a);break;case 1:if(zn(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(h){ft(a,a.return,h)}else{var o=Ll(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){ft(a,a.return,h)}}l&64&&nf(a),l&512&&Sr(a,a.return);break;case 3:if(zn(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Pd(e,t)}catch(h){ft(a,a.return,h)}}break;case 27:t===null&&l&4&&cf(a);case 26:case 5:zn(e,a),t===null&&l&4&&sf(a),l&512&&Sr(a,a.return);break;case 12:zn(e,a);break;case 31:zn(e,a),l&4&&ff(e,a);break;case 13:zn(e,a),l&4&&hf(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Mv.bind(null,a),Wv(e,a))));break;case 22:if(l=a.memoizedState!==null||jn,!l){t=t!==null&&t.memoizedState!==null||Kt,o=jn;var u=Kt;jn=l,(Kt=t)&&!u?qn(e,a,(a.subtreeFlags&8772)!==0):zn(e,a),jn=o,Kt=u}break;case 30:break;default:zn(e,a)}}function df(e){var t=e.alternate;t!==null&&(e.alternate=null,df(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ys(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var kt=null,Sa=!1;function Bn(e,t,a){for(a=a.child;a!==null;)mf(e,t,a),a=a.sibling}function mf(e,t,a){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Ct,a)}catch{}switch(a.tag){case 26:Kt||_n(a,t),Bn(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Kt||_n(a,t);var l=kt,o=Sa;yl(a.type)&&(kt=a.stateNode,Sa=!1),Bn(e,t,a),xr(a.stateNode),kt=l,Sa=o;break;case 5:Kt||_n(a,t);case 6:if(l=kt,o=Sa,kt=null,Bn(e,t,a),kt=l,Sa=o,kt!==null)if(Sa)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(a.stateNode)}catch(u){ft(a,t,u)}else try{kt.removeChild(a.stateNode)}catch(u){ft(a,t,u)}break;case 18:kt!==null&&(Sa?(e=kt,lh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Os(e)):lh(kt,a.stateNode));break;case 4:l=kt,o=Sa,kt=a.stateNode.containerInfo,Sa=!0,Bn(e,t,a),kt=l,Sa=o;break;case 0:case 11:case 14:case 15:dl(2,a,t),Kt||dl(4,a,t),Bn(e,t,a);break;case 1:Kt||(_n(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&lf(a,t,l)),Bn(e,t,a);break;case 21:Bn(e,t,a);break;case 22:Kt=(l=Kt)||a.memoizedState!==null,Bn(e,t,a),Kt=l;break;default:Bn(e,t,a)}}function ff(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Os(e)}catch(a){ft(t,t.return,a)}}}function hf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Os(e)}catch(a){ft(t,t.return,a)}}function Cv(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new of),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new of),t;default:throw Error(c(435,e.tag))}}function ji(e,t){var a=Cv(e);t.forEach(function(l){if(!a.has(l)){a.add(l);var o=Uv.bind(null,e,l);l.then(o,o)}})}function Na(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var o=a[l],u=e,h=t,b=h;e:for(;b!==null;){switch(b.tag){case 27:if(yl(b.type)){kt=b.stateNode,Sa=!1;break e}break;case 5:kt=b.stateNode,Sa=!1;break e;case 3:case 4:kt=b.stateNode.containerInfo,Sa=!0;break e}b=b.return}if(kt===null)throw Error(c(160));mf(u,h,o),kt=null,Sa=!1,u=o.alternate,u!==null&&(u.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)pf(t,e),t=t.sibling}var un=null;function pf(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Na(t,e),Ca(e),l&4&&(dl(3,e,e.return),wr(3,e),dl(5,e,e.return));break;case 1:Na(t,e),Ca(e),l&512&&(Kt||a===null||_n(a,a.return)),l&64&&jn&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var o=un;if(Na(t,e),Ca(e),l&512&&(Kt||a===null||_n(a,a.return)),l&4){var u=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,o=o.ownerDocument||o;t:switch(l){case"title":u=o.getElementsByTagName("title")[0],(!u||u[Qn]||u[zt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=o.createElement(l),o.head.insertBefore(u,o.querySelector("head > title"))),ia(u,l,a),u[zt]=e,xt(u),l=u;break e;case"link":var h=ph("link","href",o).get(l+(a.href||""));if(h){for(var b=0;b<h.length;b++)if(u=h[b],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){h.splice(b,1);break t}}u=o.createElement(l),ia(u,l,a),o.head.appendChild(u);break;case"meta":if(h=ph("meta","content",o).get(l+(a.content||""))){for(b=0;b<h.length;b++)if(u=h[b],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){h.splice(b,1);break t}}u=o.createElement(l),ia(u,l,a),o.head.appendChild(u);break;default:throw Error(c(468,l))}u[zt]=e,xt(u),l=u}e.stateNode=l}else vh(o,e.type,e.stateNode);else e.stateNode=hh(o,l,e.memoizedProps);else u!==l?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,l===null?vh(o,e.type,e.stateNode):hh(o,l,e.memoizedProps)):l===null&&e.stateNode!==null&&qo(e,e.memoizedProps,a.memoizedProps)}break;case 27:Na(t,e),Ca(e),l&512&&(Kt||a===null||_n(a,a.return)),a!==null&&l&4&&qo(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Na(t,e),Ca(e),l&512&&(Kt||a===null||_n(a,a.return)),e.flags&32){o=e.stateNode;try{Fn(o,"")}catch(Ee){ft(e,e.return,Ee)}}l&4&&e.stateNode!=null&&(o=e.memoizedProps,qo(e,o,a!==null?a.memoizedProps:o)),l&1024&&(Ho=!0);break;case 6:if(Na(t,e),Ca(e),l&4){if(e.stateNode===null)throw Error(c(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(Ee){ft(e,e.return,Ee)}}break;case 3:if(Zi=null,o=un,un=Xi(t.containerInfo),Na(t,e),un=o,Ca(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Os(t.containerInfo)}catch(Ee){ft(e,e.return,Ee)}Ho&&(Ho=!1,vf(e));break;case 4:l=un,un=Xi(e.stateNode.containerInfo),Na(t,e),Ca(e),un=l;break;case 12:Na(t,e),Ca(e);break;case 31:Na(t,e),Ca(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ji(e,l)));break;case 13:Na(t,e),Ca(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zi=Ht()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ji(e,l)));break;case 22:o=e.memoizedState!==null;var A=a!==null&&a.memoizedState!==null,Y=jn,te=Kt;if(jn=Y||o,Kt=te||A,Na(t,e),Kt=te,jn=Y,Ca(e),l&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(a===null||A||jn||Kt||Hl(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){A=a=t;try{if(u=A.stateNode,o)h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{b=A.stateNode;var le=A.memoizedProps.style,K=le!=null&&le.hasOwnProperty("display")?le.display:null;b.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Ee){ft(A,A.return,Ee)}}}else if(t.tag===6){if(a===null){A=t;try{A.stateNode.nodeValue=o?"":A.memoizedProps}catch(Ee){ft(A,A.return,Ee)}}}else if(t.tag===18){if(a===null){A=t;try{var Z=A.stateNode;o?sh(Z,!0):sh(A.stateNode,!1)}catch(Ee){ft(A,A.return,Ee)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ji(e,a))));break;case 19:Na(t,e),Ca(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ji(e,l)));break;case 30:break;case 21:break;default:Na(t,e),Ca(e)}}function Ca(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(rf(l)){a=l;break}l=l.return}if(a==null)throw Error(c(160));switch(a.tag){case 27:var o=a.stateNode,u=$o(e);Ui(e,u,o);break;case 5:var h=a.stateNode;a.flags&32&&(Fn(h,""),a.flags&=-33);var b=$o(e);Ui(e,b,h);break;case 3:case 4:var A=a.stateNode.containerInfo,Y=$o(e);Lo(e,Y,A);break;default:throw Error(c(161))}}catch(te){ft(e,e.return,te)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;vf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function zn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)uf(e,t.alternate,t),t=t.sibling}function Hl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:dl(4,t,t.return),Hl(t);break;case 1:_n(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&lf(t,t.return,a),Hl(t);break;case 27:xr(t.stateNode);case 26:case 5:_n(t,t.return),Hl(t);break;case 22:t.memoizedState===null&&Hl(t);break;case 30:Hl(t);break;default:Hl(t)}e=e.sibling}}function qn(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,o=e,u=t,h=u.flags;switch(u.tag){case 0:case 11:case 15:qn(o,u,a),wr(4,u);break;case 1:if(qn(o,u,a),l=u,o=l.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(Y){ft(l,l.return,Y)}if(l=u,o=l.updateQueue,o!==null){var b=l.stateNode;try{var A=o.shared.hiddenCallbacks;if(A!==null)for(o.shared.hiddenCallbacks=null,o=0;o<A.length;o++)Kd(A[o],b)}catch(Y){ft(l,l.return,Y)}}a&&h&64&&nf(u),Sr(u,u.return);break;case 27:cf(u);case 26:case 5:qn(o,u,a),a&&l===null&&h&4&&sf(u),Sr(u,u.return);break;case 12:qn(o,u,a);break;case 31:qn(o,u,a),a&&h&4&&ff(o,u);break;case 13:qn(o,u,a),a&&h&4&&hf(o,u);break;case 22:u.memoizedState===null&&qn(o,u,a),Sr(u,u.return);break;case 30:break;default:qn(o,u,a)}t=t.sibling}}function Go(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&or(a))}function Vo(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&or(e))}function dn(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)gf(e,t,a,l),t=t.sibling}function gf(e,t,a,l){var o=t.flags;switch(t.tag){case 0:case 11:case 15:dn(e,t,a,l),o&2048&&wr(9,t);break;case 1:dn(e,t,a,l);break;case 3:dn(e,t,a,l),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&or(e)));break;case 12:if(o&2048){dn(e,t,a,l),e=t.stateNode;try{var u=t.memoizedProps,h=u.id,b=u.onPostCommit;typeof b=="function"&&b(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(A){ft(t,t.return,A)}}else dn(e,t,a,l);break;case 31:dn(e,t,a,l);break;case 13:dn(e,t,a,l);break;case 23:break;case 22:u=t.stateNode,h=t.alternate,t.memoizedState!==null?u._visibility&2?dn(e,t,a,l):Nr(e,t):u._visibility&2?dn(e,t,a,l):(u._visibility|=2,ys(e,t,a,l,(t.subtreeFlags&10256)!==0||!1)),o&2048&&Go(h,t);break;case 24:dn(e,t,a,l),o&2048&&Vo(t.alternate,t);break;default:dn(e,t,a,l)}}function ys(e,t,a,l,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,h=t,b=a,A=l,Y=h.flags;switch(h.tag){case 0:case 11:case 15:ys(u,h,b,A,o),wr(8,h);break;case 23:break;case 22:var te=h.stateNode;h.memoizedState!==null?te._visibility&2?ys(u,h,b,A,o):Nr(u,h):(te._visibility|=2,ys(u,h,b,A,o)),o&&Y&2048&&Go(h.alternate,h);break;case 24:ys(u,h,b,A,o),o&&Y&2048&&Vo(h.alternate,h);break;default:ys(u,h,b,A,o)}t=t.sibling}}function Nr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,o=l.flags;switch(l.tag){case 22:Nr(a,l),o&2048&&Go(l.alternate,l);break;case 24:Nr(a,l),o&2048&&Vo(l.alternate,l);break;default:Nr(a,l)}t=t.sibling}}var Cr=8192;function bs(e,t,a){if(e.subtreeFlags&Cr)for(e=e.child;e!==null;)yf(e,t,a),e=e.sibling}function yf(e,t,a){switch(e.tag){case 26:bs(e,t,a),e.flags&Cr&&e.memoizedState!==null&&dg(a,un,e.memoizedState,e.memoizedProps);break;case 5:bs(e,t,a);break;case 3:case 4:var l=un;un=Xi(e.stateNode.containerInfo),bs(e,t,a),un=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Cr,Cr=16777216,bs(e,t,a),Cr=l):bs(e,t,a));break;default:bs(e,t,a)}}function bf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Tr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];ta=l,_f(l,e)}bf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ef(e),e=e.sibling}function Ef(e){switch(e.tag){case 0:case 11:case 15:Tr(e),e.flags&2048&&dl(9,e,e.return);break;case 3:Tr(e);break;case 12:Tr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Bi(e)):Tr(e);break;default:Tr(e)}}function Bi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];ta=l,_f(l,e)}bf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:dl(8,t,t.return),Bi(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Bi(t));break;default:Bi(t)}e=e.sibling}}function _f(e,t){for(;ta!==null;){var a=ta;switch(a.tag){case 0:case 11:case 15:dl(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:or(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,ta=l;else e:for(a=e;ta!==null;){l=ta;var o=l.sibling,u=l.return;if(df(l),l===a){ta=null;break e}if(o!==null){o.return=u,ta=o;break e}ta=u}}}var Tv={getCacheForType:function(e){var t=sa(Vt),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return sa(Vt).controller.signal}},kv=typeof WeakMap=="function"?WeakMap:Map,ct=0,gt=null,Fe=null,et=0,mt=0,ja=null,ml=!1,Es=!1,Yo=!1,$n=0,jt=0,fl=0,Gl=0,Io=0,Ba=0,_s=0,kr=null,Ta=null,Ko=!1,zi=0,wf=0,qi=1/0,$i=null,hl=null,Ft=0,pl=null,ws=null,Ln=0,Po=0,Qo=null,Sf=null,Ar=0,Xo=null;function za(){return(ct&2)!==0&&et!==0?et&-et:I.T!==null?tu():Ze()}function Nf(){if(Ba===0)if((et&536870912)===0||at){var e=re;re<<=1,(re&3932160)===0&&(re=262144),Ba=e}else Ba=536870912;return e=Ma.current,e!==null&&(e.flags|=32),Ba}function ka(e,t,a){(e===gt&&(mt===2||mt===9)||e.cancelPendingCommit!==null)&&(Ss(e,0),vl(e,et,Ba,!1)),va(e,a),((ct&2)===0||e!==gt)&&(e===gt&&((ct&2)===0&&(Gl|=a),jt===4&&vl(e,et,Ba,!1)),wn(e))}function Cf(e,t,a){if((ct&6)!==0)throw Error(c(327));var l=!a&&(t&127)===0&&(t&e.expiredLanes)===0||na(e,t),o=l?Rv(e,t):Zo(e,t,!0),u=l;do{if(o===0){Es&&!l&&vl(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!Av(a)){o=Zo(e,t,!1),u=!1;continue}if(o===2){if(u=t,e.errorRecoveryDisabledLanes&u)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var b=e;o=kr;var A=b.current.memoizedState.isDehydrated;if(A&&(Ss(b,h).flags|=256),h=Zo(b,h,!1),h!==2){if(Yo&&!A){b.errorRecoveryDisabledLanes|=u,Gl|=u,o=4;break e}u=Ta,Ta=o,u!==null&&(Ta===null?Ta=u:Ta.push.apply(Ta,u))}o=h}if(u=!1,o!==2)continue}}if(o===1){Ss(e,0),vl(e,t,0,!0);break}e:{switch(l=e,u=o,u){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:vl(l,t,Ba,!ml);break e;case 2:Ta=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(o=zi+300-Ht(),10<o)){if(vl(l,t,Ba,!ml),aa(l,0,!0)!==0)break e;Ln=t,l.timeoutHandle=ah(Tf.bind(null,l,a,Ta,$i,Ko,t,Ba,Gl,_s,ml,u,"Throttled",-0,0),o);break e}Tf(l,a,Ta,$i,Ko,t,Ba,Gl,_s,ml,u,null,-0,0)}}break}while(!0);wn(e)}function Tf(e,t,a,l,o,u,h,b,A,Y,te,le,K,Z){if(e.timeoutHandle=-1,le=t.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:cn},yf(t,u,le);var Ee=(u&62914560)===u?zi-Ht():(u&4194048)===u?wf-Ht():0;if(Ee=mg(le,Ee),Ee!==null){Ln=u,e.cancelPendingCommit=Ee(Uf.bind(null,e,t,u,a,l,o,h,b,A,te,le,null,K,Z)),vl(e,u,h,!Y);return}}Uf(e,t,u,a,l,o,h,b,A)}function Av(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var o=a[l],u=o.getSnapshot;o=o.value;try{if(!Da(u(),o))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vl(e,t,a,l){t&=~Io,t&=~Gl,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var o=t;0<o;){var u=31-qe(o),h=1<<u;l[u]=-1,o&=~h}a!==0&&Kn(e,a,t)}function Li(){return(ct&6)===0?(Or(0),!1):!0}function Jo(){if(Fe!==null){if(mt===0)var e=Fe.return;else e=Fe,On=Ml=null,mo(e),fs=null,dr=0,e=Fe;for(;e!==null;)af(e.alternate,e),e=e.return;Fe=null}}function Ss(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Qv(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Ln=0,Jo(),gt=e,Fe=a=kn(e.current,null),et=t,mt=0,ja=null,ml=!1,Es=na(e,t),Yo=!1,_s=Ba=Io=Gl=fl=jt=0,Ta=kr=null,Ko=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var o=31-qe(l),u=1<<o;t|=e[o],l&=~u}return $n=t,ii(),a}function kf(e,t){Pe=null,I.H=br,t===ms||t===pi?(t=Gd(),mt=3):t===Wc?(t=Gd(),mt=4):mt=t===Ao?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ja=t,Fe===null&&(jt=1,Oi(e,Qa(t,e.current)))}function Af(){var e=Ma.current;return e===null?!0:(et&4194048)===et?Fa===null:(et&62914560)===et||(et&536870912)!==0?e===Fa:!1}function Of(){var e=I.H;return I.H=br,e===null?br:e}function Rf(){var e=I.A;return I.A=Tv,e}function Hi(){jt=4,ml||(et&4194048)!==et&&Ma.current!==null||(Es=!0),(fl&134217727)===0&&(Gl&134217727)===0||gt===null||vl(gt,et,Ba,!1)}function Zo(e,t,a){var l=ct;ct|=2;var o=Of(),u=Rf();(gt!==e||et!==t)&&($i=null,Ss(e,t)),t=!1;var h=jt;e:do try{if(mt!==0&&Fe!==null){var b=Fe,A=ja;switch(mt){case 8:Jo(),h=6;break e;case 3:case 2:case 9:case 6:Ma.current===null&&(t=!0);var Y=mt;if(mt=0,ja=null,Ns(e,b,A,Y),a&&Es){h=0;break e}break;default:Y=mt,mt=0,ja=null,Ns(e,b,A,Y)}}Ov(),h=jt;break}catch(te){kf(e,te)}while(!0);return t&&e.shellSuspendCounter++,On=Ml=null,ct=l,I.H=o,I.A=u,Fe===null&&(gt=null,et=0,ii()),h}function Ov(){for(;Fe!==null;)Df(Fe)}function Rv(e,t){var a=ct;ct|=2;var l=Of(),o=Rf();gt!==e||et!==t?($i=null,qi=Ht()+500,Ss(e,t)):Es=na(e,t);e:do try{if(mt!==0&&Fe!==null){t=Fe;var u=ja;t:switch(mt){case 1:mt=0,ja=null,Ns(e,t,u,1);break;case 2:case 9:if(Ld(u)){mt=0,ja=null,xf(t);break}t=function(){mt!==2&&mt!==9||gt!==e||(mt=7),wn(e)},u.then(t,t);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:Ld(u)?(mt=0,ja=null,xf(t)):(mt=0,ja=null,Ns(e,t,u,7));break;case 5:var h=null;switch(Fe.tag){case 26:h=Fe.memoizedState;case 5:case 27:var b=Fe;if(h?gh(h):b.stateNode.complete){mt=0,ja=null;var A=b.sibling;if(A!==null)Fe=A;else{var Y=b.return;Y!==null?(Fe=Y,Gi(Y)):Fe=null}break t}}mt=0,ja=null,Ns(e,t,u,5);break;case 6:mt=0,ja=null,Ns(e,t,u,6);break;case 8:Jo(),jt=6;break e;default:throw Error(c(462))}}Dv();break}catch(te){kf(e,te)}while(!0);return On=Ml=null,I.H=l,I.A=o,ct=a,Fe!==null?0:(gt=null,et=0,ii(),jt)}function Dv(){for(;Fe!==null&&!Yn();)Df(Fe)}function Df(e){var t=ef(e.alternate,e,$n);e.memoizedProps=e.pendingProps,t===null?Gi(e):Fe=t}function xf(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Qm(a,t,t.pendingProps,t.type,void 0,et);break;case 11:t=Qm(a,t,t.pendingProps,t.type.render,t.ref,et);break;case 5:mo(t);default:af(a,t),t=Fe=Od(t,$n),t=ef(a,t,$n)}e.memoizedProps=e.pendingProps,t===null?Gi(e):Fe=t}function Ns(e,t,a,l){On=Ml=null,mo(t),fs=null,dr=0;var o=t.return;try{if(bv(e,o,t,a,et)){jt=1,Oi(e,Qa(a,e.current)),Fe=null;return}}catch(u){if(o!==null)throw Fe=o,u;jt=1,Oi(e,Qa(a,e.current)),Fe=null;return}t.flags&32768?(at||l===1?e=!0:Es||(et&536870912)!==0?e=!1:(ml=e=!0,(l===2||l===9||l===3||l===6)&&(l=Ma.current,l!==null&&l.tag===13&&(l.flags|=16384))),Mf(t,e)):Gi(t)}function Gi(e){var t=e;do{if((t.flags&32768)!==0){Mf(t,ml);return}e=t.return;var a=wv(t.alternate,t,$n);if(a!==null){Fe=a;return}if(t=t.sibling,t!==null){Fe=t;return}Fe=t=e}while(t!==null);jt===0&&(jt=5)}function Mf(e,t){do{var a=Sv(e.alternate,e);if(a!==null){a.flags&=32767,Fe=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Fe=e;return}Fe=e=a}while(e!==null);jt=6,Fe=null}function Uf(e,t,a,l,o,u,h,b,A){e.cancelPendingCommit=null;do Vi();while(Ft!==0);if((ct&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(u=t.lanes|t.childLanes,u|=qc,Sn(e,a,u,h,b,A),e===gt&&(Fe=gt=null,et=0),ws=t,pl=e,Ln=a,Po=u,Qo=o,Sf=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,jv(He,function(){return $f(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=I.T,I.T=null,o=ue.p,ue.p=2,h=ct,ct|=4;try{Nv(e,t,a)}finally{ct=h,ue.p=o,I.T=l}}Ft=1,jf(),Bf(),zf()}}function jf(){if(Ft===1){Ft=0;var e=pl,t=ws,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=I.T,I.T=null;var l=ue.p;ue.p=2;var o=ct;ct|=4;try{pf(t,e);var u=ou,h=Ed(e.containerInfo),b=u.focusedElem,A=u.selectionRange;if(h!==b&&b&&b.ownerDocument&&bd(b.ownerDocument.documentElement,b)){if(A!==null&&Mc(b)){var Y=A.start,te=A.end;if(te===void 0&&(te=Y),"selectionStart"in b)b.selectionStart=Y,b.selectionEnd=Math.min(te,b.value.length);else{var le=b.ownerDocument||document,K=le&&le.defaultView||window;if(K.getSelection){var Z=K.getSelection(),Ee=b.textContent.length,xe=Math.min(A.start,Ee),vt=A.end===void 0?xe:Math.min(A.end,Ee);!Z.extend&&xe>vt&&(h=vt,vt=xe,xe=h);var L=yd(b,xe),M=yd(b,vt);if(L&&M&&(Z.rangeCount!==1||Z.anchorNode!==L.node||Z.anchorOffset!==L.offset||Z.focusNode!==M.node||Z.focusOffset!==M.offset)){var V=le.createRange();V.setStart(L.node,L.offset),Z.removeAllRanges(),xe>vt?(Z.addRange(V),Z.extend(M.node,M.offset)):(V.setEnd(M.node,M.offset),Z.addRange(V))}}}}for(le=[],Z=b;Z=Z.parentNode;)Z.nodeType===1&&le.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<le.length;b++){var ne=le[b];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}tc=!!cu,ou=cu=null}finally{ct=o,ue.p=l,I.T=a}}e.current=t,Ft=2}}function Bf(){if(Ft===2){Ft=0;var e=pl,t=ws,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=I.T,I.T=null;var l=ue.p;ue.p=2;var o=ct;ct|=4;try{uf(e,t.alternate,t)}finally{ct=o,ue.p=l,I.T=a}}Ft=3}}function zf(){if(Ft===4||Ft===3){Ft=0,In();var e=pl,t=ws,a=Ln,l=Sf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ft=5:(Ft=0,ws=pl=null,qf(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(hl=null),Nn(a),t=t.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Ct,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=I.T,o=ue.p,ue.p=2,I.T=null;try{for(var u=e.onRecoverableError,h=0;h<l.length;h++){var b=l[h];u(b.value,{componentStack:b.stack})}}finally{I.T=t,ue.p=o}}(Ln&3)!==0&&Vi(),wn(e),o=e.pendingLanes,(a&261930)!==0&&(o&42)!==0?e===Xo?Ar++:(Ar=0,Xo=e):Ar=0,Or(0)}}function qf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,or(t)))}function Vi(){return jf(),Bf(),zf(),$f()}function $f(){if(Ft!==5)return!1;var e=pl,t=Po;Po=0;var a=Nn(Ln),l=I.T,o=ue.p;try{ue.p=32>a?32:a,I.T=null,a=Qo,Qo=null;var u=pl,h=Ln;if(Ft=0,ws=pl=null,Ln=0,(ct&6)!==0)throw Error(c(331));var b=ct;if(ct|=4,Ef(u.current),gf(u,u.current,h,a),ct=b,Or(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Ct,u)}catch{}return!0}finally{ue.p=o,I.T=l,qf(e,t)}}function Lf(e,t,a){t=Qa(a,t),t=ko(e.stateNode,t,2),e=cl(e,t,2),e!==null&&(va(e,2),wn(e))}function ft(e,t,a){if(e.tag===3)Lf(e,e,a);else for(;t!==null;){if(t.tag===3){Lf(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(hl===null||!hl.has(l))){e=Qa(a,e),a=Lm(2),l=cl(t,a,2),l!==null&&(Hm(a,l,t,e),va(l,2),wn(l));break}}t=t.return}}function Fo(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new kv;var o=new Set;l.set(t,o)}else o=l.get(t),o===void 0&&(o=new Set,l.set(t,o));o.has(a)||(Yo=!0,o.add(a),e=xv.bind(null,e,t,a),t.then(e,e))}function xv(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,gt===e&&(et&a)===a&&(jt===4||jt===3&&(et&62914560)===et&&300>Ht()-zi?(ct&2)===0&&Ss(e,0):Io|=a,_s===et&&(_s=0)),wn(e)}function Hf(e,t){t===0&&(t=dt()),e=Rl(e,t),e!==null&&(va(e,t),wn(e))}function Mv(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Hf(e,a)}function Uv(e,t){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,o=e.memoizedState;o!==null&&(a=o.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(c(314))}l!==null&&l.delete(t),Hf(e,a)}function jv(e,t){return pn(e,t)}var Yi=null,Cs=null,Wo=!1,Ii=!1,eu=!1,gl=0;function wn(e){e!==Cs&&e.next===null&&(Cs===null?Yi=Cs=e:Cs=Cs.next=e),Ii=!0,Wo||(Wo=!0,zv())}function Or(e,t){if(!eu&&Ii){eu=!0;do for(var a=!1,l=Yi;l!==null;){if(e!==0){var o=l.pendingLanes;if(o===0)var u=0;else{var h=l.suspendedLanes,b=l.pingedLanes;u=(1<<31-qe(42|e)+1)-1,u&=o&~(h&~b),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,If(l,u))}else u=et,u=aa(l,l===gt?u:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(u&3)===0||na(l,u)||(a=!0,If(l,u));l=l.next}while(a);eu=!1}}function Bv(){Gf()}function Gf(){Ii=Wo=!1;var e=0;gl!==0&&Pv()&&(e=gl);for(var t=Ht(),a=null,l=Yi;l!==null;){var o=l.next,u=Vf(l,t);u===0?(l.next=null,a===null?Yi=o:a.next=o,o===null&&(Cs=a)):(a=l,(e!==0||(u&3)!==0)&&(Ii=!0)),l=o}Ft!==0&&Ft!==5||Or(e),gl!==0&&(gl=0)}function Vf(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,o=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var h=31-qe(u),b=1<<h,A=o[h];A===-1?((b&a)===0||(b&l)!==0)&&(o[h]=Oa(b,t)):A<=t&&(e.expiredLanes|=b),u&=~b}if(t=gt,a=et,a=aa(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(mt===2||mt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&an(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||na(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&an(l),Nn(a)){case 2:case 8:a=Ge;break;case 32:a=He;break;case 268435456:a=ot;break;default:a=He}return l=Yf.bind(null,e),a=pn(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&an(l),e.callbackPriority=2,e.callbackNode=null,2}function Yf(e,t){if(Ft!==0&&Ft!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Vi()&&e.callbackNode!==a)return null;var l=et;return l=aa(e,e===gt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Cf(e,l,t),Vf(e,Ht()),e.callbackNode!=null&&e.callbackNode===a?Yf.bind(null,e):null)}function If(e,t){if(Vi())return null;Cf(e,t,!0)}function zv(){Xv(function(){(ct&6)!==0?pn(de,Bv):Gf()})}function tu(){if(gl===0){var e=us;e===0&&(e=C,C<<=1,(C&261888)===0&&(C=256)),gl=e}return gl}function Kf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:es(""+e)}function Pf(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function qv(e,t,a,l,o){if(t==="submit"&&a&&a.stateNode===o){var u=Kf((o[Tt]||null).action),h=l.submitter;h&&(t=(t=h[Tt]||null)?Kf(t.formAction):h.getAttribute("formAction"),t!==null&&(u=t,h=null));var b=new w("action","action",null,l,o);e.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(gl!==0){var A=h?Pf(o,h):new FormData(o);_o(a,{pending:!0,data:A,method:o.method,action:u},null,A)}}else typeof u=="function"&&(b.preventDefault(),A=h?Pf(o,h):new FormData(o),_o(a,{pending:!0,data:A,method:o.method,action:u},u,A))},currentTarget:o}]})}}for(var au=0;au<zc.length;au++){var nu=zc[au],$v=nu.toLowerCase(),Lv=nu[0].toUpperCase()+nu.slice(1);on($v,"on"+Lv)}on(Sd,"onAnimationEnd"),on(Nd,"onAnimationIteration"),on(Cd,"onAnimationStart"),on("dblclick","onDoubleClick"),on("focusin","onFocus"),on("focusout","onBlur"),on(av,"onTransitionRun"),on(nv,"onTransitionStart"),on(lv,"onTransitionCancel"),on(Td,"onTransitionEnd"),Gt("onMouseEnter",["mouseout","mouseover"]),Gt("onMouseLeave",["mouseout","mouseover"]),Gt("onPointerEnter",["pointerout","pointerover"]),Gt("onPointerLeave",["pointerout","pointerover"]),ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ln("onBeforeInput",["compositionend","keypress","textInput","paste"]),ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rr));function Qf(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],o=l.event;l=l.listeners;e:{var u=void 0;if(t)for(var h=l.length-1;0<=h;h--){var b=l[h],A=b.instance,Y=b.currentTarget;if(b=b.listener,A!==u&&o.isPropagationStopped())break e;u=b,o.currentTarget=Y;try{u(o)}catch(te){ri(te)}o.currentTarget=null,u=A}else for(h=0;h<l.length;h++){if(b=l[h],A=b.instance,Y=b.currentTarget,b=b.listener,A!==u&&o.isPropagationStopped())break e;u=b,o.currentTarget=Y;try{u(o)}catch(te){ri(te)}o.currentTarget=null,u=A}}}}function We(e,t){var a=t[Gs];a===void 0&&(a=t[Gs]=new Set);var l=e+"__bubble";a.has(l)||(Xf(t,e,2,!1),a.add(l))}function lu(e,t,a){var l=0;t&&(l|=4),Xf(a,e,l,t)}var Ki="_reactListening"+Math.random().toString(36).slice(2);function su(e){if(!e[Ki]){e[Ki]=!0,fa.forEach(function(a){a!=="selectionchange"&&(Hv.has(a)||lu(a,!1,e),lu(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ki]||(t[Ki]=!0,lu("selectionchange",!1,t))}}function Xf(e,t,a,l){switch(Nh(t)){case 2:var o=pg;break;case 8:o=vg;break;default:o=Eu}a=o.bind(null,t,a,e),o=void 0,!Ya||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),l?o!==void 0?e.addEventListener(t,a,{capture:!0,passive:o}):e.addEventListener(t,a,!0):o!==void 0?e.addEventListener(t,a,{passive:o}):e.addEventListener(t,a,!1)}function ru(e,t,a,l,o){var u=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var h=l.tag;if(h===3||h===4){var b=l.stateNode.containerInfo;if(b===o)break;if(h===4)for(h=l.return;h!==null;){var A=h.tag;if((A===3||A===4)&&h.stateNode.containerInfo===o)return;h=h.return}for(;b!==null;){if(h=Xn(b),h===null)return;if(A=h.tag,A===5||A===6||A===26||A===27){l=u=h;continue e}b=b.parentNode}}l=l.return}li(function(){var Y=u,te=Zs(a),le=[];e:{var K=kd.get(e);if(K!==void 0){var Z=w,Ee=e;switch(e){case"keypress":if(N(a)===0)break e;case"keydown":case"keyup":Z=Up;break;case"focusin":Ee="focus",Z=lt;break;case"focusout":Ee="blur",Z=lt;break;case"beforeblur":case"afterblur":Z=lt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=he;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Ae;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=zp;break;case Sd:case Nd:case Cd:Z=Ia;break;case Td:Z=$p;break;case"scroll":case"scrollend":Z=me;break;case"wheel":Z=Hp;break;case"copy":case"cut":case"paste":Z=tr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=ld;break;case"toggle":case"beforetoggle":Z=Vp}var xe=(t&4)!==0,vt=!xe&&(e==="scroll"||e==="scrollend"),L=xe?K!==null?K+"Capture":null:K;xe=[];for(var M=Y,V;M!==null;){var ne=M;if(V=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||V===null||L===null||(ne=kl(M,L),ne!=null&&xe.push(Dr(M,ne,V))),vt)break;M=M.return}0<xe.length&&(K=new Z(K,Ee,null,a,te),le.push({event:K,listeners:xe}))}}if((t&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",Z=e==="mouseout"||e==="pointerout",K&&a!==Va&&(Ee=a.relatedTarget||a.fromElement)&&(Xn(Ee)||Ee[vn]))break e;if((Z||K)&&(K=te.window===te?te:(K=te.ownerDocument)?K.defaultView||K.parentWindow:window,Z?(Ee=a.relatedTarget||a.toElement,Z=Y,Ee=Ee?Xn(Ee):null,Ee!==null&&(vt=m(Ee),xe=Ee.tag,Ee!==vt||xe!==5&&xe!==27&&xe!==6)&&(Ee=null)):(Z=null,Ee=Y),Z!==Ee)){if(xe=he,ne="onMouseLeave",L="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(xe=ld,ne="onPointerLeave",L="onPointerEnter",M="pointer"),vt=Z==null?K:Zn(Z),V=Ee==null?K:Zn(Ee),K=new xe(ne,M+"leave",Z,a,te),K.target=vt,K.relatedTarget=V,ne=null,Xn(te)===Y&&(xe=new xe(L,M+"enter",Ee,a,te),xe.target=V,xe.relatedTarget=vt,ne=xe),vt=ne,Z&&Ee)t:{for(xe=Gv,L=Z,M=Ee,V=0,ne=L;ne;ne=xe(ne))V++;ne=0;for(var ke=M;ke;ke=xe(ke))ne++;for(;0<V-ne;)L=xe(L),V--;for(;0<ne-V;)M=xe(M),ne--;for(;V--;){if(L===M||M!==null&&L===M.alternate){xe=L;break t}L=xe(L),M=xe(M)}xe=null}else xe=null;Z!==null&&Jf(le,K,Z,xe,!1),Ee!==null&&vt!==null&&Jf(le,vt,Ee,xe,!0)}}e:{if(K=Y?Zn(Y):window,Z=K.nodeName&&K.nodeName.toLowerCase(),Z==="select"||Z==="input"&&K.type==="file")var st=md;else if(ud(K))if(fd)st=Wp;else{st=Zp;var we=Jp}else Z=K.nodeName,!Z||Z.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Y&&Js(Y.elementType)&&(st=md):st=Fp;if(st&&(st=st(e,Y))){dd(le,st,a,te);break e}we&&we(e,K,Y),e==="focusout"&&Y&&K.type==="number"&&Y.memoizedProps.value!=null&&Qs(K,"number",K.value)}switch(we=Y?Zn(Y):window,e){case"focusin":(ud(we)||we.contentEditable==="true")&&(as=we,Uc=Y,rr=null);break;case"focusout":rr=Uc=as=null;break;case"mousedown":jc=!0;break;case"contextmenu":case"mouseup":case"dragend":jc=!1,_d(le,a,te);break;case"selectionchange":if(tv)break;case"keydown":case"keyup":_d(le,a,te)}var Qe;if(Rc)e:{switch(e){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else ts?cd(e,a)&&(tt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(tt="onCompositionStart");tt&&(sd&&a.locale!=="ko"&&(ts||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&ts&&(Qe=_()):(yn=te,er="value"in yn?yn.value:yn.textContent,ts=!0)),we=Pi(Y,tt),0<we.length&&(tt=new ga(tt,e,null,a,te),le.push({event:tt,listeners:we}),Qe?tt.data=Qe:(Qe=od(a),Qe!==null&&(tt.data=Qe)))),(Qe=Ip?Kp(e,a):Pp(e,a))&&(tt=Pi(Y,"onBeforeInput"),0<tt.length&&(we=new ga("onBeforeInput","beforeinput",null,a,te),le.push({event:we,listeners:tt}),we.data=Qe)),qv(le,e,Y,a,te)}Qf(le,t)})}function Dr(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Pi(e,t){for(var a=t+"Capture",l=[];e!==null;){var o=e,u=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||u===null||(o=kl(e,a),o!=null&&l.unshift(Dr(e,o,u)),o=kl(e,t),o!=null&&l.push(Dr(e,o,u))),e.tag===3)return l;e=e.return}return[]}function Gv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Jf(e,t,a,l,o){for(var u=t._reactName,h=[];a!==null&&a!==l;){var b=a,A=b.alternate,Y=b.stateNode;if(b=b.tag,A!==null&&A===l)break;b!==5&&b!==26&&b!==27||Y===null||(A=Y,o?(Y=kl(a,u),Y!=null&&h.unshift(Dr(a,Y,A))):o||(Y=kl(a,u),Y!=null&&h.push(Dr(a,Y,A)))),a=a.return}h.length!==0&&e.push({event:t,listeners:h})}var Vv=/\r\n?/g,Yv=/\u0000|\uFFFD/g;function Zf(e){return(typeof e=="string"?e:""+e).replace(Vv,`
`).replace(Yv,"")}function Ff(e,t){return t=Zf(t),Zf(e)===t}function pt(e,t,a,l,o,u){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Fn(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Fn(e,""+l);break;case"className":rn(e,"class",l);break;case"tabIndex":rn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":rn(e,a,l);break;case"style":ni(e,l,u);break;case"data":if(t!=="object"){rn(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=es(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&pt(e,t,"name",o.name,o,null),pt(e,t,"formEncType",o.formEncType,o,null),pt(e,t,"formMethod",o.formMethod,o,null),pt(e,t,"formTarget",o.formTarget,o,null)):(pt(e,t,"encType",o.encType,o,null),pt(e,t,"method",o.method,o,null),pt(e,t,"target",o.target,o,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=es(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=cn);break;case"onScroll":l!=null&&We("scroll",e);break;case"onScrollEnd":l!=null&&We("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(c(61));if(a=l.__html,a!=null){if(o.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=es(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":We("beforetoggle",e),We("toggle",e),Cn(e,"popover",l);break;case"xlinkActuate":_a(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":_a(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":_a(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":_a(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":_a(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":_a(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":_a(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":_a(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":_a(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Cn(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=kc.get(a)||a,Cn(e,a,l))}}function iu(e,t,a,l,o,u){switch(a){case"style":ni(e,l,u);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(c(61));if(a=l.__html,a!=null){if(o.children!=null)throw Error(c(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Fn(e,l):(typeof l=="number"||typeof l=="bigint")&&Fn(e,""+l);break;case"onScroll":l!=null&&We("scroll",e);break;case"onScrollEnd":l!=null&&We("scrollend",e);break;case"onClick":l!=null&&(e.onclick=cn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(o=a.endsWith("Capture"),t=a.slice(2,o?a.length-7:void 0),u=e[Tt]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,o),typeof l=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,o);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Cn(e,a,l)}}}function ia(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",e),We("load",e);var l=!1,o=!1,u;for(u in a)if(a.hasOwnProperty(u)){var h=a[u];if(h!=null)switch(u){case"src":l=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:pt(e,t,u,h,a,null)}}o&&pt(e,t,"srcSet",a.srcSet,a,null),l&&pt(e,t,"src",a.src,a,null);return;case"input":We("invalid",e);var b=u=h=o=null,A=null,Y=null;for(l in a)if(a.hasOwnProperty(l)){var te=a[l];if(te!=null)switch(l){case"name":o=te;break;case"type":h=te;break;case"checked":A=te;break;case"defaultChecked":Y=te;break;case"value":u=te;break;case"defaultValue":b=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(c(137,t));break;default:pt(e,t,l,te,a,null)}}Ps(e,u,b,A,Y,h,o,!1);return;case"select":We("invalid",e),l=h=u=null;for(o in a)if(a.hasOwnProperty(o)&&(b=a[o],b!=null))switch(o){case"value":u=b;break;case"defaultValue":h=b;break;case"multiple":l=b;default:pt(e,t,o,b,a,null)}t=u,a=h,e.multiple=!!l,t!=null?Tn(e,!!l,t,!1):a!=null&&Tn(e,!!l,a,!0);return;case"textarea":We("invalid",e),u=o=l=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":l=b;break;case"defaultValue":o=b;break;case"children":u=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(c(91));break;default:pt(e,t,h,b,a,null)}Tl(e,l,o,u);return;case"option":for(A in a)a.hasOwnProperty(A)&&(l=a[A],l!=null)&&(A==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":pt(e,t,A,l,a,null));return;case"dialog":We("beforetoggle",e),We("toggle",e),We("cancel",e),We("close",e);break;case"iframe":case"object":We("load",e);break;case"video":case"audio":for(l=0;l<Rr.length;l++)We(Rr[l],e);break;case"image":We("error",e),We("load",e);break;case"details":We("toggle",e);break;case"embed":case"source":case"link":We("error",e),We("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(l=a[Y],l!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:pt(e,t,Y,l,a,null)}return;default:if(Js(t)){for(te in a)a.hasOwnProperty(te)&&(l=a[te],l!==void 0&&iu(e,t,te,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&pt(e,t,b,l,a,null))}function Iv(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,u=null,h=null,b=null,A=null,Y=null,te=null;for(Z in a){var le=a[Z];if(a.hasOwnProperty(Z)&&le!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":A=le;default:l.hasOwnProperty(Z)||pt(e,t,Z,null,l,le)}}for(var K in l){var Z=l[K];if(le=a[K],l.hasOwnProperty(K)&&(Z!=null||le!=null))switch(K){case"type":u=Z;break;case"name":o=Z;break;case"checked":Y=Z;break;case"defaultChecked":te=Z;break;case"value":h=Z;break;case"defaultValue":b=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(c(137,t));break;default:Z!==le&&pt(e,t,K,Z,l,le)}}Ks(e,h,b,A,Y,te,u,o);return;case"select":Z=h=b=K=null;for(u in a)if(A=a[u],a.hasOwnProperty(u)&&A!=null)switch(u){case"value":break;case"multiple":Z=A;default:l.hasOwnProperty(u)||pt(e,t,u,null,l,A)}for(o in l)if(u=l[o],A=a[o],l.hasOwnProperty(o)&&(u!=null||A!=null))switch(o){case"value":K=u;break;case"defaultValue":b=u;break;case"multiple":h=u;default:u!==A&&pt(e,t,o,u,l,A)}t=b,a=h,l=Z,K!=null?Tn(e,!!a,K,!1):!!l!=!!a&&(t!=null?Tn(e,!!a,t,!0):Tn(e,!!a,a?[]:"",!1));return;case"textarea":Z=K=null;for(b in a)if(o=a[b],a.hasOwnProperty(b)&&o!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:pt(e,t,b,null,l,o)}for(h in l)if(o=l[h],u=a[h],l.hasOwnProperty(h)&&(o!=null||u!=null))switch(h){case"value":K=o;break;case"defaultValue":Z=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(c(91));break;default:o!==u&&pt(e,t,h,o,l,u)}Xs(e,K,Z);return;case"option":for(var Ee in a)K=a[Ee],a.hasOwnProperty(Ee)&&K!=null&&!l.hasOwnProperty(Ee)&&(Ee==="selected"?e.selected=!1:pt(e,t,Ee,null,l,K));for(A in l)K=l[A],Z=a[A],l.hasOwnProperty(A)&&K!==Z&&(K!=null||Z!=null)&&(A==="selected"?e.selected=K&&typeof K!="function"&&typeof K!="symbol":pt(e,t,A,K,l,Z));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in a)K=a[xe],a.hasOwnProperty(xe)&&K!=null&&!l.hasOwnProperty(xe)&&pt(e,t,xe,null,l,K);for(Y in l)if(K=l[Y],Z=a[Y],l.hasOwnProperty(Y)&&K!==Z&&(K!=null||Z!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(c(137,t));break;default:pt(e,t,Y,K,l,Z)}return;default:if(Js(t)){for(var vt in a)K=a[vt],a.hasOwnProperty(vt)&&K!==void 0&&!l.hasOwnProperty(vt)&&iu(e,t,vt,void 0,l,K);for(te in l)K=l[te],Z=a[te],!l.hasOwnProperty(te)||K===Z||K===void 0&&Z===void 0||iu(e,t,te,K,l,Z);return}}for(var L in a)K=a[L],a.hasOwnProperty(L)&&K!=null&&!l.hasOwnProperty(L)&&pt(e,t,L,null,l,K);for(le in l)K=l[le],Z=a[le],!l.hasOwnProperty(le)||K===Z||K==null&&Z==null||pt(e,t,le,K,l,Z)}function Wf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Kv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var o=a[l],u=o.transferSize,h=o.initiatorType,b=o.duration;if(u&&b&&Wf(h)){for(h=0,b=o.responseEnd,l+=1;l<a.length;l++){var A=a[l],Y=A.startTime;if(Y>b)break;var te=A.transferSize,le=A.initiatorType;te&&Wf(le)&&(A=A.responseEnd,h+=te*(A<b?1:(b-Y)/(A-Y)))}if(--l,t+=8*(u+h)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var cu=null,ou=null;function Qi(e){return e.nodeType===9?e:e.ownerDocument}function eh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function th(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function uu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var du=null;function Pv(){var e=window.event;return e&&e.type==="popstate"?e===du?!1:(du=e,!0):(du=null,!1)}var ah=typeof setTimeout=="function"?setTimeout:void 0,Qv=typeof clearTimeout=="function"?clearTimeout:void 0,nh=typeof Promise=="function"?Promise:void 0,Xv=typeof queueMicrotask=="function"?queueMicrotask:typeof nh<"u"?function(e){return nh.resolve(null).then(e).catch(Jv)}:ah;function Jv(e){setTimeout(function(){throw e})}function yl(e){return e==="head"}function lh(e,t){var a=t,l=0;do{var o=a.nextSibling;if(e.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(o),Os(t);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")xr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,xr(a);for(var u=a.firstChild;u;){var h=u.nextSibling,b=u.nodeName;u[Qn]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=h}}else a==="body"&&xr(e.ownerDocument.body);a=o}while(a);Os(t)}function sh(e,t){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function mu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":mu(a),Ys(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Zv(e,t,a,l){for(;e.nodeType===1;){var o=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Qn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Wa(e.nextSibling),e===null)break}return null}function Fv(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Wa(e.nextSibling),e===null))return null;return e}function rh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Wa(e.nextSibling),e===null))return null;return e}function fu(e){return e.data==="$?"||e.data==="$~"}function hu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Wv(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Wa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var pu=null;function ih(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Wa(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function ch(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function oh(e,t,a){switch(t=Qi(a),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function xr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ys(e)}var en=new Map,uh=new Set;function Xi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Hn=ue.d;ue.d={f:eg,r:tg,D:ag,C:ng,L:lg,m:sg,X:ig,S:rg,M:cg};function eg(){var e=Hn.f(),t=Li();return e||t}function tg(e){var t=Jn(e);t!==null&&t.tag===5&&t.type==="form"?Tm(t):Hn.r(e)}var Ts=typeof document>"u"?null:document;function dh(e,t,a){var l=Ts;if(l&&typeof t=="string"&&t){var o=wa(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof a=="string"&&(o+='[crossorigin="'+a+'"]'),uh.has(o)||(uh.add(o),e={rel:e,crossOrigin:a,href:t},l.querySelector(o)===null&&(t=l.createElement("link"),ia(t,"link",e),xt(t),l.head.appendChild(t)))}}function ag(e){Hn.D(e),dh("dns-prefetch",e,null)}function ng(e,t){Hn.C(e,t),dh("preconnect",e,t)}function lg(e,t,a){Hn.L(e,t,a);var l=Ts;if(l&&e&&t){var o='link[rel="preload"][as="'+wa(t)+'"]';t==="image"&&a&&a.imageSrcSet?(o+='[imagesrcset="'+wa(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(o+='[imagesizes="'+wa(a.imageSizes)+'"]')):o+='[href="'+wa(e)+'"]';var u=o;switch(t){case"style":u=ks(e);break;case"script":u=As(e)}en.has(u)||(e=E({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),en.set(u,e),l.querySelector(o)!==null||t==="style"&&l.querySelector(Mr(u))||t==="script"&&l.querySelector(Ur(u))||(t=l.createElement("link"),ia(t,"link",e),xt(t),l.head.appendChild(t)))}}function sg(e,t){Hn.m(e,t);var a=Ts;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+wa(l)+'"][href="'+wa(e)+'"]',u=o;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=As(e)}if(!en.has(u)&&(e=E({rel:"modulepreload",href:e},t),en.set(u,e),a.querySelector(o)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ur(u)))return}l=a.createElement("link"),ia(l,"link",e),xt(l),a.head.appendChild(l)}}}function rg(e,t,a){Hn.S(e,t,a);var l=Ts;if(l&&e){var o=gn(l).hoistableStyles,u=ks(e);t=t||"default";var h=o.get(u);if(!h){var b={loading:0,preload:null};if(h=l.querySelector(Mr(u)))b.loading=5;else{e=E({rel:"stylesheet",href:e,"data-precedence":t},a),(a=en.get(u))&&vu(e,a);var A=h=l.createElement("link");xt(A),ia(A,"link",e),A._p=new Promise(function(Y,te){A.onload=Y,A.onerror=te}),A.addEventListener("load",function(){b.loading|=1}),A.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Ji(h,t,l)}h={type:"stylesheet",instance:h,count:1,state:b},o.set(u,h)}}}function ig(e,t){Hn.X(e,t);var a=Ts;if(a&&e){var l=gn(a).hoistableScripts,o=As(e),u=l.get(o);u||(u=a.querySelector(Ur(o)),u||(e=E({src:e,async:!0},t),(t=en.get(o))&&gu(e,t),u=a.createElement("script"),xt(u),ia(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(o,u))}}function cg(e,t){Hn.M(e,t);var a=Ts;if(a&&e){var l=gn(a).hoistableScripts,o=As(e),u=l.get(o);u||(u=a.querySelector(Ur(o)),u||(e=E({src:e,async:!0,type:"module"},t),(t=en.get(o))&&gu(e,t),u=a.createElement("script"),xt(u),ia(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(o,u))}}function mh(e,t,a,l){var o=(o=ze.current)?Xi(o):null;if(!o)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=ks(a.href),a=gn(o).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=ks(a.href);var u=gn(o).hoistableStyles,h=u.get(e);if(h||(o=o.ownerDocument||o,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=o.querySelector(Mr(e)))&&!u._p&&(h.instance=u,h.state.loading=5),en.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},en.set(e,a),u||og(o,e,a,h.state))),t&&l===null)throw Error(c(528,""));return h}if(t&&l!==null)throw Error(c(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=As(a),a=gn(o).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function ks(e){return'href="'+wa(e)+'"'}function Mr(e){return'link[rel="stylesheet"]['+e+"]"}function fh(e){return E({},e,{"data-precedence":e.precedence,precedence:null})}function og(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),ia(t,"link",a),xt(t),e.head.appendChild(t))}function As(e){return'[src="'+wa(e)+'"]'}function Ur(e){return"script[async]"+e}function hh(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+wa(a.href)+'"]');if(l)return t.instance=l,xt(l),l;var o=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),xt(l),ia(l,"style",o),Ji(l,a.precedence,e),t.instance=l;case"stylesheet":o=ks(a.href);var u=e.querySelector(Mr(o));if(u)return t.state.loading|=4,t.instance=u,xt(u),u;l=fh(a),(o=en.get(o))&&vu(l,o),u=(e.ownerDocument||e).createElement("link"),xt(u);var h=u;return h._p=new Promise(function(b,A){h.onload=b,h.onerror=A}),ia(u,"link",l),t.state.loading|=4,Ji(u,a.precedence,e),t.instance=u;case"script":return u=As(a.src),(o=e.querySelector(Ur(u)))?(t.instance=o,xt(o),o):(l=a,(o=en.get(u))&&(l=E({},a),gu(l,o)),e=e.ownerDocument||e,o=e.createElement("script"),xt(o),ia(o,"link",l),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Ji(l,a.precedence,e));return t.instance}function Ji(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=l.length?l[l.length-1]:null,u=o,h=0;h<l.length;h++){var b=l[h];if(b.dataset.precedence===t)u=b;else if(u!==o)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function vu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function gu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Zi=null;function ph(e,t,a){if(Zi===null){var l=new Map,o=Zi=new Map;o.set(a,l)}else o=Zi,l=o.get(a),l||(l=new Map,o.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),o=0;o<a.length;o++){var u=a[o];if(!(u[Qn]||u[zt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var h=u.getAttribute(t)||"";h=e+h;var b=l.get(h);b?b.push(u):l.set(h,[u])}}return l}function vh(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function ug(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function gh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function dg(e,t,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var o=ks(l.href),u=t.querySelector(Mr(o));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Fi.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=u,xt(u);return}u=t.ownerDocument||t,l=fh(l),(o=en.get(o))&&vu(l,o),u=u.createElement("link"),xt(u);var h=u;h._p=new Promise(function(b,A){h.onload=b,h.onerror=A}),ia(u,"link",l),a.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Fi.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var yu=0;function mg(e,t){return e.stylesheets&&e.count===0&&ec(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&ec(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&yu===0&&(yu=62500*Kv());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ec(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>yu?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(o)}}:null}function Fi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ec(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Wi=null;function ec(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Wi=new Map,t.forEach(fg,e),Wi=null,Fi.call(e))}function fg(e,t){if(!(t.state.loading&4)){var a=Wi.get(e);if(a)var l=a.get(null);else{a=new Map,Wi.set(e,a);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<o.length;u++){var h=o[u];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(a.set(h.dataset.precedence,h),l=h)}l&&a.set(null,l)}o=t.instance,h=o.getAttribute("data-precedence"),u=a.get(h)||l,u===l&&a.set(null,o),a.set(h,o),this.count++,l=Fi.bind(this),o.addEventListener("load",l),o.addEventListener("error",l),u?u.parentNode.insertBefore(o,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var jr={$$typeof:J,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function hg(e,t,a,l,o,u,h,b,A){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nn(0),this.hiddenUpdates=nn(null),this.identifierPrefix=l,this.onUncaughtError=o,this.onCaughtError=u,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function yh(e,t,a,l,o,u,h,b,A,Y,te,le){return e=new hg(e,t,a,h,A,Y,te,le,b),t=1,u===!0&&(t|=24),u=xa(3,null,null,t),e.current=u,u.stateNode=e,t=Jc(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:l,isDehydrated:a,cache:t},eo(u),e}function bh(e){return e?(e=ss,e):ss}function Eh(e,t,a,l,o,u){o=bh(o),l.context===null?l.context=o:l.pendingContext=o,l=il(t),l.payload={element:a},u=u===void 0?null:u,u!==null&&(l.callback=u),a=cl(e,l,t),a!==null&&(ka(a,e,t),fr(a,e,t))}function _h(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function bu(e,t){_h(e,t),(e=e.alternate)&&_h(e,t)}function wh(e){if(e.tag===13||e.tag===31){var t=Rl(e,67108864);t!==null&&ka(t,e,67108864),bu(e,67108864)}}function Sh(e){if(e.tag===13||e.tag===31){var t=za();t=ea(t);var a=Rl(e,t);a!==null&&ka(a,e,t),bu(e,t)}}var tc=!0;function pg(e,t,a,l){var o=I.T;I.T=null;var u=ue.p;try{ue.p=2,Eu(e,t,a,l)}finally{ue.p=u,I.T=o}}function vg(e,t,a,l){var o=I.T;I.T=null;var u=ue.p;try{ue.p=8,Eu(e,t,a,l)}finally{ue.p=u,I.T=o}}function Eu(e,t,a,l){if(tc){var o=_u(l);if(o===null)ru(e,t,l,ac,a),Ch(e,l);else if(yg(o,e,t,a,l))l.stopPropagation();else if(Ch(e,l),t&4&&-1<gg.indexOf(e)){for(;o!==null;){var u=Jn(o);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var h=Ot(u.pendingLanes);if(h!==0){var b=u;for(b.pendingLanes|=2,b.entangledLanes|=2;h;){var A=1<<31-qe(h);b.entanglements[1]|=A,h&=~A}wn(u),(ct&6)===0&&(qi=Ht()+500,Or(0))}}break;case 31:case 13:b=Rl(u,2),b!==null&&ka(b,u,2),Li(),bu(u,2)}if(u=_u(l),u===null&&ru(e,t,l,ac,a),u===o)break;o=u}o!==null&&l.stopPropagation()}else ru(e,t,l,null,a)}}function _u(e){return e=Zs(e),wu(e)}var ac=null;function wu(e){if(ac=null,e=Xn(e),e!==null){var t=m(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=p(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ac=e,null}function Nh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(G()){case de:return 2;case Ge:return 8;case He:case nt:return 32;case ot:return 268435456;default:return 32}default:return 32}}var Su=!1,bl=null,El=null,_l=null,Br=new Map,zr=new Map,wl=[],gg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ch(e,t){switch(e){case"focusin":case"focusout":bl=null;break;case"dragenter":case"dragleave":El=null;break;case"mouseover":case"mouseout":_l=null;break;case"pointerover":case"pointerout":Br.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zr.delete(t.pointerId)}}function qr(e,t,a,l,o,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:u,targetContainers:[o]},t!==null&&(t=Jn(t),t!==null&&wh(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function yg(e,t,a,l,o){switch(t){case"focusin":return bl=qr(bl,e,t,a,l,o),!0;case"dragenter":return El=qr(El,e,t,a,l,o),!0;case"mouseover":return _l=qr(_l,e,t,a,l,o),!0;case"pointerover":var u=o.pointerId;return Br.set(u,qr(Br.get(u)||null,e,t,a,l,o)),!0;case"gotpointercapture":return u=o.pointerId,zr.set(u,qr(zr.get(u)||null,e,t,a,l,o)),!0}return!1}function Th(e){var t=Xn(e.target);if(t!==null){var a=m(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,ma(e.priority,function(){Sh(a)});return}}else if(t===31){if(t=p(a),t!==null){e.blockedOn=t,ma(e.priority,function(){Sh(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=_u(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Va=l,a.target.dispatchEvent(l),Va=null}else return t=Jn(a),t!==null&&wh(t),e.blockedOn=a,!1;t.shift()}return!0}function kh(e,t,a){nc(e)&&a.delete(t)}function bg(){Su=!1,bl!==null&&nc(bl)&&(bl=null),El!==null&&nc(El)&&(El=null),_l!==null&&nc(_l)&&(_l=null),Br.forEach(kh),zr.forEach(kh)}function lc(e,t){e.blockedOn===t&&(e.blockedOn=null,Su||(Su=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,bg)))}var sc=null;function Ah(e){sc!==e&&(sc=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){sc===e&&(sc=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],o=e[t+2];if(typeof l!="function"){if(wu(l||a)===null)continue;break}var u=Jn(a);u!==null&&(e.splice(t,3),t-=3,_o(u,{pending:!0,data:o,method:a.method,action:l},l,o))}}))}function Os(e){function t(A){return lc(A,e)}bl!==null&&lc(bl,e),El!==null&&lc(El,e),_l!==null&&lc(_l,e),Br.forEach(t),zr.forEach(t);for(var a=0;a<wl.length;a++){var l=wl[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<wl.length&&(a=wl[0],a.blockedOn===null);)Th(a),a.blockedOn===null&&wl.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var o=a[l],u=a[l+1],h=o[Tt]||null;if(typeof u=="function")h||Ah(a);else if(h){var b=null;if(u&&u.hasAttribute("formAction")){if(o=u,h=u[Tt]||null)b=h.formAction;else if(wu(o)!==null)continue}else b=h.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),Ah(a)}}}function Oh(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(h){return o=h})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Nu(e){this._internalRoot=e}rc.prototype.render=Nu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var a=t.current,l=za();Eh(a,l,e,t,null,null)},rc.prototype.unmount=Nu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Eh(e.current,2,null,e,null,null),Li(),t[vn]=null}};function rc(e){this._internalRoot=e}rc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ze();e={blockedOn:null,target:e,priority:t};for(var a=0;a<wl.length&&t!==0&&t<wl[a].priority;a++);wl.splice(a,0,e),a===0&&Th(e)}};var Rh=n.version;if(Rh!=="19.2.3")throw Error(c(527,Rh,"19.2.3"));ue.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=g(t),e=e!==null?T(e):null,e=e===null?null:e.stateNode,e};var Eg={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{Ct=ic.inject(Eg),wt=ic}catch{}}return $r.createRoot=function(e,t){if(!d(e))throw Error(c(299));var a=!1,l="",o=Bm,u=zm,h=qm;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=yh(e,1,!1,null,null,a,l,null,o,u,h,Oh),e[vn]=t.current,su(e),new Nu(t)},$r.hydrateRoot=function(e,t,a){if(!d(e))throw Error(c(299));var l=!1,o="",u=Bm,h=zm,b=qm,A=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(h=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(A=a.formState)),t=yh(e,1,!0,t,a??null,l,o,A,u,h,b,Oh),t.context=bh(null),a=t.current,l=za(),l=ea(l),o=il(l),o.callback=null,cl(a,o,l),a=l,t.current.lanes=a,va(t,a),wn(t),e[vn]=t.current,su(e),new rc(t)},$r.version="19.2.3",$r}var qh;function Ag(){if(qh)return Tu.exports;qh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Tu.exports=kg(),Tu.exports}var Og=Ag();const Rg=mp(Og),Ru=[{id:1,name:"Gojo",maxHp:105,hp:105,maxMana:100,mana:100,attack:24,defense:18,cursedOutput:30,cursedResistance:22,critChance:.05,rarity:"UR",passive:{name:"Six Eyes",description:"Cooldowns reduce 1 turn faster, cursed energy costs reduced by 10%",type:"cooldown-reduction",value:1,manaReduction:.1},abilities:[{id:"gojo-1",name:"Infinity",description:"Raises a cursed barrier for the next enemy turn",type:"defensive",barrierValue:60,barrierDuration:1,manaCost:30,cooldown:3,currentCooldown:0},{id:"gojo-2",name:"Red - Reversal",description:"Deals 34 base damage + 20% cursed output",type:"attack",damageBase:34,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",manaCost:25,cooldown:2,currentCooldown:0},{id:"gojo-3",name:"Blue - Lapse",description:"Deals 22 base damage + binds for 1 turn",type:"attack-stun",damageBase:22,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",bindingDuration:1,manaCost:35,cooldown:3,currentCooldown:0}],ultimate:{id:"gojo-ult",name:"Hollow Purple",description:"Deals 55 base damage to all enemies",type:"attack-all",damageBase:55,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",manaCost:75,cooldown:5,currentCooldown:0}},{id:2,name:"Yuji",maxHp:95,hp:95,maxMana:100,mana:100,attack:22,defense:18,cursedOutput:16,cursedResistance:18,critChance:.05,rarity:"SSR",passive:{name:"Vessel Body",description:"Heals 6 HP at the start of each turn",type:"regen",value:6},abilities:[{id:"yuji-1",name:"Divergent Fist",description:"Deals 30 base damage + 20% Attack",type:"attack",damageBase:30,scaling:.2,scalingStat:"attack",damageType:"physical",manaCost:20,cooldown:2,currentCooldown:0},{id:"yuji-2",name:"Manji Kick",description:"Deals 24 base damage + 20% Attack",type:"attack",damageBase:24,scaling:.2,scalingStat:"attack",damageType:"physical",manaCost:15,cooldown:1,currentCooldown:0},{id:"yuji-3",name:"Adrenaline Rush",description:"Reinforces Attack by 14 for 2 turns",type:"buff",buffStat:"attack",buffAmount:14,duration:2,manaCost:30,cooldown:3,currentCooldown:0}],ultimate:{id:"yuji-ult",name:"Black Flash",description:"Deals 70 base damage + 20% Attack",type:"attack",damageBase:70,scaling:.2,scalingStat:"attack",damageType:"physical",manaCost:70,cooldown:5,currentCooldown:0}},{id:3,name:"Megumi",maxHp:88,hp:88,maxMana:100,mana:100,attack:19,defense:16,cursedOutput:24,cursedResistance:18,critChance:.05,rarity:"SSR",passive:{name:"Ten Shadows",description:"All attacks deal 10% bonus damage",type:"damage-boost",value:.1},abilities:[{id:"megumi-1",name:"Divine Dogs",description:"Deals 24 base damage + 20% cursed output",type:"attack",damageBase:24,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",manaCost:20,cooldown:1,currentCooldown:0},{id:"megumi-2",name:"Nue",description:"Deals 20 base damage + binds for 1 turn",type:"attack-stun",damageBase:20,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",bindingDuration:1,manaCost:35,cooldown:3,currentCooldown:0},{id:"megumi-3",name:"Toad",description:"Heals all allies for 18 HP",type:"heal-all",healAmount:18,manaCost:40,cooldown:3,currentCooldown:0}],ultimate:{id:"megumi-ult",name:"Chimera Shadow Garden",description:"Deals 38 base damage to all enemies and heals allies",type:"ultimate-megumi",damageBase:38,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",healAmount:22,manaCost:80,cooldown:6,currentCooldown:0}},{id:4,name:"Nobara",maxHp:82,hp:82,maxMana:100,mana:100,attack:21,defense:15,cursedOutput:22,cursedResistance:16,critChance:.05,rarity:"SR",passive:{name:"Resonance",description:"Attacks have a 20% chance to hit twice",type:"double-hit",value:.2},abilities:[{id:"nobara-1",name:"Straw Doll",description:"Deals 24 base damage + 20% cursed output",type:"attack",damageBase:24,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",manaCost:20,cooldown:1,currentCooldown:0},{id:"nobara-2",name:"Hairpin",description:"Deals 32 base damage + 20% cursed output",type:"attack",damageBase:32,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",manaCost:30,cooldown:3,currentCooldown:0},{id:"nobara-3",name:"Resonance Link",description:"Applies 15% curse amplification for 2 turns",type:"debuff-mark",damageAmp:.15,duration:2,manaCost:35,cooldown:3,currentCooldown:0}],ultimate:{id:"nobara-ult",name:"Black Flash Hairpin",description:"Deals 64 base damage + 20% cursed output",type:"attack",damageBase:64,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",manaCost:70,cooldown:5,currentCooldown:0}},{id:5,name:"Nanami",maxHp:98,hp:98,maxMana:100,mana:100,attack:25,defense:20,cursedOutput:12,cursedResistance:18,critChance:.05,rarity:"SSR",passive:{name:"Ratio Technique",description:"Attacks deal 20% bonus damage to enemies below 50% HP",type:"execute",value:.2,threshold:.5},abilities:[{id:"nanami-1",name:"Blunted Blade",description:"Deals 26 base damage + 20% Attack",type:"attack",damageBase:26,scaling:.2,scalingStat:"attack",damageType:"physical",manaCost:20,cooldown:1,currentCooldown:0},{id:"nanami-2",name:"Weak Point Strike",description:"Deals 38 base damage, +20 if target below 50% HP",type:"attack-execute",damageBase:38,scaling:.2,scalingStat:"attack",damageType:"physical",bonusDamage:20,threshold:.5,manaCost:35,cooldown:2,currentCooldown:0},{id:"nanami-3",name:"Overtime",description:"Reinforces Attack, but costs HP",type:"buff-self-damage",buffStat:"attack",buffAmount:22,duration:3,selfDamage:8,manaCost:30,cooldown:4,currentCooldown:0}],ultimate:{id:"nanami-ult",name:"Collapse",description:"Deals 85 base damage + 20% Attack",type:"attack",damageBase:85,scaling:.2,scalingStat:"attack",damageType:"physical",manaCost:80,cooldown:6,currentCooldown:0}},{id:6,name:"Jogo",maxHp:78,hp:78,maxMana:100,mana:100,attack:20,defense:14,cursedOutput:26,cursedResistance:18,critChance:.05,rarity:"SR",passive:{name:"Disaster Flame",description:"Attacks inflict Cursed Burn for 6 damage",type:"burn",value:6},abilities:[{id:"jogo-1",name:"Ember Insects",description:"Deals 20 base damage + 20% cursed output",type:"attack",damageBase:20,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",manaCost:15,cooldown:1,currentCooldown:0},{id:"jogo-2",name:"Flame Pillar",description:"Deals 28 base damage + 20% cursed output",type:"attack",damageBase:28,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",manaCost:25,cooldown:2,currentCooldown:0},{id:"jogo-3",name:"Coffin of the Iron Mountain",description:"Binds a target for 2 turns",type:"stun-only",bindingDuration:2,manaCost:45,cooldown:4,currentCooldown:0}],ultimate:{id:"jogo-ult",name:"Maximum Meteor",description:"Deals 62 base damage to all enemies",type:"attack-all",damageBase:62,scaling:.2,scalingStat:"cursedOutput",damageType:"cursed",manaCost:75,cooldown:6,currentCooldown:0}},{id:7,name:"Panda",maxHp:115,hp:115,maxMana:100,mana:100,attack:26,defense:20,cursedOutput:14,cursedResistance:18,critChance:.05,rarity:"SSR",passive:{name:"Gorilla Core",description:"After 3 techniques, awaken Gorilla Core for 2 turns",type:"gorilla-core"},abilities:[{id:"panda-1",name:"Drumming Beat",description:"Deals 80 base damage + 120% Attack",type:"attack",damageBase:80,scaling:1.2,scalingStat:"attack",damageType:"physical",coreDefenseDebuffPercent:.2,coreDefenseDebuffDuration:2,manaCost:30,cooldown:2,currentCooldown:0},{id:"panda-2",name:"Charging Tackle",description:"Deals 60 base damage + 100% Attack, reinforces Defense",type:"attack",damageBase:60,scaling:1,scalingStat:"attack",damageType:"physical",selfDefenseBuffPercent:.15,selfDefenseBuffDuration:2,coreAllEnemies:!0,manaCost:40,cooldown:3,currentCooldown:0},{id:"panda-3",name:"Sister Core's Embrace",description:"Heals self for 20% HP and cleanses one affliction",type:"heal-self",healPercent:.2,cleanseDebuff:!0,resetTechniqueCounter:!0,manaCost:50,cooldown:4,currentCooldown:0}],ultimate:{id:"panda-ult",name:"Unblockable Drumming Beat",description:"Deals 100 base damage to all enemies (Gorilla Core required)",type:"attack-all",damageBase:100,scaling:1.5,scalingStat:"attack",damageType:"physical",requiresGorillaCore:!0,coreDamageBase:150,coreScaling:2,coreBindDuration:1,manaCost:100,cooldown:5,currentCooldown:0}},{id:8,name:"Toge Inumaki",maxHp:88,hp:88,maxMana:120,mana:120,attack:16,defense:15,cursedOutput:30,cursedResistance:20,critChance:.05,rarity:"SSR",passive:{name:"Cursed Speech Resonance",description:"Cursed Speech techniques apply Speech Mark stacks",type:"speech-mark"},abilities:[{id:"inumaki-1",name:"Don't Move",description:"Deals 40 base damage + 80% output and binds",type:"attack-stun",damageBase:40,scaling:.8,scalingStat:"cursedOutput",damageType:"cursed",bindingDuration:1,speechMarkStacks:1,manaCost:35,cooldown:2,currentCooldown:0},{id:"inumaki-2",name:"Get Crushed",description:"Deals 70 base damage + 110% output, lowers Attack",type:"attack",damageBase:70,scaling:1.1,scalingStat:"cursedOutput",damageType:"cursed",attackDebuffPercent:.25,attackDebuffDuration:2,speechMarkStacks:1,manaCost:45,cooldown:3,currentCooldown:0},{id:"inumaki-3",name:"Explode",description:"Deals 50 base damage to all enemies, marks primary",type:"attack-all-primary-mark",damageBase:50,scaling:.9,scalingStat:"cursedOutput",damageType:"cursed",applySpeechMark:!0,manaCost:40,cooldown:3,currentCooldown:0}],ultimate:{id:"inumaki-ult",name:"Blast Away",description:"Deals 120 base damage and binds all enemies",type:"attack-all",damageBase:120,scaling:1.8,scalingStat:"cursedOutput",damageType:"cursed",bindingAllDuration:1,speechMarkAllStacks:2,recoilPercent:.1,manaCost:120,cooldown:6,currentCooldown:0}},{id:9,name:"Maki Zen'in",maxHp:100,hp:100,maxMana:80,mana:80,attack:28,defense:22,cursedOutput:10,cursedResistance:16,critChance:.05,rarity:"SSR",passive:{name:"Heavenly Restriction",description:"No natural cursed energy regen, +20% crit chance",type:"heavenly-restriction",critBonus:.2},abilities:[{id:"maki-1",name:"Cursed Tool Flurry",description:"Deals 50 base damage + 100% Attack",type:"attack",damageBase:50,scaling:1,scalingStat:"attack",damageType:"physical",isBasic:!0,onCritCooldownReduction:!0,manaCost:25,cooldown:1,currentCooldown:0},{id:"maki-2",name:"Precision Thrust",description:"Deals 90 base damage + 140% Attack, guaranteed crit",type:"attack",damageBase:90,scaling:1.4,scalingStat:"attack",damageType:"physical",guaranteedCrit:!0,damageAmp:.15,damageAmpDuration:2,manaCost:40,cooldown:3,currentCooldown:0},{id:"maki-3",name:"Weapon Arsenal",description:"Deals 40 base damage to 2 random enemies",type:"attack-random",damageBase:40,scaling:.8,scalingStat:"attack",damageType:"physical",targetCount:2,selfAttackBuffPercent:.3,selfAttackBuffDuration:3,setNextBasicDouble:!0,manaCost:35,cooldown:3,currentCooldown:0}],ultimate:{id:"maki-ult",name:"Three-Section Staff Maelstrom",description:"Deals 110 base damage to all enemies",type:"attack-all",damageBase:110,scaling:1.7,scalingStat:"attack",damageType:"physical",energyRestorePerHit:15,grantFlowStateTurns:3,manaCost:80,cooldown:5,currentCooldown:0}}],Dg="/assets/gojo-oQwO0DXj.png",xg={Gojo:Dg,Yuji:null,Megumi:null,Nobara:null,Todo:null,Nanami:null,Sukuna:null,Mahito:null,Jogo:null},Mg={"gojo-1":null,"gojo-2":null,"gojo-3":null,"gojo-ult":null,"yuji-1":null,"yuji-2":null,"yuji-3":null,"yuji-ult":null,"megumi-1":null,"megumi-2":null,"megumi-3":null,"megumi-ult":null,"sukuna-1":null,"sukuna-2":null,"sukuna-3":null,"sukuna-ult":null,"mahito-1":null,"mahito-2":null,"mahito-3":null,"mahito-ult":null,"jogo-1":null,"jogo-2":null,"jogo-3":null,"jogo-ult":null,"nobara-1":null,"nobara-2":null,"nobara-3":null,"nobara-ult":null,"todo-1":null,"todo-2":null,"todo-3":null,"todo-ult":null,"nanami-1":null,"nanami-2":null,"nanami-3":null,"nanami-ult":null},Yr=i=>xg[i]||null,Ug=i=>Mg[i]||null;function jg({characters:i,selectedTeam:n,onSelect:r,onStartBattle:c,onStartPvpQuick:d,onStartPvpRanked:m,onCancelPvpQueue:f,pvpStatus:p,characterProgress:v,teamPresets:g,onSavePreset:T,onApplyPreset:E}){const R=Q=>n.some(ye=>ye.id===Q),z=v||{},x=n.length===3,H=[0,1,2].map(Q=>n[Q]).filter(Boolean),[j,ee]=s.useState(""),[se,J]=s.useState(i[0]?.id||null),[ge,Se]=s.useState(!1),[D,ce]=s.useState(null),P=i.find(Q=>Q.id===se)||i[0],oe=P?z[P.id]||{level:1,xp:0}:{level:1,xp:0},$e=100+oe.level*25;Math.min(100,Math.floor(oe.xp/$e*100));const Le=i.filter(Q=>Q.name.toLowerCase().includes(j.toLowerCase())),be=n.length>=3,Ye=P?R(P.id):!1,Xe=Q=>{R(Q.id)?r(n.filter(ye=>ye.id!==Q.id)):n.length<3&&r([...n,Q])},_e=(Q,ye)=>{const O=i.find(fe=>fe.id===ye);if(!O)return;const W=[...n],ie=W.findIndex(fe=>fe.id===O.id);ie>=0&&W.splice(ie,1),W.length<3?Q<=W.length?W.splice(Q,0,O):W.push(O):Q<3&&(W[Q]=O),r(W.slice(0,3))},I=Q=>{switch(Q){case"UR":return"linear-gradient(90deg, #ff6b6b, #feca57)";case"SSR":return"#9b59b6";case"SR":return"#3498db";default:return"#95a5a6"}},ue=({character:Q,size:ye="normal"})=>{const O=Q.portraitUrl||Yr(Q.name);return s.createElement("div",{className:`select-portrait ${ye}`},O?s.createElement("img",{src:O,alt:Q.name,className:"select-portrait-img"}):s.createElement("div",{className:"select-portrait-placeholder"},s.createElement("span",{className:"select-portrait-initial"},Q.name[0])))},ve=P?[...P.abilities.slice(0,3),P.ultimate].filter(Boolean):[];return s.createElement("div",{className:"team-select-container"},s.createElement("div",{className:"team-select-grid"},s.createElement("div",{className:"team-left-column"},s.createElement("section",{className:"character-details-panel"},P?s.createElement(s.Fragment,null,s.createElement("div",{className:"details-header-row"},s.createElement("div",{className:"details-header-left"},s.createElement("div",{className:`details-portrait rarity-${P.rarity.toLowerCase()}`},s.createElement(ue,{character:P})),s.createElement("div",{className:"details-meta"},s.createElement("h2",null,P.name),s.createElement("div",{className:"details-level"},"Lv ",oe.level))),s.createElement("div",{className:"details-header-right"},s.createElement("button",{className:"details-primary-btn",onClick:()=>Xe(P),disabled:be&&!Ye},Ye?" Selected":be?"Squad Full":"Add to Squad"))),s.createElement("div",{className:"details-passive-line"},s.createElement("span",null,"Passive:")," ",P.passive.name,"  ",P.passive.description),s.createElement("div",{className:"details-skills"},s.createElement("div",{className:"skills-grid"},ve.map(Q=>{const ye=P?.ultimate?.id===Q.id;return s.createElement("div",{key:Q.id,className:"skill-card"},s.createElement("span",{className:"skill-icon"},""),s.createElement("span",{className:"skill-name"},Q.name),s.createElement("span",{className:"skill-cost"}," ",Q.manaCost??0,"   ",Q.cooldown),s.createElement("div",{className:"skill-tooltip"},s.createElement("div",{className:"skill-tooltip-title"},Q.name),s.createElement("div",{className:"skill-tooltip-desc"},Q.description),s.createElement("div",{className:"skill-tooltip-meta"},s.createElement("span",null,"Cursed Energy: ",Q.manaCost??0),s.createElement("span",null,"Cooldown: ",Q.cooldown),s.createElement("span",null,"Type: ",ye?"Domain Expansion":"Technique"))))})))):s.createElement("div",{className:"details-empty"},s.createElement("div",{className:"empty-state-icon"},""),s.createElement("div",{className:"empty-state-text"},"Select a character to view details"))),s.createElement("section",{className:"character-roster-panel"},s.createElement("div",{className:"section-header"},s.createElement("h2",null,"Character Roster"),s.createElement("span",{className:"selection-count"},n.length,"/3 Selected")),s.createElement("div",{className:"roster-search-bar"},s.createElement("span",{className:"search-icon"},""),s.createElement("input",{type:"text",value:j,onChange:Q=>ee(Q.target.value),placeholder:"Search sorcerers...",className:"search-input"})),s.createElement("div",{className:"roster-grid-container"},Le.map(Q=>{const ye=z[Q.id]||{level:1};return s.createElement("div",{key:Q.id,className:`roster-character-card rarity-${Q.rarity.toLowerCase()} ${R(Q.id)?"is-selected":""} ${se===Q.id?"is-focused":""}`,onClick:()=>J(Q.id),onDoubleClick:()=>Xe(Q),draggable:!0,onDragStart:O=>{O.dataTransfer.setData("text/plain",String(Q.id))}},R(Q.id)&&s.createElement("div",{className:"card-selected-badge"},""),s.createElement("div",{className:"card-portrait"},s.createElement(ue,{character:Q,size:"small"})),s.createElement("div",{className:"card-info"},s.createElement("div",{className:"card-name"},Q.name),s.createElement("div",{className:"card-level"},"Lv ",ye.level)))})))),s.createElement("div",{className:"team-right-column"},s.createElement("section",{className:"squad-panel"},s.createElement("div",{className:"team-panel-header"},s.createElement("h2",null,"Your Squad"),n.length>0&&s.createElement("button",{className:"clear-btn",onClick:()=>r([])},"Clear All")),s.createElement("div",{className:"team-slots team-panel-slots"},[0,1,2].map(Q=>s.createElement("div",{key:Q,className:`team-slot ${n[Q]?"filled":"empty"} ${D===Q?"drag-over":""}`,onDragOver:ye=>ye.preventDefault(),onDragEnter:()=>ce(Q),onDragLeave:()=>ce(null),onDrop:ye=>{ye.preventDefault();const O=Number(ye.dataTransfer.getData("text/plain"));_e(Q,O),ce(null)}},n[Q]?s.createElement(s.Fragment,null,s.createElement("button",{className:"slot-remove",onClick:()=>r(n.filter((ye,O)=>O!==Q)),title:"Remove"},""),s.createElement("div",{className:"slot-portrait"},s.createElement(ue,{character:n[Q]})),s.createElement("div",{className:"slot-info"},s.createElement("div",{className:"slot-name"},n[Q].name),s.createElement("div",{className:"slot-rarity",style:{color:I(n[Q].rarity)}},n[Q].rarity),s.createElement("div",{className:"slot-level"},"Lv ",(z[n[Q].id]||{level:1}).level))):s.createElement("div",{className:"slot-empty-state"},s.createElement("div",{className:"empty-icon"},"+"),s.createElement("div",{className:"empty-text"},"Slot ",Q+1))))),s.createElement("div",{className:`team-ready-indicator ${x?"ready":""}`},x?s.createElement(s.Fragment,null,s.createElement("span",{className:"ready-icon"},""),s.createElement("span",null,"Team Ready!")):s.createElement("span",null,"Select ",3-n.length," more"))),s.createElement("section",{className:"match-controls"},p?s.createElement("div",{className:"pvp-status-container"},s.createElement("div",{className:`pvp-status pvp-status-${p}`},p==="searching"&&s.createElement(s.Fragment,null,s.createElement("div",{className:"status-spinner"}),s.createElement("div",{className:"status-text"},s.createElement("div",{className:"status-title"},"Searching for opponent..."),s.createElement("div",{className:"status-subtitle"},"Finding a worthy adversary"))),p==="match_found"&&s.createElement(s.Fragment,null,s.createElement("div",{className:"status-icon"},""),s.createElement("div",{className:"status-text"},s.createElement("div",{className:"status-title"},"Match Found!"),s.createElement("div",{className:"status-subtitle"},"Preparing for battle..."))),p==="timeout"&&s.createElement(s.Fragment,null,s.createElement("div",{className:"status-icon"},""),s.createElement("div",{className:"status-text"},s.createElement("div",{className:"status-title"},"Search Timed Out"),s.createElement("div",{className:"status-subtitle"},"No opponents found"))),p==="error"&&s.createElement(s.Fragment,null,s.createElement("div",{className:"status-icon"},""),s.createElement("div",{className:"status-text"},s.createElement("div",{className:"status-title"},"Connection Error"),s.createElement("div",{className:"status-subtitle"},"Please try again")))),(p==="searching"||p==="match_found")&&s.createElement("button",{className:"cancel-queue-btn",onClick:f},"Cancel Search")):s.createElement(s.Fragment,null,s.createElement("button",{className:"match-primary-btn",disabled:!x,onClick:d||c},"Quick PvP"),s.createElement("div",{className:"match-secondary-buttons"},s.createElement("button",{className:"match-secondary-btn",disabled:!x,onClick:m},"Ranked PvP"),s.createElement("button",{className:"match-secondary-btn",disabled:!x,onClick:c},"Vs AI"),s.createElement("button",{className:"match-secondary-btn",onClick:()=>Se(Q=>!Q)},ge?"Hide Teams":"Saved Teams"),s.createElement("button",{className:"match-secondary-btn",disabled:!0,title:"Coming soon"},"Random")))))),ge&&s.createElement("div",{className:"presets-modal-overlay",onClick:()=>Se(!1)},s.createElement("div",{className:"presets-modal",onClick:Q=>Q.stopPropagation()},s.createElement("div",{className:"modal-header"},s.createElement("h3",null,"Saved Teams"),s.createElement("button",{className:"modal-close",onClick:()=>Se(!1)},"")),s.createElement("div",{className:"preset-cards"},[1,2,3].map(Q=>{const ye=g?.[Q],O=ye?.name||`Preset ${Q}`;return s.createElement("div",{key:Q,className:"preset-card-modal"},s.createElement("div",{className:"preset-card-header"},s.createElement("span",{className:"preset-number"},"#",Q),s.createElement("span",{className:"preset-name"},O)),s.createElement("div",{className:"preset-card-actions"},s.createElement("button",{className:"preset-action-btn save",onClick:()=>{T?.(Q,O,H.map(W=>W.id)),Se(!1)},disabled:!x}," Save Current"),s.createElement("button",{className:"preset-action-btn load",onClick:()=>{ye?.character_ids&&E?.(ye.character_ids),Se(!1)},disabled:!ye?.character_ids?.length}," Load")))})))))}function Bg({playerTeam:i,enemyTeam:n,selectedEnemy:r,setSelectedEnemy:c,queueAbility:d,queuedActions:m,removeQueuedAction:f,battleLog:p,turn:v,gameOver:g,resetGame:T,actedCharacters:E,pendingAbility:R,setPendingAbility:z,endTurn:x,profile:H,matchSummary:j,combatEvents:ee,battleShake:se,isPvp:J,isMyTurn:ge,storyBattle:Se,onExitStory:D}){const[ce,P]=s.useState(null),[oe,$e]=s.useState([]),[Le,be]=s.useState([]),[Ye,Xe]=s.useState(!1),[_e,I]=s.useState(!1),[ue,ve]=s.useState([]),Q=s.useRef([]),ye=s.useRef([]),O=p?.[p.length-1]||"",W=s.useMemo(()=>new Set(["attack","attack-stun","stun-only","ultimate-mahito","attack-execute","debuff-mark","attack-all-primary-mark","attack-random"]),[]);s.useEffect(()=>{if(g)return;P("YOUR TURN");const G=setTimeout(()=>P(null),1200);return()=>clearTimeout(G)},[v,g]);const ie=(G,de,Ge)=>{const He=G.map(ot=>ot.hp),nt=Ge.current;de(ot=>{const Dt=[...ot];return He.forEach((bt,Ct)=>{nt[Ct]!=null&&bt<nt[Ct]?(Dt[Ct]=nt[Ct],setTimeout(()=>{de(wt=>{const ut=[...wt];return ut[Ct]=bt,ut})},360)):Dt[Ct]=bt}),Dt}),Ge.current=He};s.useEffect(()=>{ie(i,$e,Q)},[i]),s.useEffect(()=>{ie(n,be,ye)},[n]),s.useEffect(()=>{!R?.needsTarget&&c&&c(null)},[R,c]);const fe=(G,de,Ge,He,nt)=>{if(E.includes(G)||nt.hp<=0||He.currentCooldown>0)return;let ot=He.manaCost||0;if(nt.passive?.manaReduction&&(ot=Math.floor(ot*(1-nt.passive.manaReduction))),nt.mana<ot)return;const Dt=W.has(He.type);if(R&&R.characterIndex===G&&R.abilityIndex===de&&R.isUltimate===Ge){z(null),c?.(null);return}if(Dt){z({characterIndex:G,abilityIndex:de,isUltimate:Ge,ability:He,needsTarget:Dt}),c?.(null);return}z(null),c?.(null),d(G,de,Ge,null)},Te=G=>{!R||!R.needsTarget||!n[G]||n[G].hp<=0||(c?.(G),d(R.characterIndex,R.abilityIndex,R.isUltimate,G),z(null))},ze=G=>{const de=G.toLowerCase();return de.includes("victory")?"log-win":de.includes("defeat")||de.includes("ko")?"log-lose":de.includes("heals")||G.includes("")?"log-heal":de.includes("bound")||de.includes("binding")||G.includes("")?"log-stun":de.includes("burn")||G.includes("")?"log-burn":de.includes("barrier")||G.includes("")?"log-shield":de.includes("damage")||G.includes("")||G.includes("")?"log-hit":""},Ie=({character:G,size:de="normal"})=>{const Ge=Yr(G.name),He=de==="small"?"portrait-small":"";return s.createElement("div",{className:`portrait-image-container ${He}`},Ge?s.createElement("img",{src:Ge,alt:G.name,className:"portrait-img"}):s.createElement("div",{className:"portrait-placeholder"},s.createElement("span",{className:"portrait-initial"},G.name[0]),s.createElement("span",{className:"portrait-name-small"},G.name.substring(1,4))))},yt=({ability:G,isUltimate:de})=>{const Ge=Ug(G.id);return s.createElement("div",{className:`ability-icon-container ${de?"ultimate":""}`},Ge?s.createElement("img",{src:Ge,alt:G.name,className:"ability-img"}):s.createElement("div",{className:"ability-placeholder"},s.createElement("span",{className:"ability-initial"},G.name.substring(0,2))),de&&s.createElement("span",{className:"ultimate-star"},""))},Re=({character:G,index:de,isPlayer:Ge,onAbilityClick:He,actedCharacters:nt,pendingAbility:ot,hpPreview:Dt})=>{const bt=G.hp/G.maxHp*100,Ct=Dt!=null?Dt/G.maxHp*100:bt,wt=G.mana/G.maxMana*100,ut=G.hp<=0,qe=nt.includes(de),At=ot&&ot.characterIndex===de,da=Ge&&de===i.length-1;G.level,G.xp;const y=Aa(de),C=y>=0?m[y]:null,re=C?C.isUltimate?G.ultimate:G.abilities[C.abilityIndex]:null,Ke=()=>{y>=0&&f?.(y)},Ot=()=>bt>50?"#2ecc71":bt>25?"#f1c40f":"#e74c3c",aa=G.states?.binding||0,na=G.states?.sleep||0,Oa=G.barrier?.value||0,dt=(G.effects?.dots||[]).find(Ze=>Ze.type==="burn"),nn=(G.effects?.dots||[]).find(Ze=>Ze.type==="poison"),va=G.stacks?.speechMark||0,Sn=(G.effects?.buffs||[]).find(Ze=>Ze.stat==="attack"),Kn=(G.effects?.buffs||[]).find(Ze=>Ze.stat==="defense"),Pn=aa>0||na>0||Oa>0||dt||nn||va>0,Jl=aa>0||na>0||Sn||Kn,ea=(ee||[]).filter(Ze=>Ze.team===(Ge?"player":"enemy")&&Ze.index===de),Nn=ea.some(Ze=>Ze.type==="damage"&&Ze.big);return s.createElement("div",{className:`character-row ${ut?"dead":""} ${qe?"acted":""} ${At?"selecting-target":""} ${ea.length?"hit-flash":""} ${Nn?"crit-flash":""}`},s.createElement("div",{className:`portrait-container ${At?"active":""}`},s.createElement("div",{className:"portrait-frame"},s.createElement(Ie,{character:G}),Pn&&s.createElement("div",{className:"status-icons"},Oa>0&&s.createElement("span",{className:"status-icon invincible",title:`Barrier: ${Oa}`},""),dt&&s.createElement("span",{className:"status-icon burning",title:`Cursed Burn: ${dt.damage} damage`},""),nn&&s.createElement("span",{className:"status-icon burning",title:`Cursed Poison: ${nn.damage} damage`},""),va>0&&s.createElement("span",{className:"status-icon marked",title:`Speech Mark: ${va} stack(s)`},"")),s.createElement("div",{className:`portrait-rarity ${G.rarity.toLowerCase()}`},G.rarity),qe&&!ut&&s.createElement("div",{className:"acted-overlay"},s.createElement("span",null,"")),ut&&s.createElement("div",{className:"dead-overlay"},s.createElement("span",null,""))),s.createElement("p",{className:"portrait-name"},G.name),G.passive&&s.createElement("div",{className:"passive-indicator"},s.createElement("span",{className:"passive-tag"},"Passive"),s.createElement("div",{className:"passive-tooltip"},s.createElement("strong",null,G.passive.name),s.createElement("span",null,G.passive.description))),s.createElement("div",{className:"portrait-hp-bar"},s.createElement("div",{className:"portrait-hp-preview",style:{width:`${Ct}%`}}),s.createElement("div",{className:"portrait-hp-fill",style:{width:`${bt}%`,background:Ot()}}),s.createElement("span",{className:"portrait-hp-text"},G.hp)),s.createElement("div",{className:"portrait-mana-bar"},s.createElement("div",{className:"portrait-mana-fill",style:{width:`${wt}%`}}),s.createElement("span",{className:"portrait-mana-text"},G.mana))),Ge&&Jl&&s.createElement("div",{className:"player-status-row"},aa>0&&s.createElement("span",{className:"status-pill stunned"}," Bound ",aa),na>0&&s.createElement("span",{className:"status-pill stunned"}," Sleep ",na),Sn&&s.createElement("span",{className:"status-pill buffed"}," Attack Up"),Kn&&s.createElement("span",{className:"status-pill buffed"}," Defense Up")),Ge&&s.createElement("div",{className:"ability-cards"},s.createElement("div",{className:`ability-card queue-slot ${C?"queued":""}`,onClick:C?Ke:void 0,title:C?"Click to un-queue":"Queued technique slot"},s.createElement("div",{className:"ability-card-art"},re?s.createElement(yt,{ability:re,isUltimate:C?.isUltimate}):s.createElement("div",{className:"ability-placeholder"},s.createElement("span",{className:"ability-initial"},"Q"))),s.createElement("div",{className:"ability-info"},s.createElement("div",{className:"ability-name"},re?re.name:"Queued"),s.createElement("div",{className:"ability-desc"},C?"Click to clear":"Technique slot")),y>=0&&s.createElement("span",{className:"ability-queue-order"},"#",y+1)),G.abilities.map((Ze,ma)=>s.createElement(ba,{key:Ze.id,ability:Ze,index:ma,isSelected:At&&!ot.isUltimate&&ot.abilityIndex===ma,isQueued:m.some(Xt=>Xt.characterIndex===de&&Xt.abilityIndex===ma&&!Xt.isUltimate),queuedIndex:Ga(de,ma,!1),onSelect:()=>He(de,ma,!1,Ze,G),disabled:qe||ut||Ze.currentCooldown>0||Ze.requiresGorillaCore&&G.flags?.gorillaCoreTurns<=0,characterMana:G.mana,character:G,tooltipUp:da})),s.createElement(ba,{ability:G.ultimate,index:0,isSelected:At&&ot.isUltimate,isQueued:m.some(Ze=>Ze.characterIndex===de&&Ze.isUltimate),queuedIndex:Ga(de,0,!0),onSelect:()=>He(de,0,!0,G.ultimate,G),disabled:qe||ut||G.ultimate.currentCooldown>0||G.ultimate.requiresGorillaCore&&G.flags?.gorillaCoreTurns<=0,isUltimate:!0,characterMana:G.mana,character:G,tooltipUp:da})),!Ge&&Pn&&s.createElement("div",{className:"enemy-status-effects"},Oa>0&&s.createElement("div",{className:"status-badge invincible"},s.createElement("span",{className:"status-emoji"},""),s.createElement("span",{className:"status-count"},Math.round(Oa))),aa>0&&s.createElement("div",{className:"status-badge stunned"},s.createElement("span",{className:"status-emoji"},""),s.createElement("span",{className:"status-count"},aa)),dt&&s.createElement("div",{className:"status-badge burning"},s.createElement("span",{className:"status-emoji"},""),s.createElement("span",{className:"status-count"},dt.damage)),va>0&&s.createElement("div",{className:"status-badge marked"},s.createElement("span",{className:"status-emoji"},""),s.createElement("span",{className:"status-count"},va))),ea.length>0&&s.createElement("div",{className:"damage-floats"},ea.map(Ze=>s.createElement("span",{key:Ze.id,className:`damage-float ${Ze.type} ${Ze.big?"big":""}`},Ze.type==="heal"?`+${Ze.amount}`:`-${Ze.amount}`))))},Qt=({character:G,index:de,isSelected:Ge,onSelect:He,onHover:nt,pendingAbility:ot,hpPreview:Dt})=>{const bt=G.hp/G.maxHp*100,Ct=Dt!=null?Dt/G.maxHp*100:bt,wt=G.mana/G.maxMana*100,ut=G.hp<=0,qe=ot&&ot.needsTarget&&!ut,At=()=>bt>50?"#2ecc71":bt>25?"#f1c40f":"#e74c3c",da=G.states?.binding||0,y=G.states?.sleep||0,C=G.barrier?.value||0,re=(G.effects?.dots||[]).find(dt=>dt.type==="burn"),Ke=(G.effects?.dots||[]).find(dt=>dt.type==="poison"),Ot=G.stacks?.speechMark||0,aa=da>0||y>0||C>0||re||Ke||Ot>0,na=(ee||[]).filter(dt=>dt.team==="enemy"&&dt.index===de),Oa=na.some(dt=>dt.type==="damage"&&dt.big);return s.createElement("div",{className:`character-row enemy ${ut?"dead":""} ${Ge?"selected":""} ${qe?"targetable":""} ${na.length?"hit-flash":""} ${Oa?"crit-flash":""}`,onClick:()=>qe&&He(de),onMouseEnter:()=>qe&&nt?.(de),onMouseLeave:()=>qe&&nt?.(null)},s.createElement("div",{className:`portrait-container ${qe?"targetable":""}`},s.createElement("div",{className:"portrait-frame"},s.createElement(Ie,{character:G}),s.createElement("div",{className:`portrait-rarity ${G.rarity.toLowerCase()}`},G.rarity),ut&&s.createElement("div",{className:"dead-overlay"},s.createElement("span",null,"")),qe&&s.createElement("div",{className:"target-indicator"},s.createElement("span",null,""))),s.createElement("p",{className:"portrait-name"},G.name),s.createElement("div",{className:"portrait-hp-bar"},s.createElement("div",{className:"portrait-hp-preview",style:{width:`${Ct}%`}}),s.createElement("div",{className:"portrait-hp-fill",style:{width:`${bt}%`,background:At()}}),s.createElement("span",{className:"portrait-hp-text"},G.hp)),s.createElement("div",{className:"portrait-mana-bar"},s.createElement("div",{className:"portrait-mana-fill",style:{width:`${wt}%`}}),s.createElement("span",{className:"portrait-mana-text"},G.mana))),aa&&s.createElement("div",{className:"enemy-status-effects"},C>0&&s.createElement("div",{className:"status-badge invincible"},s.createElement("span",{className:"status-emoji"},""),s.createElement("span",{className:"status-count"},Math.round(C))),da>0&&s.createElement("div",{className:"status-badge stunned"},s.createElement("span",{className:"status-emoji"},""),s.createElement("span",{className:"status-count"},da)),re&&s.createElement("div",{className:"status-badge burning"},s.createElement("span",{className:"status-emoji"},""),s.createElement("span",{className:"status-count"},re.damage)),Ke&&s.createElement("div",{className:"status-badge burning"},s.createElement("span",{className:"status-emoji"},""),s.createElement("span",{className:"status-count"},Ke.damage)),Ot>0&&s.createElement("div",{className:"status-badge marked"},s.createElement("span",{className:"status-emoji"},""),s.createElement("span",{className:"status-count"},Ot))),na.length>0&&s.createElement("div",{className:"damage-floats"},na.map(dt=>s.createElement("span",{key:dt.id,className:`damage-float ${dt.type} ${dt.big?"big":""}`},dt.type==="heal"?`+${dt.amount}`:`-${dt.amount}`))))},ba=({ability:G,index:de,isSelected:Ge,isQueued:He,queuedIndex:nt,onSelect:ot,disabled:Dt,isUltimate:bt,characterMana:Ct,character:wt,tooltipUp:ut})=>{let qe=G.manaCost||0;wt.passive?.manaReduction&&(qe=Math.floor(qe*(1-wt.passive.manaReduction)));const At=Ct<qe,da=Dt||At,y=W.has(G.type);return s.createElement("div",{className:`ability-card ${Ge?"selected":""} ${He?"queued":""} ${da?"disabled":""} ${bt?"ultimate":""} ${At?"no-mana":""} ${y?"needs-target":""} ${ut?"tooltip-up":""}`,onClick:()=>!da&&ot()},nt&&s.createElement("span",{className:"ability-queue-order"},"#",nt),y&&s.createElement("span",{className:"ability-target-tag",title:"Requires a target"},""),s.createElement("div",{className:"ability-card-art"},s.createElement(yt,{ability:G,isUltimate:bt})),s.createElement("div",{className:"ability-name",title:G.name},G.name),G.currentCooldown>0&&s.createElement("div",{className:"ability-cooldown-overlay"},s.createElement("span",null,G.currentCooldown),s.createElement("span",{className:"ability-cooldown-label"},"CD")),s.createElement("div",{className:`ability-mana-cost ${At?"not-enough":""}`},s.createElement("span",null,"",qe)),s.createElement("div",{className:"ability-tooltip"},s.createElement("div",{className:"tooltip-header"},s.createElement("h4",null,G.name),bt&&s.createElement("span",{className:"tooltip-ultimate"},"DOMAIN EXPANSION")),s.createElement("p",null,G.description),s.createElement("div",{className:"tooltip-stats"},s.createElement("span",{className:At?"not-enough":""}," ",qe),s.createElement("span",null," ",G.cooldown," CD"),y&&s.createElement("span",null," Target"))))};i.filter(G=>G.hp>0).length,E.length;const Ea=H?.display_name||"Player",Je=H?.avatar_url||null,it=H?.account_level||1,_t=J?"Opponent":"Cursed AI",Be=J?ge?"Awaiting Turn":"Taking Turn":"Awaiting Turn",Ha=G=>{const de=i[G.characterIndex];if(!de)return"Unknown";const Ge=G.isUltimate?de.ultimate:de.abilities[G.abilityIndex],He=G.enemyIndex!=null?n[G.enemyIndex]?.name:null;return`${de.name}: ${Ge?.name||"Technique"}${He?`  ${He}`:""}`},Ga=(G,de,Ge)=>{const He=m.findIndex(nt=>nt.characterIndex===G&&nt.isUltimate===Ge&&(Ge||nt.abilityIndex===de));return He===-1?null:He+1},Aa=G=>m.findIndex(de=>de.characterIndex===G),pn=()=>{J&&!ge||(ve(m),I(!0))},an=()=>{I(!1),x(ue)},Yn=G=>de=>{de.dataTransfer.setData("text/plain",String(G))},In=G=>{G.preventDefault()},Ht=G=>de=>{de.preventDefault();const Ge=Number(de.dataTransfer.getData("text/plain"));Number.isNaN(Ge)||ve(He=>{const nt=[...He],[ot]=nt.splice(Ge,1);return nt.splice(G,0,ot),nt})};return s.createElement("div",{className:`battle-screen ${se?"screen-shake":""} ${R?.needsTarget?"targeting-active":""}`},s.createElement("div",{className:"battle-background"}),ce&&s.createElement("div",{className:"turn-banner"},s.createElement("span",null,ce)),s.createElement("div",{className:"battle-hud"},s.createElement("div",{className:"hud-side"},s.createElement("div",{className:"team-indicator player"},s.createElement("span",null,"Your Team"),s.createElement("div",{className:"team-indicator-meta"},s.createElement("div",{className:"team-avatar"},Je?s.createElement("img",{src:Je,alt:Ea}):s.createElement("span",null,Ea.slice(0,1))),s.createElement("div",null,s.createElement("div",{className:"team-name"},Ea),s.createElement("div",{className:"team-subtitle"},"Lv ",it))))),s.createElement("div",{className:"hud-center"},s.createElement("div",{className:"turn-display"},s.createElement("span",{className:"turn-label"},"TURN"),s.createElement("span",{className:"turn-number"},v)),s.createElement("button",{className:"end-turn-btn",onClick:pn,disabled:J&&!ge},J&&!ge?"Waiting...":"End Turn"),s.createElement("div",{className:"combat-feed-ticker"},s.createElement("span",{className:"ticker-label"},"FEED"),s.createElement("span",{className:"ticker-text"},O||"Awaiting first strike..."),s.createElement("button",{className:"combat-feed-btn",onClick:()=>Xe(!0)},"Combat Feed"))),s.createElement("div",{className:"hud-side right"},s.createElement("div",{className:"team-indicator enemy"},s.createElement("span",null,"Enemy Team"),s.createElement("div",{className:"team-indicator-meta"},s.createElement("div",null,s.createElement("div",{className:"team-name"},_t),s.createElement("div",{className:"team-subtitle"},Be)),s.createElement("div",{className:"team-avatar"},s.createElement("span",null,J?"VS":"AI"))))),R&&R.needsTarget&&s.createElement("div",{className:"targeting-prompt"},s.createElement("span",null," Select a target for ",R.ability.name,"!"),s.createElement("button",{className:"cancel-btn",onClick:()=>z(null)},"Cancel"))),g&&s.createElement("div",{className:`game-over-overlay ${g}`},s.createElement("div",{className:"game-over-content"},s.createElement("h1",null,g==="win"?" VICTORY! ":" DEFEAT "),!Se&&j&&s.createElement("div",{className:"match-summary"},s.createElement("div",{className:"summary-row"},s.createElement("span",null,"Account XP"),s.createElement("strong",null,"+",j.accountGain," (Lv ",j.accountLevel,")")),s.createElement("div",{className:"summary-row"},s.createElement("span",null,"Character XP"),s.createElement("strong",null,"+",j.characterGain," each")),s.createElement("div",{className:"summary-row"},s.createElement("span",null,"Rating"),s.createElement("strong",null,j.ratingDelta>=0?"+":"",j.ratingDelta,"  ",j.rating)),s.createElement("div",{className:"summary-xp-bar"},s.createElement("div",{className:"summary-xp-fill",style:{width:`${Math.min(100,Math.floor(j.accountXp/j.accountNeeded*100))}%`}})),j.characterLevelUps.length>0&&s.createElement("div",{className:"summary-levelups"},j.characterLevelUps.map(G=>s.createElement("span",{key:G.name},G.name,"  Lv ",G.level))),j.characterSummaries?.length>0&&s.createElement("div",{className:"summary-characters"},j.characterSummaries.map(G=>{const de=Yr(G.name),Ge=Math.min(100,Math.floor(G.xp/G.xpNeeded*100));return s.createElement("div",{key:G.id,className:"summary-character"},s.createElement("div",{className:"summary-portrait"},de?s.createElement("img",{src:de,alt:G.name}):s.createElement("span",null,G.name[0])),s.createElement("div",{className:"summary-char-info"},s.createElement("div",{className:"summary-char-name"},G.name),s.createElement("div",{className:"summary-char-level"},"Lv ",G.level,"  ",G.xp,"/",G.xpNeeded," XP"),s.createElement("div",{className:"summary-char-bar"},s.createElement("div",{className:"summary-char-fill",style:{width:`${Ge}%`}}))))}))),Se?s.createElement("div",{className:"battle-result-actions"},s.createElement("button",{onClick:D,className:"play-again-btn",disabled:!D},"Return to Story")):s.createElement("button",{onClick:T,className:"play-again-btn"},"Play Again"))),s.createElement("div",{className:`battle-main ${Se?"battle-main-story":""} ${i.length<=1&&n.length<=2?"battle-main-compact":""}`},s.createElement("div",{className:"battle-team-row"},s.createElement("div",{className:"team-container player-side"},i.map((G,de)=>s.createElement(Re,{key:G.id,character:G,index:de,isPlayer:!0,onAbilityClick:fe,actedCharacters:E,pendingAbility:R,hpPreview:oe[de]}))),s.createElement("div",{className:"team-container enemy-side"},n.map((G,de)=>s.createElement(Qt,{key:G.id,character:G,index:de,isSelected:r===de,onSelect:Te,onHover:c,pendingAbility:R,hpPreview:Le[de]}))))),Ye&&s.createElement("div",{className:"combat-feed-overlay",onClick:()=>Xe(!1)},s.createElement("div",{className:"combat-feed-panel",onClick:G=>G.stopPropagation()},s.createElement("div",{className:"combat-feed-header"},s.createElement("div",null,s.createElement("h3",null,"Combat Feed"),s.createElement("p",null,"Latest combat events")),s.createElement("button",{className:"combat-feed-close",onClick:()=>Xe(!1)},"")),s.createElement("div",{className:"combat-feed-body"},p.length===0?s.createElement("div",{className:"combat-feed-empty"},"No events yet."):p.slice().reverse().map((G,de)=>s.createElement("p",{key:`${G}-${de}`,className:`${ze(G)} ${de===0?"latest":""}`},G))))),_e&&s.createElement("div",{className:"end-turn-overlay",onClick:()=>I(!1)},s.createElement("div",{className:"end-turn-panel",onClick:G=>G.stopPropagation()},s.createElement("div",{className:"end-turn-header"},s.createElement("div",null,s.createElement("h3",null,"Confirm End Turn"),s.createElement("p",null,"Drag to reorder your queued techniques.")),s.createElement("button",{className:"end-turn-close",onClick:()=>I(!1)},"")),s.createElement("div",{className:"end-turn-body"},ue.length===0?s.createElement("div",{className:"end-turn-empty"},"No actions queued. End turn anyway?"):s.createElement("div",{className:"end-turn-list"},ue.map((G,de)=>s.createElement("div",{key:`${G.characterIndex}-${G.abilityIndex}-${G.isUltimate}-${de}`,className:"end-turn-item",draggable:!0,onDragStart:Yn(de),onDragOver:In,onDrop:Ht(de)},s.createElement("span",{className:"drag-handle"},""),s.createElement("span",{className:"queue-order"},de+1),s.createElement("span",{className:"queue-text"},Ha(G)))))),s.createElement("div",{className:"end-turn-actions"},s.createElement("button",{className:"secondary-btn",onClick:()=>I(!1)},"Cancel"),s.createElement("button",{className:"primary-btn",onClick:an},ue.length===0?"End Turn":"Confirm & End Turn")))))}function Ec(i,n){var r={};for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&n.indexOf(c)<0&&(r[c]=i[c]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,c=Object.getOwnPropertySymbols(i);d<c.length;d++)n.indexOf(c[d])<0&&Object.prototype.propertyIsEnumerable.call(i,c[d])&&(r[c[d]]=i[c[d]]);return r}function zg(i,n,r,c){function d(m){return m instanceof r?m:new r(function(f){f(m)})}return new(r||(r=Promise))(function(m,f){function p(T){try{g(c.next(T))}catch(E){f(E)}}function v(T){try{g(c.throw(T))}catch(E){f(E)}}function g(T){T.done?m(T.value):d(T.value).then(p,v)}g((c=c.apply(i,n||[])).next())})}const qg=i=>i?(...n)=>i(...n):(...n)=>fetch(...n);class Wu extends Error{constructor(n,r="FunctionsError",c){super(n),this.name=r,this.context=c}}class $g extends Wu{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class $h extends Wu{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Lh extends Wu{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Hu;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Hu||(Hu={}));class Lg{constructor(n,{headers:r={},customFetch:c,region:d=Hu.Any}={}){this.url=n,this.headers=r,this.region=d,this.fetch=qg(c)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return zg(this,arguments,void 0,function*(r,c={}){var d;let m,f;try{const{headers:p,method:v,body:g,signal:T,timeout:E}=c;let R={},{region:z}=c;z||(z=this.region);const x=new URL(`${this.url}/${r}`);z&&z!=="any"&&(R["x-region"]=z,x.searchParams.set("forceFunctionRegion",z));let H;g&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(R["Content-Type"]="application/octet-stream",H=g):typeof g=="string"?(R["Content-Type"]="text/plain",H=g):typeof FormData<"u"&&g instanceof FormData?H=g:(R["Content-Type"]="application/json",H=JSON.stringify(g)):g&&typeof g!="string"&&!(typeof Blob<"u"&&g instanceof Blob)&&!(g instanceof ArrayBuffer)&&!(typeof FormData<"u"&&g instanceof FormData)?H=JSON.stringify(g):H=g;let j=T;E&&(f=new AbortController,m=setTimeout(()=>f.abort(),E),T?(j=f.signal,T.addEventListener("abort",()=>f.abort())):j=f.signal);const ee=yield this.fetch(x.toString(),{method:v||"POST",headers:Object.assign(Object.assign(Object.assign({},R),this.headers),p),body:H,signal:j}).catch(Se=>{throw new $g(Se)}),se=ee.headers.get("x-relay-error");if(se&&se==="true")throw new $h(ee);if(!ee.ok)throw new Lh(ee);let J=((d=ee.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),ge;return J==="application/json"?ge=yield ee.json():J==="application/octet-stream"||J==="application/pdf"?ge=yield ee.blob():J==="text/event-stream"?ge=ee:J==="multipart/form-data"?ge=yield ee.formData():ge=yield ee.text(),{data:ge,error:null,response:ee}}catch(p){return{data:null,error:p,response:p instanceof Lh||p instanceof $h?p.context:void 0}}finally{m&&clearTimeout(m)}})}}var Hg=class extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}},Gg=class{constructor(i){var n,r;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(n=i.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=i.signal,this.isMaybeSingle=(r=i.isMaybeSingle)!==null&&r!==void 0?r:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,n){return this.headers=new Headers(this.headers),this.headers.set(i,n),this}then(i,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{let f=null,p=null,v=null,g=m.status,T=m.statusText;if(m.ok){var E,R;if(r.method!=="HEAD"){var z;const ee=await m.text();ee===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((z=r.headers.get("Accept"))===null||z===void 0)&&z.includes("application/vnd.pgrst.plan+text"))?p=ee:p=JSON.parse(ee))}const H=(E=r.headers.get("Prefer"))===null||E===void 0?void 0:E.match(/count=(exact|planned|estimated)/),j=(R=m.headers.get("content-range"))===null||R===void 0?void 0:R.split("/");H&&j&&j.length>1&&(v=parseInt(j[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(p)&&(p.length>1?(f={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,v=null,g=406,T="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{var x;const H=await m.text();try{f=JSON.parse(H),Array.isArray(f)&&m.status===404&&(p=[],f=null,g=200,T="OK")}catch{m.status===404&&H===""?(g=204,T="No Content"):f={message:H}}if(f&&r.isMaybeSingle&&(!(f==null||(x=f.details)===null||x===void 0)&&x.includes("0 rows"))&&(f=null,g=200,T="OK"),f&&r.shouldThrowOnError)throw new Hg(f)}return{error:f,data:p,count:v,status:g,statusText:T}});return this.shouldThrowOnError||(d=d.catch(m=>{var f;let p="";const v=m?.cause;if(v){var g,T,E,R;const x=(g=v?.message)!==null&&g!==void 0?g:"",H=(T=v?.code)!==null&&T!==void 0?T:"";p=`${(E=m?.name)!==null&&E!==void 0?E:"FetchError"}: ${m?.message}`,p+=`

Caused by: ${(R=v?.name)!==null&&R!==void 0?R:"Error"}: ${x}`,H&&(p+=` (${H})`),v?.stack&&(p+=`
${v.stack}`)}else{var z;p=(z=m?.stack)!==null&&z!==void 0?z:""}return{error:{message:`${(f=m?.name)!==null&&f!==void 0?f:"FetchError"}: ${m?.message}`,details:p,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(i,n)}returns(){return this}overrideTypes(){return this}},Vg=class extends Gg{select(i){let n=!1;const r=(i??"*").split("").map(c=>/\s/.test(c)&&!n?"":(c==='"'&&(n=!n),c)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:n=!0,nullsFirst:r,foreignTable:c,referencedTable:d=c}={}){const m=d?`${d}.order`:"order",f=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${f?`${f},`:""}${i}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:n,referencedTable:r=n}={}){const c=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(c,`${i}`),this}range(i,n,{foreignTable:r,referencedTable:c=r}={}){const d=typeof c>"u"?"offset":`${c}.offset`,m=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${i}`),this.url.searchParams.set(m,`${n-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:n=!1,settings:r=!1,buffers:c=!1,wal:d=!1,format:m="text"}={}){var f;const p=[i?"analyze":null,n?"verbose":null,r?"settings":null,c?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${v}"; options=${p};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};const Hh=new RegExp("[,()]");var zs=class extends Vg{eq(i,n){return this.url.searchParams.append(i,`eq.${n}`),this}neq(i,n){return this.url.searchParams.append(i,`neq.${n}`),this}gt(i,n){return this.url.searchParams.append(i,`gt.${n}`),this}gte(i,n){return this.url.searchParams.append(i,`gte.${n}`),this}lt(i,n){return this.url.searchParams.append(i,`lt.${n}`),this}lte(i,n){return this.url.searchParams.append(i,`lte.${n}`),this}like(i,n){return this.url.searchParams.append(i,`like.${n}`),this}likeAllOf(i,n){return this.url.searchParams.append(i,`like(all).{${n.join(",")}}`),this}likeAnyOf(i,n){return this.url.searchParams.append(i,`like(any).{${n.join(",")}}`),this}ilike(i,n){return this.url.searchParams.append(i,`ilike.${n}`),this}ilikeAllOf(i,n){return this.url.searchParams.append(i,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(i,n){return this.url.searchParams.append(i,`ilike(any).{${n.join(",")}}`),this}regexMatch(i,n){return this.url.searchParams.append(i,`match.${n}`),this}regexIMatch(i,n){return this.url.searchParams.append(i,`imatch.${n}`),this}is(i,n){return this.url.searchParams.append(i,`is.${n}`),this}isDistinct(i,n){return this.url.searchParams.append(i,`isdistinct.${n}`),this}in(i,n){const r=Array.from(new Set(n)).map(c=>typeof c=="string"&&Hh.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${r})`),this}notIn(i,n){const r=Array.from(new Set(n)).map(c=>typeof c=="string"&&Hh.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`not.in.(${r})`),this}contains(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cs.{${n.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(n)}`),this}containedBy(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cd.{${n.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(n)}`),this}rangeGt(i,n){return this.url.searchParams.append(i,`sr.${n}`),this}rangeGte(i,n){return this.url.searchParams.append(i,`nxl.${n}`),this}rangeLt(i,n){return this.url.searchParams.append(i,`sl.${n}`),this}rangeLte(i,n){return this.url.searchParams.append(i,`nxr.${n}`),this}rangeAdjacent(i,n){return this.url.searchParams.append(i,`adj.${n}`),this}overlaps(i,n){return typeof n=="string"?this.url.searchParams.append(i,`ov.${n}`):this.url.searchParams.append(i,`ov.{${n.join(",")}}`),this}textSearch(i,n,{config:r,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const m=r===void 0?"":`(${r})`;return this.url.searchParams.append(i,`${d}fts${m}.${n}`),this}match(i){return Object.entries(i).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(i,n,r){return this.url.searchParams.append(i,`not.${n}.${r}`),this}or(i,{foreignTable:n,referencedTable:r=n}={}){const c=r?`${r}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,n,r){return this.url.searchParams.append(i,`${n}.${r}`),this}},Yg=class{constructor(i,{headers:n={},schema:r,fetch:c}){this.url=i,this.headers=new Headers(n),this.schema=r,this.fetch=c}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(i,n){const{head:r=!1,count:c}=n??{},d=r?"HEAD":"GET";let m=!1;const f=(i??"*").split("").map(g=>/\s/.test(g)&&!m?"":(g==='"'&&(m=!m),g)).join(""),{url:p,headers:v}=this.cloneRequestState();return p.searchParams.set("select",f),c&&v.append("Prefer",`count=${c}`),new zs({method:d,url:p,headers:v,schema:this.schema,fetch:this.fetch})}insert(i,{count:n,defaultToNull:r=!0}={}){var c;const d="POST",{url:m,headers:f}=this.cloneRequestState();if(n&&f.append("Prefer",`count=${n}`),r||f.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((v,g)=>v.concat(Object.keys(g)),[]);if(p.length>0){const v=[...new Set(p)].map(g=>`"${g}"`);m.searchParams.set("columns",v.join(","))}}return new zs({method:d,url:m,headers:f,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}upsert(i,{onConflict:n,ignoreDuplicates:r=!1,count:c,defaultToNull:d=!0}={}){var m;const f="POST",{url:p,headers:v}=this.cloneRequestState();if(v.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&p.searchParams.set("on_conflict",n),c&&v.append("Prefer",`count=${c}`),d||v.append("Prefer","missing=default"),Array.isArray(i)){const g=i.reduce((T,E)=>T.concat(Object.keys(E)),[]);if(g.length>0){const T=[...new Set(g)].map(E=>`"${E}"`);p.searchParams.set("columns",T.join(","))}}return new zs({method:f,url:p,headers:v,schema:this.schema,body:i,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(i,{count:n}={}){var r;const c="PATCH",{url:d,headers:m}=this.cloneRequestState();return n&&m.append("Prefer",`count=${n}`),new zs({method:c,url:d,headers:m,schema:this.schema,body:i,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:i}={}){var n;const r="DELETE",{url:c,headers:d}=this.cloneRequestState();return i&&d.append("Prefer",`count=${i}`),new zs({method:r,url:c,headers:d,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}},Ig=class fp{constructor(n,{headers:r={},schema:c,fetch:d}={}){this.url=n,this.headers=new Headers(r),this.schemaName=c,this.fetch=d}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Yg(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new fp(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,r={},{head:c=!1,get:d=!1,count:m}={}){var f;let p;const v=new URL(`${this.url}/rpc/${n}`);let g;const T=z=>z!==null&&typeof z=="object"&&(!Array.isArray(z)||z.some(T)),E=c&&Object.values(r).some(T);E?(p="POST",g=r):c||d?(p=c?"HEAD":"GET",Object.entries(r).filter(([z,x])=>x!==void 0).map(([z,x])=>[z,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([z,x])=>{v.searchParams.append(z,x)})):(p="POST",g=r);const R=new Headers(this.headers);return E?R.set("Prefer",m?`count=${m},return=minimal`:"return=minimal"):m&&R.set("Prefer",`count=${m}`),new zs({method:p,url:v,headers:R,schema:this.schemaName,body:g,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};class Kg{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const c=r.versions;if(c&&c.node){const d=c.node,m=parseInt(d.replace(/^v/,"").split(".")[0]);return m>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${m} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${m} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const c=this.getWebSocketConstructor();return new c(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Pg="2.91.0",Qg=`realtime-js/${Pg}`,Xg="1.0.0",hp="2.0.0",Gh=hp,Gu=1e4,Jg=1e3,Zg=100;var Nl;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Nl||(Nl={}));var Wt;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Wt||(Wt={}));var hn;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(hn||(hn={}));var Vu;(function(i){i.websocket="websocket"})(Vu||(Vu={}));var Pl;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Pl||(Pl={}));class Fg{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let c=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(c))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,c;const d=(c=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&c!==void 0?c:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,d)}_encodeJsonUserBroadcastPush(n){var r,c;const d=(c=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&c!==void 0?c:{},f=new TextEncoder().encode(JSON.stringify(d)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(n,r,c){var d,m;const f=n.topic,p=(d=n.ref)!==null&&d!==void 0?d:"",v=(m=n.join_ref)!==null&&m!==void 0?m:"",g=n.payload.event,T=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},E=Object.keys(T).length===0?"":JSON.stringify(T);if(v.length>255)throw new Error(`joinRef length ${v.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(E.length>255)throw new Error(`metadata length ${E.length} exceeds maximum of 255`);const R=this.USER_BROADCAST_PUSH_META_LENGTH+v.length+p.length+f.length+g.length+E.length,z=new ArrayBuffer(this.HEADER_LENGTH+R);let x=new DataView(z),H=0;x.setUint8(H++,this.KINDS.userBroadcastPush),x.setUint8(H++,v.length),x.setUint8(H++,p.length),x.setUint8(H++,f.length),x.setUint8(H++,g.length),x.setUint8(H++,E.length),x.setUint8(H++,r),Array.from(v,ee=>x.setUint8(H++,ee.charCodeAt(0))),Array.from(p,ee=>x.setUint8(H++,ee.charCodeAt(0))),Array.from(f,ee=>x.setUint8(H++,ee.charCodeAt(0))),Array.from(g,ee=>x.setUint8(H++,ee.charCodeAt(0))),Array.from(E,ee=>x.setUint8(H++,ee.charCodeAt(0)));var j=new Uint8Array(z.byteLength+c.byteLength);return j.set(new Uint8Array(z),0),j.set(new Uint8Array(c),z.byteLength),j.buffer}decode(n,r){if(this._isArrayBuffer(n)){let c=this._binaryDecode(n);return r(c)}if(typeof n=="string"){const c=JSON.parse(n),[d,m,f,p,v]=c;return r({join_ref:d,ref:m,topic:f,event:p,payload:v})}return r({})}_binaryDecode(n){const r=new DataView(n),c=r.getUint8(0),d=new TextDecoder;if(c===this.KINDS.userBroadcast)return this._decodeUserBroadcast(n,r,d)}_decodeUserBroadcast(n,r,c){const d=r.getUint8(1),m=r.getUint8(2),f=r.getUint8(3),p=r.getUint8(4);let v=this.HEADER_LENGTH+4;const g=c.decode(n.slice(v,v+d));v=v+d;const T=c.decode(n.slice(v,v+m));v=v+m;const E=c.decode(n.slice(v,v+f));v=v+f;const R=n.slice(v,n.byteLength),z=p===this.JSON_ENCODING?JSON.parse(c.decode(R)):R,x={type:this.BROADCAST_EVENT,event:T,payload:z};return f>0&&(x.meta=JSON.parse(E)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([c])=>r.includes(c)))}}class pp{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Et;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Et||(Et={}));const Vh=(i,n,r={})=>{var c;const d=(c=r.skipTypes)!==null&&c!==void 0?c:[];return n?Object.keys(n).reduce((m,f)=>(m[f]=Wg(f,i,n,d),m),{}):{}},Wg=(i,n,r,c)=>{const d=n.find(p=>p.name===i),m=d?.type,f=r[i];return m&&!c.includes(m)?vp(m,f):Yu(f)},vp=(i,n)=>{if(i.charAt(0)==="_"){const r=i.slice(1,i.length);return ny(n,r)}switch(i){case Et.bool:return ey(n);case Et.float4:case Et.float8:case Et.int2:case Et.int4:case Et.int8:case Et.numeric:case Et.oid:return ty(n);case Et.json:case Et.jsonb:return ay(n);case Et.timestamp:return ly(n);case Et.abstime:case Et.date:case Et.daterange:case Et.int4range:case Et.int8range:case Et.money:case Et.reltime:case Et.text:case Et.time:case Et.timestamptz:case Et.timetz:case Et.tsrange:case Et.tstzrange:return Yu(n);default:return Yu(n)}},Yu=i=>i,ey=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},ty=i=>{if(typeof i=="string"){const n=parseFloat(i);if(!Number.isNaN(n))return n}return i},ay=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch{return i}return i},ny=(i,n)=>{if(typeof i!="string")return i;const r=i.length-1,c=i[r];if(i[0]==="{"&&c==="}"){let m;const f=i.slice(1,r);try{m=JSON.parse("["+f+"]")}catch{m=f?f.split(","):[]}return m.map(p=>vp(n,p))}return i},ly=i=>typeof i=="string"?i.replace(" ","T"):i,gp=i=>{const n=new URL(i);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Du{constructor(n,r,c={},d=Gu){this.channel=n,this.event=r,this.payload=c,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var c;return this._hasReceived(n)&&r((c=this.receivedResp)===null||c===void 0?void 0:c.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(c=>c.status===n).forEach(c=>c.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Yh;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Yh||(Yh={}));class Gr{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const c=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(c.state,{},d=>{const{onJoin:m,onLeave:f,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gr.syncState(this.state,d,m,f),this.pendingDiffs.forEach(v=>{this.state=Gr.syncDiff(this.state,v,m,f)}),this.pendingDiffs=[],p()}),this.channel._on(c.diff,{},d=>{const{onJoin:m,onLeave:f,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=Gr.syncDiff(this.state,d,m,f),p())}),this.onJoin((d,m,f)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:m,newPresences:f})}),this.onLeave((d,m,f)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:m,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,c,d){const m=this.cloneDeep(n),f=this.transformState(r),p={},v={};return this.map(m,(g,T)=>{f[g]||(v[g]=T)}),this.map(f,(g,T)=>{const E=m[g];if(E){const R=T.map(j=>j.presence_ref),z=E.map(j=>j.presence_ref),x=T.filter(j=>z.indexOf(j.presence_ref)<0),H=E.filter(j=>R.indexOf(j.presence_ref)<0);x.length>0&&(p[g]=x),H.length>0&&(v[g]=H)}else p[g]=T}),this.syncDiff(m,{joins:p,leaves:v},c,d)}static syncDiff(n,r,c,d){const{joins:m,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return c||(c=()=>{}),d||(d=()=>{}),this.map(m,(p,v)=>{var g;const T=(g=n[p])!==null&&g!==void 0?g:[];if(n[p]=this.cloneDeep(v),T.length>0){const E=n[p].map(z=>z.presence_ref),R=T.filter(z=>E.indexOf(z.presence_ref)<0);n[p].unshift(...R)}c(p,T,v)}),this.map(f,(p,v)=>{let g=n[p];if(!g)return;const T=v.map(E=>E.presence_ref);g=g.filter(E=>T.indexOf(E.presence_ref)<0),n[p]=g,d(p,g,v),g.length===0&&delete n[p]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(c=>r(c,n[c]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,c)=>{const d=n[c];return"metas"in d?r[c]=d.metas.map(m=>(m.presence_ref=m.phx_ref,delete m.phx_ref,delete m.phx_ref_prev,m)):r[c]=d,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ih;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Ih||(Ih={}));var Vr;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Vr||(Vr={}));var Gn;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Gn||(Gn={}));class Ls{constructor(n,r={config:{}},c){var d,m;if(this.topic=n,this.params=r,this.socket=c,this.bindings={},this.state=Wt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Du(this,hn.join,this.params,this.timeout),this.rejoinTimer=new pp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wt.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(hn.reply,{},(f,p)=>{this._trigger(this._replyEventName(p),f)}),this.presence=new Gr(this),this.broadcastEndpointURL=gp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((m=(d=this.params.config)===null||d===void 0?void 0:d.broadcast)===null||m===void 0)&&m.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var c,d,m;if(this.socket.isConnected()||this.socket.connect(),this.state==Wt.closed){const{config:{broadcast:f,presence:p,private:v}}=this.params,g=(d=(c=this.bindings.postgres_changes)===null||c===void 0?void 0:c.map(z=>z.filter))!==null&&d!==void 0?d:[],T=!!this.bindings[Vr.PRESENCE]&&this.bindings[Vr.PRESENCE].length>0||((m=this.params.config.presence)===null||m===void 0?void 0:m.enabled)===!0,E={},R={broadcast:f,presence:Object.assign(Object.assign({},p),{enabled:T}),postgres_changes:g,private:v};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(z=>n?.(Gn.CHANNEL_ERROR,z)),this._onClose(()=>n?.(Gn.CLOSED)),this.updateJoinPayload(Object.assign({config:R},E)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:z})=>{var x;if(this.socket._isManualToken()||this.socket.setAuth(),z===void 0){n?.(Gn.SUBSCRIBED);return}else{const H=this.bindings.postgres_changes,j=(x=H?.length)!==null&&x!==void 0?x:0,ee=[];for(let se=0;se<j;se++){const J=H[se],{filter:{event:ge,schema:Se,table:D,filter:ce}}=J,P=z&&z[se];if(P&&P.event===ge&&Ls.isFilterValueEqual(P.schema,Se)&&Ls.isFilterValueEqual(P.table,D)&&Ls.isFilterValueEqual(P.filter,ce))ee.push(Object.assign(Object.assign({},J),{id:P.id}));else{this.unsubscribe(),this.state=Wt.errored,n?.(Gn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=ee,n&&n(Gn.SUBSCRIBED);return}}).receive("error",z=>{this.state=Wt.errored,n?.(Gn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(z).join(", ")||"error")))}).receive("timeout",()=>{n?.(Gn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,c){return this.state===Wt.joined&&n===Vr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,c)}async httpSend(n,r,c={}){var d;if(r==null)return Promise.reject("Payload is required for httpSend()");const m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(d=c.timeout)!==null&&d!==void 0?d:this.timeout);if(p.status===202)return{success:!0};let v=p.statusText;try{const g=await p.json();v=g.error||g.message||v}catch{}return Promise.reject(new Error(v))}async send(n,r={}){var c,d;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:m,payload:f}=n,p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const v={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:m,payload:f,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,v,(c=r.timeout)!==null&&c!==void 0?c:this.timeout);return await((d=g.body)===null||d===void 0?void 0:d.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(m=>{var f,p,v;const g=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((v=(p=(f=this.params)===null||f===void 0?void 0:f.config)===null||p===void 0?void 0:p.broadcast)===null||v===void 0)&&v.ack)&&m("ok"),g.receive("ok",()=>m("ok")),g.receive("error",()=>m("error")),g.receive("timeout",()=>m("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Wt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(hn.close,"leave",this._joinRef())};this.joinPush.destroy();let c=null;return new Promise(d=>{c=new Du(this,hn.leave,{},n),c.receive("ok",()=>{r(),d("ok")}).receive("timeout",()=>{r(),d("timed out")}).receive("error",()=>{d("error")}),c.send(),this._canPush()||c.trigger("ok",{})}).finally(()=>{c?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Wt.closed,this.bindings={}}async _fetchWithTimeout(n,r,c){const d=new AbortController,m=setTimeout(()=>d.abort(),c),f=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:d.signal}));return clearTimeout(m),f}_push(n,r,c=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new Du(this,n,r,c);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Zg){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,c){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,c){var d,m;const f=n.toLocaleLowerCase(),{close:p,error:v,leave:g,join:T}=hn;if(c&&[p,v,g,T].indexOf(f)>=0&&c!==this._joinRef())return;let R=this._onMessage(f,r,c);if(r&&!R)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(z=>{var x,H,j;return((x=z.filter)===null||x===void 0?void 0:x.event)==="*"||((j=(H=z.filter)===null||H===void 0?void 0:H.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===f}).map(z=>z.callback(R,c)):(m=this.bindings[f])===null||m===void 0||m.filter(z=>{var x,H,j,ee,se,J,ge,Se;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in z){const D=z.id,ce=(x=z.filter)===null||x===void 0?void 0:x.event;return D&&((H=r.ids)===null||H===void 0?void 0:H.includes(D))&&(ce==="*"||ce?.toLocaleLowerCase()===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))&&(!(!((ee=z.filter)===null||ee===void 0)&&ee.table)||z.filter.table===((se=r.data)===null||se===void 0?void 0:se.table))}else{const D=(ge=(J=z?.filter)===null||J===void 0?void 0:J.event)===null||ge===void 0?void 0:ge.toLocaleLowerCase();return D==="*"||D===((Se=r?.event)===null||Se===void 0?void 0:Se.toLocaleLowerCase())}else return z.type.toLocaleLowerCase()===f}).map(z=>{if(typeof R=="object"&&"ids"in R){const x=R.data,{schema:H,table:j,commit_timestamp:ee,type:se,errors:J}=x;R=Object.assign(Object.assign({},{schema:H,table:j,commit_timestamp:ee,eventType:se,new:{},old:{},errors:J}),this._getPayloadRecords(x))}z.callback(R,c)})}_isClosed(){return this.state===Wt.closed}_isJoined(){return this.state===Wt.joined}_isJoining(){return this.state===Wt.joining}_isLeaving(){return this.state===Wt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,c){const d=n.toLocaleLowerCase(),m={type:d,filter:r,callback:c};return this.bindings[d]?this.bindings[d].push(m):this.bindings[d]=[m],this}_off(n,r){const c=n.toLocaleLowerCase();return this.bindings[c]&&(this.bindings[c]=this.bindings[c].filter(d=>{var m;return!(((m=d.type)===null||m===void 0?void 0:m.toLocaleLowerCase())===c&&Ls.isEqual(d.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const c in n)if(n[c]!==r[c])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(hn.close,{},n)}_onError(n){this._on(hn.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=Vh(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=Vh(n.columns,n.old_record)),r}}const xu=()=>{},cc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},sy=[1e3,2e3,5e3,1e4],ry=1e4,iy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class cy{constructor(n,r){var c;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Gu,this.transport=null,this.heartbeatIntervalMs=cc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xu,this.ref=0,this.reconnectTimer=null,this.vsn=Gh,this.logger=xu,this.conn=null,this.sendBuffer=[],this.serializer=new Fg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=d=>d?(...m)=>d(...m):(...m)=>fetch(...m),!(!((c=r?.params)===null||c===void 0)&&c.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${Vu.websocket}`,this.httpEndpoint=gp(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Kg.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const c=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(c),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,c){this.logger(n,r,c)}connectionState(){switch(this.conn&&this.conn.readyState){case Nl.connecting:return Pl.Connecting;case Nl.open:return Pl.Open;case Nl.closing:return Pl.Closing;default:return Pl.Closed}}isConnected(){return this.connectionState()===Pl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const c=`realtime:${n}`,d=this.getChannels().find(m=>m.topic===c);if(d)return d;{const m=new Ls(`realtime:${n}`,r,this);return this.channels.push(m),m}}push(n){const{topic:r,event:c,payload:d,ref:m}=n,f=()=>{this.encode(n,p=>{var v;(v=this.conn)===null||v===void 0||v.send(p)})};this.log("push",`${r} ${c} (${m})`,d),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Jg,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},cc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(c=>c.topic===n&&(c._isJoined()||c._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const g=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",g)}catch(T){this.log("error","error in heartbeat callback",T)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:c,event:d,payload:m,ref:f}=r,p=f?`(${f})`:"",v=m.status||"";this.log("receive",`${v} ${c} ${d} ${p}`.trim(),m),this.channels.filter(g=>g._isMember(c)).forEach(g=>g._trigger(d,m,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===Nl.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Nl.open||this.conn.readyState===Nl.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(hn.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const c=n.match(/\?/)?"&":"?",d=new URLSearchParams(r);return`${n}${c}${d}`}_workerObjectUrl(n){let r;if(n)r=n;else{const c=new Blob([iy],{type:"application/javascript"});r=URL.createObjectURL(c)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,c=!1;if(n)r=n,c=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(d){this.log("error","Error fetching access token from callback",d),r=this.accessTokenValue}else r=this.accessTokenValue;c?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(d=>{const m={access_token:r,version:Qg};r&&d.updateJoinPayload(m),d.joinedOnce&&d._isJoined()&&d._push(hn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(c=>{try{c(r)}catch(d){this.log("error",`error in ${n} callback`,d)}})}catch(c){this.log("error",`error triggering ${n} callbacks`,c)}}_setupReconnectionTimer(){this.reconnectTimer=new pp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},cc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,c,d,m,f,p,v,g,T,E,R,z;switch(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(c=n?.timeout)!==null&&c!==void 0?c:Gu,this.heartbeatIntervalMs=(d=n?.heartbeatIntervalMs)!==null&&d!==void 0?d:cc.HEARTBEAT_INTERVAL,this.worker=(m=n?.worker)!==null&&m!==void 0?m:!1,this.accessToken=(f=n?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(p=n?.heartbeatCallback)!==null&&p!==void 0?p:xu,this.vsn=(v=n?.vsn)!==null&&v!==void 0?v:Gh,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=n?.reconnectAfterMs)!==null&&g!==void 0?g:(x=>sy[x-1]||ry),this.vsn){case Xg:this.encode=(T=n?.encode)!==null&&T!==void 0?T:((x,H)=>H(JSON.stringify(x))),this.decode=(E=n?.decode)!==null&&E!==void 0?E:((x,H)=>H(JSON.parse(x)));break;case hp:this.encode=(R=n?.encode)!==null&&R!==void 0?R:this.serializer.encode.bind(this.serializer),this.decode=(z=n?.decode)!==null&&z!==void 0?z:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var Ir=class extends Error{constructor(i,n){super(i),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function oy(i,n,r){const c=new URL(n,i);if(r)for(const[d,m]of Object.entries(r))m!==void 0&&c.searchParams.set(d,m);return c.toString()}async function uy(i){return!i||i.type==="none"?{}:i.type==="bearer"?{Authorization:`Bearer ${i.token}`}:i.type==="header"?{[i.name]:i.value}:i.type==="custom"?await i.getHeaders():{}}function dy(i){const n=i.fetchImpl??globalThis.fetch;return{async request({method:r,path:c,query:d,body:m,headers:f}){const p=oy(i.baseUrl,c,d),v=await uy(i.auth),g=await n(p,{method:r,headers:{...m?{"Content-Type":"application/json"}:{},...v,...f},body:m?JSON.stringify(m):void 0}),T=await g.text(),E=(g.headers.get("content-type")||"").includes("application/json"),R=E&&T?JSON.parse(T):T;if(!g.ok){const z=E?R:void 0,x=z?.error;throw new Ir(x?.message??`Request failed with status ${g.status}`,{status:g.status,icebergType:x?.type,icebergCode:x?.code,details:z})}return{status:g.status,headers:g.headers,data:R}}}}function oc(i){return i.join("")}var my=class{constructor(i,n=""){this.client=i,this.prefix=n}async listNamespaces(i){const n=i?{parent:oc(i.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(c=>({namespace:c}))}async createNamespace(i,n){const r={namespace:i.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${oc(i.namespace)}`})}async loadNamespaceMetadata(i){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${oc(i.namespace)}`})).data.properties}}async namespaceExists(i){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${oc(i.namespace)}`}),!0}catch(n){if(n instanceof Ir&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(i,n){try{return await this.createNamespace(i,n)}catch(r){if(r instanceof Ir&&r.status===409)return;throw r}}};function Rs(i){return i.join("")}var fy=class{constructor(i,n="",r){this.client=i,this.prefix=n,this.accessDelegation=r}async listTables(i){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Rs(i.namespace)}/tables`})).data.identifiers}async createTable(i,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Rs(i.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(i,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Rs(i.namespace)}/tables/${i.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(i,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Rs(i.namespace)}/tables/${i.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(i){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Rs(i.namespace)}/tables/${i.name}`,headers:n})).data.metadata}async tableExists(i){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Rs(i.namespace)}/tables/${i.name}`,headers:n}),!0}catch(r){if(r instanceof Ir&&r.status===404)return!1;throw r}}async createTableIfNotExists(i,n){try{return await this.createTable(i,n)}catch(r){if(r instanceof Ir&&r.status===409)return await this.loadTable({namespace:i.namespace,name:n.name});throw r}}},hy=class{constructor(i){let n="v1";i.catalogName&&(n+=`/${i.catalogName}`);const r=i.baseUrl.endsWith("/")?i.baseUrl:`${i.baseUrl}/`;this.client=dy({baseUrl:r,auth:i.auth,fetchImpl:i.fetch}),this.accessDelegation=i.accessDelegation?.join(","),this.namespaceOps=new my(this.client,n),this.tableOps=new fy(this.client,n,this.accessDelegation)}async listNamespaces(i){return this.namespaceOps.listNamespaces(i)}async createNamespace(i,n){return this.namespaceOps.createNamespace(i,n)}async dropNamespace(i){await this.namespaceOps.dropNamespace(i)}async loadNamespaceMetadata(i){return this.namespaceOps.loadNamespaceMetadata(i)}async listTables(i){return this.tableOps.listTables(i)}async createTable(i,n){return this.tableOps.createTable(i,n)}async updateTable(i,n){return this.tableOps.updateTable(i,n)}async dropTable(i,n){await this.tableOps.dropTable(i,n)}async loadTable(i){return this.tableOps.loadTable(i)}async namespaceExists(i){return this.namespaceOps.namespaceExists(i)}async tableExists(i){return this.tableOps.tableExists(i)}async createNamespaceIfNotExists(i,n){return this.namespaceOps.createNamespaceIfNotExists(i,n)}async createTableIfNotExists(i,n){return this.tableOps.createTableIfNotExists(i,n)}},_c=class extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}};function Rt(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}var py=class extends _c{constructor(i,n,r){super(i),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Iu=class extends _c{constructor(i,n){super(i),this.name="StorageUnknownError",this.originalError=n}};const ed=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),vy=()=>Response,Ku=i=>{if(Array.isArray(i))return i.map(r=>Ku(r));if(typeof i=="function"||i!==Object(i))return i;const n={};return Object.entries(i).forEach(([r,c])=>{const d=r.replace(/([-_][a-z])/gi,m=>m.toUpperCase().replace(/[-_]/g,""));n[d]=Ku(c)}),n},gy=i=>{if(typeof i!="object"||i===null)return!1;const n=Object.getPrototypeOf(i);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},yy=i=>!i||typeof i!="string"||i.length===0||i.length>100||i.trim()!==i||i.includes("/")||i.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(i);function Kr(i){"@babel/helpers - typeof";return Kr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Kr(i)}function by(i,n){if(Kr(i)!="object"||!i)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var c=r.call(i,n);if(Kr(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function Ey(i){var n=by(i,"string");return Kr(n)=="symbol"?n:n+""}function _y(i,n,r){return(n=Ey(n))in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i}function Kh(i,n){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);n&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(i,d).enumerable})),r.push.apply(r,c)}return r}function je(i){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Kh(Object(r),!0).forEach(function(c){_y(i,c,r[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):Kh(Object(r)).forEach(function(c){Object.defineProperty(i,c,Object.getOwnPropertyDescriptor(r,c))})}return i}const Mu=i=>{var n;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(n=i.error)===null||n===void 0?void 0:n.message)||JSON.stringify(i)},wy=async(i,n,r)=>{i instanceof await vy()&&!r?.noResolveJson?i.json().then(c=>{const d=i.status||500,m=c?.statusCode||d+"";n(new py(Mu(c),d,m))}).catch(c=>{n(new Iu(Mu(c),c))}):n(new Iu(Mu(i),i))},Sy=(i,n,r,c)=>{const d={method:i,headers:n?.headers||{}};return i==="GET"||!c?d:(gy(c)?(d.headers=je({"Content-Type":"application/json"},n?.headers),d.body=JSON.stringify(c)):d.body=c,n?.duplex&&(d.duplex=n.duplex),je(je({},d),r))};async function Zr(i,n,r,c,d,m){return new Promise((f,p)=>{i(r,Sy(n,c,d,m)).then(v=>{if(!v.ok)throw v;return c?.noResolveJson?v:v.json()}).then(v=>f(v)).catch(v=>wy(v,p,c))})}async function Pr(i,n,r,c){return Zr(i,"GET",n,r,c)}async function fn(i,n,r,c,d){return Zr(i,"POST",n,c,d,r)}async function Pu(i,n,r,c,d){return Zr(i,"PUT",n,c,d,r)}async function Ny(i,n,r,c){return Zr(i,"HEAD",n,je(je({},r),{},{noResolveJson:!0}),c)}async function td(i,n,r,c,d){return Zr(i,"DELETE",n,c,d,r)}var Cy=class{constructor(i,n){this.downloadFn=i,this.shouldThrowOnError=n}then(i,n){return this.execute().then(i,n)}async execute(){var i=this;try{return{data:(await i.downloadFn()).body,error:null}}catch(n){if(i.shouldThrowOnError)throw n;if(Rt(n))return{data:null,error:n};throw n}}};let yp;yp=Symbol.toStringTag;var Ty=class{constructor(i,n){this.downloadFn=i,this.shouldThrowOnError=n,this[yp]="BlobDownloadBuilder",this.promise=null}asStream(){return new Cy(this.downloadFn,this.shouldThrowOnError)}then(i,n){return this.getPromise().then(i,n)}catch(i){return this.getPromise().catch(i)}finally(i){return this.getPromise().finally(i)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var i=this;try{return{data:await(await i.downloadFn()).blob(),error:null}}catch(n){if(i.shouldThrowOnError)throw n;if(Rt(n))return{data:null,error:n};throw n}}};const ky={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ph={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Ay=class{constructor(i,n={},r,c){this.shouldThrowOnError=!1,this.url=i,this.headers=n,this.bucketId=r,this.fetch=ed(c)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(i,n,r,c){var d=this;try{let m;const f=je(je({},Ph),c);let p=je(je({},d.headers),i==="POST"&&{"x-upsert":String(f.upsert)});const v=f.metadata;typeof Blob<"u"&&r instanceof Blob?(m=new FormData,m.append("cacheControl",f.cacheControl),v&&m.append("metadata",d.encodeMetadata(v)),m.append("",r)):typeof FormData<"u"&&r instanceof FormData?(m=r,m.has("cacheControl")||m.append("cacheControl",f.cacheControl),v&&!m.has("metadata")&&m.append("metadata",d.encodeMetadata(v))):(m=r,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType,v&&(p["x-metadata"]=d.toBase64(d.encodeMetadata(v))),(typeof ReadableStream<"u"&&m instanceof ReadableStream||m&&typeof m=="object"&&"pipe"in m&&typeof m.pipe=="function")&&!f.duplex&&(f.duplex="half")),c?.headers&&(p=je(je({},p),c.headers));const g=d._removeEmptyFolders(n),T=d._getFinalPath(g),E=await(i=="PUT"?Pu:fn)(d.fetch,`${d.url}/object/${T}`,m,je({headers:p},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:g,id:E.Id,fullPath:E.Key},error:null}}catch(m){if(d.shouldThrowOnError)throw m;if(Rt(m))return{data:null,error:m};throw m}}async upload(i,n,r){return this.uploadOrUpdate("POST",i,n,r)}async uploadToSignedUrl(i,n,r,c){var d=this;const m=d._removeEmptyFolders(i),f=d._getFinalPath(m),p=new URL(d.url+`/object/upload/sign/${f}`);p.searchParams.set("token",n);try{let v;const g=je({upsert:Ph.upsert},c),T=je(je({},d.headers),{"x-upsert":String(g.upsert)});return typeof Blob<"u"&&r instanceof Blob?(v=new FormData,v.append("cacheControl",g.cacheControl),v.append("",r)):typeof FormData<"u"&&r instanceof FormData?(v=r,v.append("cacheControl",g.cacheControl)):(v=r,T["cache-control"]=`max-age=${g.cacheControl}`,T["content-type"]=g.contentType),{data:{path:m,fullPath:(await Pu(d.fetch,p.toString(),v,{headers:T})).Key},error:null}}catch(v){if(d.shouldThrowOnError)throw v;if(Rt(v))return{data:null,error:v};throw v}}async createSignedUploadUrl(i,n){var r=this;try{let c=r._getFinalPath(i);const d=je({},r.headers);n?.upsert&&(d["x-upsert"]="true");const m=await fn(r.fetch,`${r.url}/object/upload/sign/${c}`,{},{headers:d}),f=new URL(r.url+m.url),p=f.searchParams.get("token");if(!p)throw new _c("No token returned by API");return{data:{signedUrl:f.toString(),path:i,token:p},error:null}}catch(c){if(r.shouldThrowOnError)throw c;if(Rt(c))return{data:null,error:c};throw c}}async update(i,n,r){return this.uploadOrUpdate("PUT",i,n,r)}async move(i,n,r){var c=this;try{return{data:await fn(c.fetch,`${c.url}/object/move`,{bucketId:c.bucketId,sourceKey:i,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:c.headers}),error:null}}catch(d){if(c.shouldThrowOnError)throw d;if(Rt(d))return{data:null,error:d};throw d}}async copy(i,n,r){var c=this;try{return{data:{path:(await fn(c.fetch,`${c.url}/object/copy`,{bucketId:c.bucketId,sourceKey:i,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:c.headers})).Key},error:null}}catch(d){if(c.shouldThrowOnError)throw d;if(Rt(d))return{data:null,error:d};throw d}}async createSignedUrl(i,n,r){var c=this;try{let d=c._getFinalPath(i),m=await fn(c.fetch,`${c.url}/object/sign/${d}`,je({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:c.headers});const f=r?.download?`&download=${r.download===!0?"":r.download}`:"";return m={signedUrl:encodeURI(`${c.url}${m.signedURL}${f}`)},{data:m,error:null}}catch(d){if(c.shouldThrowOnError)throw d;if(Rt(d))return{data:null,error:d};throw d}}async createSignedUrls(i,n,r){var c=this;try{const d=await fn(c.fetch,`${c.url}/object/sign/${c.bucketId}`,{expiresIn:n,paths:i},{headers:c.headers}),m=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:d.map(f=>je(je({},f),{},{signedUrl:f.signedURL?encodeURI(`${c.url}${f.signedURL}${m}`):null})),error:null}}catch(d){if(c.shouldThrowOnError)throw d;if(Rt(d))return{data:null,error:d};throw d}}download(i,n){const r=typeof n?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(n?.transform||{}),d=c?`?${c}`:"",m=this._getFinalPath(i),f=()=>Pr(this.fetch,`${this.url}/${r}/${m}${d}`,{headers:this.headers,noResolveJson:!0});return new Ty(f,this.shouldThrowOnError)}async info(i){var n=this;const r=n._getFinalPath(i);try{return{data:Ku(await Pr(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})),error:null}}catch(c){if(n.shouldThrowOnError)throw c;if(Rt(c))return{data:null,error:c};throw c}}async exists(i){var n=this;const r=n._getFinalPath(i);try{return await Ny(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(c){if(n.shouldThrowOnError)throw c;if(Rt(c)&&c instanceof Iu){const d=c.originalError;if([400,404].includes(d?.status))return{data:!1,error:c}}throw c}}getPublicUrl(i,n){const r=this._getFinalPath(i),c=[],d=n?.download?`download=${n.download===!0?"":n.download}`:"";d!==""&&c.push(d);const m=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&c.push(f);let p=c.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${r}${p}`)}}}async remove(i){var n=this;try{return{data:await td(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:i},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}}async list(i,n,r){var c=this;try{const d=je(je(je({},ky),n),{},{prefix:i||""});return{data:await fn(c.fetch,`${c.url}/object/list/${c.bucketId}`,d,{headers:c.headers},r),error:null}}catch(d){if(c.shouldThrowOnError)throw d;if(Rt(d))return{data:null,error:d};throw d}}async listV2(i,n){var r=this;try{const c=je({},i);return{data:await fn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,c,{headers:r.headers},n),error:null}}catch(c){if(r.shouldThrowOnError)throw c;if(Rt(c))return{data:null,error:c};throw c}}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i.replace(/^\/+/,"")}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const n=[];return i.width&&n.push(`width=${i.width}`),i.height&&n.push(`height=${i.height}`),i.resize&&n.push(`resize=${i.resize}`),i.format&&n.push(`format=${i.format}`),i.quality&&n.push(`quality=${i.quality}`),n.join("&")}};const bp="2.91.0",Ep={"X-Client-Info":`storage-js/${bp}`};var Oy=class{constructor(i,n={},r,c){this.shouldThrowOnError=!1;const d=new URL(i);c?.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=je(je({},Ep),n),this.fetch=ed(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(i){var n=this;try{const r=n.listBucketOptionsToQueryString(i);return{data:await Pr(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}}async getBucket(i){var n=this;try{return{data:await Pr(n.fetch,`${n.url}/bucket/${i}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}}async createBucket(i,n={public:!1}){var r=this;try{return{data:await fn(r.fetch,`${r.url}/bucket`,{id:i,name:i,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(c){if(r.shouldThrowOnError)throw c;if(Rt(c))return{data:null,error:c};throw c}}async updateBucket(i,n){var r=this;try{return{data:await Pu(r.fetch,`${r.url}/bucket/${i}`,{id:i,name:i,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(c){if(r.shouldThrowOnError)throw c;if(Rt(c))return{data:null,error:c};throw c}}async emptyBucket(i){var n=this;try{return{data:await fn(n.fetch,`${n.url}/bucket/${i}/empty`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}}async deleteBucket(i){var n=this;try{return{data:await td(n.fetch,`${n.url}/bucket/${i}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(i){const n={};return i&&("limit"in i&&(n.limit=String(i.limit)),"offset"in i&&(n.offset=String(i.offset)),i.search&&(n.search=i.search),i.sortColumn&&(n.sortColumn=i.sortColumn),i.sortOrder&&(n.sortOrder=i.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},Ry=class{constructor(i,n={},r){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=je(je({},Ep),n),this.fetch=ed(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var n=this;try{return{data:await fn(n.fetch,`${n.url}/bucket`,{name:i},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}}async listBuckets(i){var n=this;try{const r=new URLSearchParams;i?.limit!==void 0&&r.set("limit",i.limit.toString()),i?.offset!==void 0&&r.set("offset",i.offset.toString()),i?.sortColumn&&r.set("sortColumn",i.sortColumn),i?.sortOrder&&r.set("sortOrder",i.sortOrder),i?.search&&r.set("search",i.search);const c=r.toString(),d=c?`${n.url}/bucket?${c}`:`${n.url}/bucket`;return{data:await Pr(n.fetch,d,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}}async deleteBucket(i){var n=this;try{return{data:await td(n.fetch,`${n.url}/bucket/${i}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}}from(i){var n=this;if(!yy(i))throw new _c("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new hy({baseUrl:this.url,catalogName:i,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),c=this.shouldThrowOnError;return new Proxy(r,{get(d,m){const f=d[m];return typeof f!="function"?f:async(...p)=>{try{return{data:await f.apply(d,p),error:null}}catch(v){if(c)throw v;return{data:null,error:v}}}}})}};const ad={"X-Client-Info":`storage-js/${bp}`,"Content-Type":"application/json"};var _p=class extends Error{constructor(i){super(i),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function $a(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}var Uu=class extends _p{constructor(i,n,r){super(i),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Dy=class extends _p{constructor(i,n){super(i),this.name="StorageVectorsUnknownError",this.originalError=n}};const nd=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),xy=i=>{if(typeof i!="object"||i===null)return!1;const n=Object.getPrototypeOf(i);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Qh=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),My=async(i,n,r)=>{if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!r?.noResolveJson){const c=i.status||500,d=i;if(typeof d.json=="function")d.json().then(m=>{const f=m?.statusCode||m?.code||c+"";n(new Uu(Qh(m),c,f))}).catch(()=>{const m=c+"";n(new Uu(d.statusText||`HTTP ${c} error`,c,m))});else{const m=c+"";n(new Uu(d.statusText||`HTTP ${c} error`,c,m))}}else n(new Dy(Qh(i),i))},Uy=(i,n,r,c)=>{const d={method:i,headers:n?.headers||{}};return c?(xy(c)?(d.headers=je({"Content-Type":"application/json"},n?.headers),d.body=JSON.stringify(c)):d.body=c,je(je({},d),r)):d};async function jy(i,n,r,c,d,m){return new Promise((f,p)=>{i(r,Uy(n,c,d,m)).then(v=>{if(!v.ok)throw v;if(c?.noResolveJson)return v;const g=v.headers.get("content-type");return!g||!g.includes("application/json")?{}:v.json()}).then(v=>f(v)).catch(v=>My(v,p,c))})}async function La(i,n,r,c,d){return jy(i,"POST",n,c,d,r)}var By=class{constructor(i,n={},r){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=je(je({},ad),n),this.fetch=nd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(i){var n=this;try{return{data:await La(n.fetch,`${n.url}/CreateIndex`,i,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($a(r))return{data:null,error:r};throw r}}async getIndex(i,n){var r=this;try{return{data:await La(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:i,indexName:n},{headers:r.headers}),error:null}}catch(c){if(r.shouldThrowOnError)throw c;if($a(c))return{data:null,error:c};throw c}}async listIndexes(i){var n=this;try{return{data:await La(n.fetch,`${n.url}/ListIndexes`,i,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($a(r))return{data:null,error:r};throw r}}async deleteIndex(i,n){var r=this;try{return{data:await La(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:i,indexName:n},{headers:r.headers})||{},error:null}}catch(c){if(r.shouldThrowOnError)throw c;if($a(c))return{data:null,error:c};throw c}}},zy=class{constructor(i,n={},r){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=je(je({},ad),n),this.fetch=nd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(i){var n=this;try{if(i.vectors.length<1||i.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await La(n.fetch,`${n.url}/PutVectors`,i,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($a(r))return{data:null,error:r};throw r}}async getVectors(i){var n=this;try{return{data:await La(n.fetch,`${n.url}/GetVectors`,i,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($a(r))return{data:null,error:r};throw r}}async listVectors(i){var n=this;try{if(i.segmentCount!==void 0){if(i.segmentCount<1||i.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(i.segmentIndex!==void 0&&(i.segmentIndex<0||i.segmentIndex>=i.segmentCount))throw new Error(`segmentIndex must be between 0 and ${i.segmentCount-1}`)}return{data:await La(n.fetch,`${n.url}/ListVectors`,i,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($a(r))return{data:null,error:r};throw r}}async queryVectors(i){var n=this;try{return{data:await La(n.fetch,`${n.url}/QueryVectors`,i,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($a(r))return{data:null,error:r};throw r}}async deleteVectors(i){var n=this;try{if(i.keys.length<1||i.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await La(n.fetch,`${n.url}/DeleteVectors`,i,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($a(r))return{data:null,error:r};throw r}}},qy=class{constructor(i,n={},r){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=je(je({},ad),n),this.fetch=nd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var n=this;try{return{data:await La(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:i},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($a(r))return{data:null,error:r};throw r}}async getBucket(i){var n=this;try{return{data:await La(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:i},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($a(r))return{data:null,error:r};throw r}}async listBuckets(i={}){var n=this;try{return{data:await La(n.fetch,`${n.url}/ListVectorBuckets`,i,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($a(r))return{data:null,error:r};throw r}}async deleteBucket(i){var n=this;try{return{data:await La(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:i},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($a(r))return{data:null,error:r};throw r}}},$y=class extends qy{constructor(i,n={}){super(i,n.headers||{},n.fetch)}from(i){return new Ly(this.url,this.headers,i,this.fetch)}async createBucket(i){var n=()=>super.createBucket,r=this;return n().call(r,i)}async getBucket(i){var n=()=>super.getBucket,r=this;return n().call(r,i)}async listBuckets(i={}){var n=()=>super.listBuckets,r=this;return n().call(r,i)}async deleteBucket(i){var n=()=>super.deleteBucket,r=this;return n().call(r,i)}},Ly=class extends By{constructor(i,n,r,c){super(i,n,c),this.vectorBucketName=r}async createIndex(i){var n=()=>super.createIndex,r=this;return n().call(r,je(je({},i),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(i={}){var n=()=>super.listIndexes,r=this;return n().call(r,je(je({},i),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(i){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,i)}async deleteIndex(i){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,i)}index(i){return new Hy(this.url,this.headers,this.vectorBucketName,i,this.fetch)}},Hy=class extends zy{constructor(i,n,r,c,d){super(i,n,d),this.vectorBucketName=r,this.indexName=c}async putVectors(i){var n=()=>super.putVectors,r=this;return n().call(r,je(je({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(i){var n=()=>super.getVectors,r=this;return n().call(r,je(je({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(i={}){var n=()=>super.listVectors,r=this;return n().call(r,je(je({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(i){var n=()=>super.queryVectors,r=this;return n().call(r,je(je({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(i){var n=()=>super.deleteVectors,r=this;return n().call(r,je(je({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Gy=class extends Oy{constructor(i,n={},r,c){super(i,n,r,c)}from(i){return new Ay(this.url,this.headers,i,this.fetch)}get vectors(){return new $y(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Ry(this.url+"/iceberg",this.headers,this.fetch)}};const wp="2.91.0",qs=30*1e3,Qu=3,ju=Qu*qs,Vy="http://localhost:9999",Yy="supabase.auth.token",Iy={"X-Client-Info":`gotrue-js/${wp}`},Xu="X-Supabase-Api-Version",Sp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ky=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Py=600*1e3;class Qr extends Error{constructor(n,r,c){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=c}}function Ne(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class Qy extends Qr{constructor(n,r,c){super(n,r,c),this.name="AuthApiError",this.status=r,this.code=c}}function Xy(i){return Ne(i)&&i.name==="AuthApiError"}class Ql extends Qr{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Vn extends Qr{constructor(n,r,c,d){super(n,c,d),this.name=r,this.status=c}}class qa extends Vn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Jy(i){return Ne(i)&&i.name==="AuthSessionMissingError"}class Ds extends Vn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class uc extends Vn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class dc extends Vn{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Zy(i){return Ne(i)&&i.name==="AuthImplicitGrantRedirectError"}class Xh extends Vn{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fy extends Vn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ju extends Vn{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function Bu(i){return Ne(i)&&i.name==="AuthRetryableFetchError"}class Jh extends Vn{constructor(n,r,c){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=c}}class Zu extends Vn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const gc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Zh=` 	
\r=`.split(""),Wy=(()=>{const i=new Array(128);for(let n=0;n<i.length;n+=1)i[n]=-1;for(let n=0;n<Zh.length;n+=1)i[Zh[n].charCodeAt(0)]=-2;for(let n=0;n<gc.length;n+=1)i[gc[n].charCodeAt(0)]=n;return i})();function Fh(i,n,r){if(i!==null)for(n.queue=n.queue<<8|i,n.queuedBits+=8;n.queuedBits>=6;){const c=n.queue>>n.queuedBits-6&63;r(gc[c]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const c=n.queue>>n.queuedBits-6&63;r(gc[c]),n.queuedBits-=6}}function Np(i,n,r){const c=Wy[i];if(c>-1)for(n.queue=n.queue<<6|c,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(c===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Wh(i){const n=[],r=f=>{n.push(String.fromCodePoint(f))},c={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},m=f=>{a0(f,c,r)};for(let f=0;f<i.length;f+=1)Np(i.charCodeAt(f),d,m);return n.join("")}function e0(i,n){if(i<=127){n(i);return}else if(i<=2047){n(192|i>>6),n(128|i&63);return}else if(i<=65535){n(224|i>>12),n(128|i>>6&63),n(128|i&63);return}else if(i<=1114111){n(240|i>>18),n(128|i>>12&63),n(128|i>>6&63),n(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function t0(i,n){for(let r=0;r<i.length;r+=1){let c=i.charCodeAt(r);if(c>55295&&c<=56319){const d=(c-55296)*1024&65535;c=(i.charCodeAt(r+1)-56320&65535|d)+65536,r+=1}e0(c,n)}}function a0(i,n,r){if(n.utf8seq===0){if(i<=127){r(i);return}for(let c=1;c<6;c+=1)if((i>>7-c&1)===0){n.utf8seq=c;break}if(n.utf8seq===2)n.codepoint=i&31;else if(n.utf8seq===3)n.codepoint=i&15;else if(n.utf8seq===4)n.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|i&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function Hs(i){const n=[],r={queue:0,queuedBits:0},c=d=>{n.push(d)};for(let d=0;d<i.length;d+=1)Np(i.charCodeAt(d),r,c);return new Uint8Array(n)}function n0(i){const n=[];return t0(i,r=>n.push(r)),new Uint8Array(n)}function Xl(i){const n=[],r={queue:0,queuedBits:0},c=d=>{n.push(d)};return i.forEach(d=>Fh(d,r,c)),Fh(null,r,c),n.join("")}function l0(i){return Math.round(Date.now()/1e3)+i}function s0(){return Symbol("auth-callback")}const ua=()=>typeof window<"u"&&typeof document<"u",Vl={tested:!1,writable:!1},Cp=()=>{if(!ua())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Vl.tested)return Vl.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Vl.tested=!0,Vl.writable=!0}catch{Vl.tested=!0,Vl.writable=!1}return Vl.writable};function r0(i){const n={},r=new URL(i);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((d,m)=>{n[m]=d})}catch{}return r.searchParams.forEach((c,d)=>{n[d]=c}),n}const Tp=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),i0=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",$s=async(i,n,r)=>{await i.setItem(n,JSON.stringify(r))},Yl=async(i,n)=>{const r=await i.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ca=async(i,n)=>{await i.removeItem(n)};class wc{constructor(){this.promise=new wc.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}wc.promiseConstructor=Promise;function zu(i){const n=i.split(".");if(n.length!==3)throw new Zu("Invalid JWT structure");for(let c=0;c<n.length;c++)if(!Ky.test(n[c]))throw new Zu("JWT not in base64url format");return{header:JSON.parse(Wh(n[0])),payload:JSON.parse(Wh(n[1])),signature:Hs(n[2]),raw:{header:n[0],payload:n[1]}}}async function c0(i){return await new Promise(n=>{setTimeout(()=>n(null),i)})}function o0(i,n){return new Promise((c,d)=>{(async()=>{for(let m=0;m<1/0;m++)try{const f=await i(m);if(!n(m,null,f)){c(f);return}}catch(f){if(!n(m,f)){d(f);return}}})()})}function u0(i){return("0"+i.toString(16)).substr(-2)}function d0(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",c=r.length;let d="";for(let m=0;m<56;m++)d+=r.charAt(Math.floor(Math.random()*c));return d}return crypto.getRandomValues(n),Array.from(n,u0).join("")}async function m0(i){const r=new TextEncoder().encode(i),c=await crypto.subtle.digest("SHA-256",r),d=new Uint8Array(c);return Array.from(d).map(m=>String.fromCharCode(m)).join("")}async function f0(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const r=await m0(i);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xs(i,n,r=!1){const c=d0();let d=c;r&&(d+="/PASSWORD_RECOVERY"),await $s(i,`${n}-code-verifier`,d);const m=await f0(c);return[m,c===m?"plain":"s256"]}const h0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function p0(i){const n=i.headers.get(Xu);if(!n||!n.match(h0))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function v0(i){if(!i)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(i<=n)throw new Error("JWT has expired")}function g0(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const y0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ms(i){if(!y0.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function qu(){const i={};return new Proxy(i,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const c=r.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function b0(i,n){return new Proxy(i,{get:(r,c,d)=>{if(c==="__isInsecureUserWarningProxy")return!0;if(typeof c=="symbol"){const m=c.toString();if(m==="Symbol(Symbol.toPrimitive)"||m==="Symbol(Symbol.toStringTag)"||m==="Symbol(util.inspect.custom)"||m==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,c,d)}return!n.value&&typeof c=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,c,d)}})}function ep(i){return JSON.parse(JSON.stringify(i))}const Kl=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),E0=[502,503,504];async function tp(i){var n;if(!i0(i))throw new Ju(Kl(i),0);if(E0.includes(i.status))throw new Ju(Kl(i),i.status);let r;try{r=await i.json()}catch(m){throw new Ql(Kl(m),m)}let c;const d=p0(i);if(d&&d.getTime()>=Sp["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?c=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(c=r.error_code),c){if(c==="weak_password")throw new Jh(Kl(r),i.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(c==="session_not_found")throw new qa}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((m,f)=>m&&typeof f=="string",!0))throw new Jh(Kl(r),i.status,r.weak_password.reasons);throw new Qy(Kl(r),i.status||500,c)}const _0=(i,n,r,c)=>{const d={method:i,headers:n?.headers||{}};return i==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),d.body=JSON.stringify(c),Object.assign(Object.assign({},d),r))};async function Ue(i,n,r,c){var d;const m=Object.assign({},c?.headers);m[Xu]||(m[Xu]=Sp["2024-01-01"].name),c?.jwt&&(m.Authorization=`Bearer ${c.jwt}`);const f=(d=c?.query)!==null&&d!==void 0?d:{};c?.redirectTo&&(f.redirect_to=c.redirectTo);const p=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",v=await w0(i,n,r+p,{headers:m,noResolveJson:c?.noResolveJson},{},c?.body);return c?.xform?c?.xform(v):{data:Object.assign({},v),error:null}}async function w0(i,n,r,c,d,m){const f=_0(n,c,d,m);let p;try{p=await i(r,Object.assign({},f))}catch(v){throw console.error(v),new Ju(Kl(v),0)}if(p.ok||await tp(p),c?.noResolveJson)return p;try{return await p.json()}catch(v){await tp(v)}}function mn(i){var n;let r=null;C0(i)&&(r=Object.assign({},i),i.expires_at||(r.expires_at=l0(i.expires_in)));const c=(n=i.user)!==null&&n!==void 0?n:i;return{data:{session:r,user:c},error:null}}function ap(i){const n=mn(i);return!n.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((r,c)=>r&&typeof c=="string",!0)&&(n.data.weak_password=i.weak_password),n}function Cl(i){var n;return{data:{user:(n=i.user)!==null&&n!==void 0?n:i},error:null}}function S0(i){return{data:i,error:null}}function N0(i){const{action_link:n,email_otp:r,hashed_token:c,redirect_to:d,verification_type:m}=i,f=Ec(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:r,hashed_token:c,redirect_to:d,verification_type:m},v=Object.assign({},f);return{data:{properties:p,user:v},error:null}}function np(i){return i}function C0(i){return i.access_token&&i.refresh_token&&i.expires_in}const $u=["global","local","others"];class T0{constructor({url:n="",headers:r={},fetch:c}){this.url=n,this.headers=r,this.fetch=Tp(c),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=$u[0]){if($u.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${$u.join(", ")}`);try{return await Ue(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(c){if(Ne(c))return{data:null,error:c};throw c}}async inviteUserByEmail(n,r={}){try{return await Ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Cl})}catch(c){if(Ne(c))return{data:{user:null},error:c};throw c}}async generateLink(n){try{const{options:r}=n,c=Ec(n,["options"]),d=Object.assign(Object.assign({},c),r);return"newEmail"in c&&(d.new_email=c?.newEmail,delete d.newEmail),await Ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:N0,redirectTo:r?.redirectTo})}catch(r){if(Ne(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await Ue(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Cl})}catch(r){if(Ne(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,c,d,m,f,p,v;try{const g={nextPage:null,lastPage:0,total:0},T=await Ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(c=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&c!==void 0?c:"",per_page:(m=(d=n?.perPage)===null||d===void 0?void 0:d.toString())!==null&&m!==void 0?m:""},xform:np});if(T.error)throw T.error;const E=await T.json(),R=(f=T.headers.get("x-total-count"))!==null&&f!==void 0?f:0,z=(v=(p=T.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&v!==void 0?v:[];return z.length>0&&(z.forEach(x=>{const H=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(x.split(";")[1].split("=")[1]);g[`${j}Page`]=H}),g.total=parseInt(R)),{data:Object.assign(Object.assign({},E),g),error:null}}catch(g){if(Ne(g))return{data:{users:[]},error:g};throw g}}async getUserById(n){Ms(n);try{return await Ue(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Cl})}catch(r){if(Ne(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){Ms(n);try{return await Ue(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Cl})}catch(c){if(Ne(c))return{data:{user:null},error:c};throw c}}async deleteUser(n,r=!1){Ms(n);try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Cl})}catch(c){if(Ne(c))return{data:{user:null},error:c};throw c}}async _listFactors(n){Ms(n.userId);try{const{data:r,error:c}=await Ue(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:r,error:c}}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async _deleteFactor(n){Ms(n.userId),Ms(n.id);try{return{data:await Ue(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,c,d,m,f,p,v;try{const g={nextPage:null,lastPage:0,total:0},T=await Ue(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(c=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&c!==void 0?c:"",per_page:(m=(d=n?.perPage)===null||d===void 0?void 0:d.toString())!==null&&m!==void 0?m:""},xform:np});if(T.error)throw T.error;const E=await T.json(),R=(f=T.headers.get("x-total-count"))!==null&&f!==void 0?f:0,z=(v=(p=T.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&v!==void 0?v:[];return z.length>0&&(z.forEach(x=>{const H=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(x.split(";")[1].split("=")[1]);g[`${j}Page`]=H}),g.total=parseInt(R)),{data:Object.assign(Object.assign({},E),g),error:null}}catch(g){if(Ne(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(n){try{return await Ue(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await Ue(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await Ue(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:c=>({data:c,error:null})})}catch(c){if(Ne(c))return{data:null,error:c};throw c}}async _deleteOAuthClient(n){try{return await Ue(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await Ue(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ne(r))return{data:null,error:r};throw r}}}function lp(i={}){return{getItem:n=>i[n]||null,setItem:(n,r)=>{i[n]=r},removeItem:n=>{delete i[n]}}}const Us={debug:!!(globalThis&&Cp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class kp extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class k0 extends kp{}async function A0(i,n,r){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,n);const c=new globalThis.AbortController;return n>0&&setTimeout(()=>{c.abort(),Us.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:c.signal},async d=>{if(d){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,d.name);try{return await r()}finally{Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,d.name)}}else{if(n===0)throw Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new k0(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Us.debug)try{const m=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(m,null,"  "))}catch(m){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",m)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function O0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ap(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function R0(i){return parseInt(i,16)}function D0(i){const n=new TextEncoder().encode(i);return"0x"+Array.from(n,c=>c.toString(16).padStart(2,"0")).join("")}function x0(i){var n;const{chainId:r,domain:c,expirationTime:d,issuedAt:m=new Date,nonce:f,notBefore:p,requestId:v,resources:g,scheme:T,uri:E,version:R}=i;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!c)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(R!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${R}`);if(!((n=i.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const z=Ap(i.address),x=T?`${T}://${c}`:c,H=i.statement?`${i.statement}
`:"",j=`${x} wants you to sign in with your Ethereum account:
${z}

${H}`;let ee=`URI: ${E}
Version: ${R}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${m.toISOString()}`;if(d&&(ee+=`
Expiration Time: ${d.toISOString()}`),p&&(ee+=`
Not Before: ${p.toISOString()}`),v&&(ee+=`
Request ID: ${v}`),g){let se=`
Resources:`;for(const J of g){if(!J||typeof J!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${J}`);se+=`
- ${J}`}ee+=se}return`${j}
${ee}`}class Pt extends Error{constructor({message:n,code:r,cause:c,name:d}){var m;super(n,{cause:c}),this.__isWebAuthnError=!0,this.name=(m=d??(c instanceof Error?c.name:void 0))!==null&&m!==void 0?m:"Unknown Error",this.code=r}}class yc extends Pt{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function M0({error:i,options:n}){var r,c,d;const{publicKey:m}=n;if(!m)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Pt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((r=m.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Pt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(n.mediation==="conditional"&&((c=m.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new Pt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((d=m.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new Pt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new Pt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new Pt({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return m.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new Pt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new Pt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const f=window.location.hostname;if(Op(f)){if(m.rp.id!==f)return new Pt({message:`The RP ID "${m.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(m.user.id.byteLength<1||m.user.id.byteLength>64)return new Pt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function U0({error:i,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Pt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new Pt({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const c=window.location.hostname;if(Op(c)){if(r.rpId!==c)return new Pt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class j0{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const B0=new j0;function z0(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:n,user:r,excludeCredentials:c}=i,d=Ec(i,["challenge","user","excludeCredentials"]),m=Hs(n).buffer,f=Object.assign(Object.assign({},r),{id:Hs(r.id).buffer}),p=Object.assign(Object.assign({},d),{challenge:m,user:f});if(c&&c.length>0){p.excludeCredentials=new Array(c.length);for(let v=0;v<c.length;v++){const g=c[v];p.excludeCredentials[v]=Object.assign(Object.assign({},g),{id:Hs(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return p}function q0(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:n,allowCredentials:r}=i,c=Ec(i,["challenge","allowCredentials"]),d=Hs(n).buffer,m=Object.assign(Object.assign({},c),{challenge:d});if(r&&r.length>0){m.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const p=r[f];m.allowCredentials[f]=Object.assign(Object.assign({},p),{id:Hs(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return m}function $0(i){var n;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const r=i;return{id:i.id,rawId:i.id,response:{attestationObject:Xl(new Uint8Array(i.response.attestationObject)),clientDataJSON:Xl(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function L0(i){var n;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const r=i,c=i.getClientExtensionResults(),d=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:Xl(new Uint8Array(d.authenticatorData)),clientDataJSON:Xl(new Uint8Array(d.clientDataJSON)),signature:Xl(new Uint8Array(d.signature)),userHandle:d.userHandle?Xl(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:c,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Op(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function sp(){var i,n;return!!(ua()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function H0(i){try{const n=await navigator.credentials.create(i);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new yc("Browser returned unexpected credential type",n)}:{data:null,error:new yc("Empty credential response",n)}}catch(n){return{data:null,error:M0({error:n,options:i})}}}async function G0(i){try{const n=await navigator.credentials.get(i);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new yc("Browser returned unexpected credential type",n)}:{data:null,error:new yc("Empty credential response",n)}}catch(n){return{data:null,error:U0({error:n,options:i})}}}const V0={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Y0={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function bc(...i){const n=d=>d!==null&&typeof d=="object"&&!Array.isArray(d),r=d=>d instanceof ArrayBuffer||ArrayBuffer.isView(d),c={};for(const d of i)if(d)for(const m in d){const f=d[m];if(f!==void 0)if(Array.isArray(f))c[m]=f;else if(r(f))c[m]=f;else if(n(f)){const p=c[m];n(p)?c[m]=bc(p,f):c[m]=bc(f)}else c[m]=f}return c}function I0(i,n){return bc(V0,i,n||{})}function K0(i,n){return bc(Y0,i,n||{})}class P0{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:c,signal:d},m){try{const{data:f,error:p}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!f)return{data:null,error:p};const v=d??B0.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:g}=f.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${c}`),g.displayName||(g.displayName=g.name)}switch(f.webauthn.type){case"create":{const g=I0(f.webauthn.credential_options.publicKey,m?.create),{data:T,error:E}=await H0({publicKey:g,signal:v});return T?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:T}},error:null}:{data:null,error:E}}case"request":{const g=K0(f.webauthn.credential_options.publicKey,m?.request),{data:T,error:E}=await G0(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:g,signal:v}));return T?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:T}},error:null}:{data:null,error:E}}}}catch(f){return Ne(f)?{data:null,error:f}:{data:null,error:new Ql("Unexpected error in challenge",f)}}}async _verify({challengeId:n,factorId:r,webauthn:c}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:c})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:c=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},m){if(!r)return{data:null,error:new Qr("rpId is required for WebAuthn authentication")};try{if(!sp())return{data:null,error:new Ql("Browser does not support WebAuthn",null)};const{data:f,error:p}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:c},signal:d},{request:m});if(!f)return{data:null,error:p};const{webauthn:v}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:v.type,rpId:r,rpOrigins:c,credential_response:v.credential_response}})}catch(f){return Ne(f)?{data:null,error:f}:{data:null,error:new Ql("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:c=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},m){if(!r)return{data:null,error:new Qr("rpId is required for WebAuthn registration")};try{if(!sp())return{data:null,error:new Ql("Browser does not support WebAuthn",null)};const{data:f,error:p}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(T=>{var E;return(E=T.data)===null||E===void 0?void 0:E.all.find(R=>R.factor_type==="webauthn"&&R.friendly_name===n&&R.status!=="unverified")}).then(T=>T?this.client.mfa.unenroll({factorId:T?.id}):void 0),{data:null,error:p};const{data:v,error:g}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:c},signal:d},{create:m});return v?this._verify({factorId:f.id,challengeId:v.challengeId,webauthn:{rpId:r,rpOrigins:c,type:v.webauthn.type,credential_response:v.webauthn.credential_response}}):{data:null,error:g}}catch(f){return Ne(f)?{data:null,error:f}:{data:null,error:new Ql("Unexpected error in register",f)}}}}O0();const Q0={url:Vy,storageKey:Yy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Iy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function rp(i,n,r){return await r()}const js={};class Xr{get jwks(){var n,r;return(r=(n=js[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){js[this.storageKey]=Object.assign(Object.assign({},js[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=js[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){js[this.storageKey]=Object.assign(Object.assign({},js[this.storageKey]),{cachedAt:n})}constructor(n){var r,c,d;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const m=Object.assign(Object.assign({},Q0),n);if(this.storageKey=m.storageKey,this.instanceID=(r=Xr.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Xr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!m.debug,typeof m.debug=="function"&&(this.logger=m.debug),this.instanceID>0&&ua()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=m.persistSession,this.autoRefreshToken=m.autoRefreshToken,this.admin=new T0({url:m.url,headers:m.headers,fetch:m.fetch}),this.url=m.url,this.headers=m.headers,this.fetch=Tp(m.fetch),this.lock=m.lock||rp,this.detectSessionInUrl=m.detectSessionInUrl,this.flowType=m.flowType,this.hasCustomAuthorizationHeader=m.hasCustomAuthorizationHeader,this.throwOnError=m.throwOnError,this.lockAcquireTimeout=m.lockAcquireTimeout,m.lock?this.lock=m.lock:this.persistSession&&ua()&&(!((c=globalThis?.navigator)===null||c===void 0)&&c.locks)?this.lock=A0:this.lock=rp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new P0(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(m.storage?this.storage=m.storage:Cp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lp(this.memoryStorage)),m.userStorage&&(this.userStorage=m.userStorage)):(this.memoryStorage={},this.storage=lp(this.memoryStorage)),ua()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(d=this.broadcastChannel)===null||d===void 0||d.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${wp}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},c="none";if(ua()&&(r=r0(window.location.href),this._isImplicitGrantCallback(r)?c="implicit":await this._isPKCECallback(r)&&(c="pkce")),ua()&&this.detectSessionInUrl&&c!=="none"){const{data:d,error:m}=await this._getSessionFromURL(r,c);if(m){if(this._debug("#_initialize()","error detecting session from URL",m),Zy(m)){const v=(n=m.details)===null||n===void 0?void 0:n.code;if(v==="identity_already_exists"||v==="identity_not_found"||v==="single_identity_not_deletable")return{error:m}}return{error:m}}const{session:f,redirectType:p}=d;return this._debug("#_initialize()","detected session in URL",f,"redirect type",p),await this._saveSession(f),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ne(r)?this._returnResult({error:r}):this._returnResult({error:new Ql("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,c,d;try{const m=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(c=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&c!==void 0?c:{},gotrue_meta_security:{captcha_token:(d=n?.options)===null||d===void 0?void 0:d.captchaToken}},xform:mn}),{data:f,error:p}=m;if(p||!f)return this._returnResult({data:{user:null,session:null},error:p});const v=f.session,g=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:g,session:v},error:null})}catch(m){if(Ne(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signUp(n){var r,c,d;try{let m;if("email"in n){const{email:T,password:E,options:R}=n;let z=null,x=null;this.flowType==="pkce"&&([z,x]=await xs(this.storage,this.storageKey)),m=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:R?.emailRedirectTo,body:{email:T,password:E,data:(r=R?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:R?.captchaToken},code_challenge:z,code_challenge_method:x},xform:mn})}else if("phone"in n){const{phone:T,password:E,options:R}=n;m=await Ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:T,password:E,data:(c=R?.data)!==null&&c!==void 0?c:{},channel:(d=R?.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:R?.captchaToken}},xform:mn})}else throw new uc("You must provide either an email or phone number and a password");const{data:f,error:p}=m;if(p||!f)return await ca(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const v=f.session,g=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:g,session:v},error:null})}catch(m){if(await ca(this.storage,`${this.storageKey}-code-verifier`),Ne(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithPassword(n){try{let r;if("email"in n){const{email:m,password:f,options:p}=n;r=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:m,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:ap})}else if("phone"in n){const{phone:m,password:f,options:p}=n;r=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:m,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:ap})}else throw new uc("You must provide either an email or phone number and a password");const{data:c,error:d}=r;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const m=new Ds;return this._returnResult({data:{user:null,session:null},error:m})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign({user:c.user,session:c.session},c.weak_password?{weakPassword:c.weak_password}:null),error:d})}catch(r){if(Ne(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,c,d,m;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(c=n.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=n.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(m=n.options)===null||m===void 0?void 0:m.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,c,d,m,f,p,v,g,T,E,R;let z,x;if("message"in n)z=n.message,x=n.signature;else{const{chain:H,wallet:j,statement:ee,options:se}=n;let J;if(ua())if(typeof j=="object")J=j;else{const oe=window;if("ethereum"in oe&&typeof oe.ethereum=="object"&&"request"in oe.ethereum&&typeof oe.ethereum.request=="function")J=oe.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!se?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");J=j}const ge=new URL((r=se?.url)!==null&&r!==void 0?r:window.location.href),Se=await J.request({method:"eth_requestAccounts"}).then(oe=>oe).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Se||Se.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const D=Ap(Se[0]);let ce=(c=se?.signInWithEthereum)===null||c===void 0?void 0:c.chainId;if(!ce){const oe=await J.request({method:"eth_chainId"});ce=R0(oe)}const P={domain:ge.host,address:D,statement:ee,uri:ge.href,version:"1",chainId:ce,nonce:(d=se?.signInWithEthereum)===null||d===void 0?void 0:d.nonce,issuedAt:(f=(m=se?.signInWithEthereum)===null||m===void 0?void 0:m.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(p=se?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(v=se?.signInWithEthereum)===null||v===void 0?void 0:v.notBefore,requestId:(g=se?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(T=se?.signInWithEthereum)===null||T===void 0?void 0:T.resources};z=x0(P),x=await J.request({method:"personal_sign",params:[D0(z),D]})}try{const{data:H,error:j}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:z,signature:x},!((E=n.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(R=n.options)===null||R===void 0?void 0:R.captchaToken}}:null),xform:mn});if(j)throw j;if(!H||!H.session||!H.user){const ee=new Ds;return this._returnResult({data:{user:null,session:null},error:ee})}return H.session&&(await this._saveSession(H.session),await this._notifyAllSubscribers("SIGNED_IN",H.session)),this._returnResult({data:Object.assign({},H),error:j})}catch(H){if(Ne(H))return this._returnResult({data:{user:null,session:null},error:H});throw H}}async signInWithSolana(n){var r,c,d,m,f,p,v,g,T,E,R,z;let x,H;if("message"in n)x=n.message,H=n.signature;else{const{chain:j,wallet:ee,statement:se,options:J}=n;let ge;if(ua())if(typeof ee=="object")ge=ee;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))ge=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof ee!="object"||!J?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ge=ee}const Se=new URL((r=J?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in ge&&ge.signIn){const D=await ge.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},J?.signInWithSolana),{version:"1",domain:Se.host,uri:Se.href}),se?{statement:se}:null));let ce;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")ce=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)ce=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ce&&"signature"in ce&&(typeof ce.signedMessage=="string"||ce.signedMessage instanceof Uint8Array)&&ce.signature instanceof Uint8Array)x=typeof ce.signedMessage=="string"?ce.signedMessage:new TextDecoder().decode(ce.signedMessage),H=ce.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ge)||typeof ge.signMessage!="function"||!("publicKey"in ge)||typeof ge!="object"||!ge.publicKey||!("toBase58"in ge.publicKey)||typeof ge.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${Se.host} wants you to sign in with your Solana account:`,ge.publicKey.toBase58(),...se?["",se,""]:[""],"Version: 1",`URI: ${Se.href}`,`Issued At: ${(d=(c=J?.signInWithSolana)===null||c===void 0?void 0:c.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((m=J?.signInWithSolana)===null||m===void 0)&&m.notBefore?[`Not Before: ${J.signInWithSolana.notBefore}`]:[],...!((f=J?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${J.signInWithSolana.expirationTime}`]:[],...!((p=J?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${J.signInWithSolana.chainId}`]:[],...!((v=J?.signInWithSolana)===null||v===void 0)&&v.nonce?[`Nonce: ${J.signInWithSolana.nonce}`]:[],...!((g=J?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${J.signInWithSolana.requestId}`]:[],...!((E=(T=J?.signInWithSolana)===null||T===void 0?void 0:T.resources)===null||E===void 0)&&E.length?["Resources",...J.signInWithSolana.resources.map(ce=>`- ${ce}`)]:[]].join(`
`);const D=await ge.signMessage(new TextEncoder().encode(x),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");H=D}}try{const{data:j,error:ee}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Xl(H)},!((R=n.options)===null||R===void 0)&&R.captchaToken?{gotrue_meta_security:{captcha_token:(z=n.options)===null||z===void 0?void 0:z.captchaToken}}:null),xform:mn});if(ee)throw ee;if(!j||!j.session||!j.user){const se=new Ds;return this._returnResult({data:{user:null,session:null},error:se})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:ee})}catch(j){if(Ne(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async _exchangeCodeForSession(n){const r=await Yl(this.storage,`${this.storageKey}-code-verifier`),[c,d]=(r??"").split("/");try{if(!c&&this.flowType==="pkce")throw new Fy;const{data:m,error:f}=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:c},xform:mn});if(await ca(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!m||!m.session||!m.user){const p=new Ds;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return m.session&&(await this._saveSession(m.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",m.session)},0)),this._returnResult({data:Object.assign(Object.assign({},m),{redirectType:d??null}),error:f})}catch(m){if(await ca(this.storage,`${this.storageKey}-code-verifier`),Ne(m))return this._returnResult({data:{user:null,session:null,redirectType:null},error:m});throw m}}async signInWithIdToken(n){try{const{options:r,provider:c,token:d,access_token:m,nonce:f}=n,p=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:c,id_token:d,access_token:m,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:mn}),{data:v,error:g}=p;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!v||!v.session||!v.user){const T=new Ds;return this._returnResult({data:{user:null,session:null},error:T})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:v,error:g})}catch(r){if(Ne(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,c,d,m,f;try{if("email"in n){const{email:p,options:v}=n;let g=null,T=null;this.flowType==="pkce"&&([g,T]=await xs(this.storage,this.storageKey));const{error:E}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(r=v?.data)!==null&&r!==void 0?r:{},create_user:(c=v?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:g,code_challenge_method:T},redirectTo:v?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}if("phone"in n){const{phone:p,options:v}=n,{data:g,error:T}=await Ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(d=v?.data)!==null&&d!==void 0?d:{},create_user:(m=v?.shouldCreateUser)!==null&&m!==void 0?m:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},channel:(f=v?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:T})}throw new uc("You must provide either an email or phone number.")}catch(p){if(await ca(this.storage,`${this.storageKey}-code-verifier`),Ne(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(n){var r,c;try{let d,m;"options"in n&&(d=(r=n.options)===null||r===void 0?void 0:r.redirectTo,m=(c=n.options)===null||c===void 0?void 0:c.captchaToken);const{data:f,error:p}=await Ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:m}}),redirectTo:d,xform:mn});if(p)throw p;if(!f)throw new Error("An error occurred on token verification.");const v=f.session,g=f.user;return v?.access_token&&(await this._saveSession(v),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",v)),this._returnResult({data:{user:g,session:v},error:null})}catch(d){if(Ne(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithSSO(n){var r,c,d,m,f;try{let p=null,v=null;this.flowType==="pkce"&&([p,v]=await xs(this.storage,this.storageKey));const g=await Ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(c=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&c!==void 0?c:void 0}),!((d=n?.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:v}),headers:this.headers,xform:S0});return!((m=g.data)===null||m===void 0)&&m.url&&ua()&&!(!((f=n.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(p){if(await ca(this.storage,`${this.storageKey}-code-verifier`),Ne(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:c}=n;if(c)throw c;if(!r)throw new qa;const{error:d}=await Ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(n){if(Ne(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:c,type:d,options:m}=n,{error:f}=await Ue(this.fetch,"POST",r,{headers:this.headers,body:{email:c,type:d,gotrue_meta_security:{captcha_token:m?.captchaToken}},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in n){const{phone:c,type:d,options:m}=n,{data:f,error:p}=await Ue(this.fetch,"POST",r,{headers:this.headers,body:{phone:c,type:d,gotrue_meta_security:{captcha_token:m?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:p})}throw new uc("You must provide either an email or phone number and a type")}catch(r){if(Ne(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const c=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await c,await r()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const c=r();for(this.pendingInLock.push((async()=>{try{await c}catch{}})()),await c;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await c}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await Yl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const c=n.expires_at?n.expires_at*1e3-Date.now()<ju:!1;if(this._debug("#__loadSession()",`session has${c?"":" not"} expired`,"expires_at",n.expires_at),!c){if(this.userStorage){const f=await Yl(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=qu()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};n.user=b0(n.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:d,error:m}=await this._callRefreshToken(n.refresh_token);return m?this._returnResult({data:{session:null},error:m}):this._returnResult({data:{session:d},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Cl}):await this._useSession(async r=>{var c,d,m;const{data:f,error:p}=r;if(p)throw p;return!(!((c=f.session)===null||c===void 0)&&c.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qa}:await Ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(m=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&m!==void 0?m:void 0,xform:Cl})})}catch(r){if(Ne(r))return Jy(r)&&(await this._removeSession(),await ca(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async c=>{const{data:d,error:m}=c;if(m)throw m;if(!d.session)throw new qa;const f=d.session;let p=null,v=null;this.flowType==="pkce"&&n.email!=null&&([p,v]=await xs(this.storage,this.storageKey));const{data:g,error:T}=await Ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:v}),jwt:f.access_token,xform:Cl});if(T)throw T;return f.user=g.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(c){if(await ca(this.storage,`${this.storageKey}-code-verifier`),Ne(c))return this._returnResult({data:{user:null},error:c});throw c}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new qa;const r=Date.now()/1e3;let c=r,d=!0,m=null;const{payload:f}=zu(n.access_token);if(f.exp&&(c=f.exp,d=c<=r),d){const{data:p,error:v}=await this._callRefreshToken(n.refresh_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!p)return{data:{user:null,session:null},error:null};m=p}else{const{data:p,error:v}=await this._getUser(n.access_token);if(v)throw v;m={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:c-r,expires_at:c},await this._saveSession(m),await this._notifyAllSubscribers("SIGNED_IN",m)}return this._returnResult({data:{user:m.user,session:m},error:null})}catch(r){if(Ne(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var c;if(!n){const{data:f,error:p}=r;if(p)throw p;n=(c=f.session)!==null&&c!==void 0?c:void 0}if(!n?.refresh_token)throw new qa;const{data:d,error:m}=await this._callRefreshToken(n.refresh_token);return m?this._returnResult({data:{user:null,session:null},error:m}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Ne(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!ua())throw new dc("No browser detected.");if(n.error||n.error_description||n.error_code)throw new dc(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Xh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new dc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Xh("No code detected.");const{data:se,error:J}=await this._exchangeCodeForSession(n.code);if(J)throw J;const ge=new URL(window.location.href);return ge.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ge.toString()),{data:{session:se.session,redirectType:null},error:null}}const{provider_token:c,provider_refresh_token:d,access_token:m,refresh_token:f,expires_in:p,expires_at:v,token_type:g}=n;if(!m||!p||!f||!g)throw new dc("No session defined in URL");const T=Math.round(Date.now()/1e3),E=parseInt(p);let R=T+E;v&&(R=parseInt(v));const z=R-T;z*1e3<=qs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${z}s, should have been closer to ${E}s`);const x=R-E;T-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,R,T):T-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,R,T);const{data:H,error:j}=await this._getUser(m);if(j)throw j;const ee={provider_token:c,provider_refresh_token:d,access_token:m,expires_in:E,expires_at:R,refresh_token:f,token_type:g,user:H.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:ee,redirectType:n.type},error:null})}catch(c){if(Ne(c))return this._returnResult({data:{session:null,redirectType:null},error:c});throw c}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await Yl(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var c;const{data:d,error:m}=r;if(m)return this._returnResult({error:m});const f=(c=d.session)===null||c===void 0?void 0:c.access_token;if(f){const{error:p}=await this.admin.signOut(f,n);if(p&&!(Xy(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return n!=="others"&&(await this._removeSession(),await ca(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=s0(),c={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,c),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:c}}}async _emitInitialSession(n){return await this._useSession(async r=>{var c,d;try{const{data:{session:m},error:f}=r;if(f)throw f;await((c=this.stateChangeEmitters.get(n))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",m)),this._debug("INITIAL_SESSION","callback id",n,"session",m)}catch(m){await((d=this.stateChangeEmitters.get(n))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",m),console.error(m)}})}async resetPasswordForEmail(n,r={}){let c=null,d=null;this.flowType==="pkce"&&([c,d]=await xs(this.storage,this.storageKey,!0));try{return await Ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:c,code_challenge_method:d,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(m){if(await ca(this.storage,`${this.storageKey}-code-verifier`),Ne(m))return this._returnResult({data:null,error:m});throw m}}async getUserIdentities(){var n;try{const{data:r,error:c}=await this.getUser();if(c)throw c;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(Ne(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:c,error:d}=await this._useSession(async m=>{var f,p,v,g,T;const{data:E,error:R}=m;if(R)throw R;const z=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(v=n.options)===null||v===void 0?void 0:v.queryParams,skipBrowserRedirect:!0});return await Ue(this.fetch,"GET",z,{headers:this.headers,jwt:(T=(g=E.session)===null||g===void 0?void 0:g.access_token)!==null&&T!==void 0?T:void 0})});if(d)throw d;return ua()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(c?.url),this._returnResult({data:{provider:n.provider,url:c?.url},error:null})}catch(c){if(Ne(c))return this._returnResult({data:{provider:n.provider,url:null},error:c});throw c}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var c;try{const{error:d,data:{session:m}}=r;if(d)throw d;const{options:f,provider:p,token:v,access_token:g,nonce:T}=n,E=await Ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(c=m?.access_token)!==null&&c!==void 0?c:void 0,body:{provider:p,id_token:v,access_token:g,nonce:T,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:mn}),{data:R,error:z}=E;return z?this._returnResult({data:{user:null,session:null},error:z}):!R||!R.session||!R.user?this._returnResult({data:{user:null,session:null},error:new Ds}):(R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("USER_UPDATED",R.session)),this._returnResult({data:R,error:z}))}catch(d){if(await ca(this.storage,`${this.storageKey}-code-verifier`),Ne(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var c,d;const{data:m,error:f}=r;if(f)throw f;return await Ue(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(d=(c=m.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})})}catch(r){if(Ne(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const c=Date.now();return await o0(async d=>(d>0&&await c0(200*Math.pow(2,d-1)),this._debug(r,"refreshing attempt",d),await Ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:mn})),(d,m)=>{const f=200*Math.pow(2,d);return m&&Bu(m)&&Date.now()+f-c<qs})}catch(c){if(this._debug(r,"error",c),Ne(c))return this._returnResult({data:{session:null,user:null},error:c});throw c}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const c=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",c),ua()&&!r.skipBrowserRedirect&&window.location.assign(c),{data:{provider:n,url:c},error:null}}async _recoverAndRefresh(){var n,r;const c="#_recoverAndRefresh()";this._debug(c,"begin");try{const d=await Yl(this.storage,this.storageKey);if(d&&this.userStorage){let f=await Yl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:d.user},await $s(this.userStorage,this.storageKey+"-user",f)),d.user=(n=f?.user)!==null&&n!==void 0?n:qu()}else if(d&&!d.user&&!d.user){const f=await Yl(this.storage,this.storageKey+"-user");f&&f?.user?(d.user=f.user,await ca(this.storage,this.storageKey+"-user"),await $s(this.storage,this.storageKey,d)):d.user=qu()}if(this._debug(c,"session from storage",d),!this._isValidSession(d)){this._debug(c,"session is not valid"),d!==null&&await this._removeSession();return}const m=((r=d.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<ju;if(this._debug(c,`session has${m?"":" not"} expired with margin of ${ju}s`),m){if(this.autoRefreshToken&&d.refresh_token){const{error:f}=await this._callRefreshToken(d.refresh_token);f&&(console.error(f),Bu(f)||(this._debug(c,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:p}=await this._getUser(d.access_token);!p&&f?.user?(d.user=f.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(c,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(c,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(c,"error",d),console.error(d);return}finally{this._debug(c,"end")}}async _callRefreshToken(n){var r,c;if(!n)throw new qa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new wc;const{data:m,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!m.session)throw new qa;await this._saveSession(m.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",m.session);const p={data:m.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(m){if(this._debug(d,"error",m),Ne(m)){const f={data:null,error:m};return Bu(m)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(c=this.refreshingDeferred)===null||c===void 0||c.reject(m),m}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(n,r,c=!0){const d=`#_notifyAllSubscribers(${n})`;this._debug(d,"begin",r,`broadcast = ${c}`);try{this.broadcastChannel&&c&&this.broadcastChannel.postMessage({event:n,session:r});const m=[],f=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,r)}catch(v){m.push(v)}});if(await Promise.all(f),m.length>0){for(let p=0;p<m.length;p+=1)console.error(m[p]);throw m[0]}}finally{this._debug(d,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await ca(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),c=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!c&&r.user&&await $s(this.userStorage,this.storageKey+"-user",{user:r.user});const d=Object.assign({},r);delete d.user;const m=ep(d);await $s(this.storage,this.storageKey,m)}else{const d=ep(r);await $s(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ca(this.storage,this.storageKey),await ca(this.storage,this.storageKey+"-code-verifier"),await ca(this.storage,this.storageKey+"-user"),this.userStorage&&await ca(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&ua()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),qs);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:c}}=r;if(!c||!c.refresh_token||!c.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((c.expires_at*1e3-n)/qs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${qs}ms, refresh threshold is ${Qu} ticks`),d<=Qu&&await this._callRefreshToken(c.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof kp)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ua()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,c){const d=[`provider=${encodeURIComponent(r)}`];if(c?.redirectTo&&d.push(`redirect_to=${encodeURIComponent(c.redirectTo)}`),c?.scopes&&d.push(`scopes=${encodeURIComponent(c.scopes)}`),this.flowType==="pkce"){const[m,f]=await xs(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(m)}`,code_challenge_method:`${encodeURIComponent(f)}`});d.push(p.toString())}if(c?.queryParams){const m=new URLSearchParams(c.queryParams);d.push(m.toString())}return c?.skipBrowserRedirect&&d.push(`skip_http_redirect=${c.skipBrowserRedirect}`),`${n}?${d.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var c;const{data:d,error:m}=r;return m?this._returnResult({data:null,error:m}):await Ue(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(c=d?.session)===null||c===void 0?void 0:c.access_token})})}catch(r){if(Ne(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var c,d;const{data:m,error:f}=r;if(f)return this._returnResult({data:null,error:f});const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:v,error:g}=await Ue(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(c=m?.session)===null||c===void 0?void 0:c.access_token});return g?this._returnResult({data:null,error:g}):(n.factorType==="totp"&&v.type==="totp"&&(!((d=v?.totp)===null||d===void 0)&&d.qr_code)&&(v.totp.qr_code=`data:image/svg+xml;utf-8,${v.totp.qr_code}`),this._returnResult({data:v,error:null}))})}catch(r){if(Ne(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var c;const{data:d,error:m}=r;if(m)return this._returnResult({data:null,error:m});const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?$0(n.webauthn.credential_response):L0(n.webauthn.credential_response)})}:{code:n.code}),{data:p,error:v}=await Ue(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(c=d?.session)===null||c===void 0?void 0:c.access_token});return v?this._returnResult({data:null,error:v}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:v}))})}catch(r){if(Ne(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var c;const{data:d,error:m}=r;if(m)return this._returnResult({data:null,error:m});const f=await Ue(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(c=d?.session)===null||c===void 0?void 0:c.access_token});if(f.error)return f;const{data:p}=f;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:z0(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:q0(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Ne(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:c}=await this._challenge({factorId:n.factorId});return c?this._returnResult({data:null,error:c}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:c}=await this.getUser();if(c)return{data:null,error:c};const d={all:[],phone:[],totp:[],webauthn:[]};for(const m of(n=r?.factors)!==null&&n!==void 0?n:[])d.all.push(m),m.status==="verified"&&d[m.factor_type].push(m);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(){var n,r;const{data:{session:c},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=zu(c.access_token);let f=null;m.aal&&(f=m.aal);let p=f;((r=(n=c.user.factors)===null||n===void 0?void 0:n.filter(T=>T.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(p="aal2");const g=m.amr||[];return{data:{currentLevel:f,nextLevel:p,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:c},error:d}=r;return d?this._returnResult({data:null,error:d}):c?await Ue(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:c.access_token,xform:m=>({data:m,error:null})}):this._returnResult({data:null,error:new qa})})}catch(r){if(Ne(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async c=>{const{data:{session:d},error:m}=c;if(m)return this._returnResult({data:null,error:m});if(!d)return this._returnResult({data:null,error:new qa});const f=await Ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return f.data&&f.data.redirect_url&&ua()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(c){if(Ne(c))return this._returnResult({data:null,error:c});throw c}}async _denyAuthorization(n,r){try{return await this._useSession(async c=>{const{data:{session:d},error:m}=c;if(m)return this._returnResult({data:null,error:m});if(!d)return this._returnResult({data:null,error:new qa});const f=await Ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return f.data&&f.data.redirect_url&&ua()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(c){if(Ne(c))return this._returnResult({data:null,error:c});throw c}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:c}=n;return c?this._returnResult({data:null,error:c}):r?await Ue(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new qa})})}catch(n){if(Ne(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:c},error:d}=r;return d?this._returnResult({data:null,error:d}):c?(await Ue(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:c.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new qa})})}catch(r){if(Ne(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let c=r.keys.find(p=>p.kid===n);if(c)return c;const d=Date.now();if(c=this.jwks.keys.find(p=>p.kid===n),c&&this.jwks_cached_at+Py>d)return c;const{data:m,error:f}=await Ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!m.keys||m.keys.length===0||(this.jwks=m,this.jwks_cached_at=d,c=m.keys.find(p=>p.kid===n),!c)?null:c}async getClaims(n,r={}){try{let c=n;if(!c){const{data:z,error:x}=await this.getSession();if(x||!z.session)return this._returnResult({data:null,error:x});c=z.session.access_token}const{header:d,payload:m,signature:f,raw:{header:p,payload:v}}=zu(c);r?.allowExpired||v0(m.exp);const g=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!g){const{error:z}=await this.getUser(c);if(z)throw z;return{data:{claims:m,header:d,signature:f},error:null}}const T=g0(d.alg),E=await crypto.subtle.importKey("jwk",g,T,!0,["verify"]);if(!await crypto.subtle.verify(T,E,f,n0(`${p}.${v}`)))throw new Zu("Invalid JWT signature");return{data:{claims:m,header:d,signature:f},error:null}}catch(c){if(Ne(c))return this._returnResult({data:null,error:c});throw c}}}Xr.nextInstanceID={};const X0=Xr,J0="2.91.0";let Hr="";typeof Deno<"u"?Hr="deno":typeof document<"u"?Hr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Hr="react-native":Hr="node";const Z0={"X-Client-Info":`supabase-js-${Hr}/${J0}`},F0={headers:Z0},W0={schema:"public"},eb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tb={};function Jr(i){"@babel/helpers - typeof";return Jr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Jr(i)}function ab(i,n){if(Jr(i)!="object"||!i)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var c=r.call(i,n);if(Jr(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function nb(i){var n=ab(i,"string");return Jr(n)=="symbol"?n:n+""}function lb(i,n,r){return(n=nb(n))in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i}function ip(i,n){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);n&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(i,d).enumerable})),r.push.apply(r,c)}return r}function Bt(i){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ip(Object(r),!0).forEach(function(c){lb(i,c,r[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):ip(Object(r)).forEach(function(c){Object.defineProperty(i,c,Object.getOwnPropertyDescriptor(r,c))})}return i}const sb=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),rb=()=>Headers,ib=(i,n,r)=>{const c=sb(r),d=rb();return async(m,f)=>{var p;const v=(p=await n())!==null&&p!==void 0?p:i;let g=new d(f?.headers);return g.has("apikey")||g.set("apikey",i),g.has("Authorization")||g.set("Authorization",`Bearer ${v}`),c(m,Bt(Bt({},f),{},{headers:g}))}};function cb(i){return i.endsWith("/")?i:i+"/"}function ob(i,n){var r,c;const{db:d,auth:m,realtime:f,global:p}=i,{db:v,auth:g,realtime:T,global:E}=n,R={db:Bt(Bt({},v),d),auth:Bt(Bt({},g),m),realtime:Bt(Bt({},T),f),storage:{},global:Bt(Bt(Bt({},E),p),{},{headers:Bt(Bt({},(r=E?.headers)!==null&&r!==void 0?r:{}),(c=p?.headers)!==null&&c!==void 0?c:{})}),accessToken:async()=>""};return i.accessToken?R.accessToken=i.accessToken:delete R.accessToken,R}function ub(i){const n=i?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(cb(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var db=class extends X0{constructor(i){super(i)}},mb=class{constructor(i,n,r){var c,d;this.supabaseUrl=i,this.supabaseKey=n;const m=ub(i);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const f=`sb-${m.hostname.split(".")[0]}-auth-token`,p={db:W0,realtime:tb,auth:Bt(Bt({},eb),{},{storageKey:f}),global:F0},v=ob(r??{},p);if(this.storageKey=(c=v.auth.storageKey)!==null&&c!==void 0?c:"",this.headers=(d=v.global.headers)!==null&&d!==void 0?d:{},v.accessToken)this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(T,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}});else{var g;this.auth=this._initSupabaseAuthClient((g=v.auth)!==null&&g!==void 0?g:{},this.headers,v.global.fetch)}this.fetch=ib(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Bt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(T=>this.realtime.setAuth(T)).catch(T=>console.warn("Failed to set initial Realtime auth token:",T)),this.rest=new Ig(new URL("rest/v1",m).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new Gy(this.storageUrl.href,this.headers,this.fetch,r?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new Lg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(i,n,r)}channel(i,n={config:{}}){return this.realtime.channel(i,n)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var i=this,n,r;if(i.accessToken)return await i.accessToken();const{data:c}=await i.auth.getSession();return(n=(r=c.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:i.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:n,detectSessionInUrl:r,storage:c,userStorage:d,storageKey:m,flowType:f,lock:p,debug:v,throwOnError:g},T,E){const R={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new db({url:this.authUrl.href,headers:Bt(Bt({},R),T),storageKey:m,autoRefreshToken:i,persistSession:n,detectSessionInUrl:r,storage:c,userStorage:d,flowType:f,lock:p,debug:v,throwOnError:g,fetch:E,hasCustomAuthorizationHeader:Object.keys(this.headers).some(z=>z.toLowerCase()==="authorization")})}_initRealtimeClient(i){return new cy(this.realtimeUrl.href,Bt(Bt({},i),{},{params:Bt(Bt({},{apikey:this.supabaseKey}),i?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,n)=>{this._handleTokenChanged(i,"CLIENT",n?.access_token)})}_handleTokenChanged(i,n,r){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):i==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const fb=(i,n,r)=>new mb(i,n,r);function hb(){if(typeof window<"u")return!1;const i=globalThis.process;if(!i)return!1;const n=i.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}hb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const pb="https://mzpfwxrdituexjpwqlqz.supabase.co",vb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im16cGZ3eHJkaXR1ZXhqcHdxbHF6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwMTA3MjIsImV4cCI6MjA4NDU4NjcyMn0.eggtdN05BCQGrE2KzITYne2i8qxNhXSULt_7a1YIOIY",ae=fb(pb,vb),cp=i=>{if(!i||typeof i!="string")return{valid:!1,error:"Email is required"};const n=i.trim();return n.length===0?{valid:!1,error:"Email cannot be empty"}:n.length>254?{valid:!1,error:"Email is too long"}:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)?{valid:!0,value:n}:{valid:!1,error:"Please enter a valid email address"}},gb=i=>!i||typeof i!="string"?{valid:!1,error:"Password is required"}:i.length<8?{valid:!1,error:"Password must be at least 8 characters"}:i.length>128?{valid:!1,error:"Password is too long (max 128 characters)"}:/\d/.test(i)?/[a-zA-Z]/.test(i)?{valid:!0,value:i}:{valid:!1,error:"Password must contain at least one letter"}:{valid:!1,error:"Password must contain at least one number"},yb=i=>{if(!i||typeof i!="string")return{valid:!1,error:"Display name is required"};const n=i.trim();return n.length===0?{valid:!1,error:"Display name cannot be empty"}:n.length<2?{valid:!1,error:"Display name must be at least 2 characters"}:n.length>32?{valid:!1,error:"Display name cannot exceed 32 characters"}:/^[a-zA-Z0-9\s\-_'.]+$/.test(n)?/[a-zA-Z0-9]/.test(n)?{valid:!0,value:n}:{valid:!1,error:"Display name must contain letters or numbers"}:{valid:!1,error:"Display name contains invalid characters"}};function bb({children:i,onSession:n,onProfile:r,navItems:c=[],onProfileClick:d,compact:m=!1}){const[f,p]=X.useState(null),[v,g]=X.useState(null),[T,E]=X.useState(!0),[R,z]=X.useState(""),[x,H]=X.useState(""),[j,ee]=X.useState(""),[se,J]=X.useState("");X.useEffect(()=>{let be=!0;(async()=>{const{data:_e}=await ae.auth.getSession();be&&(p(_e.session??null),E(!1))})();const{data:Xe}=ae.auth.onAuthStateChange((_e,I)=>{p(I),g(null),J(""),n&&n(I)});return()=>{be=!1,Xe?.subscription?.unsubscribe()}},[]),X.useEffect(()=>{(async()=>{if(!f)return;const{data:Ye,error:Xe}=await ae.from("profiles").select("id, display_name, account_xp, account_level, rating, avatar_url, soft_currency, premium_currency, role").eq("id",f.user.id).maybeSingle();if(Xe){J(Xe.message);return}g(Ye||null),r&&r(Ye||null)})()},[f]);const ge=async()=>{J("");const be=cp(R);if(!be.valid){J(be.error);return}if(!x||x.length===0){J("Password is required");return}const{error:Ye}=await ae.auth.signInWithPassword({email:be.value,password:x});Ye&&(Ye.message.includes("Invalid login credentials")?J("Invalid email or password. Please try again."):Ye.message.includes("Email not confirmed")?J("Please confirm your email address before signing in."):J(Ye.message))},Se=async()=>{J("");const be=cp(R);if(!be.valid){J(be.error);return}const Ye=gb(x);if(!Ye.valid){J(Ye.error);return}const{error:Xe}=await ae.auth.signUp({email:be.value,password:Ye.value});Xe?Xe.message.includes("already registered")?J("This email is already registered. Please sign in instead."):Xe.message.includes("invalid email")?J("Please enter a valid email address."):J(Xe.message):J("")},D=async()=>{if(!f)return;J("");const be=yb(j);if(!be.valid){J(be.error);return}const{error:Ye}=await ae.from("profiles").upsert({id:f.user.id,display_name:be.value,updated_at:new Date().toISOString()});if(Ye){Ye.message.includes("duplicate key")?J("This display name is already taken. Please choose another."):Ye.message.includes("violates")?J("Display name contains invalid characters."):J(`Failed to save profile: ${Ye.message}`);return}const Xe={id:f.user.id,display_name:be.value,account_xp:0,account_level:1,rating:1e3,avatar_url:null,soft_currency:0,premium_currency:0,role:"player"};g(Xe),r&&r(Xe)},ce=async()=>{await ae.auth.signOut(),g(null),r&&r(null),n&&n(null)};if(T)return s.createElement("div",{className:"auth-screen"},s.createElement("div",{className:"auth-panel"},s.createElement("div",{className:"auth-logo"},""),s.createElement("h1",null,"CURSED ARENA"),s.createElement("p",{className:"auth-subtitle"},"Loading your experience..."),s.createElement("div",{className:"auth-loading"},s.createElement("div",{className:"auth-loading-bar"}))));if(!f)return s.createElement("div",{className:"auth-screen"},s.createElement("div",{className:"auth-panel"},s.createElement("div",{className:"auth-logo"},""),s.createElement("h1",null,"CURSED ARENA"),s.createElement("p",{className:"auth-subtitle"},"Sign in or create an account to save your progress and compete with others."),s.createElement("label",{className:"auth-label"},s.createElement("span",{className:"auth-label-text"},"Email Address"),s.createElement("input",{type:"email",value:R,onChange:be=>z(be.target.value),className:"auth-input",placeholder:"you@example.com"})),s.createElement("label",{className:"auth-label"},s.createElement("span",{className:"auth-label-text"},"Password"),s.createElement("input",{type:"password",value:x,onChange:be=>H(be.target.value),className:"auth-input",placeholder:"At least 8 characters, include number & letter"})),se&&s.createElement("p",{className:"auth-error"}," ",se),s.createElement("div",{className:"auth-actions"},s.createElement("button",{className:"auth-btn primary",onClick:ge},s.createElement("span",null,"Sign In")),s.createElement("button",{className:"auth-btn secondary",onClick:Se},s.createElement("span",null,"Create Account")))));if(!v)return s.createElement("div",{className:"auth-screen"},s.createElement("div",{className:"auth-panel"},s.createElement("div",{className:"auth-logo"},""),s.createElement("h1",null,"WELCOME WARRIOR"),s.createElement("p",{className:"auth-subtitle"},"Choose a display name to begin your journey in the Cursed Arena."),s.createElement("label",{className:"auth-label"},s.createElement("span",{className:"auth-label-text"},"Display Name"),s.createElement("input",{type:"text",value:j,onChange:be=>ee(be.target.value),className:"auth-input",placeholder:"Your in-game name",maxLength:32})),se&&s.createElement("p",{className:"auth-error"}," ",se),s.createElement("div",{className:"auth-actions"},s.createElement("button",{className:"auth-btn primary",onClick:D},s.createElement("span",null,"Start Playing")),s.createElement("button",{className:"auth-btn secondary",onClick:ce},s.createElement("span",null,"Sign Out")))));const P=v?.account_level||1,oe=v?.account_xp||0,$e=100+P*25,Le=v?.display_name?.[0]?.toUpperCase()||"?";return s.createElement("div",{className:"auth-wrapper"},s.createElement("div",{className:`auth-bar ${m?"compact":""}`},s.createElement("button",{className:"auth-user-card",type:"button",onClick:d,disabled:!d},s.createElement("div",{className:"auth-avatar"},v?.avatar_url?s.createElement("img",{src:v.avatar_url,alt:v.display_name}):s.createElement("span",null,Le)),s.createElement("div",{className:"auth-user-meta"},s.createElement("span",{className:"auth-user-name"},v.display_name),s.createElement("span",{className:"auth-user-level"},"Lv ",P,"  ",oe,"/",$e," XP"))),s.createElement("div",{className:"auth-center"},s.createElement("div",{className:"auth-title"},"Cursed Arena"),c.length>0&&s.createElement("div",{className:"auth-nav"},c.map(be=>s.createElement("button",{key:be.label,type:"button",className:`auth-nav-btn ${be.active?"active":""}`,onClick:be.onClick,disabled:be.disabled},be.label)))),s.createElement("div",{className:"auth-actions"},s.createElement("div",{className:"auth-currency"},s.createElement("span",null,"Soft ",v?.soft_currency??0),s.createElement("span",null,"Premium ",v?.premium_currency??0)),!m&&s.createElement("button",{className:"auth-link",onClick:ce},"Sign Out"))),s.createElement("div",{className:"auth-content"},i))}function Eb({profile:i,matchHistory:n,onBack:r,onProfileUpdate:c,titles:d,onSetActiveTitle:m}){const f=i?.display_name||"Unknown",p=i?.account_level||1,v=i?.account_xp||0,g=i?.rating??1e3,T=100+p*25,E=Math.min(100,Math.floor(v/T*100)),R=n.filter(P=>P.result==="win").length,z=n.filter(P=>P.result==="lose").length,x=R+z,H=x>0?Math.round(R/x*100):0,j=f.slice(0,2).toUpperCase(),ee=(d||[]).find(P=>P.active),se=X.useRef(null),[J,ge]=X.useState(!1),[Se,D]=X.useState(""),ce=async P=>{const oe=P.target.files?.[0];if(!oe||!i?.id)return;ge(!0),D("");const $e=oe.name.split(".").pop(),Le=`${i.id}/${Date.now()}.${$e}`,{error:be}=await ae.storage.from("avatars").upload(Le,oe,{upsert:!0});if(be){D(be.message),ge(!1);return}const{data:Ye}=ae.storage.from("avatars").getPublicUrl(Le),Xe=Ye?.publicUrl||null,{error:_e}=await ae.from("profiles").update({avatar_url:Xe,updated_at:new Date().toISOString()}).eq("id",i.id);if(_e){D(_e.message),ge(!1);return}c?.({...i,avatar_url:Xe}),ge(!1)};return s.createElement("div",{className:"profile-page"},s.createElement("div",{className:"profile-header"},s.createElement("button",{className:"profile-back",onClick:r}," Back"),s.createElement("h1",null,"Player Profile")),s.createElement("div",{className:"profile-grid"},s.createElement("div",{className:"profile-card primary"},s.createElement("div",{className:"profile-hero"},s.createElement("div",{className:"profile-avatar"},i?.avatar_url?s.createElement("img",{src:i.avatar_url,alt:f}):j),s.createElement("div",null,s.createElement("h2",null,f),s.createElement("p",{className:"profile-subtitle"},"Active  ",ee?`Title: ${ee.title_id.replace(/_/g," ")}`:"Clanless"),s.createElement("div",{className:"profile-avatar-actions"},s.createElement("button",{className:"profile-avatar-btn",onClick:()=>se.current?.click(),disabled:J},J?"Uploading...":"Upload Avatar"),Se&&s.createElement("span",{className:"profile-upload-error"},Se),s.createElement("input",{ref:se,type:"file",accept:"image/*",className:"profile-avatar-input",onChange:ce})))),s.createElement("div",{className:"profile-stats"},s.createElement("div",null,s.createElement("span",null,"Account Level"),s.createElement("strong",null,"Lv ",p)),s.createElement("div",null,s.createElement("span",null,"Rating"),s.createElement("strong",null,g)),s.createElement("div",null,s.createElement("span",null,"Record"),s.createElement("strong",null,R,"W / ",z,"L")),s.createElement("div",null,s.createElement("span",null,"Win Rate"),s.createElement("strong",null,H,"%"))),s.createElement("div",{className:"profile-xp"},s.createElement("div",{className:"profile-xp-text"},"Account XP ",v,"/",T),s.createElement("div",{className:"profile-xp-bar"},s.createElement("div",{className:"profile-xp-fill",style:{width:`${E}%`}})))),s.createElement("div",{className:"profile-card"},s.createElement("h3",null,"Match History"),n.length===0?s.createElement("p",{className:"profile-empty"},"No matches yet. Jump in and play!"):s.createElement("div",{className:"match-list"},n.map(P=>s.createElement("div",{key:P.id,className:`match-row ${P.result}`},s.createElement("div",{className:"match-result"},P.result==="win"?"WIN":"LOSS"),s.createElement("div",{className:"match-meta"},s.createElement("span",null,"Turns: ",P.turns??"-"),s.createElement("span",null,"Rating: ",P.rating_delta>=0?"+":"",P.rating_delta)),s.createElement("div",{className:"match-xp"},s.createElement("span",null,"Account +",P.account_xp_gain),s.createElement("span",null,"Team +",P.character_xp_gain)),s.createElement("div",{className:"match-date"},new Date(P.created_at).toLocaleString()))))),s.createElement("div",{className:"profile-card"},s.createElement("h3",null,"Activity"),s.createElement("div",{className:"activity-grid"},s.createElement("div",null,s.createElement("span",null,"Status"),s.createElement("strong",null,"Online")),s.createElement("div",null,s.createElement("span",null,"Clan"),s.createElement("strong",null,"None")),s.createElement("div",null,s.createElement("span",null,"Favorite Mode"),s.createElement("strong",null,"Unranked")),s.createElement("div",null,s.createElement("span",null,"Last Match"),s.createElement("strong",null,n[0]?.result?n[0].result.toUpperCase():"N/A")))),s.createElement("div",{className:"profile-card"},s.createElement("h3",null,"Titles"),(d||[]).length===0?s.createElement("p",{className:"profile-empty"},"No titles unlocked yet."):s.createElement("div",{className:"profile-title-grid"},(d||[]).map(P=>s.createElement("button",{key:P.title_id,className:`profile-title-pill ${P.active?"active":""}`,onClick:()=>m?.(P.title_id),type:"button"},P.title_id.replace(/_/g," ")))))))}function _b({missions:i,userMissions:n,onBack:r,onClaim:c}){const d=new Map(n.map(p=>[p.mission_id,p])),m=p=>i.filter(v=>v.type===p),f=p=>{const v=d.get(p.id),g=v?.progress??0;v?.claimed;const T=Math.min(100,Math.floor(g/p.target*100));return s.createElement("div",{key:p.id,className:"mission-card"},s.createElement("div",null,s.createElement("h4",null,p.title),s.createElement("p",null,p.description),s.createElement("div",{className:"mission-progress"},s.createElement("div",{className:"mission-progress-bar"},s.createElement("div",{className:"mission-progress-fill",style:{width:`${T}%`}})),s.createElement("span",null,g,"/",p.target))),s.createElement("div",{className:"mission-reward"},s.createElement("span",null,"Soft +",p.reward_soft),s.createElement("span",null,"Premium +",p.reward_premium),p.reward_shard_character_id&&p.reward_shard_amount>0&&s.createElement("span",null,"Shard +",p.reward_shard_amount)))};return s.createElement("div",{className:"meta-page"},s.createElement("div",{className:"meta-header"},s.createElement("button",{className:"profile-back",onClick:r}," Back"),s.createElement("h1",null,"Missions")),s.createElement("div",{className:"meta-grid"},s.createElement("section",null,s.createElement("h3",null,"Daily"),s.createElement("div",{className:"mission-list"},m("daily").map(p=>s.createElement("div",{key:p.id},f(p),s.createElement("button",{className:"mission-claim",onClick:()=>c?.(p.id),disabled:(d.get(p.id)?.claimed??!1)||(d.get(p.id)?.progress??0)<p.target},d.get(p.id)?.claimed?"Claimed":"Claim Reward"))))),s.createElement("section",null,s.createElement("h3",null,"Weekly"),s.createElement("div",{className:"mission-list"},m("weekly").map(p=>s.createElement("div",{key:p.id},f(p),s.createElement("button",{className:"mission-claim",onClick:()=>c?.(p.id),disabled:(d.get(p.id)?.claimed??!1)||(d.get(p.id)?.progress??0)<p.target},d.get(p.id)?.claimed?"Claimed":"Claim Reward"))))),s.createElement("section",null,s.createElement("h3",null,"Limited Time"),s.createElement("div",{className:"mission-list"},m("limited").map(p=>s.createElement("div",{key:p.id},f(p),s.createElement("button",{className:"mission-claim",onClick:()=>c?.(p.id),disabled:(d.get(p.id)?.claimed??!1)||(d.get(p.id)?.progress??0)<p.target},d.get(p.id)?.claimed?"Claimed":"Claim Reward")))))))}function wb({offers:i,profile:n,onBack:r,onPurchase:c}){const[d,m]=X.useState(null),[f,p]=X.useState(null),v=n?.soft_currency??0,g=n?.premium_currency??0,T=async E=>{m(E),p(null),await c?.(E),m(null),p(E),setTimeout(()=>p(null),2e3)};return s.createElement("div",{className:"shop-page"},s.createElement("div",{className:"shop-header"},s.createElement("button",{className:"shop-back",onClick:r},s.createElement("span",null,""),s.createElement("span",null,"Back")),s.createElement("div",{className:"shop-title"},s.createElement("h1",null,"Item Shop"),s.createElement("div",{className:"shop-currency-display"},s.createElement("div",{className:"currency-badge soft"},s.createElement("span",{className:"currency-icon"},""),s.createElement("span",{className:"currency-amount"},v.toLocaleString())),s.createElement("div",{className:"currency-badge premium"},s.createElement("span",{className:"currency-icon"},""),s.createElement("span",{className:"currency-amount"},g.toLocaleString()))))),s.createElement("div",{className:"shop-container"},i.length===0?s.createElement("div",{className:"shop-empty-state"},s.createElement("div",{className:"empty-icon"},""),s.createElement("h2",null,"Shop is Restocking"),s.createElement("p",null,"Check back soon for new items!")):s.createElement("div",{className:"shop-offers-grid"},i.map(E=>{const R=v>=E.cost_soft&&g>=E.cost_premium,z=d===E.id,x=f===E.id;return s.createElement("div",{key:E.id,className:`shop-offer-card ${x?"just-purchased":""} ${R?"":"locked"}`},s.createElement("div",{className:"offer-header"},s.createElement("h3",null,E.name),x&&s.createElement("div",{className:"purchased-badge"}," Purchased")),s.createElement("div",{className:"offer-body"},s.createElement("p",{className:"offer-description"},E.description),s.createElement("div",{className:"offer-rewards"},s.createElement("div",{className:"rewards-label"},"You Get:"),s.createElement("div",{className:"rewards-list"},E.item_type==="shards"&&E.shard_amount>0&&s.createElement("div",{className:"reward-item"},s.createElement("span",{className:"reward-icon"},""),s.createElement("span",{className:"reward-text"},E.shard_amount," Character Shards")),E.item_type==="currency"&&s.createElement(s.Fragment,null,E.soft_currency>0&&s.createElement("div",{className:"reward-item"},s.createElement("span",{className:"reward-icon"},""),s.createElement("span",{className:"reward-text"},E.soft_currency.toLocaleString()," Soft Currency")),E.premium_currency>0&&s.createElement("div",{className:"reward-item"},s.createElement("span",{className:"reward-icon"},""),s.createElement("span",{className:"reward-text"},E.premium_currency.toLocaleString()," Premium Currency")))))),s.createElement("div",{className:"offer-footer"},s.createElement("div",{className:"offer-price"},E.cost_soft>0&&s.createElement("div",{className:`price-tag soft ${v<E.cost_soft?"insufficient":""}`},s.createElement("span",{className:"price-icon"},""),s.createElement("span",{className:"price-value"},E.cost_soft.toLocaleString())),E.cost_premium>0&&s.createElement("div",{className:`price-tag premium ${g<E.cost_premium?"insufficient":""}`},s.createElement("span",{className:"price-icon"},""),s.createElement("span",{className:"price-value"},E.cost_premium.toLocaleString()))),s.createElement("button",{className:`offer-buy-button ${x?"purchased":""} ${R?"":"disabled"}`,onClick:()=>T(E.id),disabled:!R||z},z?s.createElement(s.Fragment,null,s.createElement("span",{className:"button-spinner"}),s.createElement("span",null,"Purchasing...")):x?s.createElement(s.Fragment,null,s.createElement("span",null,""),s.createElement("span",null,"Purchased!")):R?s.createElement(s.Fragment,null,s.createElement("span",null,""),s.createElement("span",null,"Purchase")):s.createElement(s.Fragment,null,s.createElement("span",null,""),s.createElement("span",null,"Insufficient Funds")))))}))))}function Sb({banners:i,bannerItems:n,profile:r,items:c,characters:d,onBack:m,onPull:f,result:p,onClearResult:v}){const[g,T]=X.useState(!1),[E,R]=X.useState(!1),z=r?.premium_currency??0,x=c?.finger_fragment??0,H=25,j=i[0],ee=j?n.filter(P=>P.banner_id===j.id):[],se=ee.reduce((P,oe)=>P+(oe.weight||0),0),J=X.useMemo(()=>{const P=new Map;return(d||[]).forEach(oe=>P.set(oe.id,oe)),P},[d]);X.useEffect(()=>{p&&(R(!0),T(!1))},[p]);const ge=async(P,oe={})=>{T(!0),R(!1),await f?.(P,oe)},Se=()=>{R(!1),setTimeout(()=>{v?.()},300)},D=P=>{if(P.item_type==="character"&&P.character_id)return J.get(P.character_id)?.name||`Character #${P.character_id}`;if(P.item_type==="shards"&&P.character_id)return`${J.get(P.character_id)?.name||`Character #${P.character_id}`} Shards`;if(P.item_type==="currency"){if(P.soft_currency>0)return"Soft Currency";if(P.premium_currency>0)return"Premium Currency"}return P.item_type},ce=P=>P.item_type==="character"?"rarity-ssr":P.item_type==="shards"?"rarity-sr":"rarity-r";return s.createElement("div",{className:"gacha-page"},s.createElement("div",{className:"gacha-header"},s.createElement("button",{className:"gacha-back",onClick:m},s.createElement("span",null,""),s.createElement("span",null,"Back")),s.createElement("div",{className:"gacha-title"},s.createElement("h1",null,"Summoning Portal"),s.createElement("div",{className:"gacha-currency-display"},s.createElement("div",{className:"currency-badge premium"},s.createElement("span",{className:"currency-icon"},""),s.createElement("span",{className:"currency-amount"},z)),s.createElement("div",{className:"currency-badge fragment"},s.createElement("span",{className:"currency-icon"},""),s.createElement("span",{className:"currency-amount"},x))))),s.createElement("div",{className:"gacha-container"},s.createElement("div",{className:"gacha-main"},s.createElement("div",{className:"banner-showcase"},s.createElement("div",{className:"banner-art"},s.createElement("div",{className:"banner-glow"}),s.createElement("div",{className:"banner-content"},s.createElement("h2",null,j?j.name:"No Active Banner"),s.createElement("p",null,j?.description||"Check back soon for the next featured banner."))),!j&&s.createElement("div",{className:"banner-empty"},s.createElement("div",{className:"empty-icon"},""),s.createElement("p",null,"No active summoning banner"),s.createElement("span",null,"Check back soon!")),j&&s.createElement("div",{className:"pull-actions"},s.createElement("button",{className:`pull-button primary ${g?"pulling":""}`,onClick:()=>ge(j.id),disabled:z<H||g},s.createElement("div",{className:"pull-button-content"},s.createElement("span",{className:"pull-icon"},""),s.createElement("div",{className:"pull-text"},s.createElement("span",{className:"pull-label"},g?"Summoning...":"Single Summon"),s.createElement("span",{className:"pull-cost"},H," Premium"))),z<H&&s.createElement("div",{className:"pull-overlay"},"Insufficient Funds")),s.createElement("button",{className:`pull-button fragment ${g?"pulling":""}`,onClick:()=>ge(j.id,{useFragment:!0}),disabled:x<=0||g},s.createElement("div",{className:"pull-button-content"},s.createElement("span",{className:"pull-icon"},""),s.createElement("div",{className:"pull-text"},s.createElement("span",{className:"pull-label"},g?"Summoning...":"Fragment Summon"),s.createElement("span",{className:"pull-cost"},"1 Fragment"))),x<=0&&s.createElement("div",{className:"pull-overlay"},"No Fragments"))),g&&!p&&s.createElement("div",{className:"summoning-animation"},s.createElement("div",{className:"summon-circle"},s.createElement("div",{className:"summon-ring ring-1"}),s.createElement("div",{className:"summon-ring ring-2"}),s.createElement("div",{className:"summon-ring ring-3"}),s.createElement("div",{className:"summon-core"})),s.createElement("p",{className:"summon-text"},"Summoning...")),p&&s.createElement("div",{className:`summon-result ${E?"revealed":""}`},s.createElement("button",{className:"result-close",onClick:Se},""),s.createElement("div",{className:"result-backdrop"}),s.createElement("div",{className:"result-card"},s.createElement("div",{className:`result-rarity ${ce(p)}`},p.item_type==="character"&&s.createElement(s.Fragment,null,s.createElement("div",{className:"rarity-stars"},""),s.createElement("div",{className:"rarity-label"},"NEW CHARACTER"))),s.createElement("div",{className:"result-name"},D(p)),s.createElement("div",{className:"result-rewards"},p.item_type==="character"&&s.createElement("span",{className:"reward-badge"},"+30 Shards"),p.item_type==="shards"&&s.createElement("span",{className:"reward-badge"},"+",p.shard_amount," Shards"),p.soft_currency>0&&s.createElement("span",{className:"reward-badge"},"+",p.soft_currency," Soft"),p.premium_currency>0&&s.createElement("span",{className:"reward-badge"},"+",p.premium_currency," Premium")))))),s.createElement("div",{className:"gacha-sidebar"},s.createElement("div",{className:"drop-rates"},s.createElement("h3",null,"Drop Rates"),s.createElement("div",{className:"rates-list"},ee.map((P,oe)=>{const $e=se>0?((P.weight||0)/se*100).toFixed(1):0;return s.createElement("div",{key:`${P.item_type}-${oe}`,className:`rate-item ${ce(P)}`},s.createElement("div",{className:"rate-info"},s.createElement("span",{className:"rate-name"},D(P)),P.item_type==="shards"&&s.createElement("span",{className:"rate-amount"},"",P.shard_amount),P.soft_currency>0&&s.createElement("span",{className:"rate-amount"},"",P.soft_currency),P.premium_currency>0&&s.createElement("span",{className:"rate-amount"},"",P.premium_currency)),s.createElement("div",{className:"rate-bar"},s.createElement("div",{className:"rate-fill",style:{width:`${$e}%`}})),s.createElement("span",{className:"rate-percent"},$e,"%"))}))))))}function Nb({characters:i,inventory:n,characterProgress:r,items:c,titles:d,onBack:m,onLimitBreak:f,limitBreakCost:p}){const[v,g]=X.useState("characters"),[T,E]=X.useState(""),[R,z]=X.useState("name"),[x,H]=X.useState("all"),j=Object.entries(c||{}),ee=(d||[]).filter(D=>D.unlocked),se=T.trim().toLowerCase(),J=X.useMemo(()=>i.map(D=>{const ce=r[D.id],P=n[D.id]||0;return{character:D,shards:P,unlocked:!!ce,progress:ce||{level:1,xp:0,limit_break:0}}}),[i,r,n]),ge=X.useMemo(()=>{let D=J;x==="unlocked"&&(D=D.filter(P=>P.unlocked)),x==="locked"&&(D=D.filter(P=>!P.unlocked)),se&&(D=D.filter(P=>P.character.name.toLowerCase().includes(se)));const ce=[...D];return ce.sort((P,oe)=>{switch(R){case"level":return(oe.progress.level||1)-(P.progress.level||1);case"shards":return oe.shards-P.shards;case"limit_break":return(oe.progress.limit_break||0)-(P.progress.limit_break||0);default:return P.character.name.localeCompare(oe.character.name)}}),ce},[J,x,se,R]),Se=D=>{const{character:ce,shards:P,progress:oe,unlocked:$e}=D,Le=oe.limit_break+1,be=$e&&Le<=5&&P>=p(Le),Ye=ce.portraitUrl||Yr(ce.name);return s.createElement("div",{key:ce.id,className:`inventory-card ${$e?"unlocked":"locked"}`},s.createElement("div",{className:"inventory-portrait"},Ye?s.createElement("img",{src:Ye,alt:ce.name}):s.createElement("span",null,ce.name[0])),s.createElement("div",{className:"inventory-info"},s.createElement("h4",null,ce.name),s.createElement("div",{className:"inventory-stats"},s.createElement("span",null,"Lv ",oe.level),s.createElement("span",null,"LB ",oe.limit_break,"/5")),s.createElement("div",{className:"inventory-shards"},"Shards: ",P),s.createElement("button",{className:"mission-claim",onClick:()=>f?.(ce.id),disabled:!be},$e?Le>5?"Maxed":`Limit Break (+${p(Le)})`:"Locked")))};return s.createElement("div",{className:"meta-page"},s.createElement("div",{className:"meta-header"},s.createElement("button",{className:"profile-back",onClick:m}," Back"),s.createElement("h1",null,"Inventory")),s.createElement("div",{className:"inventory-tabs"},["characters","items","titles"].map(D=>s.createElement("button",{key:D,type:"button",className:`inventory-tab ${v===D?"active":""}`,onClick:()=>g(D)},D))),v==="characters"&&s.createElement(s.Fragment,null,s.createElement("div",{className:"inventory-toolbar"},s.createElement("input",{className:"inventory-search",type:"search",placeholder:"Search characters",value:T,onChange:D=>E(D.target.value)}),s.createElement("select",{className:"inventory-select",value:x,onChange:D=>H(D.target.value)},s.createElement("option",{value:"all"},"All"),s.createElement("option",{value:"unlocked"},"Unlocked"),s.createElement("option",{value:"locked"},"Locked")),s.createElement("select",{className:"inventory-select",value:R,onChange:D=>z(D.target.value)},s.createElement("option",{value:"name"},"Sort: Name"),s.createElement("option",{value:"level"},"Sort: Level"),s.createElement("option",{value:"shards"},"Sort: Shards"),s.createElement("option",{value:"limit_break"},"Sort: Limit Break"))),s.createElement("div",{className:"meta-grid inventory-grid"},ge.map(Se))),v==="items"&&s.createElement("div",{className:"meta-grid inventory-extras"},s.createElement("section",{className:"inventory-section"},s.createElement("h2",null,"Items"),j.length===0?s.createElement("p",{className:"inventory-empty"},"No items yet."):s.createElement("div",{className:"inventory-item-grid"},j.map(([D,ce])=>s.createElement("div",{key:D,className:"inventory-item-card"},s.createElement("strong",null,D.replace(/_/g," ")),s.createElement("span",null,"x",ce)))))),v==="titles"&&s.createElement("div",{className:"meta-grid inventory-extras"},s.createElement("section",{className:"inventory-section"},s.createElement("h2",null,"Titles"),ee.length===0?s.createElement("p",{className:"inventory-empty"},"No titles unlocked."):s.createElement("div",{className:"inventory-item-grid"},ee.map(D=>s.createElement("div",{key:D.title_id,className:`inventory-item-card ${D.active?"active":""}`},s.createElement("strong",null,D.title_id.replace(/_/g," ")),s.createElement("span",null,D.active?"Active":"Unlocked")))))))}function Cb({chapter:i,completedNodes:n,activeNodeId:r,onSelectNode:c,onCompleteNode:d,onStartBattle:m,storyResult:f,onClearResult:p,onClaimRewards:v,rewardsClaimed:g}){const T=i?.nodes||[],E=T.find(H=>H.id===r)||T[0],R=H=>{if(!T.length)return!1;const j=T.findIndex(ee=>ee.id===H);return j<=0?!0:n.includes(T[j-1].id)},z=X.useMemo(()=>{const H={};return T.forEach(j=>{H[j.id]=n.includes(j.id)?"completed":R(j.id)?"available":"locked"}),H},[T,n]),x=n.length===T.length;return i?s.createElement("div",{className:"story-container"},s.createElement("div",{className:"story-header"},s.createElement("div",null,s.createElement("h1",null,i.title),s.createElement("span",{className:"story-subtitle"},i.subtitle)),s.createElement("div",{className:"story-progress"},s.createElement("span",null,n.length,"/",T.length," nodes cleared"))),s.createElement("div",{className:"story-layout"},s.createElement("div",{className:"story-map"},s.createElement("div",{className:"story-map-title"},"Chapter Map"),s.createElement("div",{className:"story-map-nodes"},T.map((H,j)=>s.createElement("button",{key:H.id,type:"button",className:`story-node ${z[H.id]} ${r===H.id?"active":""}`,disabled:z[H.id]==="locked",onClick:()=>c(H.id)},z[H.id]==="completed"&&s.createElement("div",{className:"story-node-badge"},""),s.createElement("div",{className:"story-node-id"},H.id),s.createElement("div",{className:"story-node-title"},H.title),s.createElement("div",{className:`story-node-type ${H.type}`},H.type==="battle"?"Battle":"Story"),j<T.length-1&&s.createElement("div",{className:"story-node-link"}))))),s.createElement("div",{className:"story-detail"},s.createElement("div",{className:"story-detail-header"},s.createElement("div",null,s.createElement("h2",null,E?.title),s.createElement("div",{className:"story-location"},E?.location)),s.createElement("div",{className:`story-status ${z[E?.id]||"locked"}`},z[E?.id]==="completed"?"Completed":z[E?.id]==="available"?"Available":"Locked")),f&&f.nodeId===E?.id&&s.createElement("div",{className:`story-result ${f.result}`},s.createElement("strong",null,f.result==="win"?"Objective Complete":"Defeat"),s.createElement("p",null,f.result==="win"?"Return to the story to continue.":"Try the battle again when you are ready."),s.createElement("button",{className:"mode-btn primary",onClick:p},"Continue")),E?.type==="story"&&s.createElement("div",{className:"story-scroll"},s.createElement("div",{className:"story-scene"},E.lines?.map((H,j)=>s.createElement("div",{key:`${E.id}-${j}`,className:"story-line"},s.createElement("span",{className:"story-speaker"},H.speaker),s.createElement("span",{className:"story-text"},H.text))),E.system&&s.createElement("div",{className:"story-system"},"System: ",E.system)),s.createElement("div",{className:"story-actions"},s.createElement("button",{className:"mode-btn primary",onClick:()=>d(E.id),disabled:z[E.id]!=="available"},"Continue"))),E?.type==="battle"&&s.createElement("div",{className:"story-scroll"},s.createElement("div",{className:"story-scene"},E.intro?.map((H,j)=>s.createElement("div",{key:`${E.id}-intro-${j}`,className:"story-text"},H)),E.battle&&s.createElement("div",{className:"story-battle-info"},s.createElement("div",null,s.createElement("strong",null,"Mode:")," ",E.battle.mode),s.createElement("div",null,s.createElement("strong",null,"Objective:")," ",E.battle.objective),E.battle.type==="survival"&&s.createElement("div",null,s.createElement("strong",null,"Condition:")," Survive ",E.battle.turnLimit," turns."),E.battle.unlocks?.length>0&&s.createElement("div",null,s.createElement("strong",null,"Unlock:")," ",E.battle.unlocks.join(", "))),E.battle?.prompts?.length>0&&s.createElement("div",{className:"story-prompts"},E.battle.prompts.map((H,j)=>s.createElement("div",{key:`${E.id}-prompt-${j}`,className:"story-prompt"}," ",H))),E.outro?.length>0&&s.createElement("div",{className:"story-outro"},s.createElement("div",{className:"story-outro-title"},"After Battle"),E.outro.map((H,j)=>s.createElement("div",{key:`${E.id}-outro-${j}`,className:"story-text"},H)))),s.createElement("div",{className:"story-actions"},s.createElement("button",{className:"mode-btn primary",onClick:()=>m(E),disabled:z[E.id]!=="available"},"Start Battle"))))),s.createElement("div",{className:"story-footer"},s.createElement("div",{className:"story-rewards"},s.createElement("h3",null,"Chapter Rewards"),s.createElement("div",{className:"story-reward-grid"},i.rewards.map((H,j)=>s.createElement("div",{key:`${H.label}-${j}`,className:"story-reward-card"},s.createElement("span",{className:"story-reward-label"},H.label))))),s.createElement("div",{className:"story-preview"},s.createElement("h3",null,"Next Chapter Preview"),i.preview.map((H,j)=>s.createElement("div",{key:`${i.id}-preview-${j}`,className:"story-preview-line"},H)),s.createElement("button",{className:"mode-btn ghost",onClick:v,disabled:g||!x},g?"Rewards Claimed":x?"Claim Chapter Rewards":"Complete Chapter to Claim")))):s.createElement("div",{className:"story-container"},s.createElement("div",{className:"story-panel"},"Story mode not available."))}function Tb({isOpen:i,title:n,message:r,details:c,confirmText:d="Confirm",cancelText:m="Cancel",onConfirm:f,onCancel:p,danger:v=!1}){return i?s.createElement("div",{className:"confirm-overlay",onClick:p},s.createElement("div",{className:"confirm-dialog",onClick:g=>g.stopPropagation()},s.createElement("div",{className:"confirm-header"},s.createElement("h3",null,n),s.createElement("button",{className:"confirm-close",onClick:p},"")),s.createElement("div",{className:"confirm-body"},s.createElement("p",{className:"confirm-message"},r),c&&s.createElement("div",{className:"confirm-details"},c)),s.createElement("div",{className:"confirm-actions"},s.createElement("button",{className:"confirm-btn cancel",onClick:p},m),s.createElement("button",{className:`confirm-btn ${v?"danger":"primary"}`,onClick:()=>{f(),p()}},d)))):null}function kb({id:i,message:n,type:r="success",onDismiss:c}){const[d,m]=X.useState(!1);X.useEffect(()=>{const p=setTimeout(()=>{m(!0),setTimeout(()=>c(i),300)},3e3);return()=>clearTimeout(p)},[i,c]);const f={success:"",error:"",warning:"",info:""};return s.createElement("div",{className:`toast toast-${r} ${d?"toast-exit":""}`},s.createElement("span",{className:"toast-icon"},f[r]||f.info),s.createElement("span",{className:"toast-message"},n),s.createElement("button",{className:"toast-close",onClick:()=>{m(!0),setTimeout(()=>c(i),300)}},""))}function Ab({toasts:i,onDismiss:n}){return s.createElement("div",{className:"toast-container"},i.map(r=>s.createElement(kb,{key:r.id,id:r.id,message:r.message,type:r.type,onDismiss:n})))}const mc=i=>{if(!i)return"";const n=new Date(i),r=n.getTimezoneOffset()*6e4;return new Date(n.getTime()-r).toISOString().slice(0,16)},fc=i=>{if(!i)return null;const n=new Date(i);return Number.isNaN(n.getTime())?null:n.toISOString()},hc={type:"daily",condition:"match_any",condition_value:"",title:"",description:"",target:1,reward_soft:0,reward_premium:0,reward_shard_character_id:null,reward_shard_amount:0,starts_at:null,ends_at:null},pc={name:"",description:"",starts_at:null,ends_at:null},Lu={banner_id:null,item_type:"character",character_id:null,shard_amount:0,soft_currency:0,premium_currency:0,weight:1},vc={name:"",description:"",cost_soft:0,cost_premium:0,item_type:"shards",character_id:null,shard_amount:0,soft_currency:0,premium_currency:0,active:!0},Bs={name:"",rarity:"SR",max_hp:80,max_mana:100,attack:20,defense:20,cursed_output:20,cursed_resistance:20,crit_chance:.05,portrait_url:"",card_art_url:""},Lr={skill_type:"ability",slot:1,skill_key:"",name:"",description:"",damage:0,manaCost:0,targetType:"single",damageType:"physical",statusEffect:"",statusChance:0,statusDuration:0,image_url:""};function oa({title:i,defaultOpen:n=!0,children:r,badge:c}){const[d,m]=X.useState(n);return s.createElement("div",{className:`collapsible-section ${d?"open":""}`},s.createElement("button",{className:"collapsible-header",onClick:()=>m(!d),type:"button"},s.createElement("span",{className:"collapsible-title"},i,c&&s.createElement("span",{className:"section-badge"},c)),s.createElement("span",{className:"collapsible-icon"},d?"":"")),d&&s.createElement("div",{className:"collapsible-content"},r))}function Il({text:i,children:n}){const[r,c]=X.useState(!1);return s.createElement("span",{className:"tooltip-wrapper",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},n,r&&s.createElement("div",{className:"tooltip-bubble"},i))}function op({url:i,alt:n}){const[r,c]=X.useState(!1),[d,m]=X.useState(!0);return i?s.createElement("div",{className:"image-preview"},d&&s.createElement("div",{className:"image-loading"},"Loading..."),r&&s.createElement("div",{className:"image-error"},"Failed to load"),!r&&s.createElement("img",{src:i,alt:n,onLoad:()=>m(!1),onError:()=>{c(!0),m(!1)},style:{display:d?"none":"block"}})):s.createElement("div",{className:"image-preview empty"},s.createElement("span",null,"No image"))}function Ob({profile:i,onBack:n,characters:r=[]}){const[c,d]=X.useState("players"),[m,f]=X.useState(""),[p,v]=X.useState([]),[g,T]=X.useState({isOpen:!1}),[E,R]=X.useState([]),[z,x]=X.useState(null),[H,j]=X.useState(""),[ee,se]=X.useState([]),[J,ge]=X.useState(r[0]?.id||1),[Se,D]=X.useState("0"),[ce,P]=X.useState([]),[oe,$e]=X.useState({...Bs}),[Le,be]=X.useState(""),[Ye,Xe]=X.useState([]),[_e,I]=X.useState({...Lr}),[ue,ve]=X.useState([]),[Q,ye]=X.useState({...hc}),[O,W]=X.useState([]),[ie,fe]=X.useState({...pc}),[Te,ze]=X.useState(""),[Ie,yt]=X.useState([]),[Re,Qt]=X.useState({...Lu}),[ba,Ea]=X.useState([]),[Je,it]=X.useState({...vc}),_t=i?.role==="admin",Be=(y,C="success")=>{const re=Date.now();v(Ke=>[...Ke,{id:re,message:y,type:C}])},Ha=X.useMemo(()=>E.find(y=>y.id===H)||null,[E,H]),Ga=X.useMemo(()=>{if(!m)return E;const y=m.toLowerCase();return E.filter(C=>(C.display_name||"").toLowerCase().includes(y)||(C.role||"").toLowerCase().includes(y))},[E,m]),Aa=X.useMemo(()=>{if(!m)return ce;const y=m.toLowerCase();return ce.filter(C=>(C.name||"").toLowerCase().includes(y)||(C.rarity||"").toLowerCase().includes(y))},[ce,m]),pn=X.useMemo(()=>{if(!m)return ue;const y=m.toLowerCase();return ue.filter(C=>(C.title||"").toLowerCase().includes(y)||(C.type||"").toLowerCase().includes(y))},[ue,m]),an=X.useMemo(()=>{if(!m)return O;const y=m.toLowerCase();return O.filter(C=>(C.name||"").toLowerCase().includes(y))},[O,m]),Yn=X.useMemo(()=>{if(!m)return ba;const y=m.toLowerCase();return ba.filter(C=>(C.name||"").toLowerCase().includes(y)||(C.description||"").toLowerCase().includes(y))},[ba,m]);X.useEffect(()=>{r?.length&&(J||ge(r[0].id))},[r,J]),X.useEffect(()=>{if(!_t)return;(async()=>{const{data:C}=await ae.from("profiles").select("id, display_name, role, account_xp, account_level, rating, soft_currency, premium_currency").order("display_name");R(C||[]),!H&&C?.length&&j(C[0].id)})()},[_t,H]),X.useEffect(()=>{if(!Ha){x(null);return}x({...Ha})},[Ha]),X.useEffect(()=>{if(!Le){$e({...Bs});return}const y=ce.find(C=>String(C.id)===String(Le));if(!y){$e({...Bs});return}$e({id:y.id,name:y.name||"",rarity:y.rarity||"SR",max_hp:y.max_hp??80,max_mana:y.max_mana??100,attack:y.attack??20,defense:y.defense??20,cursed_output:y.cursed_output??20,cursed_resistance:y.cursed_resistance??20,crit_chance:y.crit_chance??.05,portrait_url:y.portrait_url||"",card_art_url:y.card_art_url||""})},[ce,Le]),X.useEffect(()=>{if(!H){se([]);return}(async()=>{const{data:C}=await ae.from("character_progress").select("character_id, level, xp, limit_break").eq("user_id",H);se(C||[])})()},[H]),X.useEffect(()=>{if(!_t)return;(async()=>{const{data:C}=await ae.from("missions").select("*").order("id");ve(C||[])})()},[_t]),X.useEffect(()=>{if(!_t)return;(async()=>{const{data:C}=await ae.from("banners").select("*").order("id");W(C||[]),!Te&&C?.length&&ze(String(C[0].id))})()},[_t,Te]),X.useEffect(()=>{if(!Te){yt([]);return}(async()=>{const{data:C}=await ae.from("banner_items").select("*").eq("banner_id",Number(Te)).order("id");yt(C||[])})()},[Te]),X.useEffect(()=>{if(!_t)return;(async()=>{const{data:C}=await ae.from("shop_offers").select("*").order("id");Ea(C||[])})()},[_t]),X.useEffect(()=>{if(!_t)return;(async()=>{const{data:C}=await ae.from("characters").select("*").order("id");P(C||[]),!Le&&C?.length&&be(String(C[0].id))})()},[_t,Le]),X.useEffect(()=>{if(!Le){Xe([]);return}(async()=>{const{data:C}=await ae.from("character_skills").select("*").eq("character_id",Number(Le)).order("id");Xe(C||[])})()},[Le]),X.useEffect(()=>{I({...Lr})},[Le]),X.useEffect(()=>{f("")},[c]);const In=async()=>{if(z)try{const y={role:z.role,account_xp:Number(z.account_xp)||0,account_level:Number(z.account_level)||1,rating:Number(z.rating)||0,soft_currency:Number(z.soft_currency)||0,premium_currency:Number(z.premium_currency)||0,updated_at:new Date().toISOString()},{error:C}=await ae.from("profiles").update(y).eq("id",z.id);if(C)throw C;R(re=>re.map(Ke=>Ke.id===z.id?{...Ke,...y}:Ke)),Be("Player profile updated successfully")}catch(y){Be("Failed to save player profile","error"),console.error(y)}},Ht=X.useMemo(()=>new Set(ee.map(y=>y.character_id)),[ee]),G=async(y,C)=>{if(H)try{if(C){const{error:Ke}=await ae.from("character_progress").upsert({user_id:H,character_id:y,level:1,xp:0,limit_break:0,updated_at:new Date().toISOString()},{onConflict:"user_id,character_id"});if(Ke)throw Ke}else{const{error:Ke}=await ae.from("character_progress").delete().eq("user_id",H).eq("character_id",y);if(Ke)throw Ke}const{data:re}=await ae.from("character_progress").select("character_id, level, xp, limit_break").eq("user_id",H);se(re||[]),Be(C?"Character unlocked":"Character locked")}catch(re){Be("Failed to update character unlock","error"),console.error(re)}},de=async()=>{if(H)try{const y=Math.max(0,Number(Se)||0),{error:C}=await ae.from("user_inventory").upsert({user_id:H,character_id:Number(J),shard_amount:y,updated_at:new Date().toISOString()},{onConflict:"user_id,character_id"});if(C)throw C;Be(`Set shards to ${y}`)}catch(y){Be("Failed to update shards","error"),console.error(y)}},Ge=async()=>{try{const y={name:oe.name.trim(),rarity:oe.rarity,max_hp:Number(oe.max_hp)||1,max_mana:Number(oe.max_mana)||1,attack:Number(oe.attack)||1,defense:Number(oe.defense)||0,cursed_output:Number(oe.cursed_output)||0,cursed_resistance:Number(oe.cursed_resistance)||0,crit_chance:Number(oe.crit_chance)||0,portrait_url:oe.portrait_url?.trim()||null,card_art_url:oe.card_art_url?.trim()||null};if(!y.name){Be("Character name is required","warning");return}if(oe.id){const{error:re}=await ae.from("characters").update(y).eq("id",oe.id);if(re)throw re;Be("Character updated successfully")}else{const{error:re}=await ae.from("characters").insert(y);if(re)throw re;Be("Character created successfully")}const{data:C}=await ae.from("characters").select("*").order("id");P(C||[]),$e({...Bs})}catch(y){Be("Failed to save character","error"),console.error(y)}},He=async(y,C)=>{T({isOpen:!0,title:"Delete Character",message:`Are you sure you want to delete "${C}"? This will also delete all associated skills and player progress.`,confirmText:"Delete",onConfirm:async()=>{try{const{error:re}=await ae.from("characters").delete().eq("id",y);if(re)throw re;const{data:Ke}=await ae.from("characters").select("*").order("id");P(Ke||[]),$e({...Bs}),be(""),Be("Character deleted")}catch(re){Be("Failed to delete character","error"),console.error(re)}},danger:!0})},nt=async()=>{try{const y={damage:Number(_e.damage)||0,manaCost:Number(_e.manaCost)||0,targetType:_e.targetType||"single",damageType:_e.damageType||"physical"};_e.statusEffect&&(y.statusEffect=_e.statusEffect,y.statusChance=Number(_e.statusChance)||0,y.statusDuration=Number(_e.statusDuration)||0);const C=_e.skill_key?.trim()||`${Le}-${_e.skill_type}-${_e.slot||0}`,re={character_id:Number(Le),skill_key:C,skill_type:_e.skill_type,slot:_e.skill_type==="ability"?Number(_e.slot)||1:null,name:_e.name.trim(),description:_e.description.trim(),payload:y,image_url:_e.image_url?.trim()||null};if(!re.name||!re.character_id){Be("Skill name is required","warning");return}if(_e.id){const{error:Ot}=await ae.from("character_skills").update(re).eq("id",_e.id);if(Ot)throw Ot;Be("Skill updated successfully")}else{const{error:Ot}=await ae.from("character_skills").insert(re);if(Ot)throw Ot;Be("Skill created successfully")}const{data:Ke}=await ae.from("character_skills").select("*").eq("character_id",Number(Le)).order("id");Xe(Ke||[]),I({...Lr})}catch(y){Be("Failed to save skill","error"),console.error(y)}},ot=async(y,C)=>{T({isOpen:!0,title:"Delete Skill",message:`Are you sure you want to delete "${C}"?`,confirmText:"Delete",onConfirm:async()=>{try{const{error:re}=await ae.from("character_skills").delete().eq("id",y);if(re)throw re;const{data:Ke}=await ae.from("character_skills").select("*").eq("character_id",Number(Le)).order("id");Xe(Ke||[]),I({...Lr}),Be("Skill deleted")}catch(re){Be("Failed to delete skill","error"),console.error(re)}},danger:!0})},Dt=async()=>{try{const y={...Q,target:Number(Q.target)||1,reward_soft:Number(Q.reward_soft)||0,reward_premium:Number(Q.reward_premium)||0,reward_shard_character_id:Q.reward_shard_character_id?Number(Q.reward_shard_character_id):null,reward_shard_amount:Number(Q.reward_shard_amount)||0,starts_at:fc(Q.starts_at),ends_at:fc(Q.ends_at)};if(Q.id){const{error:re}=await ae.from("missions").update(y).eq("id",Q.id);if(re)throw re;Be("Mission updated successfully")}else{const{error:re}=await ae.from("missions").insert(y);if(re)throw re;Be("Mission created successfully")}const{data:C}=await ae.from("missions").select("*").order("id");ve(C||[]),ye({...hc})}catch(y){Be("Failed to save mission","error"),console.error(y)}},bt=async(y,C)=>{T({isOpen:!0,title:"Delete Mission",message:`Are you sure you want to delete "${C}"?`,confirmText:"Delete",onConfirm:async()=>{try{const{error:re}=await ae.from("missions").delete().eq("id",y);if(re)throw re;const{data:Ke}=await ae.from("missions").select("*").order("id");ve(Ke||[]),ye({...hc}),Be("Mission deleted")}catch(re){Be("Failed to delete mission","error"),console.error(re)}},danger:!0})},Ct=async()=>{try{const y={...ie,starts_at:fc(ie.starts_at),ends_at:fc(ie.ends_at)};if(ie.id){const{error:re}=await ae.from("banners").update(y).eq("id",ie.id);if(re)throw re;Be("Banner updated successfully")}else{const{error:re}=await ae.from("banners").insert(y);if(re)throw re;Be("Banner created successfully")}const{data:C}=await ae.from("banners").select("*").order("id");W(C||[]),fe({...pc})}catch(y){Be("Failed to save banner","error"),console.error(y)}},wt=async(y,C)=>{T({isOpen:!0,title:"Delete Banner",message:`Are you sure you want to delete "${C}"? This will also delete all banner items.`,confirmText:"Delete",onConfirm:async()=>{try{const{error:re}=await ae.from("banners").delete().eq("id",y);if(re)throw re;const{data:Ke}=await ae.from("banners").select("*").order("id");W(Ke||[]),fe({...pc}),Be("Banner deleted")}catch(re){Be("Failed to delete banner","error"),console.error(re)}},danger:!0})},ut=async()=>{try{const y={...Re,banner_id:Number(Te||Re.banner_id),character_id:Re.character_id?Number(Re.character_id):null,shard_amount:Number(Re.shard_amount)||0,soft_currency:Number(Re.soft_currency)||0,premium_currency:Number(Re.premium_currency)||0,weight:Number(Re.weight)||1};if(Re.id){const{error:re}=await ae.from("banner_items").update(y).eq("id",Re.id);if(re)throw re;Be("Banner item updated successfully")}else{const{error:re}=await ae.from("banner_items").insert(y);if(re)throw re;Be("Banner item created successfully")}const{data:C}=await ae.from("banner_items").select("*").eq("banner_id",Number(Te)).order("id");yt(C||[]),Qt({...Lu})}catch(y){Be("Failed to save banner item","error"),console.error(y)}},qe=async y=>{T({isOpen:!0,title:"Delete Banner Item",message:"Are you sure you want to delete this banner item?",confirmText:"Delete",onConfirm:async()=>{try{const{error:C}=await ae.from("banner_items").delete().eq("id",y);if(C)throw C;const{data:re}=await ae.from("banner_items").select("*").eq("banner_id",Number(Te)).order("id");yt(re||[]),Qt({...Lu}),Be("Banner item deleted")}catch(C){Be("Failed to delete banner item","error"),console.error(C)}},danger:!0})},At=async()=>{try{const y={...Je,cost_soft:Number(Je.cost_soft)||0,cost_premium:Number(Je.cost_premium)||0,character_id:Je.character_id?Number(Je.character_id):null,shard_amount:Number(Je.shard_amount)||0,soft_currency:Number(Je.soft_currency)||0,premium_currency:Number(Je.premium_currency)||0,active:!!Je.active};if(Je.id){const{error:re}=await ae.from("shop_offers").update(y).eq("id",Je.id);if(re)throw re;Be("Shop offer updated successfully")}else{const{error:re}=await ae.from("shop_offers").insert(y);if(re)throw re;Be("Shop offer created successfully")}const{data:C}=await ae.from("shop_offers").select("*").order("id");Ea(C||[]),it({...vc})}catch(y){Be("Failed to save shop offer","error"),console.error(y)}},da=async(y,C)=>{T({isOpen:!0,title:"Delete Shop Offer",message:`Are you sure you want to delete "${C}"?`,confirmText:"Delete",onConfirm:async()=>{try{const{error:re}=await ae.from("shop_offers").delete().eq("id",y);if(re)throw re;const{data:Ke}=await ae.from("shop_offers").select("*").order("id");Ea(Ke||[]),it({...vc}),Be("Shop offer deleted")}catch(re){Be("Failed to delete offer","error"),console.error(re)}},danger:!0})};return _t?s.createElement("div",{className:"admin-panel-wrapper"},s.createElement(Ab,{toasts:p,onDismiss:y=>v(C=>C.filter(re=>re.id!==y))}),s.createElement(Tb,{isOpen:g.isOpen,title:g.title,message:g.message,confirmText:g.confirmText,onConfirm:g.onConfirm,onCancel:()=>T({isOpen:!1}),danger:g.danger}),s.createElement("div",{className:"admin-sidebar"},s.createElement("div",{className:"admin-sidebar-header"},s.createElement("h2",null,"Admin Panel")),s.createElement("nav",{className:"admin-nav"},s.createElement("button",{className:`admin-nav-item ${c==="players"?"active":""}`,onClick:()=>d("players")},s.createElement("span",{className:"nav-icon"},""),s.createElement("span",{className:"nav-label"},"Players")),s.createElement("button",{className:`admin-nav-item ${c==="characters"?"active":""}`,onClick:()=>d("characters")},s.createElement("span",{className:"nav-icon"},""),s.createElement("span",{className:"nav-label"},"Characters")),s.createElement("button",{className:`admin-nav-item ${c==="missions"?"active":""}`,onClick:()=>d("missions")},s.createElement("span",{className:"nav-icon"},""),s.createElement("span",{className:"nav-label"},"Missions")),s.createElement("button",{className:`admin-nav-item ${c==="banners"?"active":""}`,onClick:()=>d("banners")},s.createElement("span",{className:"nav-icon"},""),s.createElement("span",{className:"nav-label"},"Banners")),s.createElement("button",{className:`admin-nav-item ${c==="shop"?"active":""}`,onClick:()=>d("shop")},s.createElement("span",{className:"nav-icon"},""),s.createElement("span",{className:"nav-label"},"Shop"))),s.createElement("button",{className:"admin-sidebar-back",onClick:n},s.createElement("span",null,""),s.createElement("span",null,"Exit Admin"))),s.createElement("div",{className:"admin-content"},s.createElement("div",{className:"admin-content-header"},s.createElement("h1",null,c.charAt(0).toUpperCase()+c.slice(1)),s.createElement("div",{className:"admin-search"},s.createElement("input",{type:"text",placeholder:`Search ${c}...`,value:m,onChange:y=>f(y.target.value),className:"admin-search-input"}),m&&s.createElement("button",{className:"admin-search-clear",onClick:()=>f("")},""))),c==="players"&&s.createElement("div",{className:"admin-layout"},s.createElement("div",{className:"admin-panel-list"},s.createElement("div",{className:"admin-panel-list-header"},s.createElement("h3",null,"All Players"),s.createElement("span",{className:"item-count"},Ga.length)),s.createElement("div",{className:"admin-panel-list-items"},Ga.map(y=>s.createElement("button",{key:y.id,className:`admin-card-item ${H===y.id?"active":""}`,onClick:()=>j(y.id)},s.createElement("div",{className:"item-header"},s.createElement("strong",null,y.display_name||"Unnamed"),s.createElement("span",{className:`badge ${y.role==="admin"?"badge-admin":"badge-player"}`},y.role)),s.createElement("div",{className:"item-meta"},s.createElement("span",null,"Level ",y.account_level),s.createElement("span",null,""),s.createElement("span",null,"Rating ",y.rating)))))),s.createElement("div",{className:"admin-panel-detail"},z?s.createElement(s.Fragment,null,s.createElement("div",{className:"admin-detail-header"},s.createElement("h2",null,z.display_name||"Unnamed Player")),s.createElement(oa,{title:"Account Settings",defaultOpen:!0},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Role",s.createElement(Il,{text:"Admin role grants access to this panel"},s.createElement("span",{className:"help-icon"},"?"))),s.createElement("select",{className:"form-input",value:z.role||"player",onChange:y=>x(C=>({...C,role:y.target.value}))},s.createElement("option",{value:"player"},"Player"),s.createElement("option",{value:"admin"},"Admin"))),s.createElement("div",{className:"form-row"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Account Level"),s.createElement("input",{className:"form-input",type:"number",value:z.account_level??1,onChange:y=>x(C=>({...C,account_level:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Account XP"),s.createElement("input",{className:"form-input",type:"number",value:z.account_xp??0,onChange:y=>x(C=>({...C,account_xp:y.target.value}))}))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Rating"),s.createElement("input",{className:"form-input",type:"number",value:z.rating??1e3,onChange:y=>x(C=>({...C,rating:y.target.value}))})))),s.createElement(oa,{title:"Currency",defaultOpen:!0},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Soft Currency",s.createElement(Il,{text:"Earned through gameplay, used for basic purchases"},s.createElement("span",{className:"help-icon"},"?"))),s.createElement("input",{className:"form-input",type:"number",value:z.soft_currency??0,onChange:y=>x(C=>({...C,soft_currency:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Premium Currency",s.createElement(Il,{text:"Premium currency for gacha and special items"},s.createElement("span",{className:"help-icon"},"?"))),s.createElement("input",{className:"form-input",type:"number",value:z.premium_currency??0,onChange:y=>x(C=>({...C,premium_currency:y.target.value}))})))),s.createElement("div",{className:"form-actions"},s.createElement("button",{className:"btn-primary",onClick:In},"Save Changes")),s.createElement(oa,{title:"Character Unlocks",defaultOpen:!1,badge:Ht.size},s.createElement("div",{className:"character-unlock-grid"},r.map(y=>{const C=Ht.has(y.id);return s.createElement("label",{key:y.id,className:`unlock-card ${C?"unlocked":"locked"}`},s.createElement("input",{type:"checkbox",checked:C,onChange:re=>G(y.id,re.target.checked)}),s.createElement("span",{className:"unlock-name"},y.name),s.createElement("span",{className:`unlock-rarity rarity-${y.rarity?.toLowerCase()}`},y.rarity))}))),s.createElement(oa,{title:"Set Shards",defaultOpen:!1},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Character"),s.createElement("select",{className:"form-input",value:J,onChange:y=>ge(y.target.value)},r.map(y=>s.createElement("option",{key:y.id,value:y.id},y.name," (",y.rarity,")")))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Shard Amount"),s.createElement("input",{className:"form-input",type:"number",value:Se,onChange:y=>D(y.target.value)})),s.createElement("button",{className:"btn-primary",onClick:de},"Apply Shards")))):s.createElement("div",{className:"admin-empty-state"},s.createElement("p",null,"Select a player to view details")))),c==="characters"&&s.createElement("div",{className:"admin-layout"},s.createElement("div",{className:"admin-panel-list"},s.createElement("div",{className:"admin-panel-list-header"},s.createElement("h3",null,"All Characters"),s.createElement("span",{className:"item-count"},Aa.length)),s.createElement("div",{className:"admin-panel-list-items"},Aa.map(y=>s.createElement("button",{key:y.id,className:`admin-card-item ${String(Le)===String(y.id)?"active":""}`,onClick:()=>be(String(y.id))},s.createElement("div",{className:"item-header"},s.createElement("strong",null,y.name),s.createElement("span",{className:`badge rarity-${y.rarity?.toLowerCase()}`},y.rarity)),s.createElement("div",{className:"item-meta"},s.createElement("span",null,"HP ",y.max_hp),s.createElement("span",null,""),s.createElement("span",null,"ATK ",y.attack))))),s.createElement("button",{className:"btn-secondary btn-block",onClick:()=>{be(""),$e({...Bs}),I({...Lr})}},"+ New Character")),s.createElement("div",{className:"admin-panel-detail"},s.createElement("div",{className:"admin-detail-header"},s.createElement("h2",null,oe.id?`Edit: ${oe.name}`:"New Character")),s.createElement(oa,{title:"Basic Info",defaultOpen:!0},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Name"),s.createElement("input",{className:"form-input",value:oe.name,onChange:y=>$e(C=>({...C,name:y.target.value})),placeholder:"Character name"})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Rarity"),s.createElement("select",{className:"form-input",value:oe.rarity,onChange:y=>$e(C=>({...C,rarity:y.target.value}))},s.createElement("option",{value:"UR"},"UR (Ultra Rare)"),s.createElement("option",{value:"SSR"},"SSR (Super Super Rare)"),s.createElement("option",{value:"SR"},"SR (Super Rare)"),s.createElement("option",{value:"R"},"R (Rare)"))))),s.createElement(oa,{title:"Combat Stats",defaultOpen:!1},s.createElement("div",{className:"admin-form"},s.createElement("div",{className:"form-row"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Max HP"),s.createElement("input",{className:"form-input",type:"number",value:oe.max_hp,onChange:y=>$e(C=>({...C,max_hp:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Max Cursed Energy"),s.createElement("input",{className:"form-input",type:"number",value:oe.max_mana,onChange:y=>$e(C=>({...C,max_mana:y.target.value}))}))),s.createElement("div",{className:"form-row"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Attack"),s.createElement("input",{className:"form-input",type:"number",value:oe.attack,onChange:y=>$e(C=>({...C,attack:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Defense"),s.createElement("input",{className:"form-input",type:"number",value:oe.defense,onChange:y=>$e(C=>({...C,defense:y.target.value}))}))),s.createElement("div",{className:"form-row"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Cursed Output"),s.createElement("input",{className:"form-input",type:"number",value:oe.cursed_output,onChange:y=>$e(C=>({...C,cursed_output:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Cursed Resistance"),s.createElement("input",{className:"form-input",type:"number",value:oe.cursed_resistance,onChange:y=>$e(C=>({...C,cursed_resistance:y.target.value}))}))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Crit Chance",s.createElement(Il,{text:"Value between 0 and 1 (e.g., 0.05 = 5%)"},s.createElement("span",{className:"help-icon"},"?"))),s.createElement("input",{className:"form-input",type:"number",step:"0.01",value:oe.crit_chance,onChange:y=>$e(C=>({...C,crit_chance:y.target.value}))})))),s.createElement(oa,{title:"Visual Assets",defaultOpen:!1},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Portrait URL"),s.createElement("input",{className:"form-input",value:oe.portrait_url,onChange:y=>$e(C=>({...C,portrait_url:y.target.value})),placeholder:"https://..."})),s.createElement(op,{url:oe.portrait_url,alt:"Portrait"}),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Card Art URL"),s.createElement("input",{className:"form-input",value:oe.card_art_url,onChange:y=>$e(C=>({...C,card_art_url:y.target.value})),placeholder:"https://..."})),s.createElement(op,{url:oe.card_art_url,alt:"Card Art"}))),s.createElement("div",{className:"form-actions"},s.createElement("button",{className:"btn-primary",onClick:Ge},oe.id?"Save Changes":"Create Character"),oe.id&&s.createElement("button",{className:"btn-danger",onClick:()=>He(oe.id,oe.name)},"Delete Character")),oe.id&&s.createElement(oa,{title:"Techniques",defaultOpen:!1,badge:Ye.length},s.createElement("div",{className:"subsection-list"},Ye.map(y=>{const C=y.skill_type==="ultimate"?"Domain":y.skill_type==="ability"?"Technique":"Passive";return s.createElement("button",{key:y.id,className:`subsection-item ${_e.id===y.id?"active":""}`,onClick:()=>{const re=y.payload||{};I({id:y.id,skill_type:y.skill_type,slot:y.slot??1,skill_key:y.skill_key||"",name:y.name||"",description:y.description||"",damage:re.damage||0,manaCost:re.manaCost||0,targetType:re.targetType||"single",damageType:re.damageType||"physical",statusEffect:re.statusEffect||"",statusChance:re.statusChance||0,statusDuration:re.statusDuration||0,image_url:y.image_url||""})}},s.createElement("div",{className:"subsection-item-header"},s.createElement("strong",null,y.name||y.skill_key),s.createElement("span",{className:"subsection-badge"},C)),s.createElement("div",{className:"subsection-item-meta"},y.slot&&s.createElement("span",null,"Slot ",y.slot)))})),s.createElement("div",{className:"admin-form"},s.createElement("h4",null,_e.id?"Edit Technique":"New Technique"),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Technique Type"),s.createElement("select",{className:"form-input",value:_e.skill_type,onChange:y=>I(C=>({...C,skill_type:y.target.value}))},s.createElement("option",{value:"ability"},"Technique (active skill)"),s.createElement("option",{value:"ultimate"},"Domain (ultimate skill)"),s.createElement("option",{value:"passive"},"Passive (always active)"))),_e.skill_type==="ability"&&s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Slot"),s.createElement("select",{className:"form-input",value:_e.slot,onChange:y=>I(C=>({...C,slot:y.target.value}))},s.createElement("option",{value:"1"},"Slot 1"),s.createElement("option",{value:"2"},"Slot 2"),s.createElement("option",{value:"3"},"Slot 3"),s.createElement("option",{value:"4"},"Slot 4"))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Name"),s.createElement("input",{className:"form-input",value:_e.name,onChange:y=>I(C=>({...C,name:y.target.value})),placeholder:"Technique name"})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Description"),s.createElement("textarea",{className:"form-textarea",value:_e.description,onChange:y=>I(C=>({...C,description:y.target.value})),placeholder:"Describe what this technique does"})),s.createElement("div",{className:"form-row"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Damage"),s.createElement("input",{className:"form-input",type:"number",value:_e.damage,onChange:y=>I(C=>({...C,damage:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Cursed Energy Cost"),s.createElement("input",{className:"form-input",type:"number",value:_e.manaCost,onChange:y=>I(C=>({...C,manaCost:y.target.value}))}))),s.createElement("div",{className:"form-row"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Target Type"),s.createElement("select",{className:"form-input",value:_e.targetType,onChange:y=>I(C=>({...C,targetType:y.target.value}))},s.createElement("option",{value:"single"},"Single Enemy"),s.createElement("option",{value:"all"},"All Enemies"),s.createElement("option",{value:"self"},"Self"),s.createElement("option",{value:"ally"},"Single Ally"))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Damage Type"),s.createElement("select",{className:"form-input",value:_e.damageType,onChange:y=>I(C=>({...C,damageType:y.target.value}))},s.createElement("option",{value:"physical"},"Physical"),s.createElement("option",{value:"cursed"},"Cursed Energy"),s.createElement("option",{value:"true"},"True Damage")))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Status Effect (optional)"),s.createElement("select",{className:"form-input",value:_e.statusEffect,onChange:y=>I(C=>({...C,statusEffect:y.target.value}))},s.createElement("option",{value:""},"None"),s.createElement("option",{value:"stun"},"Stun"),s.createElement("option",{value:"burn"},"Burn"),s.createElement("option",{value:"poison"},"Poison"),s.createElement("option",{value:"freeze"},"Freeze"),s.createElement("option",{value:"slow"},"Slow"))),_e.statusEffect&&s.createElement("div",{className:"form-row"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Effect Chance (0-1)"),s.createElement("input",{className:"form-input",type:"number",step:"0.1",value:_e.statusChance,onChange:y=>I(C=>({...C,statusChance:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Duration (turns)"),s.createElement("input",{className:"form-input",type:"number",value:_e.statusDuration,onChange:y=>I(C=>({...C,statusDuration:y.target.value}))}))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Image URL (optional)"),s.createElement("input",{className:"form-input",value:_e.image_url,onChange:y=>I(C=>({...C,image_url:y.target.value})),placeholder:"https://..."})),s.createElement("div",{className:"form-actions"},s.createElement("button",{className:"btn-primary",onClick:nt},_e.id?"Save Technique":"Create Technique"),_e.id&&s.createElement("button",{className:"btn-danger",onClick:()=>ot(_e.id,_e.name)},"Delete")))))),c==="missions"&&s.createElement("div",{className:"admin-layout"},s.createElement("div",{className:"admin-panel-list"},s.createElement("div",{className:"admin-panel-list-header"},s.createElement("h3",null,"All Missions"),s.createElement("span",{className:"item-count"},pn.length)),s.createElement("div",{className:"admin-panel-list-items"},pn.map(y=>s.createElement("button",{key:y.id,className:`admin-card-item ${Q.id===y.id?"active":""}`,onClick:()=>ye({...y,starts_at:mc(y.starts_at),ends_at:mc(y.ends_at)})},s.createElement("div",{className:"item-header"},s.createElement("strong",null,y.title),s.createElement("span",{className:`badge badge-${y.type}`},y.type)),s.createElement("div",{className:"item-meta"},s.createElement("span",null,"Target: ",y.target))))),s.createElement("button",{className:"btn-secondary btn-block",onClick:()=>ye({...hc})},"+ New Mission")),s.createElement("div",{className:"admin-panel-detail"},s.createElement("div",{className:"admin-detail-header"},s.createElement("h2",null,Q.id?"Edit Mission":"New Mission")),s.createElement(oa,{title:"Basic Info",defaultOpen:!0},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Type"),s.createElement("select",{className:"form-input",value:Q.type,onChange:y=>ye(C=>({...C,type:y.target.value}))},s.createElement("option",{value:"daily"},"Daily (resets every day)"),s.createElement("option",{value:"weekly"},"Weekly (resets every week)"),s.createElement("option",{value:"limited"},"Limited (one-time only)"))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Title"),s.createElement("input",{className:"form-input",value:Q.title,onChange:y=>ye(C=>({...C,title:y.target.value})),placeholder:"Mission title"})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Description"),s.createElement("textarea",{className:"form-textarea",value:Q.description,onChange:y=>ye(C=>({...C,description:y.target.value})),placeholder:"Describe the mission objective"})))),s.createElement(oa,{title:"Conditions",defaultOpen:!1},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Condition",s.createElement(Il,{text:"The type of action required (e.g., win_battle, use_ability, etc.)"},s.createElement("span",{className:"help-icon"},"?"))),s.createElement("input",{className:"form-input",value:Q.condition,onChange:y=>ye(C=>({...C,condition:y.target.value})),placeholder:"e.g., match_any, win_battle"})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Condition Value",s.createElement(Il,{text:"Additional parameter for the condition"},s.createElement("span",{className:"help-icon"},"?"))),s.createElement("input",{className:"form-input",value:Q.condition_value||"",onChange:y=>ye(C=>({...C,condition_value:y.target.value})),placeholder:"Optional value"})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Target"),s.createElement("input",{className:"form-input",type:"number",value:Q.target,onChange:y=>ye(C=>({...C,target:y.target.value}))})))),s.createElement(oa,{title:"Rewards",defaultOpen:!1},s.createElement("div",{className:"admin-form"},s.createElement("div",{className:"form-row"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Soft Currency"),s.createElement("input",{className:"form-input",type:"number",value:Q.reward_soft,onChange:y=>ye(C=>({...C,reward_soft:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Premium Currency"),s.createElement("input",{className:"form-input",type:"number",value:Q.reward_premium,onChange:y=>ye(C=>({...C,reward_premium:y.target.value}))}))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Character Shards (optional)"),s.createElement("select",{className:"form-input",value:Q.reward_shard_character_id||"",onChange:y=>ye(C=>({...C,reward_shard_character_id:y.target.value||null}))},s.createElement("option",{value:""},"No shards"),r.map(y=>s.createElement("option",{key:y.id,value:y.id},y.name," (",y.rarity,")")))),Q.reward_shard_character_id&&s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Shard Amount"),s.createElement("input",{className:"form-input",type:"number",value:Q.reward_shard_amount,onChange:y=>ye(C=>({...C,reward_shard_amount:y.target.value}))})))),s.createElement(oa,{title:"Schedule",defaultOpen:!1},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Starts At (optional)"),s.createElement("input",{className:"form-input",type:"datetime-local",value:Q.starts_at||"",onChange:y=>ye(C=>({...C,starts_at:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Ends At (optional)"),s.createElement("input",{className:"form-input",type:"datetime-local",value:Q.ends_at||"",onChange:y=>ye(C=>({...C,ends_at:y.target.value}))})))),s.createElement("div",{className:"form-actions"},s.createElement("button",{className:"btn-primary",onClick:Dt},Q.id?"Save Changes":"Create Mission"),Q.id&&s.createElement("button",{className:"btn-danger",onClick:()=>bt(Q.id,Q.title)},"Delete Mission")))),c==="banners"&&s.createElement("div",{className:"admin-layout"},s.createElement("div",{className:"admin-panel-list"},s.createElement("div",{className:"admin-panel-list-header"},s.createElement("h3",null,"All Banners"),s.createElement("span",{className:"item-count"},an.length)),s.createElement("div",{className:"admin-panel-list-items"},an.map(y=>s.createElement("button",{key:y.id,className:`admin-card-item ${ie.id===y.id?"active":""}`,onClick:()=>{fe({...y,starts_at:mc(y.starts_at),ends_at:mc(y.ends_at)}),ze(String(y.id))}},s.createElement("div",{className:"item-header"},s.createElement("strong",null,y.name)),s.createElement("div",{className:"item-meta"},s.createElement("span",null,"ID: ",y.id))))),s.createElement("button",{className:"btn-secondary btn-block",onClick:()=>fe({...pc})},"+ New Banner")),s.createElement("div",{className:"admin-panel-detail"},s.createElement("div",{className:"admin-detail-header"},s.createElement("h2",null,ie.id?"Edit Banner":"New Banner")),s.createElement(oa,{title:"Banner Settings",defaultOpen:!0},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Name"),s.createElement("input",{className:"form-input",value:ie.name,onChange:y=>fe(C=>({...C,name:y.target.value})),placeholder:"Banner name"})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Description"),s.createElement("textarea",{className:"form-textarea",value:ie.description,onChange:y=>fe(C=>({...C,description:y.target.value})),placeholder:"Describe this banner"})),s.createElement("div",{className:"form-row"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Starts At"),s.createElement("input",{className:"form-input",type:"datetime-local",value:ie.starts_at||"",onChange:y=>fe(C=>({...C,starts_at:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Ends At"),s.createElement("input",{className:"form-input",type:"datetime-local",value:ie.ends_at||"",onChange:y=>fe(C=>({...C,ends_at:y.target.value}))}))))),s.createElement("div",{className:"form-actions"},s.createElement("button",{className:"btn-primary",onClick:Ct},ie.id?"Save Changes":"Create Banner"),ie.id&&s.createElement("button",{className:"btn-danger",onClick:()=>wt(ie.id,ie.name)},"Delete Banner")),ie.id&&s.createElement(oa,{title:"Banner Items",defaultOpen:!1,badge:Ie.length},s.createElement("div",{className:"subsection-list"},Ie.map(y=>s.createElement("button",{key:y.id,className:`subsection-item ${Re.id===y.id?"active":""}`,onClick:()=>Qt({...y})},s.createElement("div",{className:"subsection-item-header"},s.createElement("strong",null,y.item_type),s.createElement("span",{className:"subsection-badge"},"Weight ",y.weight)),s.createElement("div",{className:"subsection-item-meta"},y.character_id&&s.createElement("span",null,"Character ID: ",y.character_id))))),s.createElement("div",{className:"admin-form"},s.createElement("h4",null,Re.id?"Edit Item":"New Item"),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Item Type"),s.createElement("select",{className:"form-input",value:Re.item_type,onChange:y=>Qt(C=>({...C,item_type:y.target.value}))},s.createElement("option",{value:"character"},"Character (full unlock)"),s.createElement("option",{value:"shards"},"Character Shards"),s.createElement("option",{value:"currency"},"Currency"),s.createElement("option",{value:"item"},"Item"),s.createElement("option",{value:"title"},"Title"))),(Re.item_type==="character"||Re.item_type==="shards")&&s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Character"),s.createElement("select",{className:"form-input",value:Re.character_id||"",onChange:y=>Qt(C=>({...C,character_id:y.target.value}))},s.createElement("option",{value:""},"Select character"),r.map(y=>s.createElement("option",{key:y.id,value:y.id},y.name," (",y.rarity,")")))),Re.item_type==="shards"&&s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Shard Amount"),s.createElement("input",{className:"form-input",type:"number",value:Re.shard_amount,onChange:y=>Qt(C=>({...C,shard_amount:y.target.value}))})),Re.item_type==="currency"&&s.createElement(s.Fragment,null,s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Soft Currency"),s.createElement("input",{className:"form-input",type:"number",value:Re.soft_currency,onChange:y=>Qt(C=>({...C,soft_currency:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Premium Currency"),s.createElement("input",{className:"form-input",type:"number",value:Re.premium_currency,onChange:y=>Qt(C=>({...C,premium_currency:y.target.value}))}))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Weight",s.createElement(Il,{text:"Higher weight = more likely to be pulled"},s.createElement("span",{className:"help-icon"},"?"))),s.createElement("input",{className:"form-input",type:"number",value:Re.weight,onChange:y=>Qt(C=>({...C,weight:y.target.value}))})),s.createElement("div",{className:"form-actions"},s.createElement("button",{className:"btn-primary",onClick:ut},Re.id?"Save Item":"Add Item"),Re.id&&s.createElement("button",{className:"btn-danger",onClick:()=>qe(Re.id)},"Delete")))))),c==="shop"&&s.createElement("div",{className:"admin-layout"},s.createElement("div",{className:"admin-panel-list"},s.createElement("div",{className:"admin-panel-list-header"},s.createElement("h3",null,"All Offers"),s.createElement("span",{className:"item-count"},Yn.length)),s.createElement("div",{className:"admin-panel-list-items"},Yn.map(y=>s.createElement("button",{key:y.id,className:`admin-card-item ${Je.id===y.id?"active":""}`,onClick:()=>it({...y})},s.createElement("div",{className:"item-header"},s.createElement("strong",null,y.name),s.createElement("span",{className:`badge ${y.active?"badge-success":"badge-inactive"}`},y.active?"Active":"Inactive")),s.createElement("div",{className:"item-meta"},s.createElement("span",null,y.item_type))))),s.createElement("button",{className:"btn-secondary btn-block",onClick:()=>it({...vc})},"+ New Offer")),s.createElement("div",{className:"admin-panel-detail"},s.createElement("div",{className:"admin-detail-header"},s.createElement("h2",null,Je.id?"Edit Offer":"New Offer")),s.createElement(oa,{title:"Basic Info",defaultOpen:!0},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Name"),s.createElement("input",{className:"form-input",value:Je.name,onChange:y=>it(C=>({...C,name:y.target.value})),placeholder:"Offer name"})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Description"),s.createElement("textarea",{className:"form-textarea",value:Je.description,onChange:y=>it(C=>({...C,description:y.target.value})),placeholder:"Describe this offer"})),s.createElement("label",{className:"form-field"},s.createElement("div",{className:"checkbox-field"},s.createElement("input",{type:"checkbox",checked:!!Je.active,onChange:y=>it(C=>({...C,active:y.target.checked}))}),s.createElement("span",{className:"field-label"},"Active (visible in shop)"))))),s.createElement(oa,{title:"Cost",defaultOpen:!1},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Soft Currency Cost"),s.createElement("input",{className:"form-input",type:"number",value:Je.cost_soft,onChange:y=>it(C=>({...C,cost_soft:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Premium Currency Cost"),s.createElement("input",{className:"form-input",type:"number",value:Je.cost_premium,onChange:y=>it(C=>({...C,cost_premium:y.target.value}))})))),s.createElement(oa,{title:"Rewards",defaultOpen:!1},s.createElement("div",{className:"admin-form"},s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Item Type"),s.createElement("select",{className:"form-input",value:Je.item_type,onChange:y=>it(C=>({...C,item_type:y.target.value}))},s.createElement("option",{value:"shards"},"Character Shards"),s.createElement("option",{value:"currency"},"Currency"),s.createElement("option",{value:"item"},"Item"))),Je.item_type==="shards"&&s.createElement(s.Fragment,null,s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label required"},"Character"),s.createElement("select",{className:"form-input",value:Je.character_id||"",onChange:y=>it(C=>({...C,character_id:y.target.value}))},s.createElement("option",{value:""},"Select character"),r.map(y=>s.createElement("option",{key:y.id,value:y.id},y.name," (",y.rarity,")")))),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"},"Shard Amount"),s.createElement("input",{className:"form-input",type:"number",value:Je.shard_amount,onChange:y=>it(C=>({...C,shard_amount:y.target.value}))}))),Je.item_type==="currency"&&s.createElement(s.Fragment,null,s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Soft Currency Amount"),s.createElement("input",{className:"form-input",type:"number",value:Je.soft_currency,onChange:y=>it(C=>({...C,soft_currency:y.target.value}))})),s.createElement("label",{className:"form-field"},s.createElement("span",{className:"field-label"}," Premium Currency Amount"),s.createElement("input",{className:"form-input",type:"number",value:Je.premium_currency,onChange:y=>it(C=>({...C,premium_currency:y.target.value}))}))))),s.createElement("div",{className:"form-actions"},s.createElement("button",{className:"btn-primary",onClick:At},Je.id?"Save Changes":"Create Offer"),Je.id&&s.createElement("button",{className:"btn-danger",onClick:()=>da(Je.id,Je.name)},"Delete Offer")))))):s.createElement("div",{className:"meta-page"},s.createElement("div",{className:"meta-header"},s.createElement("button",{className:"profile-back",onClick:n}," Back"),s.createElement("h1",null,"Admin Control Panel")),s.createElement("div",{className:"admin-panel admin-empty"},"You do not have admin access."))}function Rb({dailyReward:i,onClaim:n,onBack:r}){const[c,d]=X.useState(!1),[m,f]=X.useState(!1),p=i?.current_streak||0,v=i?.longest_streak||0,g=i?.total_logins||0,T=i?.last_claim_date,E=new Date().toISOString().split("T")[0],R=T!==E,z=R?p%7+1:(p-1)%7+1,x=[{day:1,soft:50,premium:0,icon:""},{day:2,soft:75,premium:0,icon:""},{day:3,soft:100,premium:5,icon:""},{day:4,soft:125,premium:0,icon:""},{day:5,soft:150,premium:10,icon:""},{day:6,soft:200,premium:0,icon:""},{day:7,soft:300,premium:25,icon:""}],H=async()=>{!R||c||(d(!0),await n?.(),d(!1),f(!0),setTimeout(()=>f(!1),3e3))};return s.createElement("div",{className:"daily-rewards-page"},s.createElement("div",{className:"daily-rewards-header"},s.createElement("button",{className:"daily-rewards-back",onClick:r},s.createElement("span",null,""),s.createElement("span",null,"Back")),s.createElement("h1",null,"Daily Login Rewards")),s.createElement("div",{className:"daily-rewards-container"},s.createElement("div",{className:"daily-rewards-stats"},s.createElement("div",{className:"stat-card"},s.createElement("div",{className:"stat-icon"},""),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},p),s.createElement("div",{className:"stat-label"},"Current Streak"))),s.createElement("div",{className:"stat-card"},s.createElement("div",{className:"stat-icon"},""),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},v),s.createElement("div",{className:"stat-label"},"Longest Streak"))),s.createElement("div",{className:"stat-card"},s.createElement("div",{className:"stat-icon"},""),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},g),s.createElement("div",{className:"stat-label"},"Total Logins")))),s.createElement("div",{className:"reward-calendar"},s.createElement("h2",null,"Weekly Rewards"),s.createElement("div",{className:"calendar-grid"},x.map(j=>{const ee=j.day===z&&R,se=j.day<z||j.day===z&&!R,J=j.day>z||j.day===z&&!R&&p===0;return s.createElement("div",{key:j.day,className:`calendar-day ${ee?"today":""} ${se?"claimed":""} ${J?"upcoming":""}`},s.createElement("div",{className:"day-header"},s.createElement("span",{className:"day-number"},"Day ",j.day),se&&s.createElement("span",{className:"claimed-badge"},""),ee&&s.createElement("span",{className:"today-badge"},"Today")),s.createElement("div",{className:"day-icon"},j.icon),s.createElement("div",{className:"day-rewards"},j.soft>0&&s.createElement("div",{className:"reward-item"},s.createElement("span",{className:"reward-icon"},""),s.createElement("span",{className:"reward-amount"},j.soft)),j.premium>0&&s.createElement("div",{className:"reward-item premium"},s.createElement("span",{className:"reward-icon"},""),s.createElement("span",{className:"reward-amount"},j.premium))),j.day===7&&s.createElement("div",{className:"bonus-badge"},"Bonus!"))}))),R?s.createElement("button",{className:`claim-button ${c?"claiming":""} ${m?"claimed":""}`,onClick:H,disabled:c||m},c?s.createElement(s.Fragment,null,s.createElement("span",{className:"button-spinner"}),s.createElement("span",null,"Claiming...")):m?s.createElement(s.Fragment,null,s.createElement("span",null,""),s.createElement("span",null,"Claimed!")):s.createElement(s.Fragment,null,s.createElement("span",null,""),s.createElement("span",null,"Claim Today's Reward"))):s.createElement("div",{className:"claim-cooldown"},s.createElement("div",{className:"cooldown-icon"},""),s.createElement("div",{className:"cooldown-text"},s.createElement("div",{className:"cooldown-title"},"Already Claimed Today"),s.createElement("div",{className:"cooldown-subtitle"},"Come back tomorrow for your next reward!"))),s.createElement("div",{className:"daily-rewards-info"},s.createElement("h3",null,"How it Works"),s.createElement("ul",null,s.createElement("li",null," Login every day to claim rewards and build your streak"),s.createElement("li",null," Consecutive logins increase your rewards"),s.createElement("li",null," Day 7 gives bonus premium currency!"),s.createElement("li",null," Missing a day resets your streak to Day 1")))))}function Db({achievements:i,progress:n,onClaimReward:r,onBack:c}){const[d,m]=X.useState("all"),[f,p]=X.useState(null),v=[{id:"all",label:"All",icon:""},{id:"battle",label:"Battle",icon:""},{id:"pvp",label:"PvP",icon:""},{id:"collection",label:"Collection",icon:""},{id:"progression",label:"Progress",icon:""},{id:"economy",label:"Economy",icon:""},{id:"story",label:"Story",icon:""},{id:"daily",label:"Daily",icon:""},{id:"special",label:"Special",icon:""}],g=X.useMemo(()=>i.map(x=>{const H=n.find(j=>j.achievement_id===x.id);return{...x,progress:H?.progress||0,is_completed:H?.is_completed||!1,rewards_claimed:H?.rewards_claimed||!1,completed_at:H?.completed_at}}),[i,n]),T=X.useMemo(()=>d==="all"?g:g.filter(x=>x.category===d),[g,d]),E=X.useMemo(()=>{const x=g.filter(se=>se.is_completed).length,H=g.length,j=g.filter(se=>se.rewards_claimed).reduce((se,J)=>se+J.reward_soft_currency,0),ee=g.filter(se=>se.rewards_claimed).reduce((se,J)=>se+J.reward_premium_currency,0);return{completed:x,total:H,totalSoftEarned:j,totalPremiumEarned:ee}},[g]),R=async x=>{p(x),await r?.(x),p(null)},z=x=>{switch(x){case"legendary":return"linear-gradient(135deg, #ff6b6b, #feca57)";case"epic":return"linear-gradient(135deg, #a29bfe, #fd79a8)";case"rare":return"linear-gradient(135deg, #74b9ff, #a29bfe)";default:return"linear-gradient(135deg, #95a5a6, #bdc3c7)"}};return s.createElement("div",{className:"achievements-page"},s.createElement("div",{className:"achievements-header"},s.createElement("button",{className:"achievements-back",onClick:c},s.createElement("span",null,""),s.createElement("span",null,"Back")),s.createElement("h1",null,"Achievements")),s.createElement("div",{className:"achievements-container"},s.createElement("div",{className:"achievements-stats"},s.createElement("div",{className:"stat-card"},s.createElement("div",{className:"stat-icon"},""),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},E.completed," / ",E.total),s.createElement("div",{className:"stat-label"},"Completed"))),s.createElement("div",{className:"stat-card"},s.createElement("div",{className:"stat-icon"},""),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},E.totalSoftEarned.toLocaleString()),s.createElement("div",{className:"stat-label"},"Soft Earned"))),s.createElement("div",{className:"stat-card"},s.createElement("div",{className:"stat-icon"},""),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},E.totalPremiumEarned),s.createElement("div",{className:"stat-label"},"Premium Earned"))),s.createElement("div",{className:"stat-card"},s.createElement("div",{className:"stat-icon"},""),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},Math.round(E.completed/E.total*100),"%"),s.createElement("div",{className:"stat-label"},"Completion")))),s.createElement("div",{className:"category-filter"},v.map(x=>{const H=x.id==="all"?g.length:g.filter(j=>j.category===x.id).length;return s.createElement("button",{key:x.id,className:`category-btn ${d===x.id?"active":""}`,onClick:()=>m(x.id)},s.createElement("span",{className:"category-icon"},x.icon),s.createElement("span",{className:"category-label"},x.label),s.createElement("span",{className:"category-count"},H))})),s.createElement("div",{className:"achievements-list"},T.length===0?s.createElement("div",{className:"achievements-empty"},s.createElement("div",{className:"empty-icon"},""),s.createElement("div",{className:"empty-text"},"No achievements in this category")):T.map(x=>{const H=Math.min(100,x.progress/x.requirement_target*100),j=x.is_completed&&!x.rewards_claimed,ee=f===x.id;return s.createElement("div",{key:x.id,className:`achievement-card ${x.is_completed?"completed":""} ${x.rewards_claimed?"claimed":""}`,style:{borderImage:z(x.rarity)}},s.createElement("div",{className:"achievement-icon-wrapper"},s.createElement("div",{className:"achievement-icon"},x.icon||""),x.is_completed&&s.createElement("div",{className:"completion-badge"},"")),s.createElement("div",{className:"achievement-content"},s.createElement("div",{className:"achievement-header"},s.createElement("div",{className:"achievement-title"},s.createElement("h3",null,x.name),s.createElement("span",{className:`rarity-badge rarity-${x.rarity}`},x.rarity)),s.createElement("p",{className:"achievement-description"},x.description)),s.createElement("div",{className:"achievement-progress"},s.createElement("div",{className:"progress-bar-container"},s.createElement("div",{className:"progress-bar-fill",style:{width:`${H}%`}})),s.createElement("div",{className:"progress-text"},x.progress," / ",x.requirement_target)),s.createElement("div",{className:"achievement-footer"},s.createElement("div",{className:"achievement-rewards"},x.reward_soft_currency>0&&s.createElement("div",{className:"reward-badge"},s.createElement("span",{className:"reward-icon"},""),s.createElement("span",null,x.reward_soft_currency)),x.reward_premium_currency>0&&s.createElement("div",{className:"reward-badge premium"},s.createElement("span",{className:"reward-icon"},""),s.createElement("span",null,x.reward_premium_currency)),x.reward_title&&s.createElement("div",{className:"reward-badge title"},s.createElement("span",{className:"reward-icon"},""),s.createElement("span",null,x.reward_title))),j&&s.createElement("button",{className:`claim-reward-btn ${ee?"claiming":""}`,onClick:()=>R(x.id),disabled:ee},ee?"Claiming...":"Claim Reward"),x.rewards_claimed&&s.createElement("div",{className:"claimed-badge"},"Claimed "))))}))))}function xb({characters:i,onConfirm:n,onBack:r}){const[c,d]=X.useState("normal"),[m,f]=X.useState([]),[p,v]=X.useState("manual"),g={easy:{label:"Easy",description:"Opponents start at 70% stats",icon:"",statMultiplier:.7,xpMultiplier:.8,currencyMultiplier:.8},normal:{label:"Normal",description:"Opponents start at 100% stats",icon:"",statMultiplier:1,xpMultiplier:1,currencyMultiplier:1},hard:{label:"Hard",description:"Opponents start at 130% stats",icon:"",statMultiplier:1.3,xpMultiplier:1.3,currencyMultiplier:1.5},extreme:{label:"Extreme",description:"Opponents start at 170% stats",icon:"",statMultiplier:1.7,xpMultiplier:1.5,currencyMultiplier:2}},T=[{id:"first_years",name:"First Years",description:"Yuji, Megumi, and Nobara",characterIds:[1,2,3],difficulty:"easy"},{id:"heavy_hitters",name:"Heavy Hitters",description:"Gojo, Nanami, and Todo",characterIds:[4,5,6],difficulty:"hard"},{id:"cursed_spirits",name:"Cursed Spirits",description:"Mahito, Jogo, and Hanami",characterIds:[7,8,9],difficulty:"hard"},{id:"random",name:"Random Team",description:"Random opponents at selected difficulty",characterIds:null,difficulty:null}],E=j=>{m.includes(j)?f(m.filter(ee=>ee!==j)):m.length<3&&f([...m,j])},R=()=>{let j=m;if(p==="preset"&&j.length===0&&(j=[...i].sort(()=>Math.random()-.5).slice(0,3).map(J=>J.id)),j.length!==3)return;const ee=i.filter(se=>j.includes(se.id));n({opponents:ee,difficulty:g[c]})},z=j=>{if(v("preset"),j.characterIds)f(j.characterIds),j.difficulty&&d(j.difficulty);else{const ee=[...i].sort(()=>Math.random()-.5);f(ee.slice(0,3).map(se=>se.id))}},x=({character:j})=>{const ee=j.portraitUrl||Yr(j.name);return s.createElement("div",{className:"opponent-portrait"},ee?s.createElement("img",{src:ee,alt:j.name,className:"opponent-portrait-img"}):s.createElement("div",{className:"opponent-portrait-placeholder"},s.createElement("span",{className:"opponent-portrait-initial"},j.name[0])))},H=m.length===3;return s.createElement("div",{className:"opponent-select-container"},s.createElement("div",{className:"opponent-select-header"},s.createElement("button",{className:"profile-back",onClick:r}," Back"),s.createElement("h1",null,"Select Opponents")),s.createElement("div",{className:"opponent-select-content"},s.createElement("section",{className:"difficulty-section"},s.createElement("h2",null,"Difficulty"),s.createElement("div",{className:"difficulty-grid"},Object.entries(g).map(([j,ee])=>s.createElement("button",{key:j,className:`difficulty-card ${c===j?"selected":""}`,onClick:()=>d(j)},s.createElement("div",{className:"difficulty-icon"},ee.icon),s.createElement("div",{className:"difficulty-label"},ee.label),s.createElement("div",{className:"difficulty-description"},ee.description),s.createElement("div",{className:"difficulty-rewards"},s.createElement("span",null,"XP: ",Math.round(ee.xpMultiplier*100),"%"),s.createElement("span",null,": ",Math.round(ee.currencyMultiplier*100),"%")))))),s.createElement("section",{className:"presets-section"},s.createElement("h2",null,"Quick Select"),s.createElement("div",{className:"presets-grid"},T.map(j=>s.createElement("button",{key:j.id,className:"preset-team-card",onClick:()=>z(j)},s.createElement("div",{className:"preset-team-name"},j.name),s.createElement("div",{className:"preset-team-description"},j.description))))),s.createElement("section",{className:"manual-selection-section"},s.createElement("div",{className:"section-header"},s.createElement("h2",null,"Manual Selection"),s.createElement("span",{className:"selection-count"},m.length,"/3 Selected")),s.createElement("div",{className:"opponent-grid"},i.map(j=>{const ee=m.includes(j.id);return s.createElement("div",{key:j.id,className:`opponent-card rarity-${j.rarity.toLowerCase()} ${ee?"is-selected":""}`,onClick:()=>{v("manual"),E(j.id)}},ee&&s.createElement("div",{className:"card-selected-badge"},""),s.createElement(x,{character:j}),s.createElement("div",{className:"opponent-card-name"},j.name),s.createElement("div",{className:"opponent-card-rarity"},j.rarity))}))),s.createElement("div",{className:"opponent-confirm-section"},s.createElement("button",{className:"opponent-confirm-btn",disabled:!H,onClick:R},H?`Start Battle (${g[c].label})`:"Select 3 Opponents"))))}function Mb({result:i,rewards:n,onContinue:r,isPvp:c=!1}){const[d,m]=X.useState(!1),[f,p]=X.useState(0);X.useEffect(()=>{setTimeout(()=>p(1),100),setTimeout(()=>m(!0),800)},[]);const v=i==="win",g=v?" VICTORY! ":" DEFEAT ",T=v?"var(--accent)":"#ff6b6b";return s.createElement("div",{className:`battle-result-overlay ${f>=1?"show":""}`},s.createElement("div",{className:`battle-result-modal ${d?"show-rewards":""}`},s.createElement("div",{className:"result-title",style:{color:T}},g),s.createElement("div",{className:"result-summary"},s.createElement("div",{className:"summary-stat"},s.createElement("span",{className:"stat-label"},"Turns Taken"),s.createElement("span",{className:"stat-value"},n?.turns||0)),c&&s.createElement("div",{className:"summary-stat"},s.createElement("span",{className:"stat-label"},"Rating Change"),s.createElement("span",{className:`stat-value ${n?.ratingDelta>=0?"positive":"negative"}`},n?.ratingDelta>=0?"+":"",n?.ratingDelta||0))),d&&n&&s.createElement("div",{className:"rewards-section"},s.createElement("h3",{className:"rewards-title"},"Rewards Earned"),s.createElement("div",{className:"reward-item account-xp"},s.createElement("span",{className:"reward-icon"},""),s.createElement("div",{className:"reward-details"},s.createElement("span",{className:"reward-label"},"Account XP"),s.createElement("span",{className:"reward-value"},"+",n.accountXpGain)),n.accountLevelUp&&s.createElement("span",{className:"level-up-badge"},"Level ",n.accountLevel,"!")),n.softCurrencyGain>0&&s.createElement("div",{className:"reward-item currency"},s.createElement("span",{className:"reward-icon"},""),s.createElement("div",{className:"reward-details"},s.createElement("span",{className:"reward-label"},"Soft Currency"),s.createElement("span",{className:"reward-value"},"+",n.softCurrencyGain))),n.premiumCurrencyGain>0&&s.createElement("div",{className:"reward-item premium"},s.createElement("span",{className:"reward-icon"},""),s.createElement("div",{className:"reward-details"},s.createElement("span",{className:"reward-label"},"Premium Currency"),s.createElement("span",{className:"reward-value"},"+",n.premiumCurrencyGain))),n.characters&&n.characters.length>0&&s.createElement("div",{className:"character-rewards"},s.createElement("h4",{className:"characters-title"},"Character Progress"),n.characters.map((E,R)=>s.createElement("div",{key:R,className:"character-reward-item"},s.createElement("div",{className:"character-reward-left"},s.createElement("span",{className:"character-name"},E.name),s.createElement("div",{className:"character-xp-bar"},s.createElement("div",{className:"character-xp-fill",style:{width:`${Math.min(100,E.xp/E.xpNeeded*100)}%`}})),s.createElement("span",{className:"character-xp-text"},E.xp," / ",E.xpNeeded," XP")),s.createElement("div",{className:"character-reward-right"},s.createElement("span",{className:"character-level"},"Lv ",E.level),E.levelUp&&s.createElement("span",{className:"character-level-up"}," Level Up!"))))),n.achievementsUnlocked&&n.achievementsUnlocked.length>0&&s.createElement("div",{className:"achievements-unlocked"},s.createElement("h4",{className:"achievements-title"}," Achievements Unlocked!"),n.achievementsUnlocked.map((E,R)=>s.createElement("div",{key:R,className:"achievement-unlock-item"},s.createElement("span",{className:"achievement-icon"},E.icon),s.createElement("div",{className:"achievement-unlock-details"},s.createElement("span",{className:"achievement-name"},E.name),s.createElement("span",{className:"achievement-description"},E.description)))))),s.createElement("button",{className:"result-continue-btn",onClick:r},v?"Continue":"Return")))}const up={"fly-head":{id:"fly-head",name:"Fly Head Curse",maxHp:55,hp:55,maxMana:60,mana:60,attack:14,rarity:"SR",passive:{name:"Cursed Instinct",description:"Attacks deal 10% bonus damage.",type:"damage-boost",value:.1},abilities:[{id:"fly-head-1",name:"Claw Swipe",description:"Deals 18 damage to one enemy.",type:"attack",damage:18,manaCost:15,cooldown:1,currentCooldown:0},{id:"fly-head-2",name:"Shriek",description:"Deals 12 damage and stuns for 1 turn.",type:"attack-stun",damage:12,stunDuration:1,manaCost:20,cooldown:2,currentCooldown:0}],ultimate:{id:"fly-head-ult",name:"Swarm Rush",description:"Deals 20 damage to all enemies.",type:"attack-all",damage:20,manaCost:35,cooldown:4,currentCooldown:0}},"finger-bearer":{id:"finger-bearer",name:"Finger Bearer",maxHp:200,hp:200,maxMana:120,mana:120,attack:26,rarity:"SSR",passive:{name:"Cursed Giant",description:"Attacks deal +4 bonus damage.",type:"stacking-attack",value:4},abilities:[{id:"finger-bearer-1",name:"Crushing Slam",description:"Deals 28 damage to one enemy.",type:"attack",damage:28,manaCost:20,cooldown:1,currentCooldown:0},{id:"finger-bearer-2",name:"Malice Burst",description:"Deals 20 damage and stuns for 1 turn.",type:"attack-stun",damage:20,stunDuration:1,manaCost:35,cooldown:3,currentCooldown:0}],ultimate:{id:"finger-bearer-ult",name:"Cursed Howl",description:"Deals 30 damage to all enemies.",type:"attack-all",damage:30,manaCost:60,cooldown:4,currentCooldown:0}}},dp=[{id:"chapter-1",title:"Chapter 1  The Vessel",subtitle:"Sugisawa High Incident",nodes:[{id:"1-1",title:"Last Words",type:"story",location:"Sugisawa Hospital  Evening",system:"Some promises are harder to keep than others.",lines:[{speaker:"Grandpa Itadori",text:"Yuji... come closer."},{speaker:"Yuji Itadori",text:"Save your strength, old man. The doctor said"},{speaker:"Grandpa Itadori",text:"Forget what he said. I'm dying. And I need to tell you something."},{speaker:"Grandpa Itadori",text:"You're strong, Yuji. Stronger than you know. But strength alone won't save you."},{speaker:"Yuji Itadori",text:"What are you talking about?"},{speaker:"Grandpa Itadori",text:"When I'm gone... don't be alone. Find people. Protect them."},{speaker:"Grandpa Itadori",text:"And when your time comes... die surrounded by others. Not like me. Promise me."},{speaker:"Yuji Itadori",text:"...I promise."}]},{id:"1-2",title:"The Occult Club",type:"story",location:"Sugisawa High School  Night",system:"Cursed energy attracts curses. The finger has been unsealed.",lines:[{speaker:"Sasaki",text:"Itadori! Finally! We've been waiting for you!"},{speaker:"Iguchi",text:"Dude, you gotta see what we found. This is the real deal."},{speaker:"Yuji Itadori",text:"Wait. You removed the seals?"},{speaker:"Yuji Itadori",text:"...Something's wrong."},{speaker:"Iguchi",text:"What the hell was that?!"},{speaker:"Yuji Itadori",text:"Both of you. Get behind me. Now."}]},{id:"1-3",title:"First Contact",type:"battle",location:"Sugisawa High School  Hallway",intro:["A grotesque curse lunges from the shadows.","Yuji shoves his friends aside and braces for impact."],battle:{mode:"Tutorial Battle",playerIds:["Yuji"],enemyIds:["fly-head","fly-head"],objective:"Defeat all enemies.",prompts:["Tap a technique to queue it for this turn.","Techniques cost cursed energy. Manage your reserves carefully.","End your turn when you have selected your actions."]}},{id:"1-4",title:"Cornered",type:"battle",location:"Sugisawa High School  Third Floor",intro:["Megumi calls out Divine Dogs as the Finger Bearer emerges.","This is a holding action. Survive."],battle:{mode:"Story Battle",playerIds:["Megumi"],enemyIds:["finger-bearer"],objective:"Survive 4 turns.",type:"survival",turnLimit:4,enemyCannotDie:!0,prompts:["Some battles require survival, not victory.","Use defensive techniques to reduce incoming damage.","Megumi's Divine Dogs can attack and intercept."]},outro:["Megumi is thrown against the wall. His shikigami flicker.",'A voice calls out from the doorway: "HEY! UGLY!"']},{id:"1-5",title:"The King of Curses",type:"battle",location:"Sugisawa High School  Rooftop",intro:["Yuji has nowhere left to run. The finger pulses in his hand.","He swallows it. Power surges."],battle:{mode:"Boss Battle",playerIds:["Yuji"],enemyIds:["finger-bearer"],objective:"Defeat the Finger Bearer.",type:"boss",playerBuffs:{Yuji:{hpBonus:60,manaBonus:30,attackBonus:10}},unlocks:["Divergent Fist"]},outro:["The Finger Bearer dissolves into cursed mist.",'Megumi stares, stunned. "You became Sukunas vessel."','Yuji exhales. "Apparently."','Megumi nods. "Come with me. Theres someone you need to meet."']}],rewards:[{type:"character",label:"Yuji Itadori  Playable Character",character_id:2},{type:"character",label:"Megumi Fushiguro  Playable Character",character_id:3},{type:"soft_currency",label:"Cursed Energy x500",amount:500},{type:"premium_currency",label:"Premium Currency x100",amount:100},{type:"item",label:"Finger Fragment x3 (Gacha Material)",item_id:"finger_fragment",amount:3},{type:"title",label:'Title: "The Vessel"',title_id:"the_vessel"}],preview:['Gojo Satoru: "So youre the kid who ate Sukunas finger and lived? Interesting."',"Chapter 2: Execution  Coming Soon"]}],tn=i=>JSON.parse(JSON.stringify(i));function Ub(){const[i,n]=X.useState([]),[r,c]=X.useState([]),[d,m]=X.useState(null),[f,p]=X.useState(["Battle Start! Queue actions, then End Turn."]),[v,g]=X.useState(null),[T,E]=X.useState(1),[R,z]=X.useState("select"),[x,H]=X.useState([]),[j,ee]=X.useState([]),[se,J]=X.useState(null),[ge,Se]=X.useState([]),[D,ce]=X.useState(null),[P,oe]=X.useState(null),[$e,Le]=X.useState({}),[be,Ye]=X.useState(Ru),[Xe,_e]=X.useState(null),[I,ue]=X.useState([]),[ve,Q]=X.useState("team"),[ye,O]=X.useState({}),[W,ie]=X.useState(null),[fe,Te]=X.useState([]),[ze,Ie]=X.useState([]),[yt,Re]=X.useState([]),[Qt,ba]=X.useState([]),[Ea,Je]=X.useState([]),[it,_t]=X.useState({}),[Be,Ha]=X.useState({}),[Ga,Aa]=X.useState([]),[pn,an]=X.useState(null),[Yn,In]=X.useState([]),[Ht,G]=X.useState(!1),[de,Ge]=X.useState({chapterId:"chapter-1",activeNodeId:"1-1",completedNodes:[]}),[He,nt]=X.useState(null),[ot,Dt]=X.useState(null),[bt,Ct]=X.useState(!1),[wt,ut]=X.useState(!1),[qe,At]=X.useState(null),[da,y]=X.useState(null),[C,re]=X.useState(null),[Ke,Ot]=X.useState(null),[aa,na]=X.useState([]),[Oa,dt]=X.useState([]),[nn,va]=X.useState(null),Sn=S=>100+S*25,Kn=(S,_,N)=>{let B=Math.max(1,S||1),U=Math.max(0,_||0)+N,F=Sn(B);for(;U>=F;)U-=F,B+=1,F=Sn(B);return{level:B,xp:U}},Pn=S=>{const _=`${Date.now()}-${Math.random()}`,N={id:_,...S};In(B=>[...B,N]),setTimeout(()=>{In(B=>B.filter(U=>U.id!==_))},800)},Jl=()=>{G(!0),setTimeout(()=>G(!1),220)},ea=S=>{const _=S;return _.effects||(_.effects={buffs:[],debuffs:[],dots:[],barriers:[]}),_.states||(_.states={binding:0,sleep:0}),_.stacks||(_.stacks={speechMark:0}),_.counters||(_.counters={techniqueCount:0}),_.flags||(_.flags={gorillaCoreTurns:0,flowStateTurns:0,nextBasicDouble:!1}),_.barrier||(_.barrier={value:0,duration:0}),_},Nn=(S,_)=>{const N=_?.level||1,B=_?.limit_break||0,U=(N-1)*3+B*12,F=(N-1)*2+B*4,k=(N-1)*1+B*3,w=(N-1)*1+B*2,q=(N-1)*1+B*3,me=(N-1)*1+B*2,De={...tn(S),level:N,xp:_?.xp||0,limit_break:B,maxHp:S.maxHp+U,hp:S.maxHp+U,maxMana:S.maxMana+F,mana:S.maxMana+F,attack:S.attack+k,defense:(S.defense||0)+w,cursedOutput:(S.cursedOutput||0)+q,cursedResistance:(S.cursedResistance||0)+me};return ea(De)},Ze=(S,_=!1)=>S.map(N=>be.find(B=>B.id===N)).filter(Boolean).map(N=>_?Nn(N,ma[N.id]):ea(tn(N))),ma=X.useMemo(()=>$e,[$e]),Xt=!!qe,zt=Xt&&qe?.turn_owner===D?.user?.id,Tt=X.useMemo(()=>dp.find(S=>S.id===de.chapterId)||dp[0],[de.chapterId]),vn=X.useRef(!1),Gs=S=>{S&&Ge(_=>_.completedNodes.includes(S)?_:{..._,completedNodes:[..._.completedNodes,S]})},Sc=S=>{S&&Ge(_=>{const N=Tt?.nodes||[],B=N.findIndex(F=>F.id===S),U=N[B+1]?.id||S;return{..._,activeNodeId:U}})},Nc=S=>{Ge(_=>{if(_.completedNodes.includes(S))return _;const N=Tt?.nodes||[],B=N.findIndex(F=>F.id===S),U=N[B+1]?.id||S;return{..._,completedNodes:[..._.completedNodes,S],activeNodeId:U}})},Vs=S=>{if(!S)return null;if(up[S])return tn(up[S]);const _=be.find(N=>N.id===S||N.name===S);return _?tn(_):null},Qn=(S,_)=>{if(!_)return S;const N={...S};return _.hpBonus&&(N.maxHp+=_.hpBonus,N.hp+=_.hpBonus),_.manaBonus&&(N.maxMana+=_.manaBonus,N.mana+=_.manaBonus),_.attackBonus&&(N.attack+=_.attackBonus),N},Ys=S=>{if(!S?.battle)return;const _=S.battle,N=_.playerIds.map(k=>Vs(k)).filter(Boolean),B=_.enemyIds.map(k=>Vs(k)).filter(Boolean),U=_.playerBuffs||{},F=N.map(k=>{if(typeof k.id=="number"){const w=Nn(k,ma[k.id]);return Qn(w,U[k.name])}return Qn(k,U[k.name])});n(F),c(B),nt({nodeId:S.id,objective:_.objective,type:_.type||"standard",turnLimit:_.turnLimit,enemyCannotDie:_.enemyCannotDie,prompts:_.prompts||[],mode:_.mode}),Dt(null),z("battle"),p([`Story Battle: ${S.title}`,`Objective: ${_.objective}`,..._.prompts.map(k=>`Tip: ${k}`)]),E(1),ee([]),Se([])},Xn=()=>{ot?.result==="win"&&ot.nodeId&&Sc(ot.nodeId),Dt(null)},Jn=async()=>{if(bt||!Tt)return;const S=Tt.rewards.find(w=>w.type==="soft_currency"),_=Tt.rewards.find(w=>w.type==="premium_currency"),N=S?.amount||0,B=_?.amount||0,U=Tt.rewards.filter(w=>w.type==="character"),F=Tt.rewards.filter(w=>w.type==="item"),k=Tt.rewards.filter(w=>w.type==="title");if(D&&(N>0||B>0)){const w=(P?.soft_currency||0)+N,q=(P?.premium_currency||0)+B;await ae.from("profiles").update({soft_currency:w,premium_currency:q,updated_at:new Date().toISOString()}).eq("id",D.user.id),oe(me=>({...me||{},soft_currency:w,premium_currency:q}))}if(D&&U.length>0){const w=U.map(q=>q.character_id).filter(Boolean);if(w.length>0){const q=new Set(Object.keys(ma).map(Number)),me=w.filter(De=>!q.has(De));if(me.length>0){const De=me.map(Me=>({user_id:D.user.id,character_id:Me,level:1,xp:0,limit_break:0,updated_at:new Date().toISOString()})),{data:Ce}=await ae.from("character_progress").upsert(De,{onConflict:"user_id,character_id"}).select("character_id, level, xp, limit_break");Ce&&Le(Me=>{const $={...Me};return Ce.forEach(he=>{$[he.character_id]={level:he.level,xp:he.xp,limit_break:he.limit_break}}),$})}}}if(D&&F.length>0){const w=[],q={...Be};F.forEach(me=>{if(!me.item_id||!me.amount)return;const De=(q[me.item_id]||0)+me.amount;q[me.item_id]=De,w.push({user_id:D.user.id,item_id:me.item_id,quantity:De,updated_at:new Date().toISOString()})}),w.length>0&&(await ae.from("user_items").upsert(w,{onConflict:"user_id,item_id"}),Ha(q))}if(D&&k.length>0){const w=k.map(q=>q.title_id).filter(Boolean).map(q=>({user_id:D.user.id,title_id:q,unlocked:!0,active:!1,updated_at:new Date().toISOString()}));if(w.length>0){const{data:q}=await ae.from("user_titles").upsert(w,{onConflict:"user_id,title_id"}).select();q&&Aa(me=>{const De=[...me];return q.forEach(Ce=>{De.some(Me=>Me.title_id===Ce.title_id)||De.push(Ce)}),De})}}Ct(!0)};X.useEffect(()=>{if(!D){Le({}),Ye(Ru),ue([]),O({}),Te([]),Ie([]),Re([]),ba([]),Je([]),_t({}),Ha({}),Aa([]),ut(!1),vn.current=!1;return}(async()=>{const{data:_,error:N}=await ae.from("character_progress").select("character_id, level, xp, limit_break").eq("user_id",D.user.id);if(N)return;const B={};_.forEach(U=>{B[U.character_id]={level:U.level,xp:U.xp,limit_break:U.limit_break}}),Le(B)})()},[D]),X.useEffect(()=>{if(!D)return;(async()=>{const{data:_}=await ae.from("characters").select("id, name, rarity, max_hp, max_mana, attack, defense, cursed_output, cursed_resistance, crit_chance, portrait_url, card_art_url").order("id"),{data:N}=await ae.from("character_skills").select("id, character_id, skill_key, skill_type, slot, name, description, payload, image_url").order("character_id");if(!_||_.length===0){Ye(Ru);return}const B=new Map;(N||[]).forEach(k=>{B.has(k.character_id)||B.set(k.character_id,[]),B.get(k.character_id).push(k)});const U=k=>{const w=k.payload||{};return{id:k.skill_key||`skill-${k.id}`,name:k.name,description:k.description,...w,currentCooldown:0}},F=_.map(k=>{const w=B.get(k.id)||[],q=w.filter(Me=>Me.skill_type==="ability").sort((Me,$)=>(Me.slot||0)-($.slot||0)).map(U),me=w.find(Me=>Me.skill_type==="ultimate"),De=w.find(Me=>Me.skill_type==="passive"),Ce={id:k.id,name:k.name,maxHp:k.max_hp,hp:k.max_hp,maxMana:k.max_mana,mana:k.max_mana,attack:k.attack,defense:k.defense??0,cursedOutput:k.cursed_output??0,cursedResistance:k.cursed_resistance??0,critChance:k.crit_chance??0,rarity:k.rarity,portraitUrl:k.portrait_url,cardArtUrl:k.card_art_url,passive:De?{id:De.skill_key||`passive-${De.id}`,name:De.name,description:De.description,...De.payload||{}}:null,abilities:q,ultimate:me?U(me):null};return ea(Ce)});Ye(F)})()},[D]),X.useEffect(()=>{if(!D)return;(async()=>{ut(!1);const{data:_,error:N}=await ae.from("story_progress").select("chapter_id, active_node_id, completed_nodes, rewards_claimed").eq("user_id",D.user.id).eq("chapter_id",de.chapterId).maybeSingle();!N&&_?(Ge(B=>({...B,chapterId:_.chapter_id||B.chapterId,activeNodeId:_.active_node_id||B.activeNodeId,completedNodes:Array.isArray(_.completed_nodes)?_.completed_nodes:B.completedNodes})),Ct(!!_.rewards_claimed)):Ct(!1),ut(!0),vn.current=!0})()},[D,de.chapterId]),X.useEffect(()=>{if(!D||!vn.current)return;const S={user_id:D.user.id,chapter_id:de.chapterId,active_node_id:de.activeNodeId,completed_nodes:de.completedNodes,rewards_claimed:bt,updated_at:new Date().toISOString()};ae.from("story_progress").upsert(S,{onConflict:"user_id,chapter_id"})},[D,de.chapterId,de.activeNodeId,de.completedNodes,bt]),X.useEffect(()=>{if(!D)return;(async()=>{const{data:_,error:N}=await ae.from("team_presets").select("slot, name, character_ids").eq("user_id",D.user.id);if(N)return;const B={};_.forEach(U=>{B[U.slot]=U}),O(B)})()},[D]),X.useEffect(()=>{if(!D)return;(async()=>{const[{data:_},{data:N},{data:B},{data:U},{data:F},{data:k},{data:w},{data:q}]=await Promise.all([ae.from("missions").select("*").order("id"),ae.from("user_missions").select("*").eq("user_id",D.user.id),ae.from("shop_offers").select("*").eq("active",!0).order("id"),ae.from("banners").select("*").order("id"),ae.from("banner_items").select("*").order("banner_id"),ae.from("user_inventory").select("*").eq("user_id",D.user.id),ae.from("user_items").select("*").eq("user_id",D.user.id),ae.from("user_titles").select("*").eq("user_id",D.user.id)]);Te(_||[]),Ie(N||[]),Re(B||[]),ba(U||[]),Je(F||[]);const me={};(k||[]).forEach(Ce=>{me[Ce.character_id]=Ce.shard_amount}),_t(me);const De={};(w||[]).forEach(Ce=>{De[Ce.item_id]=Ce.quantity}),Ha(De),Aa(q||[])})()},[D]),X.useEffect(()=>{if(!D||fe.length===0)return;(async()=>{const _=new Set(ze.map(F=>F.mission_id)),N=fe.filter(F=>!_.has(F.id));if(N.length===0)return;const B=N.map(F=>({user_id:D.user.id,mission_id:F.id,progress:0,claimed:!1,updated_at:new Date().toISOString()})),{data:U}=await ae.from("user_missions").insert(B).select();U&&Ie(F=>[...F,...U])})()},[fe,D,ze]),X.useEffect(()=>{if(!D)return;(async()=>{const{data:_,error:N}=await ae.from("match_history").select("id, result, turns, rating_delta, account_xp_gain, character_xp_gain, created_at").eq("user_id",D.user.id).order("created_at",{ascending:!1}).limit(20);N||ue(_||[])})()},[D]),X.useEffect(()=>{if(!D)return;(async()=>{const{data:_}=await ae.from("daily_rewards").select("*").eq("user_id",D.user.id).single();if(_)Ot(_);else{const{data:N}=await ae.from("daily_rewards").insert({user_id:D.user.id}).select().single();Ot(N)}})()},[D]),X.useEffect(()=>{if(!D)return;(async()=>{const[_,N]=await Promise.all([ae.from("achievements").select("*").order("category"),ae.from("achievement_progress").select("*").eq("user_id",D.user.id)]);na(_.data||[]),dt(N.data||[])})()},[D]);const Zn=(S,_)=>{const N=(S.effects?.buffs||[]).filter(U=>U.stat===_),B=(S.effects?.debuffs||[]).filter(U=>U.stat===_);return[...N,...B]},gn=(S,_)=>{const N=S[_]||0,B=Zn(S,_),U=B.filter(k=>k.isPercent).reduce((k,w)=>k+w.value,0),F=B.filter(k=>!k.isPercent).reduce((k,w)=>k+w.value,0);return Math.max(0,Math.floor(N*(1+U)+F))},xt=(S,_)=>Zn(S,_).reduce((B,U)=>B+U.value,0),fa=(S,_,N)=>{ea(S),S.effects[_].push({id:`${N.stat}-${Date.now()}-${Math.random()}`,duration:N.duration??1,...N})},Fr=S=>(ea(S),S.effects.debuffs.length===0?!1:(S.effects.debuffs.shift(),!0)),ln=(S,_)=>{let N=_.manaCost||0;return S.passive?.manaReduction&&(N=Math.floor(N*(1-S.passive.manaReduction))),S.flags?.flowStateTurns>0&&(N=Math.max(0,N-10)),N},Gt=(S,_)=>{const N=_.damageBase??_.damage??0,B=_.scaling||0,U=_.scalingStat||(_.damageType==="cursed"?"cursedOutput":"attack"),F=gn(S,U);let k=Math.floor(N+F*B);return S.passive?.type==="damage-boost"&&(k=Math.floor(k*(1+S.passive.value))),k},ha=(S,_,N,B,U,F,k,w,q={})=>{const De=gn(_,B==="cursed"?"cursedResistance":"defense");let Ce=Math.floor(U*(100/(100+De)));const Me=xt(_,"damageAmp"),$=xt(_,"damageReduction");Ce=Math.floor(Ce*Math.max(0,1+Me-$)),q.crit&&(Ce=Math.floor(Ce*(N.critMultiplier||1.5)));let he=Ce;if(_.barrier?.value>0){const pe=Math.min(_.barrier.value,he);_.barrier.value-=pe,he-=pe,w&&pe>0&&w.push(` ${_.name}'s cursed barrier absorbs ${pe} damage.`)}return he>0&&(_.hp=Math.max(0,_.hp-he),_a(F,k,he,he>=45),w&&w.push(` ${S.name}  ${N.name}  ${_.name} for ${he} damage${q.crit?" (CRIT)":""}!`),_.states?.sleep>0&&(_.states.sleep=0,w.push(` ${_.name} is jolted awake!`))),he},Wr=(S,_,N,B)=>{S.effects?.dots?.length&&S.effects.dots.forEach(U=>{if(U.type==="burn"||U.type==="poison"){const F=Math.max(0,U.damage||0);F>0&&S.hp>0&&(S.hp=Math.max(0,S.hp-F),_a(_,N,F,!1),B.push(` ${S.name} suffers ${F} ${U.type==="burn"?"cursed burn":"cursed poison"} damage!`))}})},Zl=(S,_,N)=>{ea(S),S.stacks.speechMark=Math.min(3,(S.stacks.speechMark||0)+_),S.stacks.speechMark>=3?(fa(S,"debuffs",{stat:"damageAmp",value:.3,isPercent:!0,duration:2}),S.stacks.speechMark=0,N.push(` ${S.name} is overwhelmed by Speech Mark!`)):N.push(` ${S.name} gains Speech Mark (${S.stacks.speechMark}/3).`)},sn=(S,_,N,B)=>{N.speechMarkStacks&&Zl(_,N.speechMarkStacks,B),N.defenseDebuffPercent&&(fa(_,"debuffs",{stat:"defense",value:-N.defenseDebuffPercent,isPercent:!0,duration:N.defenseDebuffDuration||2}),B.push(` ${_.name}'s Defense is weakened!`)),N.attackDebuffPercent&&(fa(_,"debuffs",{stat:"attack",value:-N.attackDebuffPercent,isPercent:!0,duration:N.attackDebuffDuration||2}),B.push(` ${_.name}'s Attack is lowered!`)),N.damageAmp&&(fa(_,"debuffs",{stat:"damageAmp",value:N.damageAmp,isPercent:!0,duration:N.damageAmpDuration||2}),B.push(` ${_.name} is exposed to curse amplification!`)),N.selfDefenseBuffPercent&&(fa(S,"buffs",{stat:"defense",value:N.selfDefenseBuffPercent,isPercent:!0,duration:N.selfDefenseBuffDuration||2}),B.push(` ${S.name}'s Defense rises!`)),N.selfAttackBuffPercent&&(fa(S,"buffs",{stat:"attack",value:N.selfAttackBuffPercent,isPercent:!0,duration:N.selfAttackBuffDuration||2}),B.push(` ${S.name}'s Attack surges!`))},Cn=(S,_)=>{const N=tn(S),B=[];return N.forEach((U,F)=>{if(ea(U),U.hp<=0)return;if(Wr(U,_,F,B),U.passive?.type==="regen"){const q=Math.min(U.passive.value,U.maxHp-U.hp);q>0&&(U.hp=Math.min(U.maxHp,U.hp+U.passive.value),B.push(` ${U.name}'s ${U.passive.name} restores ${q} HP!`),Jt(_,F,q))}const k=U.passive?.type==="cooldown-reduction"?U.passive.value:0;if(U.hp>0&&U.passive?.type!=="heavenly-restriction"&&(U.mana=Math.min(U.maxMana,U.mana+25)),U.abilities.forEach(q=>{q.currentCooldown>0&&(q.currentCooldown=Math.max(0,q.currentCooldown-1-k))}),U.ultimate?.currentCooldown>0&&(U.ultimate.currentCooldown=Math.max(0,U.ultimate.currentCooldown-1-k)),U.states.binding&&(U.states.binding=Math.max(0,U.states.binding-1)),U.states.sleep&&(U.states.sleep=Math.max(0,U.states.sleep-1)),U.flags.gorillaCoreTurns>0&&(U.flags.gorillaCoreTurns-=1,U.flags.gorillaCoreTurns===0)){const q=Math.floor(U.maxHp*.15);U.hp=Math.min(U.maxHp,U.hp+q),B.push(` ${U.name}'s Gorilla Core fades  +${q} HP!`),Jt(_,F,q),U.counters.techniqueCount=0}U.flags.flowStateTurns>0&&(U.flags.flowStateTurns-=1),U.barrier?.duration>0&&(U.barrier.duration-=1,U.barrier.duration<=0&&(U.barrier.value=0));const w=q=>{U.effects[q]=U.effects[q].map(me=>({...me,duration:me.duration-1})).filter(me=>me.duration>0)};w("buffs"),w("debuffs"),w("dots")}),{team:N,logs:B}},rn=(S,_,N=[])=>{if(N.length>0&&p(B=>[...B,...N]),g(S==="win"?"win":"lose"),He){S==="win"&&Gs(He.nodeId),Dt({nodeId:He.nodeId,result:S}),Ge(B=>({...B,activeNodeId:He.nodeId}));return}kc(S,_)},_a=(S,_,N,B=!1)=>{N<=0||_==null||(Pn({team:S,index:_,amount:N,type:"damage",big:B}),B&&Jl())},Jt=(S,_,N)=>{N<=0||_==null||Pn({team:S,index:_,amount:N,type:"heal"})},ei=(S,_,N,B,U,F)=>{const k=U[S];if(!k||k.hp<=0)return{logs:[]};if(ea(k),k.states.binding>0||k.states.sleep>0)return{logs:[` ${k.name} is bound and cannot act!`]};const w=N?k.ultimate:k.abilities[_];if(!w)return{logs:[]};let q=[];const me=k.flags.gorillaCoreTurns>0;if(w.requiresGorillaCore&&!me)return{logs:[` ${k.name} cannot use ${w.name} without Gorilla Core.`]};N?U[S].ultimate.currentCooldown=w.cooldown:U[S].abilities[_].currentCooldown=w.cooldown;const De=ln(k,w);if(k.mana<De)return{logs:[` ${k.name} doesn't have enough cursed energy for ${w.name}.`]};U[S].mana-=De;const Ce=()=>{if(w.guaranteedCrit)return!0;const $=(k.critChance||0)+(k.passive?.critBonus||0)+xt(k,"critChance");return Math.random()<$},Me=$=>$.passive?.type==="dodge-chance"&&Math.random()<$.passive.value;switch(w.type){case"attack":{if(w.coreAllEnemies&&me){q.push(` ${k.name}'s Gorilla Core amplifies ${w.name}!`);const he=Gt(k,w);F.forEach((pe,Ae)=>{if(pe.hp>0){const Oe=Ce();ha(k,pe,w,w.damageType||"physical",he,"enemy",Ae,q,{crit:Oe}),sn(k,pe,w,q)}});break}const $=F[B];if(!$||$.hp<=0)break;if(Me($))q.push(` ${$.name} DODGES ${k.name}'s ${w.name}!`);else{const he=Ce(),pe=Gt(k,w);ha(k,$,w,w.damageType||"physical",pe,"enemy",B,q,{crit:he}),me&&w.coreDefenseDebuffPercent?(fa($,"debuffs",{stat:"defense",value:-w.coreDefenseDebuffPercent,isPercent:!0,duration:w.coreDefenseDebuffDuration||2}),q.push(` ${$.name}'s Defense is shattered by Gorilla Core!`)):sn(k,$,w,q),$.hp<=0&&q.push(` ${$.name} defeated!`),k.passive?.type==="burn"&&(fa($,"dots",{stat:"dot",type:"burn",damage:k.passive.value,duration:2}),q.push(` ${$.name} is afflicted with Cursed Burn!`)),(k.passive?.type==="double-hit"&&Math.random()<k.passive.value||w.isBasic&&k.flags.flowStateTurns>0||w.isBasic&&k.flags.nextBasicDouble)&&(ha(k,$,w,w.damageType||"physical",pe,"enemy",B,q,{crit:he}),k.flags.nextBasicDouble=!1,$.hp<=0&&q.push(` ${$.name} defeated!`)),w.onCritCooldownReduction&&he&&(k.abilities.forEach((Oe,lt)=>{lt>0&&Oe.currentCooldown>0&&(Oe.currentCooldown=Math.max(0,Oe.currentCooldown-1))}),q.push(` ${k.name}'s momentum reduces cooldowns!`))}break}case"attack-execute":{const $=F[B];if(!$||$.hp<=0)break;if(Me($))q.push(` ${$.name} DODGES ${k.name}'s ${w.name}!`);else{let pe=Gt(k,w);$.hp/$.maxHp<w.threshold&&(pe+=w.bonusDamage||0,q.push(" Weak point strike!"));const Ae=Ce();ha(k,$,w,w.damageType||"physical",pe,"enemy",B,q,{crit:Ae}),sn(k,$,w,q),$.hp<=0&&q.push(` ${$.name} defeated!`)}break}case"attack-all":{N?q.push(` ${k.name} unleashes Domain Expansion: ${w.name}!`):q.push(` ${k.name} uses ${w.name}!`);let $=0;const he=me&&w.coreDamageBase?Math.floor((w.coreDamageBase||0)+gn(k,w.scalingStat||"attack")*(w.coreScaling||w.scaling||0)):Gt(k,w);if(F.forEach((pe,Ae)=>{if(pe.hp>0)if(Me(pe))q.push(`   ${pe.name} DODGES!`);else{const Oe=Ce();ha(k,pe,w,w.damageType||"physical",he,"enemy",Ae,q,{crit:Oe}),sn(k,pe,w,q),$+=1,w.speechMarkAllStacks&&Zl(pe,w.speechMarkAllStacks,q),w.bindingAllDuration&&(pe.states.binding=w.bindingAllDuration),me&&w.coreBindDuration&&(pe.states.binding=w.coreBindDuration),pe.hp<=0&&q.push(`   ${pe.name} defeated!`)}}),w.energyRestorePerHit&&$>0){const pe=$*w.energyRestorePerHit;k.mana=Math.min(k.maxMana,k.mana+pe),q.push(` ${k.name} recovers ${pe} cursed energy.`)}if(w.recoilPercent){const pe=Math.floor(k.maxHp*w.recoilPercent);k.hp=Math.max(1,k.hp-pe),q.push(` ${k.name} suffers ${pe} recoil.`),_a("player",S,pe,!1)}break}case"attack-stun":{const $=F[B];if(!$||$.hp<=0)break;if(Me($))q.push(` ${$.name} DODGES ${k.name}'s ${w.name}!`);else{const he=Ce(),pe=Gt(k,w);ha(k,$,w,w.damageType||"physical",pe,"enemy",B,q,{crit:he}),sn(k,$,w,q),$.states.binding=w.bindingDuration||w.stunDuration||1,q.push(` ${$.name} is bound!`),$.hp<=0&&q.push(` ${$.name} defeated!`)}break}case"stun-only":{const $=F[B];if(!$||$.hp<=0)break;$.states.binding=w.bindingDuration||w.stunDuration||1,q.push(` ${k.name}  ${w.name}  ${$.name} bound for ${w.bindingDuration||w.stunDuration} turn(s)!`);break}case"defensive":{const $=w.barrierValue||Math.max(30,Math.floor(k.maxHp*.35));U[S].barrier.value+=$,U[S].barrier.duration=Math.max(U[S].barrier.duration,w.barrierDuration||1),q.push(` ${k.name} raises a Cursed Barrier (${$}).`);break}case"buff":{fa(U[S],"buffs",{stat:w.buffStat||"attack",value:w.buffAmount??0,isPercent:!!w.isPercent,duration:w.duration||2}),q.push(` ${k.name} uses ${w.name}  ${w.buffStat||"Attack"} reinforced!`);break}case"buff-self-damage":{fa(U[S],"buffs",{stat:w.buffStat||"attack",value:w.buffAmount??0,isPercent:!!w.isPercent,duration:w.duration||2}),U[S].hp=Math.max(1,U[S].hp-(w.selfDamage||0)),q.push(` ${k.name} pushes beyond limits, trading HP for power!`),_a("player",S,w.selfDamage||0,!1);break}case"heal-self":{const $=w.healPercent?Math.floor(k.maxHp*w.healPercent):w.healAmount,he=Math.min($,k.maxHp-k.hp);U[S].hp=Math.min(k.maxHp,k.hp+he),q.push(` ${k.name} uses ${w.name}  +${he} HP!`),Jt("player",S,he),w.cleanseDebuff&&Fr(U[S])&&q.push(` ${k.name} cleanses an affliction!`),w.resetTechniqueCounter&&(U[S].counters.techniqueCount=0,q.push(` ${k.name}'s technique counter resets.`));break}case"heal-all":{q.push(` ${k.name} uses ${w.name}!`),U.forEach($=>{if($.hp>0){const he=w.healPercent?Math.floor($.maxHp*w.healPercent):w.healAmount,pe=Math.min(he,$.maxHp-$.hp);if($.hp=Math.min($.maxHp,$.hp+pe),pe>0&&q.push(`   ${$.name} +${pe} HP!`),pe>0){const Ae=U.findIndex(Oe=>Oe.id===$.id);Jt("player",Ae,pe)}}});break}case"ultimate-megumi":{const $=Gt(k,w);q.push(` ${k.name} unveils Domain Expansion: ${w.name}!`),F.forEach((he,pe)=>{he.hp>0&&(ha(k,he,w,w.damageType||"cursed",$,"enemy",pe,q),he.hp<=0&&q.push(`   ${he.name} defeated!`))}),U.forEach((he,pe)=>{if(he.hp>0){const Ae=w.healPercent?Math.floor(he.maxHp*w.healPercent):w.healAmount,Oe=Math.min(Ae,he.maxHp-he.hp);he.hp=Math.min(he.maxHp,he.hp+Oe),Oe>0&&q.push(`   ${he.name} +${Oe} HP!`),Oe>0&&Jt("player",pe,Oe)}});break}case"ultimate-mahito":{const $=F[B];if(!$||$.hp<=0)break;U[S].barrier.value+=Math.max(40,Math.floor(k.maxHp*.25)),U[S].barrier.duration=Math.max(U[S].barrier.duration,1);const he=Gt(k,w);ha(k,$,w,w.damageType||"cursed",he,"enemy",B,q),$.hp<=0&&q.push(` ${$.name} defeated!`);break}case"debuff-mark":{const $=F[B];if(!$||$.hp<=0)break;fa($,"debuffs",{stat:"damageAmp",value:w.damageAmp??.15,isPercent:!0,duration:w.duration||2}),q.push(` ${k.name}  ${w.name}  ${$.name} is afflicted!`);break}case"attack-all-primary-mark":{const $=F[B];if(!$||$.hp<=0)break;q.push(` ${k.name} releases ${w.name}!`);const he=Gt(k,w);F.forEach((pe,Ae)=>{pe.hp>0&&ha(k,pe,w,w.damageType||"cursed",he,"enemy",Ae,q)}),w.applySpeechMark&&($.stacks.speechMark=Math.min(3,$.stacks.speechMark+1),$.stacks.speechMark>=3?(fa($,"debuffs",{stat:"damageAmp",value:.3,isPercent:!0,duration:2}),$.stacks.speechMark=0,q.push(` ${$.name} is overwhelmed by Speech Mark!`)):q.push(` ${$.name} gains a Speech Mark stack (${$.stacks.speechMark}/3).`));break}case"attack-random":{const $=F.map((pe,Ae)=>({enemy:pe,idx:Ae})).filter(pe=>pe.enemy.hp>0),he=Math.min(w.targetCount||2,$.length);for(let pe=0;pe<he;pe+=1){const Ae=Math.floor(Math.random()*$.length),Oe=$.splice(Ae,1)[0],lt=Gt(k,w);ha(k,Oe.enemy,w,w.damageType||"physical",lt,"enemy",Oe.idx,q),sn(k,Oe.enemy,w,q)}break}case"utility":{q.push(` ${k.name} uses ${w.name}!`);break}case"buff-ally":{const $=U.filter((he,pe)=>he.hp>0&&pe!==S);if($.length>0){const he=$[Math.floor(Math.random()*$.length)],pe=U.findIndex(Ae=>Ae.id===he.id);fa(U[pe],"buffs",{stat:w.buffStat||"attack",value:w.buffAmount??0,isPercent:!!w.isPercent,duration:w.duration||2}),q.push(` ${k.name}  ${w.name}  ${he.name} reinforced!`)}break}}if(w.grantFlowStateTurns&&(k.flags.flowStateTurns=Math.max(k.flags.flowStateTurns,w.grantFlowStateTurns),q.push(` ${k.name} enters Flow State!`)),w.setNextBasicDouble&&(k.flags.nextBasicDouble=!0,q.push(` ${k.name}'s next basic strike will hit twice!`)),k.passive?.type==="gorilla-core"&&!w.isBasic&&(k.counters.techniqueCount+=1,k.counters.techniqueCount>=3&&k.flags.gorillaCoreTurns===0&&(k.flags.gorillaCoreTurns=2,k.counters.techniqueCount=0,q.push(` ${k.name} awakens Gorilla Core!`))),k.passive?.type==="heavenly-restriction"){const $=(w.isBasic?15:0)+10;k.mana=Math.min(k.maxMana,k.mana+$),q.push(` ${k.name} recovers ${$} cursed energy.`)}return{logs:q}},Cc=(S,_,N,B)=>{v||Xt&&!zt||(Se(U=>[...U,{characterIndex:S,abilityIndex:_,isUltimate:N,enemyIndex:B}]),ee(U=>[...U,S]),J(null))},Is=S=>{Se(_=>{const N=_.filter((U,F)=>F!==S),B=new Set(N.map(U=>U.characterIndex));return ee(U=>U.filter(F=>B.has(F))),N})},ti=(S=i,_=r)=>{let N=[],B=tn(_),U=tn(S);const F=Cn(B,"enemy");B=F.team,N.push(...F.logs),B.filter(q=>q.hp>0&&q.states?.binding===0).forEach(q=>{const me=B.findIndex($=>$.id===q.id);if(U.filter($=>$.hp>0).length===0)return;const Ce=[...q.abilities];q.ultimate?.currentCooldown===0&&Ce.push({...q.ultimate,isUlt:!0});const Me=Ce.filter($=>$.currentCooldown!==0||$.requiresGorillaCore&&q.flags?.gorillaCoreTurns<=0?!1:(ln(q,$)||0)<=q.mana);if(Me.length>0){const $=Me[Math.floor(Math.random()*Me.length)];if($.isUlt)B[me].ultimate.currentCooldown=$.cooldown;else{const Oe=q.abilities.findIndex(lt=>lt.id===$.id);Oe>=0&&(B[me].abilities[Oe].currentCooldown=$.cooldown)}const he=ln(q,$);B[me].mana-=he;const pe=U.findIndex(Oe=>Oe.hp>0),Ae=U[pe];if($.type==="attack"||$.type==="attack-execute"||$.type==="attack-stun")if(Ae.passive?.type==="dodge-chance"&&Math.random()<Ae.passive.value)N.push(` ${Ae.name} DODGES ${q.name}'s ${$.name}!`);else{const Oe=Gt(q,$);ha(q,Ae,$,$.damageType||"physical",Oe,"player",pe,N),sn(q,Ae,$,N),$.type==="attack-stun"&&(Ae.states.binding=$.bindingDuration||$.stunDuration||1,N.push(` ${Ae.name} is bound!`)),Ae.hp<=0&&N.push(` ${Ae.name} KO'd!`)}else if($.type==="attack-all"){$.isUlt?N.push(` ${q.name} unleashes Domain Expansion: ${$.name}!`):N.push(` ${q.name} uses ${$.name}!`);const Oe=Gt(q,$);U.forEach((lt,qt)=>{lt.hp>0&&(ha(q,lt,$,$.damageType||"physical",Oe,"player",qt,N),sn(q,lt,$,N),lt.hp<=0&&N.push(`   ${lt.name} KO'd!`))})}else if($.type==="attack-all-primary-mark"){const Oe=Gt(q,$);U.forEach((lt,qt)=>{lt.hp>0&&ha(q,lt,$,$.damageType||"cursed",Oe,"player",qt,N)}),Ae&&Ae.hp>0&&$.applySpeechMark&&Zl(Ae,1,N)}else if($.type==="attack-random"){const Oe=U.map((qt,Ia)=>({ally:qt,idx:Ia})).filter(qt=>qt.ally.hp>0),lt=Math.min($.targetCount||2,Oe.length);for(let qt=0;qt<lt;qt+=1){const Ia=Math.floor(Math.random()*Oe.length),Ka=Oe.splice(Ia,1)[0],tr=Gt(q,$);ha(q,Ka.ally,$,$.damageType||"physical",tr,"player",Ka.idx,N),sn(q,Ka.ally,$,N)}}else if($.type==="heal-self"){const Oe=$.healPercent?Math.floor(q.maxHp*$.healPercent):$.healAmount,lt=Math.min(Oe,q.maxHp-q.hp);B[me].hp=Math.min(q.maxHp,q.hp+lt),N.push(` ${q.name} heals ${lt} HP!`),Jt("enemy",me,lt)}else if($.type==="defensive"){const Oe=$.barrierValue||Math.max(30,Math.floor(q.maxHp*.35));B[me].barrier.value+=Oe,B[me].barrier.duration=Math.max(B[me].barrier.duration,$.barrierDuration||1),N.push(` ${q.name} raises a barrier!`)}if(q.passive?.type==="heavenly-restriction"){const Oe=($.isBasic?15:0)+10;B[me].mana=Math.min(q.maxMana,B[me].mana+Oe),N.push(` ${q.name} recovers ${Oe} cursed energy.`)}}}),B.forEach(q=>{q.states?.binding&&q.hp>0&&N.push(` ${q.name} is bound and misses their turn!`)});const w=Cn(U,"player");if(U=w.team,N.push(...w.logs),n(U),c(B),U.every(q=>q.hp<=0)){N.push(" DEFEAT!"),rn("lose",S,N);return}p(q=>[...q,...N]),ee([]),E(q=>q+1)},Fl=async(S=null)=>{if(R!=="battle"||v||Xt&&!zt)return;J(null);let _=tn(r),N=tn(i),B=[];const U=S??ge,F=[...U];if(U.forEach(w=>{const q=ei(w.characterIndex,w.abilityIndex,w.isUltimate,w.enemyIndex,N,_);B.push(...q.logs)}),Se([]),He?.enemyCannotDie){let w=!1;_.forEach(q=>{q.hp<=0&&(w=!0,q.hp=1)}),w&&B.push(" The enemy cannot be defeated yet.")}if((!He||He.type!=="survival")&&_.every(w=>w.hp<=0)){B.push(" VICTORY!"),rn("win",N,B);return}if(Xt&&qe&&D){const w=qe.player1_id===D.user.id,q=w?qe.player2_id:qe.player1_id,me=qe.state?.log||f,De=Cn(N,"player");N=De.team,B.push(...De.logs);const Ce=Cn(_,"enemy");if(_=Ce.team,B.push(...Ce.logs),_.every(he=>he.hp<=0)){const he={player1Team:w?N:_,player2Team:w?_:N,turn:qe.state?.turn||T,log:[...me,...B," VICTORY!"]};await ae.from("pvp_matches").update({state:he,status:"completed",winner_id:D.user.id,turn_owner:null,updated_at:new Date().toISOString()}).eq("id",qe.id),rn("win",N,[]);return}if(N.every(he=>he.hp<=0)){const he={player1Team:w?N:_,player2Team:w?_:N,turn:qe.state?.turn||T,log:[...me,...B," DEFEAT!"]};await ae.from("pvp_matches").update({state:he,status:"completed",winner_id:q,turn_owner:null,updated_at:new Date().toISOString()}).eq("id",qe.id),rn("lose",N,[]);return}const Me=(qe.state?.turn||T)+1,$={player1Team:w?N:_,player2Team:w?_:N,turn:Me,log:[...me,...B]};p($.log),n(N),c(_),ee([]),E(Me),await ae.from("pvp_turns").insert({match_id:qe.id,user_id:D.user.id,turn_number:Me-1,actions:{queuedActions:F}}),await ae.from("pvp_matches").update({state:$,turn:Me,turn_owner:q,updated_at:new Date().toISOString()}).eq("id",qe.id);return}p(w=>[...w,...B]),ti(N,_)};X.useEffect(()=>{if(!(!He||R!=="battle"||v)&&He.type==="survival"&&T>He.turnLimit){const S=[` Objective complete! Survived ${He.turnLimit} turns.`];rn("win",i,S)}},[T,He,R,v,i]);const Wl=()=>{z("select"),H([]),n([]),c([]),m(null),p(["Battle Start! Queue actions, then End Turn."]),g(null),E(1),ee([]),J(null),Se([]),ie(null),nt(null),At(null),y(null),va(null),C&&(C.unsubscribe(),re(null))},wa=()=>{z("select"),n([]),c([]),m(null),p(["Battle Start! Queue actions, then End Turn."]),g(null),E(1),ee([]),J(null),Se([]),ie(null),nt(null),Q("story")},Ks=({opponents:S,difficulty:_})=>{const N=x.map(U=>Nn(U,ma[U.id]));n(N);const B=S.map(U=>{const F=tn(U),k=_.statMultiplier;return F.hp=Math.floor(F.hp*k),F.currentHp=F.hp,F.mana=Math.floor(F.mana*k),F.currentMana=F.mana,F.attack=Math.floor(F.attack*k),F.defense=Math.floor(F.defense*k),F.speed=Math.floor(F.speed*k),F.difficultyMultiplier={xp:_.xpMultiplier,currency:_.currencyMultiplier},ea(F)});c(B),z("battle"),p([`Battle Start! Difficulty: ${_.label}`]),ee([]),Se([]),nt(null)},Ps=S=>{if(!S||!D)return;const _=S.player1_id===D.user.id,N=S.state||{},B=N.player1Team||Ze(S.player1_team||[],!1),U=N.player2Team||Ze(S.player2_team||[],!1);n(tn(_?B:U)),c(tn(_?U:B)),p(N.log?.length?N.log:["PvP Match Start!"]),E(N.turn||S.turn||1),Se([]),ee([]),J(null),g(null),z("battle"),nt(null)},Qs=S=>{if(!S)return;C&&C.unsubscribe();const _=ae.channel(`pvp-match-${S}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"pvp_matches",filter:`id=eq.${S}`},N=>{if(At(N.new),Ps(N.new),N.new.status==="completed"&&N.new.winner_id&&D){const B=N.new.winner_id===D.user.id?"win":"lose";rn(B,i,[])}}).subscribe();re(_)},Tn=async S=>{if(!D||x.length<3)return;y("searching");const _=x.map(w=>w.id),N=Ze(_,!0),B=P?.rating||1e3;await ae.from("pvp_queue").delete().eq("user_id",D.user.id);const U=S==="ranked"?200:999999,{data:F}=await ae.from("pvp_queue").select("*").eq("mode",S).neq("user_id",D.user.id).gte("rating",B-U).lte("rating",B+U).order("created_at",{ascending:!0}).limit(1),k=F?.[0];if(k){try{await Promise.all([ae.from("pvp_queue").delete().eq("id",k.id),ae.from("pvp_queue").delete().eq("user_id",D.user.id)]);const w=Array.isArray(k.team_state)&&k.team_state.length?k.team_state:Ze(k.team_ids||[],!1),q={mode:S,player1_id:k.user_id,player2_id:D.user.id,player1_team:k.team_ids||[],player2_team:_,player1_rating:k.rating||1e3,player2_rating:B,state:{player1Team:w,player2Team:N,turn:1,log:["PvP Match Start! Queue actions, then End Turn."]},turn:1,turn_owner:k.user_id,status:"waiting",player1_ready:!1,player2_ready:!0,updated_at:new Date().toISOString()},{data:me,error:De}=await ae.from("pvp_matches").insert(q).select().single();if(De)throw De;me&&(At(me),y("match_found"),Tl(me.id))}catch(w){console.error("Failed to create match:",w),y("error"),setTimeout(()=>y(null),3e3)}return}try{await ae.from("pvp_queue").insert({user_id:D.user.id,mode:S,team_ids:_,team_state:N,rating:B}),y("searching"),C&&(C.unsubscribe(),re(null));const w=ae.channel(`pvp-lobby-${D.user.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"pvp_matches"},async q=>{const me=q.new;(me.player1_id===D.user.id||me.player2_id===D.user.id)&&(At(me),y("match_found"),me.player1_id===D.user.id&&await ae.from("pvp_matches").update({player1_ready:!0,updated_at:new Date().toISOString()}).eq("id",me.id),await ae.from("pvp_queue").delete().eq("user_id",D.user.id),w.unsubscribe(),Tl(me.id))}).subscribe();re(w),Xs(S)}catch(w){console.error("Failed to join queue:",w),y("error"),setTimeout(()=>y(null),3e3)}},Xs=async(S,_=0)=>{if(!(_>=15||!D||da!=="searching")){try{const{data:N}=await ae.from("pvp_matches").select("*").or(`player1_id.eq.${D.user.id},player2_id.eq.${D.user.id}`).eq("status","waiting").order("created_at",{ascending:!1}).limit(1);if(N&&N.length>0){const B=N[0];At(B),y("match_found"),B.player1_id===D.user.id&&!B.player1_ready&&await ae.from("pvp_matches").update({player1_ready:!0,updated_at:new Date().toISOString()}).eq("id",B.id),await ae.from("pvp_queue").delete().eq("user_id",D.user.id),C&&(C.unsubscribe(),re(null)),Tl(B.id);return}}catch(N){console.error("Poll error:",N)}setTimeout(()=>Xs(S,_+1),2e3)}},Tl=async(S,_=0)=>{if(_>=30||!D){y("timeout"),setTimeout(()=>y(null),3e3);return}try{const{data:N}=await ae.from("pvp_matches").select("*").eq("id",S).single();if(!N){y("error"),setTimeout(()=>y(null),3e3);return}if(N.player1_ready&&N.player2_ready&&N.status==="waiting"){N.player1_id===D.user.id&&await ae.from("pvp_matches").update({status:"active",updated_at:new Date().toISOString()}).eq("id",S).eq("status","waiting"),setTimeout(async()=>{const{data:U}=await ae.from("pvp_matches").select("*").eq("id",S).single();U&&U.status==="active"&&(At(U),y(null),Ps(U),Qs(U.id))},500);return}}catch(N){console.error("Ready poll error:",N)}setTimeout(()=>Tl(S,_+1),1e3)},Fn=()=>Tn("quick"),Tc=()=>Tn("ranked"),ai=async()=>{D&&(await ae.from("pvp_queue").delete().eq("user_id",D.user.id),C&&(C.unsubscribe(),re(null)),y(null),At(null))},ni=async(S,_,N)=>{if(!D)return;const B={user_id:D.user.id,slot:S,name:_||`Preset ${S}`,character_ids:N,updated_at:new Date().toISOString()},{error:U}=await ae.from("team_presets").upsert(B,{onConflict:"user_id,slot"});U||O(F=>({...F,[S]:B}))},Js=S=>{const _=S.map(N=>be.find(B=>B.id===N)).filter(Boolean);H(_)},kc=async(S,_)=>{if(!D)return;const N=S==="win"?60:40,B=S==="win"?35:25,U=S==="win"?50:20,F=S==="win"?2:0,k=P?.account_level||1,w=P?.account_xp||0,q=P?.rating??1e3,me=P?.soft_currency||0,De=P?.premium_currency||0,Ce=Kn(k,w,N),Me=S==="win"?20:-15,$=Math.max(0,q+Me),he=me+U,pe=De+F,Ae=[];Ce.level>k&&Ae.push(`Account leveled up to ${Ce.level}!`),oe(Mt=>({...Mt||{},account_level:Ce.level,account_xp:Ce.xp,rating:$,soft_currency:he,premium_currency:pe}));const Oe={...ma},lt=[],qt=[],Ia=[];if(_.forEach(Mt=>{const ga=Oe[Mt.id]||{level:1,xp:0,limit_break:0},Ra=Kn(ga.level,ga.xp,B);Oe[Mt.id]={...ga,...Ra},Ra.level>ga.level&&(Ae.push(`${Mt.name} reached Lv ${Ra.level}!`),qt.push({name:Mt.name,level:Ra.level})),Ia.push({id:Mt.id,name:Mt.name,level:Ra.level,xp:Ra.xp,xpNeeded:Sn(Ra.level)}),lt.push({user_id:D.user.id,character_id:Mt.id,level:Ra.level,xp:Ra.xp,limit_break:ga.limit_break||0,updated_at:new Date().toISOString()})}),Le(Oe),await ae.from("profiles").update({account_level:Ce.level,account_xp:Ce.xp,rating:$,soft_currency:he,premium_currency:pe,updated_at:new Date().toISOString()}).eq("id",D.user.id),lt.length>0&&await ae.from("character_progress").upsert(lt,{onConflict:"user_id,character_id"}),await ae.from("match_history").insert({user_id:D.user.id,result:S,turns:T,rating_delta:Me,account_xp_gain:N,character_xp_gain:B}).select().then(({data:Mt,error:ga})=>{!ga&&Mt&&ue(Ra=>[...Mt,...Ra].slice(0,20))}),Ae.length>0&&(_e(Ae.join(" ")),setTimeout(()=>{_e(null)},2800)),await Ac(S,qt.length),S==="win"){const{count:Mt}=await ae.from("match_history").select("*",{count:"exact",head:!0}).eq("user_id",D.user.id).eq("result","win");Mt!==null&&Va("battles_won",Mt)}Va("account_level",Ce.level),_.forEach(Mt=>{const ga=Oe[Mt.id];ga&&ga.level>=50&&Va("max_level_characters",1)});const Ka=Ia.map(Mt=>({...Mt,levelUp:qt.some(ga=>ga.name===Mt.name)})),tr={turns:T,accountXpGain:N,accountLevel:Ce.level,accountLevelUp:Ce.level>k,softCurrencyGain:U,premiumCurrencyGain:F,ratingDelta:Me,characters:Ka,achievementsUnlocked:[]};ie({result:S,accountGain:N,characterGain:B,accountLevel:Ce.level,accountXp:Ce.xp,accountNeeded:Sn(Ce.level),ratingDelta:Me,rating:$,characterLevelUps:qt,characterSummaries:Ia}),va({result:S,rewards:tr})},Ac=async(S,_=0)=>{if(!D||fe.length===0)return;const N=[],B=[...ze];fe.forEach(U=>{const F=B.findIndex(Ce=>Ce.mission_id===U.id);if(F===-1)return;const k=B[F];if(k.claimed)return;const w=U.condition||"match_any";if(!(w==="match_any"||w==="match_win"&&S==="win"||w==="match_loss"&&S==="lose"||w==="character_level_up"&&_>0))return;const me=w==="character_level_up"?_:1,De=Math.min(U.target,k.progress+me);De!==k.progress&&(B[F]={...k,progress:De},N.push({user_id:D.user.id,mission_id:U.id,progress:De,claimed:k.claimed,updated_at:new Date().toISOString()}))}),N.length!==0&&(await ae.from("user_missions").upsert(N,{onConflict:"user_id,mission_id"}),Ie(B))},es=async S=>{if(!D)return;const _=fe.find(k=>k.id===S),N=ze.find(k=>k.mission_id===S);if(!_||!N||N.claimed||N.progress<_.target)return;const B=(P?.soft_currency??0)+_.reward_soft,U=(P?.premium_currency??0)+_.reward_premium,F=[];if(_.reward_shard_character_id&&_.reward_shard_amount>0){const w=(it[_.reward_shard_character_id]||0)+_.reward_shard_amount;F.push({user_id:D.user.id,character_id:_.reward_shard_character_id,shard_amount:w,updated_at:new Date().toISOString()}),_t(q=>({...q,[_.reward_shard_character_id]:w}))}await ae.from("profiles").update({soft_currency:B,premium_currency:U,updated_at:new Date().toISOString()}).eq("id",D.user.id),await ae.from("user_missions").update({claimed:!0,updated_at:new Date().toISOString()}).eq("user_id",D.user.id).eq("mission_id",S),F.length>0&&await ae.from("user_inventory").upsert(F,{onConflict:"user_id,character_id"}),oe(k=>({...k||{},soft_currency:B,premium_currency:U})),Ie(k=>k.map(w=>w.mission_id===S?{...w,claimed:!0}:w))},cn=async()=>{if(!D||!Ke)return;const S=new Date().toISOString().split("T")[0],_=Ke.last_claim_date;if(_===S)return;const N=new Date;N.setDate(N.getDate()-1);const B=N.toISOString().split("T")[0],F=_===B?Ke.current_streak+1:1,k=Math.max(F,Ke.longest_streak),w=(F-1)%7+1,me={1:{soft:50,premium:0},2:{soft:75,premium:0},3:{soft:100,premium:5},4:{soft:125,premium:0},5:{soft:150,premium:10},6:{soft:200,premium:0},7:{soft:300,premium:25}}[w];await ae.from("daily_rewards").update({current_streak:F,longest_streak:k,last_claim_date:S,total_logins:Ke.total_logins+1,updated_at:new Date().toISOString()}).eq("user_id",D.user.id);const De=(P?.soft_currency||0)+me.soft,Ce=(P?.premium_currency||0)+me.premium;await ae.from("profiles").update({soft_currency:De,premium_currency:Ce,updated_at:new Date().toISOString()}).eq("id",D.user.id),Ot(Me=>({...Me,current_streak:F,longest_streak:k,last_claim_date:S,total_logins:Me.total_logins+1})),oe(Me=>({...Me,soft_currency:De,premium_currency:Ce})),Va("login_streak",F),Va("total_logins",Ke.total_logins+1)},Va=async(S,_)=>{if(!D)return;const N=aa.filter(B=>B.requirement_type===S&&_>=B.requirement_target);for(const B of N){const U=Oa.find(F=>F.achievement_id===B.id);if(!U||!U.is_completed){await ae.from("achievement_progress").upsert({user_id:D.user.id,achievement_id:B.id,progress:_,is_completed:_>=B.requirement_target,completed_at:_>=B.requirement_target?new Date().toISOString():null,updated_at:new Date().toISOString()});const{data:F}=await ae.from("achievement_progress").select("*").eq("user_id",D.user.id);dt(F||[])}}},Zs=async S=>{if(!D)return;const _=aa.find(F=>F.id===S);if(!_)return;const N=Oa.find(F=>F.achievement_id===S);if(!N||!N.is_completed||N.rewards_claimed)return;const B=(P?.soft_currency||0)+_.reward_soft_currency,U=(P?.premium_currency||0)+_.reward_premium_currency;await ae.from("profiles").update({soft_currency:B,premium_currency:U,updated_at:new Date().toISOString()}).eq("id",D.user.id),_.reward_title&&await ae.from("user_titles").upsert({user_id:D.user.id,title_id:_.id,unlocked:!0}),await ae.from("achievement_progress").update({rewards_claimed:!0,updated_at:new Date().toISOString()}).eq("user_id",D.user.id).eq("achievement_id",S),oe(F=>({...F,soft_currency:B,premium_currency:U})),dt(F=>F.map(k=>k.achievement_id===S?{...k,rewards_claimed:!0}:k))},Wn=async S=>{if(!D)return;const _=yt.find(w=>w.id===S);if(!_)return;const N=P?.soft_currency??0,B=P?.premium_currency??0;if(N<_.cost_soft||B<_.cost_premium){console.error("Insufficient funds");return}const U=N-_.cost_soft+(_.item_type==="currency"&&_.soft_currency||0),F=B-_.cost_premium+(_.item_type==="currency"&&_.premium_currency||0),k=[];if(_.item_type==="shards"&&_.character_id&&_.shard_amount>0){const q=(it[_.character_id]||0)+_.shard_amount;k.push({user_id:D.user.id,character_id:_.character_id,shard_amount:q,updated_at:new Date().toISOString()})}try{const{error:w}=await ae.from("profiles").update({soft_currency:U,premium_currency:F,updated_at:new Date().toISOString()}).eq("id",D.user.id);if(w){console.error("Failed to update profile:",w);return}if(k.length>0){const{error:q}=await ae.from("user_inventory").upsert(k,{onConflict:"user_id,character_id"});if(q){console.error("Failed to update inventory:",q);return}_t(me=>({...me,[_.character_id]:k[0].shard_amount}))}oe(q=>({...q||{},soft_currency:U,premium_currency:F}))}catch(w){console.error("Purchase failed:",w)}},el=async(S,_={})=>{if(!D)return;const N=P?.premium_currency??0,B=Be.finger_fragment||0,U=25,F=_.useFragment===!0;if(F){if(B<=0)return}else if(N<U)return;const k=Ea.filter(he=>he.banner_id===S);if(k.length===0)return;const w=k.reduce((he,pe)=>he+pe.weight,0);let q=Math.random()*w,me=k[0];for(const he of k)if(q-=he.weight,q<=0){me=he;break}const De=F?N:N-U;let Ce=P?.soft_currency??0;const Me=[],$=[];if(me.item_type==="currency"&&(Ce+=me.soft_currency||0),me.item_type==="shards"&&me.character_id){const pe=(it[me.character_id]||0)+(me.shard_amount||0);Me.push({user_id:D.user.id,character_id:me.character_id,shard_amount:pe,updated_at:new Date().toISOString()}),_t(Ae=>({...Ae,[me.character_id]:pe}))}if(me.item_type==="character"&&me.character_id){const pe=(it[me.character_id]||0)+30;Me.push({user_id:D.user.id,character_id:me.character_id,shard_amount:pe,updated_at:new Date().toISOString()}),_t(Ae=>({...Ae,[me.character_id]:pe})),ma[me.character_id]||$.push(me.character_id)}try{const{error:he}=await ae.from("profiles").update({soft_currency:Ce,premium_currency:De,updated_at:new Date().toISOString()}).eq("id",D.user.id);if(he){console.error("Failed to update profile:",he);return}if(F){const Ae=Math.max(0,B-1),{error:Oe}=await ae.from("user_items").upsert({user_id:D.user.id,item_id:"finger_fragment",quantity:Ae,updated_at:new Date().toISOString()},{onConflict:"user_id,item_id"});if(Oe){console.error("Failed to deduct fragment:",Oe);return}Ha(lt=>({...lt,finger_fragment:Ae}))}if(Me.length>0){const{error:Ae}=await ae.from("user_inventory").upsert(Me,{onConflict:"user_id,character_id"});Ae&&console.error("Failed to update inventory:",Ae)}if($.length>0){const Ae=$.map(qt=>({user_id:D.user.id,character_id:qt,level:1,xp:0,limit_break:0,updated_at:new Date().toISOString()})),{data:Oe,error:lt}=await ae.from("character_progress").upsert(Ae,{onConflict:"user_id,character_id"}).select("character_id, level, xp, limit_break");lt?console.error("Failed to unlock character:",lt):Oe&&Le(qt=>{const Ia={...qt};return Oe.forEach(Ka=>{Ia[Ka.character_id]={level:Ka.level,xp:Ka.xp,limit_break:Ka.limit_break}}),Ia})}oe(Ae=>({...Ae||{},soft_currency:Ce,premium_currency:De})),an(me);const{count:pe}=await ae.from("match_history").select("*",{count:"exact",head:!0}).eq("user_id",D.user.id);if(pe!==null&&Va("gacha_pulls",pe+1),$.length>0){const Ae=Object.keys(ma).length+$.length;Va("characters_unlocked",Ae)}}catch(he){console.error("Gacha pull failed:",he)}},Fs=S=>S*25,Ws=async S=>{if(!D||!S)return;const _=Ga.map(B=>({user_id:D.user.id,title_id:B.title_id,unlocked:B.unlocked,active:B.title_id===S,updated_at:new Date().toISOString()}));if(_.length===0)return;const{data:N}=await ae.from("user_titles").upsert(_,{onConflict:"user_id,title_id"}).select();N&&Aa(N)},li=async S=>{if(!D)return;const _=it[S]||0,N=$e[S]||{level:1,xp:0,limit_break:0},B=N.limit_break+1;if(B>5)return;const U=Fs(B);if(_<U)return;const F=_-U;await ae.from("user_inventory").upsert({user_id:D.user.id,character_id:S,shard_amount:F,updated_at:new Date().toISOString()},{onConflict:"user_id,character_id"}),await ae.from("character_progress").upsert({user_id:D.user.id,character_id:S,level:N.level,xp:N.xp,limit_break:B,updated_at:new Date().toISOString()},{onConflict:"user_id,character_id"}),_t(w=>({...w,[S]:F})),Le(w=>({...w,[S]:{...N,limit_break:B}}));const k=Object.values($e).reduce((w,q)=>w+(q.limit_break||0),0)+1;Va("limit_breaks",k)},kl=()=>{Q("team"),R==="battle"&&Wl()},Zt=S=>{R==="battle"&&Wl(),Q(S)},Ya=R==="battle",tl=P?.role==="admin",yn=[{label:"Home",onClick:kl,active:ve==="team"&&R==="select"},{label:"Story",onClick:()=>Zt("story"),active:ve==="story",disabled:Ya},{label:"Daily",onClick:()=>Zt("daily"),active:ve==="daily",disabled:Ya},{label:"Achievements",onClick:()=>Zt("achievements"),active:ve==="achievements",disabled:Ya},{label:"Shop",onClick:()=>Zt("shop"),active:ve==="shop",disabled:Ya},{label:"Gacha",onClick:()=>Zt("gacha"),active:ve==="gacha",disabled:Ya},{label:"Inventory",onClick:()=>Zt("inventory"),active:ve==="inventory",disabled:Ya},{label:"Missions",onClick:()=>Zt("missions"),active:ve==="missions",disabled:Ya},...tl?[{label:"Admin",onClick:()=>Zt("admin"),active:ve==="admin",disabled:Ya}]:[]],er=R!=="battle";return s.createElement(bb,{onSession:ce,onProfile:oe,navItems:yn,onProfileClick:er?()=>Zt("profile"):null,compact:R==="battle"},Xe&&s.createElement("div",{className:"level-toast"},s.createElement("span",null,Xe)),nn&&s.createElement(Mb,{result:nn.result,rewards:nn.rewards,onContinue:()=>{va(null),Wl()},isPvp:Xt}),R==="battle"?s.createElement(Bg,{playerTeam:i,enemyTeam:r,selectedEnemy:d,setSelectedEnemy:m,queueAbility:Cc,queuedActions:ge,removeQueuedAction:Is,battleLog:f,turn:T,gameOver:v,resetGame:Wl,actedCharacters:j,pendingAbility:se,setPendingAbility:J,setActedCharacters:ee,endTurn:Fl,profile:P,matchSummary:W,combatEvents:Yn,battleShake:Ht,isPvp:Xt,isMyTurn:zt,storyBattle:He,onExitStory:wa}):ve==="profile"?s.createElement(Eb,{profile:P,matchHistory:I,onBack:()=>Q("team"),onProfileUpdate:oe,titles:Ga,onSetActiveTitle:Ws}):ve==="missions"?s.createElement(_b,{missions:fe,userMissions:ze,onBack:()=>Q("team"),onClaim:es}):ve==="inventory"?s.createElement(Nb,{characters:be,inventory:it,characterProgress:$e,items:Be,titles:Ga,onBack:()=>Q("team"),onLimitBreak:li,limitBreakCost:Fs}):ve==="shop"?s.createElement(wb,{offers:yt,profile:P,onBack:()=>Q("team"),onPurchase:Wn}):ve==="gacha"?s.createElement(Sb,{banners:Qt,bannerItems:Ea,profile:P,items:Be,characters:be,onBack:()=>Q("team"),onPull:el,result:pn,onClearResult:()=>an(null)}):ve==="story"?s.createElement(Cb,{chapter:Tt,completedNodes:de.completedNodes,activeNodeId:de.activeNodeId,onSelectNode:S=>Ge(_=>({..._,activeNodeId:S})),onCompleteNode:Nc,onStartBattle:Ys,storyResult:ot,onClearResult:Xn,onClaimRewards:Jn,rewardsClaimed:bt}):ve==="daily"?s.createElement(Rb,{dailyReward:Ke,onClaim:cn,onBack:()=>Q("team")}):ve==="achievements"?s.createElement(Db,{achievements:aa,progress:Oa,onClaimReward:Zs,onBack:()=>Q("team")}):ve==="opponent-select"?s.createElement(xb,{characters:be,onConfirm:Ks,onBack:()=>Q("team")}):ve==="admin"&&tl?s.createElement(Ob,{profile:P,characters:be,onBack:()=>Q("team")}):s.createElement(jg,{characters:be,selectedTeam:x,onSelect:H,onStartBattle:()=>Q("opponent-select"),onStartPvpQuick:Fn,onStartPvpRanked:Tc,onCancelPvpQueue:ai,pvpStatus:da,characterProgress:$e,teamPresets:ye,onSavePreset:ni,onApplyPreset:Js}))}class jb extends s.Component{constructor(n){super(n),this.state={hasError:!1,error:null,errorInfo:null,errorCount:0}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r),this.setState(c=>({error:n,errorInfo:r,errorCount:c.errorCount+1}))}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()};handleGoHome=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.href="/"};render(){return this.state.hasError?s.createElement("div",{className:"error-boundary-screen"},s.createElement("div",{className:"error-boundary-panel"},s.createElement("div",{className:"error-boundary-icon"},""),s.createElement("h1",{className:"error-boundary-title"},"Something went wrong"),s.createElement("p",{className:"error-boundary-message"},"We encountered an unexpected error. Don't worry, your progress has been saved."),!1,s.createElement("div",{className:"error-boundary-actions"},s.createElement("button",{className:"error-boundary-btn primary",onClick:this.handleReset},"Reload Page"),s.createElement("button",{className:"error-boundary-btn secondary",onClick:this.handleGoHome},"Go to Home")),this.state.errorCount>3&&s.createElement("div",{className:"error-boundary-warning"},s.createElement("p",null,s.createElement("strong",null,"Multiple errors detected.")," If this keeps happening, try:"),s.createElement("ul",null,s.createElement("li",null,"Clearing your browser cache"),s.createElement("li",null,"Using a different browser"),s.createElement("li",null,"Contacting support if the issue persists"))))):this.props.children}}Rg.createRoot(document.getElementById("root")).render(s.createElement(s.StrictMode,null,s.createElement(jb,null,s.createElement(Ub,null))));
