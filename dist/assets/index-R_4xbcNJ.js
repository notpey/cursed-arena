(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function i(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(c){if(c.ep)return;c.ep=!0;const d=i(c);fetch(c.href,d)}})();function Gm(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Fo={exports:{}},Te={};var om;function cg(){if(om)return Te;om=1;var s=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),m=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),O=Symbol.iterator;function U(E){return E===null||typeof E!="object"?null:(E=O&&E[O]||E["@@iterator"],typeof E=="function"?E:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,Q={};function ee(E,V,ne){this.props=E,this.context=V,this.refs=Q,this.updater=ne||G}ee.prototype.isReactComponent={},ee.prototype.setState=function(E,V){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,V,"setState")},ee.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function le(){}le.prototype=ee.prototype;function L(E,V,ne){this.props=E,this.context=V,this.refs=Q,this.updater=ne||G}var se=L.prototype=new le;se.constructor=L,z(se,ee.prototype),se.isPureReactComponent=!0;var be=Array.isArray;function J(){}var te={H:null,A:null,T:null,S:null},me=Object.prototype.hasOwnProperty;function ke(E,V,ne){var ie=ne.ref;return{$$typeof:s,type:E,key:V,ref:ie!==void 0?ie:null,props:ne}}function gt(E,V){return ke(E.type,V,E.props)}function ct(E){return typeof E=="object"&&E!==null&&E.$$typeof===s}function Se(E){var V={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(ne){return V[ne]})}var dt=/\/+/g;function wt(E,V){return typeof E=="object"&&E!==null&&E.key!=null?Se(""+E.key):V.toString(36)}function nt(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(J,J):(E.status="pending",E.then(function(V){E.status==="pending"&&(E.status="fulfilled",E.value=V)},function(V){E.status==="pending"&&(E.status="rejected",E.reason=V)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function M(E,V,ne,ie,ve){var Ae=typeof E;(Ae==="undefined"||Ae==="boolean")&&(E=null);var De=!1;if(E===null)De=!0;else switch(Ae){case"bigint":case"string":case"number":De=!0;break;case"object":switch(E.$$typeof){case s:case n:De=!0;break;case _:return De=E._init,M(De(E._payload),V,ne,ie,ve)}}if(De)return ve=ve(E),De=ie===""?"."+wt(E,0):ie,be(ve)?(ne="",De!=null&&(ne=De.replace(dt,"$&/")+"/"),M(ve,V,ne,"",function(ja){return ja})):ve!=null&&(ct(ve)&&(ve=gt(ve,ne+(ve.key==null||E&&E.key===ve.key?"":(""+ve.key).replace(dt,"$&/")+"/")+De)),V.push(ve)),1;De=0;var St=ie===""?".":ie+":";if(be(E))for(var Fe=0;Fe<E.length;Fe++)ie=E[Fe],Ae=St+wt(ie,Fe),De+=M(ie,V,ne,Ae,ve);else if(Fe=U(E),typeof Fe=="function")for(E=Fe.call(E),Fe=0;!(ie=E.next()).done;)ie=ie.value,Ae=St+wt(ie,Fe++),De+=M(ie,V,ne,Ae,ve);else if(Ae==="object"){if(typeof E.then=="function")return M(nt(E),V,ne,ie,ve);throw V=String(E),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return De}function ae(E,V,ne){if(E==null)return E;var ie=[],ve=0;return M(E,ie,"","",function(Ae){return V.call(ne,Ae,ve++)}),ie}function Y(E){if(E._status===-1){var V=E._result;V=V(),V.then(function(ne){(E._status===0||E._status===-1)&&(E._status=1,E._result=ne)},function(ne){(E._status===0||E._status===-1)&&(E._status=2,E._result=ne)}),E._status===-1&&(E._status=0,E._result=V)}if(E._status===1)return E._result.default;throw E._result}var fe=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},_e={map:ae,forEach:function(E,V,ne){ae(E,function(){V.apply(this,arguments)},ne)},count:function(E){var V=0;return ae(E,function(){V++}),V},toArray:function(E){return ae(E,function(V){return V})||[]},only:function(E){if(!ct(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return Te.Activity=w,Te.Children=_e,Te.Component=ee,Te.Fragment=i,Te.Profiler=c,Te.PureComponent=L,Te.StrictMode=r,Te.Suspense=v,Te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,Te.__COMPILER_RUNTIME={__proto__:null,c:function(E){return te.H.useMemoCache(E)}},Te.cache=function(E){return function(){return E.apply(null,arguments)}},Te.cacheSignal=function(){return null},Te.cloneElement=function(E,V,ne){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var ie=z({},E.props),ve=E.key;if(V!=null)for(Ae in V.key!==void 0&&(ve=""+V.key),V)!me.call(V,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&V.ref===void 0||(ie[Ae]=V[Ae]);var Ae=arguments.length-2;if(Ae===1)ie.children=ne;else if(1<Ae){for(var De=Array(Ae),St=0;St<Ae;St++)De[St]=arguments[St+2];ie.children=De}return ke(E.type,ve,ie)},Te.createContext=function(E){return E={$$typeof:m,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:d,_context:E},E},Te.createElement=function(E,V,ne){var ie,ve={},Ae=null;if(V!=null)for(ie in V.key!==void 0&&(Ae=""+V.key),V)me.call(V,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ve[ie]=V[ie]);var De=arguments.length-2;if(De===1)ve.children=ne;else if(1<De){for(var St=Array(De),Fe=0;Fe<De;Fe++)St[Fe]=arguments[Fe+2];ve.children=St}if(E&&E.defaultProps)for(ie in De=E.defaultProps,De)ve[ie]===void 0&&(ve[ie]=De[ie]);return ke(E,Ae,ve)},Te.createRef=function(){return{current:null}},Te.forwardRef=function(E){return{$$typeof:p,render:E}},Te.isValidElement=ct,Te.lazy=function(E){return{$$typeof:_,_payload:{_status:-1,_result:E},_init:Y}},Te.memo=function(E,V){return{$$typeof:g,type:E,compare:V===void 0?null:V}},Te.startTransition=function(E){var V=te.T,ne={};te.T=ne;try{var ie=E(),ve=te.S;ve!==null&&ve(ne,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(J,fe)}catch(Ae){fe(Ae)}finally{V!==null&&ne.types!==null&&(V.types=ne.types),te.T=V}},Te.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},Te.use=function(E){return te.H.use(E)},Te.useActionState=function(E,V,ne){return te.H.useActionState(E,V,ne)},Te.useCallback=function(E,V){return te.H.useCallback(E,V)},Te.useContext=function(E){return te.H.useContext(E)},Te.useDebugValue=function(){},Te.useDeferredValue=function(E,V){return te.H.useDeferredValue(E,V)},Te.useEffect=function(E,V){return te.H.useEffect(E,V)},Te.useEffectEvent=function(E){return te.H.useEffectEvent(E)},Te.useId=function(){return te.H.useId()},Te.useImperativeHandle=function(E,V,ne){return te.H.useImperativeHandle(E,V,ne)},Te.useInsertionEffect=function(E,V){return te.H.useInsertionEffect(E,V)},Te.useLayoutEffect=function(E,V){return te.H.useLayoutEffect(E,V)},Te.useMemo=function(E,V){return te.H.useMemo(E,V)},Te.useOptimistic=function(E,V){return te.H.useOptimistic(E,V)},Te.useReducer=function(E,V,ne){return te.H.useReducer(E,V,ne)},Te.useRef=function(E){return te.H.useRef(E)},Te.useState=function(E){return te.H.useState(E)},Te.useSyncExternalStore=function(E,V,ne){return te.H.useSyncExternalStore(E,V,ne)},Te.useTransition=function(){return te.H.useTransition()},Te.version="19.2.3",Te}var cm;function Tc(){return cm||(cm=1,Fo.exports=cg()),Fo.exports}var de=Tc();const f=Gm(de);var ec={exports:{}},rs={},tc={exports:{}},ac={};var dm;function dg(){return dm||(dm=1,(function(s){function n(M,ae){var Y=M.length;M.push(ae);e:for(;0<Y;){var fe=Y-1>>>1,_e=M[fe];if(0<c(_e,ae))M[fe]=ae,M[Y]=_e,Y=fe;else break e}}function i(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var ae=M[0],Y=M.pop();if(Y!==ae){M[0]=Y;e:for(var fe=0,_e=M.length,E=_e>>>1;fe<E;){var V=2*(fe+1)-1,ne=M[V],ie=V+1,ve=M[ie];if(0>c(ne,Y))ie<_e&&0>c(ve,ne)?(M[fe]=ve,M[ie]=Y,fe=ie):(M[fe]=ne,M[V]=Y,fe=V);else if(ie<_e&&0>c(ve,Y))M[fe]=ve,M[ie]=Y,fe=ie;else break e}}return ae}function c(M,ae){var Y=M.sortIndex-ae.sortIndex;return Y!==0?Y:M.id-ae.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;s.unstable_now=function(){return d.now()}}else{var m=Date,p=m.now();s.unstable_now=function(){return m.now()-p}}var v=[],g=[],_=1,w=null,O=3,U=!1,G=!1,z=!1,Q=!1,ee=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function se(M){for(var ae=i(g);ae!==null;){if(ae.callback===null)r(g);else if(ae.startTime<=M)r(g),ae.sortIndex=ae.expirationTime,n(v,ae);else break;ae=i(g)}}function be(M){if(z=!1,se(M),!G)if(i(v)!==null)G=!0,J||(J=!0,Se());else{var ae=i(g);ae!==null&&nt(be,ae.startTime-M)}}var J=!1,te=-1,me=5,ke=-1;function gt(){return Q?!0:!(s.unstable_now()-ke<me)}function ct(){if(Q=!1,J){var M=s.unstable_now();ke=M;var ae=!0;try{e:{G=!1,z&&(z=!1,le(te),te=-1),U=!0;var Y=O;try{t:{for(se(M),w=i(v);w!==null&&!(w.expirationTime>M&&gt());){var fe=w.callback;if(typeof fe=="function"){w.callback=null,O=w.priorityLevel;var _e=fe(w.expirationTime<=M);if(M=s.unstable_now(),typeof _e=="function"){w.callback=_e,se(M),ae=!0;break t}w===i(v)&&r(v),se(M)}else r(v);w=i(v)}if(w!==null)ae=!0;else{var E=i(g);E!==null&&nt(be,E.startTime-M),ae=!1}}break e}finally{w=null,O=Y,U=!1}ae=void 0}}finally{ae?Se():J=!1}}}var Se;if(typeof L=="function")Se=function(){L(ct)};else if(typeof MessageChannel<"u"){var dt=new MessageChannel,wt=dt.port2;dt.port1.onmessage=ct,Se=function(){wt.postMessage(null)}}else Se=function(){ee(ct,0)};function nt(M,ae){te=ee(function(){M(s.unstable_now())},ae)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(M){M.callback=null},s.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):me=0<M?Math.floor(1e3/M):5},s.unstable_getCurrentPriorityLevel=function(){return O},s.unstable_next=function(M){switch(O){case 1:case 2:case 3:var ae=3;break;default:ae=O}var Y=O;O=ae;try{return M()}finally{O=Y}},s.unstable_requestPaint=function(){Q=!0},s.unstable_runWithPriority=function(M,ae){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Y=O;O=M;try{return ae()}finally{O=Y}},s.unstable_scheduleCallback=function(M,ae,Y){var fe=s.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?fe+Y:fe):Y=fe,M){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=Y+_e,M={id:_++,callback:ae,priorityLevel:M,startTime:Y,expirationTime:_e,sortIndex:-1},Y>fe?(M.sortIndex=Y,n(g,M),i(v)===null&&M===i(g)&&(z?(le(te),te=-1):z=!0,nt(be,Y-fe))):(M.sortIndex=_e,n(v,M),G||U||(G=!0,J||(J=!0,Se()))),M},s.unstable_shouldYield=gt,s.unstable_wrapCallback=function(M){var ae=O;return function(){var Y=O;O=ae;try{return M.apply(this,arguments)}finally{O=Y}}}})(ac)),ac}var fm;function fg(){return fm||(fm=1,tc.exports=dg()),tc.exports}var nc={exports:{}},Vt={};var hm;function hg(){if(hm)return Vt;hm=1;var s=Tc();function n(v){var g="https://react.dev/errors/"+v;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+v+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(v,g,_){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:w==null?null:""+w,children:v,containerInfo:g,implementation:_}}var m=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(v,g){if(v==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Vt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Vt.createPortal=function(v,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return d(v,g,null,_)},Vt.flushSync=function(v){var g=m.T,_=r.p;try{if(m.T=null,r.p=2,v)return v()}finally{m.T=g,r.p=_,r.d.f()}},Vt.preconnect=function(v,g){typeof v=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(v,g))},Vt.prefetchDNS=function(v){typeof v=="string"&&r.d.D(v)},Vt.preinit=function(v,g){if(typeof v=="string"&&g&&typeof g.as=="string"){var _=g.as,w=p(_,g.crossOrigin),O=typeof g.integrity=="string"?g.integrity:void 0,U=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?r.d.S(v,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:O,fetchPriority:U}):_==="script"&&r.d.X(v,{crossOrigin:w,integrity:O,fetchPriority:U,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Vt.preinitModule=function(v,g){if(typeof v=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=p(g.as,g.crossOrigin);r.d.M(v,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(v)},Vt.preload=function(v,g){if(typeof v=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,w=p(_,g.crossOrigin);r.d.L(v,_,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Vt.preloadModule=function(v,g){if(typeof v=="string")if(g){var _=p(g.as,g.crossOrigin);r.d.m(v,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(v)},Vt.requestFormReset=function(v){r.d.r(v)},Vt.unstable_batchedUpdates=function(v,g){return v(g)},Vt.useFormState=function(v,g,_){return m.H.useFormState(v,g,_)},Vt.useFormStatus=function(){return m.H.useHostTransitionStatus()},Vt.version="19.2.3",Vt}var mm;function mg(){if(mm)return nc.exports;mm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),nc.exports=hg(),nc.exports}var pm;function pg(){if(pm)return rs;pm=1;var s=fg(),n=Tc(),i=mg();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v(e){if(d(e)!==e)throw Error(r(188))}function g(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(r(188));return t!==e?null:e}for(var a=e,l=t;;){var u=a.return;if(u===null)break;var o=u.alternate;if(o===null){if(l=u.return,l!==null){a=l;continue}break}if(u.child===o.child){for(o=u.child;o;){if(o===a)return v(u),e;if(o===l)return v(u),t;o=o.sibling}throw Error(r(188))}if(a.return!==l.return)a=u,l=o;else{for(var h=!1,y=u.child;y;){if(y===a){h=!0,a=u,l=o;break}if(y===l){h=!0,l=u,a=o;break}y=y.sibling}if(!h){for(y=o.child;y;){if(y===a){h=!0,a=o,l=u;break}if(y===l){h=!0,l=o,a=u;break}y=y.sibling}if(!h)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:t}function _(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=_(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,O=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),le=Symbol.for("react.consumer"),L=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),ke=Symbol.for("react.activity"),gt=Symbol.for("react.memo_cache_sentinel"),ct=Symbol.iterator;function Se(e){return e===null||typeof e!="object"?null:(e=ct&&e[ct]||e["@@iterator"],typeof e=="function"?e:null)}var dt=Symbol.for("react.client.reference");function wt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===dt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case z:return"Fragment";case ee:return"Profiler";case Q:return"StrictMode";case be:return"Suspense";case J:return"SuspenseList";case ke:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case G:return"Portal";case L:return e.displayName||"Context";case le:return(e._context.displayName||"Context")+".Consumer";case se:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case te:return t=e.displayName||null,t!==null?t:wt(e.type)||"Memo";case me:t=e._payload,e=e._init;try{return wt(e(t))}catch{}}return null}var nt=Array.isArray,M=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},fe=[],_e=-1;function E(e){return{current:e}}function V(e){0>_e||(e.current=fe[_e],fe[_e]=null,_e--)}function ne(e,t){_e++,fe[_e]=e.current,e.current=t}var ie=E(null),ve=E(null),Ae=E(null),De=E(null);function St(e,t){switch(ne(Ae,t),ne(ve,e),ne(ie,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Uh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Uh(t),e=jh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(ie),ne(ie,e)}function Fe(){V(ie),V(ve),V(Ae)}function ja(e){e.memoizedState!==null&&ne(De,e);var t=ie.current,a=jh(t,e.type);t!==a&&(ne(ve,e),ne(ie,a))}function La(e){ve.current===e&&(V(ie),V(ve)),De.current===e&&(V(De),ns._currentValue=Y)}var fa,C;function ue(e){if(fa===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);fa=t&&t[1]||"",C=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fa+e+C}var He=!1;function et(e,t){if(!e||He)return"";He=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var P=function(){throw Error()};if(Object.defineProperty(P.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(P,[])}catch($){var j=$}Reflect.construct(e,[],P)}else{try{P.call()}catch($){j=$}e.call(P.prototype)}}else{try{throw Error()}catch($){j=$}(P=e())&&typeof P.catch=="function"&&P.catch(function(){})}}catch($){if($&&j&&typeof $.stack=="string")return[$.stack,j.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=l.DetermineComponentFrameRoot(),h=o[0],y=o[1];if(h&&y){var b=h.split(`
`),k=y.split(`
`);for(u=l=0;l<b.length&&!b[l].includes("DetermineComponentFrameRoot");)l++;for(;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;if(l===b.length||u===k.length)for(l=b.length-1,u=k.length-1;1<=l&&0<=u&&b[l]!==k[u];)u--;for(;1<=l&&0<=u;l--,u--)if(b[l]!==k[u]){if(l!==1||u!==1)do if(l--,u--,0>u||b[l]!==k[u]){var H=`
`+b[l].replace(" at new "," at ");return e.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",e.displayName)),H}while(1<=l&&0<=u);break}}}finally{He=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?ue(a):""}function Tt(e,t){switch(e.tag){case 26:case 27:case 5:return ue(e.type);case 16:return ue("Lazy");case 13:return e.child!==t&&t!==null?ue("Suspense Fallback"):ue("Suspense");case 19:return ue("SuspenseList");case 0:case 15:return et(e.type,!1);case 11:return et(e.type.render,!1);case 1:return et(e.type,!0);case 31:return ue("Activity");default:return""}}function ut(e){try{var t="",a=null;do t+=Tt(e,a),a=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ft=Object.prototype.hasOwnProperty,yt=s.unstable_scheduleCallback,bt=s.unstable_cancelCallback,Xe=s.unstable_shouldYield,tt=s.unstable_requestPaint,Qe=s.unstable_now,ha=s.unstable_getCurrentPriorityLevel,ma=s.unstable_ImmediatePriority,Ga=s.unstable_UserBlockingPriority,Be=s.unstable_NormalPriority,Ta=s.unstable_LowPriority,bl=s.unstable_IdlePriority,Pe=s.log,ea=s.unstable_setDisableYieldValue,Xt=null,xt=null;function Aa(e){if(typeof Pe=="function"&&ea(e),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode(Xt,e)}catch{}}var Mt=Math.clz32?Math.clz32:_l,Xr=Math.log,hi=Math.LN2;function _l(e){return e>>>=0,e===0?32:31-(Xr(e)/hi|0)|0}var Ya=256,xa=262144,pn=4194304;function ta(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Qn(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var u=0,o=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var y=l&134217727;return y!==0?(l=y&~o,l!==0?u=ta(l):(h&=y,h!==0?u=ta(h):a||(a=y&~e,a!==0&&(u=ta(a))))):(y=l&~o,y!==0?u=ta(y):h!==0?u=ta(h):a||(a=l&~e,a!==0&&(u=ta(a)))),u===0?0:t!==0&&t!==u&&(t&o)===0&&(o=u&-u,a=t&-t,o>=a||o===32&&(a&4194048)!==0)?t:u}function vn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ys(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bs(){var e=pn;return pn<<=1,(pn&62914560)===0&&(pn=4194304),e}function mi(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Jn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function El(e,t,a,l,u,o){var h=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var y=e.entanglements,b=e.expirationTimes,k=e.hiddenUpdates;for(a=h&~a;0<a;){var H=31-Mt(a),P=1<<H;y[H]=0,b[H]=-1;var j=k[H];if(j!==null)for(k[H]=null,H=0;H<j.length;H++){var $=j[H];$!==null&&($.lane&=-536870913)}a&=~P}l!==0&&pi(e,l,0),o!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=o&~(h&~t))}function pi(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Mt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function Oa(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-Mt(a),u=1<<l;u&t|e[l]&t&&(e[l]|=t),a&=~u}}function Va(e,t){var a=t&-t;return a=(a&42)!==0?1:Qt(a),(a&(e.suspendedLanes|t))!==0?0:a}function Qt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function gn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function _s(){var e=ae.p;return e!==0?e:(e=window.event,e===void 0?32:am(e.type))}function Es(e,t){var a=ae.p;try{return ae.p=e,t()}finally{ae.p=a}}var Ma=Math.random().toString(36).slice(2),Dt="__reactFiber$"+Ma,Yt="__reactProps$"+Ma,za="__reactContainer$"+Ma,vi="__reactEvents$"+Ma,Qr="__reactListeners$"+Ma,gi="__reactHandles$"+Ma,yi="__reactResources$"+Ma,yn="__reactMarker$"+Ma;function bi(e){delete e[Dt],delete e[Yt],delete e[vi],delete e[Qr],delete e[gi]}function bn(e){var t=e[Dt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[za]||a[Dt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Hh(e);e!==null;){if(a=e[Dt])return a;e=Hh(e)}return t}e=a,a=e.parentNode}return null}function _n(e){if(e=e[Dt]||e[za]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function In(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(r(33))}function En(e){var t=e[yi];return t||(t=e[yi]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function At(e){e[yn]=!0}var ws=new Set,Ss={};function Ka(e,t){Xa(e,t),Xa(e+"Capture",t)}function Xa(e,t){for(Ss[e]=t,e=0;e<t.length;e++)ws.add(t[e])}var Jr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ts={},Qa={};function Zn(e){return ft.call(Qa,e)?!0:ft.call(Ts,e)?!1:Jr.test(e)?Qa[e]=!0:(Ts[e]=!0,!1)}function wl(e,t,a){if(Zn(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Sl(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function N(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}function T(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function x(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function X(e,t,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var u=l.get,o=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(h){a=""+h,o.call(this,h)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(h){a=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function K(e){if(!e._valueTracker){var t=x(e)?"checked":"value";e._valueTracker=X(e,t,""+e[t])}}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=x(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function B(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Z=/[\n"\\]/g;function D(e){return e.replace(Z,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Re(e,t,a,l,u,o,h,y){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+T(t)):e.value!==""+T(t)&&(e.value=""+T(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?Ye(e,h,T(t)):a!=null?Ye(e,h,T(a)):l!=null&&e.removeAttribute("value"),u==null&&o!=null&&(e.defaultChecked=!!o),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+T(y):e.removeAttribute("name")}function Oe(e,t,a,l,u,o,h,y){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||a!=null){if(!(o!=="submit"&&o!=="reset"||t!=null)){K(e);return}a=a!=null?""+T(a):"",t=t!=null?""+T(t):a,y||t===e.value||(e.value=t),e.defaultValue=t}l=l??u,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=y?e.checked:!!l,e.defaultChecked=!!l,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h),K(e)}function Ye(e,t,a){t==="number"&&B(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function q(e,t,a,l){if(e=e.options,t){t={};for(var u=0;u<a.length;u++)t["$"+a[u]]=!0;for(a=0;a<e.length;a++)u=t.hasOwnProperty("$"+e[a].value),e[a].selected!==u&&(e[a].selected=u),u&&l&&(e[a].defaultSelected=!0)}else{for(a=""+T(a),t=null,u=0;u<e.length;u++){if(e[u].value===a){e[u].selected=!0,l&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function F(e,t,a){if(t!=null&&(t=""+T(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+T(a):""}function ht(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(r(92));if(nt(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=T(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),K(e)}function we(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var lt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ge(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||lt.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function As(e,t,a){if(t!=null&&typeof t!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var u in t)l=t[u],t.hasOwnProperty(u)&&a[u]!==l&&Ge(e,u,l)}else for(var o in t)t.hasOwnProperty(o)&&Ge(e,o,t[o])}function Ja(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Os(e){return rp.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ia(){}var Ir=null;function Zr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Tl=null,Al=null;function kc(e){var t=_n(e);if(t&&(e=t.stateNode)){var a=e[Yt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Re(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+D(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var u=l[Yt]||null;if(!u)throw Error(r(90));Re(l,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&W(l)}break e;case"textarea":F(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&q(e,!!a.multiple,t,!1)}}}var Pr=!1;function Dc(e,t,a){if(Pr)return e(t,a);Pr=!0;try{var l=e(t);return l}finally{if(Pr=!1,(Tl!==null||Al!==null)&&(hr(),Tl&&(t=Tl,e=Al,Al=Tl=null,kc(t),e)))for(t=0;t<e.length;t++)kc(e[t])}}function _i(e,t){var a=e.stateNode;if(a===null)return null;var l=a[Yt]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,t,typeof a));return a}var Za=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wr=!1;if(Za)try{var Ei={};Object.defineProperty(Ei,"passive",{get:function(){Wr=!0}}),window.addEventListener("test",Ei,Ei),window.removeEventListener("test",Ei,Ei)}catch{Wr=!1}var wn=null,Fr=null,Ns=null;function Uc(){if(Ns)return Ns;var e,t=Fr,a=t.length,l,u="value"in wn?wn.value:wn.textContent,o=u.length;for(e=0;e<a&&t[e]===u[e];e++);var h=a-e;for(l=1;l<=h&&t[a-l]===u[o-l];l++);return Ns=u.slice(e,1<l?1-l:void 0)}function Cs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Rs(){return!0}function jc(){return!1}function Jt(e){function t(a,l,u,o,h){this._reactName=a,this._targetInst=u,this.type=l,this.nativeEvent=o,this.target=h,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(a=e[y],this[y]=a?a(o):o[y]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Rs:jc,this.isPropagationStopped=jc,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Rs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Rs)},persist:function(){},isPersistent:Rs}),t}var Pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ks=Jt(Pn),wi=w({},Pn,{view:0,detail:0}),up=Jt(wi),eu,tu,Si,Ds=w({},wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Si&&(Si&&e.type==="mousemove"?(eu=e.screenX-Si.screenX,tu=e.screenY-Si.screenY):tu=eu=0,Si=e),eu)},movementY:function(e){return"movementY"in e?e.movementY:tu}}),xc=Jt(Ds),op=w({},Ds,{dataTransfer:0}),cp=Jt(op),dp=w({},wi,{relatedTarget:0}),au=Jt(dp),fp=w({},Pn,{animationName:0,elapsedTime:0,pseudoElement:0}),hp=Jt(fp),mp=w({},Pn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pp=Jt(mp),vp=w({},Pn,{data:0}),Mc=Jt(vp),gp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _p(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bp[e])?!!t[e]:!1}function nu(){return _p}var Ep=w({},wi,{key:function(e){if(e.key){var t=gp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Cs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nu,charCode:function(e){return e.type==="keypress"?Cs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wp=Jt(Ep),Sp=w({},Ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zc=Jt(Sp),Tp=w({},wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nu}),Ap=Jt(Tp),Op=w({},Pn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Np=Jt(Op),Cp=w({},Ds,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rp=Jt(Cp),kp=w({},Pn,{newState:0,oldState:0}),Dp=Jt(kp),Up=[9,13,27,32],lu=Za&&"CompositionEvent"in window,Ti=null;Za&&"documentMode"in document&&(Ti=document.documentMode);var jp=Za&&"TextEvent"in window&&!Ti,Bc=Za&&(!lu||Ti&&8<Ti&&11>=Ti),$c=" ",qc=!1;function Hc(e,t){switch(e){case"keyup":return Up.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ol=!1;function xp(e,t){switch(e){case"compositionend":return Lc(t);case"keypress":return t.which!==32?null:(qc=!0,$c);case"textInput":return e=t.data,e===$c&&qc?null:e;default:return null}}function Mp(e,t){if(Ol)return e==="compositionend"||!lu&&Hc(e,t)?(e=Uc(),Ns=Fr=wn=null,Ol=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bc&&t.locale!=="ko"?null:t.data;default:return null}}var zp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zp[e.type]:t==="textarea"}function Yc(e,t,a,l){Tl?Al?Al.push(l):Al=[l]:Tl=l,t=_r(t,"onChange"),0<t.length&&(a=new ks("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var Ai=null,Oi=null;function Bp(e){Oh(e,0)}function Us(e){var t=In(e);if(W(t))return e}function Vc(e,t){if(e==="change")return t}var Kc=!1;if(Za){var iu;if(Za){var su="oninput"in document;if(!su){var Xc=document.createElement("div");Xc.setAttribute("oninput","return;"),su=typeof Xc.oninput=="function"}iu=su}else iu=!1;Kc=iu&&(!document.documentMode||9<document.documentMode)}function Qc(){Ai&&(Ai.detachEvent("onpropertychange",Jc),Oi=Ai=null)}function Jc(e){if(e.propertyName==="value"&&Us(Oi)){var t=[];Yc(t,Oi,e,Zr(e)),Dc(Bp,t)}}function $p(e,t,a){e==="focusin"?(Qc(),Ai=t,Oi=a,Ai.attachEvent("onpropertychange",Jc)):e==="focusout"&&Qc()}function qp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Us(Oi)}function Hp(e,t){if(e==="click")return Us(t)}function Lp(e,t){if(e==="input"||e==="change")return Us(t)}function Gp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var aa=typeof Object.is=="function"?Object.is:Gp;function Ni(e,t){if(aa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var u=a[l];if(!ft.call(t,u)||!aa(e[u],t[u]))return!1}return!0}function Ic(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zc(e,t){var a=Ic(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ic(a)}}function Pc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Pc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Wc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=B(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=B(e.document)}return t}function ru(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Yp=Za&&"documentMode"in document&&11>=document.documentMode,Nl=null,uu=null,Ci=null,ou=!1;function Fc(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ou||Nl==null||Nl!==B(l)||(l=Nl,"selectionStart"in l&&ru(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ci&&Ni(Ci,l)||(Ci=l,l=_r(uu,"onSelect"),0<l.length&&(t=new ks("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=Nl)))}function Wn(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Cl={animationend:Wn("Animation","AnimationEnd"),animationiteration:Wn("Animation","AnimationIteration"),animationstart:Wn("Animation","AnimationStart"),transitionrun:Wn("Transition","TransitionRun"),transitionstart:Wn("Transition","TransitionStart"),transitioncancel:Wn("Transition","TransitionCancel"),transitionend:Wn("Transition","TransitionEnd")},cu={},ed={};Za&&(ed=document.createElement("div").style,"AnimationEvent"in window||(delete Cl.animationend.animation,delete Cl.animationiteration.animation,delete Cl.animationstart.animation),"TransitionEvent"in window||delete Cl.transitionend.transition);function Fn(e){if(cu[e])return cu[e];if(!Cl[e])return e;var t=Cl[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in ed)return cu[e]=t[a];return e}var td=Fn("animationend"),ad=Fn("animationiteration"),nd=Fn("animationstart"),Vp=Fn("transitionrun"),Kp=Fn("transitionstart"),Xp=Fn("transitioncancel"),ld=Fn("transitionend"),id=new Map,du="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");du.push("scrollEnd");function Na(e,t){id.set(e,t),Ka(t,[e])}var js=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},pa=[],Rl=0,fu=0;function xs(){for(var e=Rl,t=fu=Rl=0;t<e;){var a=pa[t];pa[t++]=null;var l=pa[t];pa[t++]=null;var u=pa[t];pa[t++]=null;var o=pa[t];if(pa[t++]=null,l!==null&&u!==null){var h=l.pending;h===null?u.next=u:(u.next=h.next,h.next=u),l.pending=u}o!==0&&sd(a,u,o)}}function Ms(e,t,a,l){pa[Rl++]=e,pa[Rl++]=t,pa[Rl++]=a,pa[Rl++]=l,fu|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function hu(e,t,a,l){return Ms(e,t,a,l),zs(e)}function el(e,t){return Ms(e,null,null,t),zs(e)}function sd(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var u=!1,o=e.return;o!==null;)o.childLanes|=a,l=o.alternate,l!==null&&(l.childLanes|=a),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(u=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,u&&t!==null&&(u=31-Mt(a),e=o.hiddenUpdates,l=e[u],l===null?e[u]=[t]:l.push(t),t.lane=a|536870912),o):null}function zs(e){if(50<Zi)throw Zi=0,So=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var kl={};function Qp(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function na(e,t,a,l){return new Qp(e,t,a,l)}function mu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Pa(e,t){var a=e.alternate;return a===null?(a=na(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function rd(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Bs(e,t,a,l,u,o){var h=0;if(l=e,typeof e=="function")mu(e)&&(h=1);else if(typeof e=="string")h=Wv(e,a,ie.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ke:return e=na(31,a,t,u),e.elementType=ke,e.lanes=o,e;case z:return tl(a.children,u,o,t);case Q:h=8,u|=24;break;case ee:return e=na(12,a,t,u|2),e.elementType=ee,e.lanes=o,e;case be:return e=na(13,a,t,u),e.elementType=be,e.lanes=o,e;case J:return e=na(19,a,t,u),e.elementType=J,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L:h=10;break e;case le:h=9;break e;case se:h=11;break e;case te:h=14;break e;case me:h=16,l=null;break e}h=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return t=na(h,a,t,u),t.elementType=e,t.type=l,t.lanes=o,t}function tl(e,t,a,l){return e=na(7,e,l,t),e.lanes=a,e}function pu(e,t,a){return e=na(6,e,null,t),e.lanes=a,e}function ud(e){var t=na(18,null,null,0);return t.stateNode=e,t}function vu(e,t,a){return t=na(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var od=new WeakMap;function va(e,t){if(typeof e=="object"&&e!==null){var a=od.get(e);return a!==void 0?a:(t={value:e,source:t,stack:ut(t)},od.set(e,t),t)}return{value:e,source:t,stack:ut(t)}}var Dl=[],Ul=0,$s=null,Ri=0,ga=[],ya=0,Sn=null,Ba=1,$a="";function Wa(e,t){Dl[Ul++]=Ri,Dl[Ul++]=$s,$s=e,Ri=t}function cd(e,t,a){ga[ya++]=Ba,ga[ya++]=$a,ga[ya++]=Sn,Sn=e;var l=Ba;e=$a;var u=32-Mt(l)-1;l&=~(1<<u),a+=1;var o=32-Mt(t)+u;if(30<o){var h=u-u%5;o=(l&(1<<h)-1).toString(32),l>>=h,u-=h,Ba=1<<32-Mt(t)+u|a<<u|l,$a=o+e}else Ba=1<<o|a<<u|l,$a=e}function gu(e){e.return!==null&&(Wa(e,1),cd(e,1,0))}function yu(e){for(;e===$s;)$s=Dl[--Ul],Dl[Ul]=null,Ri=Dl[--Ul],Dl[Ul]=null;for(;e===Sn;)Sn=ga[--ya],ga[ya]=null,$a=ga[--ya],ga[ya]=null,Ba=ga[--ya],ga[ya]=null}function dd(e,t){ga[ya++]=Ba,ga[ya++]=$a,ga[ya++]=Sn,Ba=t.id,$a=t.overflow,Sn=e}var Bt=null,it=null,ze=!1,Tn=null,ba=!1,bu=Error(r(519));function An(e){var t=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ki(va(t,e)),bu}function fd(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[Dt]=e,t[Yt]=l,a){case"dialog":je("cancel",t),je("close",t);break;case"iframe":case"object":case"embed":je("load",t);break;case"video":case"audio":for(a=0;a<Wi.length;a++)je(Wi[a],t);break;case"source":je("error",t);break;case"img":case"image":case"link":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"input":je("invalid",t),Oe(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":je("invalid",t);break;case"textarea":je("invalid",t),ht(t,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||kh(t.textContent,a)?(l.popover!=null&&(je("beforetoggle",t),je("toggle",t)),l.onScroll!=null&&je("scroll",t),l.onScrollEnd!=null&&je("scrollend",t),l.onClick!=null&&(t.onclick=Ia),t=!0):t=!1,t||An(e,!0)}function hd(e){for(Bt=e.return;Bt;)switch(Bt.tag){case 5:case 31:case 13:ba=!1;return;case 27:case 3:ba=!0;return;default:Bt=Bt.return}}function jl(e){if(e!==Bt)return!1;if(!ze)return hd(e),ze=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||$o(e.type,e.memoizedProps)),a=!a),a&&it&&An(e),hd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));it=qh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));it=qh(e)}else t===27?(t=it,qn(e.type)?(e=Yo,Yo=null,it=e):it=t):it=Bt?Ea(e.stateNode.nextSibling):null;return!0}function al(){it=Bt=null,ze=!1}function _u(){var e=Tn;return e!==null&&(Wt===null?Wt=e:Wt.push.apply(Wt,e),Tn=null),e}function ki(e){Tn===null?Tn=[e]:Tn.push(e)}var Eu=E(null),nl=null,Fa=null;function On(e,t,a){ne(Eu,t._currentValue),t._currentValue=a}function en(e){e._currentValue=Eu.current,V(Eu)}function wu(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function Su(e,t,a,l){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var o=u.dependencies;if(o!==null){var h=u.child;o=o.firstContext;e:for(;o!==null;){var y=o;o=u;for(var b=0;b<t.length;b++)if(y.context===t[b]){o.lanes|=a,y=o.alternate,y!==null&&(y.lanes|=a),wu(o.return,a,e),l||(h=null);break e}o=y.next}}else if(u.tag===18){if(h=u.return,h===null)throw Error(r(341));h.lanes|=a,o=h.alternate,o!==null&&(o.lanes|=a),wu(h,a,e),h=null}else h=u.child;if(h!==null)h.return=u;else for(h=u;h!==null;){if(h===e){h=null;break}if(u=h.sibling,u!==null){u.return=h.return,h=u;break}h=h.return}u=h}}function xl(e,t,a,l){e=null;for(var u=t,o=!1;u!==null;){if(!o){if((u.flags&524288)!==0)o=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var h=u.alternate;if(h===null)throw Error(r(387));if(h=h.memoizedProps,h!==null){var y=u.type;aa(u.pendingProps.value,h.value)||(e!==null?e.push(y):e=[y])}}else if(u===De.current){if(h=u.alternate,h===null)throw Error(r(387));h.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(ns):e=[ns])}u=u.return}e!==null&&Su(t,e,a,l),t.flags|=262144}function qs(e){for(e=e.firstContext;e!==null;){if(!aa(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ll(e){nl=e,Fa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $t(e){return md(nl,e)}function Hs(e,t){return nl===null&&ll(e),md(e,t)}function md(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Fa===null){if(e===null)throw Error(r(308));Fa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Fa=Fa.next=t;return a}var Jp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Ip=s.unstable_scheduleCallback,Zp=s.unstable_NormalPriority,Ot={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tu(){return{controller:new Jp,data:new Map,refCount:0}}function Di(e){e.refCount--,e.refCount===0&&Ip(Zp,function(){e.controller.abort()})}var Ui=null,Au=0,Ml=0,zl=null;function Pp(e,t){if(Ui===null){var a=Ui=[];Au=0,Ml=Ro(),zl={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Au++,t.then(pd,pd),t}function pd(){if(--Au===0&&Ui!==null){zl!==null&&(zl.status="fulfilled");var e=Ui;Ui=null,Ml=0,zl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Wp(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(u){a.push(u)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var u=0;u<a.length;u++)(0,a[u])(t)},function(u){for(l.status="rejected",l.reason=u,u=0;u<a.length;u++)(0,a[u])(void 0)}),l}var vd=M.S;M.S=function(e,t){eh=Qe(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Pp(e,t),vd!==null&&vd(e,t)};var il=E(null);function Ou(){var e=il.current;return e!==null?e:We.pooledCache}function Ls(e,t){t===null?ne(il,il.current):ne(il,t.pool)}function gd(){var e=Ou();return e===null?null:{parent:Ot._currentValue,pool:e}}var Bl=Error(r(460)),Nu=Error(r(474)),Gs=Error(r(542)),Ys={then:function(){}};function yd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function bd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Ia,Ia),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ed(e),e;default:if(typeof t.status=="string")t.then(Ia,Ia);else{if(e=We,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=l}},function(l){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ed(e),e}throw rl=t,Bl}}function sl(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(rl=a,Bl):a}}var rl=null;function _d(){if(rl===null)throw Error(r(459));var e=rl;return rl=null,e}function Ed(e){if(e===Bl||e===Gs)throw Error(r(483))}var $l=null,ji=0;function Vs(e){var t=ji;return ji+=1,$l===null&&($l=[]),bd($l,e,t)}function xi(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ks(e,t){throw t.$$typeof===O?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function wd(e){function t(A,S){if(e){var R=A.deletions;R===null?(A.deletions=[S],A.flags|=16):R.push(S)}}function a(A,S){if(!e)return null;for(;S!==null;)t(A,S),S=S.sibling;return null}function l(A){for(var S=new Map;A!==null;)A.key!==null?S.set(A.key,A):S.set(A.index,A),A=A.sibling;return S}function u(A,S){return A=Pa(A,S),A.index=0,A.sibling=null,A}function o(A,S,R){return A.index=R,e?(R=A.alternate,R!==null?(R=R.index,R<S?(A.flags|=67108866,S):R):(A.flags|=67108866,S)):(A.flags|=1048576,S)}function h(A){return e&&A.alternate===null&&(A.flags|=67108866),A}function y(A,S,R,I){return S===null||S.tag!==6?(S=pu(R,A.mode,I),S.return=A,S):(S=u(S,R),S.return=A,S)}function b(A,S,R,I){var he=R.type;return he===z?H(A,S,R.props.children,I,R.key):S!==null&&(S.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===me&&sl(he)===S.type)?(S=u(S,R.props),xi(S,R),S.return=A,S):(S=Bs(R.type,R.key,R.props,null,A.mode,I),xi(S,R),S.return=A,S)}function k(A,S,R,I){return S===null||S.tag!==4||S.stateNode.containerInfo!==R.containerInfo||S.stateNode.implementation!==R.implementation?(S=vu(R,A.mode,I),S.return=A,S):(S=u(S,R.children||[]),S.return=A,S)}function H(A,S,R,I,he){return S===null||S.tag!==7?(S=tl(R,A.mode,I,he),S.return=A,S):(S=u(S,R),S.return=A,S)}function P(A,S,R){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return S=pu(""+S,A.mode,R),S.return=A,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case U:return R=Bs(S.type,S.key,S.props,null,A.mode,R),xi(R,S),R.return=A,R;case G:return S=vu(S,A.mode,R),S.return=A,S;case me:return S=sl(S),P(A,S,R)}if(nt(S)||Se(S))return S=tl(S,A.mode,R,null),S.return=A,S;if(typeof S.then=="function")return P(A,Vs(S),R);if(S.$$typeof===L)return P(A,Hs(A,S),R);Ks(A,S)}return null}function j(A,S,R,I){var he=S!==null?S.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return he!==null?null:y(A,S,""+R,I);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case U:return R.key===he?b(A,S,R,I):null;case G:return R.key===he?k(A,S,R,I):null;case me:return R=sl(R),j(A,S,R,I)}if(nt(R)||Se(R))return he!==null?null:H(A,S,R,I,null);if(typeof R.then=="function")return j(A,S,Vs(R),I);if(R.$$typeof===L)return j(A,S,Hs(A,R),I);Ks(A,R)}return null}function $(A,S,R,I,he){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return A=A.get(R)||null,y(S,A,""+I,he);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case U:return A=A.get(I.key===null?R:I.key)||null,b(S,A,I,he);case G:return A=A.get(I.key===null?R:I.key)||null,k(S,A,I,he);case me:return I=sl(I),$(A,S,R,I,he)}if(nt(I)||Se(I))return A=A.get(R)||null,H(S,A,I,he,null);if(typeof I.then=="function")return $(A,S,R,Vs(I),he);if(I.$$typeof===L)return $(A,S,R,Hs(S,I),he);Ks(S,I)}return null}function re(A,S,R,I){for(var he=null,$e=null,oe=S,Ce=S=0,Me=null;oe!==null&&Ce<R.length;Ce++){oe.index>Ce?(Me=oe,oe=null):Me=oe.sibling;var qe=j(A,oe,R[Ce],I);if(qe===null){oe===null&&(oe=Me);break}e&&oe&&qe.alternate===null&&t(A,oe),S=o(qe,S,Ce),$e===null?he=qe:$e.sibling=qe,$e=qe,oe=Me}if(Ce===R.length)return a(A,oe),ze&&Wa(A,Ce),he;if(oe===null){for(;Ce<R.length;Ce++)oe=P(A,R[Ce],I),oe!==null&&(S=o(oe,S,Ce),$e===null?he=oe:$e.sibling=oe,$e=oe);return ze&&Wa(A,Ce),he}for(oe=l(oe);Ce<R.length;Ce++)Me=$(oe,A,Ce,R[Ce],I),Me!==null&&(e&&Me.alternate!==null&&oe.delete(Me.key===null?Ce:Me.key),S=o(Me,S,Ce),$e===null?he=Me:$e.sibling=Me,$e=Me);return e&&oe.forEach(function(Vn){return t(A,Vn)}),ze&&Wa(A,Ce),he}function pe(A,S,R,I){if(R==null)throw Error(r(151));for(var he=null,$e=null,oe=S,Ce=S=0,Me=null,qe=R.next();oe!==null&&!qe.done;Ce++,qe=R.next()){oe.index>Ce?(Me=oe,oe=null):Me=oe.sibling;var Vn=j(A,oe,qe.value,I);if(Vn===null){oe===null&&(oe=Me);break}e&&oe&&Vn.alternate===null&&t(A,oe),S=o(Vn,S,Ce),$e===null?he=Vn:$e.sibling=Vn,$e=Vn,oe=Me}if(qe.done)return a(A,oe),ze&&Wa(A,Ce),he;if(oe===null){for(;!qe.done;Ce++,qe=R.next())qe=P(A,qe.value,I),qe!==null&&(S=o(qe,S,Ce),$e===null?he=qe:$e.sibling=qe,$e=qe);return ze&&Wa(A,Ce),he}for(oe=l(oe);!qe.done;Ce++,qe=R.next())qe=$(oe,A,Ce,qe.value,I),qe!==null&&(e&&qe.alternate!==null&&oe.delete(qe.key===null?Ce:qe.key),S=o(qe,S,Ce),$e===null?he=qe:$e.sibling=qe,$e=qe);return e&&oe.forEach(function(og){return t(A,og)}),ze&&Wa(A,Ce),he}function Ze(A,S,R,I){if(typeof R=="object"&&R!==null&&R.type===z&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case U:e:{for(var he=R.key;S!==null;){if(S.key===he){if(he=R.type,he===z){if(S.tag===7){a(A,S.sibling),I=u(S,R.props.children),I.return=A,A=I;break e}}else if(S.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===me&&sl(he)===S.type){a(A,S.sibling),I=u(S,R.props),xi(I,R),I.return=A,A=I;break e}a(A,S);break}else t(A,S);S=S.sibling}R.type===z?(I=tl(R.props.children,A.mode,I,R.key),I.return=A,A=I):(I=Bs(R.type,R.key,R.props,null,A.mode,I),xi(I,R),I.return=A,A=I)}return h(A);case G:e:{for(he=R.key;S!==null;){if(S.key===he)if(S.tag===4&&S.stateNode.containerInfo===R.containerInfo&&S.stateNode.implementation===R.implementation){a(A,S.sibling),I=u(S,R.children||[]),I.return=A,A=I;break e}else{a(A,S);break}else t(A,S);S=S.sibling}I=vu(R,A.mode,I),I.return=A,A=I}return h(A);case me:return R=sl(R),Ze(A,S,R,I)}if(nt(R))return re(A,S,R,I);if(Se(R)){if(he=Se(R),typeof he!="function")throw Error(r(150));return R=he.call(R),pe(A,S,R,I)}if(typeof R.then=="function")return Ze(A,S,Vs(R),I);if(R.$$typeof===L)return Ze(A,S,Hs(A,R),I);Ks(A,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,S!==null&&S.tag===6?(a(A,S.sibling),I=u(S,R),I.return=A,A=I):(a(A,S),I=pu(R,A.mode,I),I.return=A,A=I),h(A)):a(A,S)}return function(A,S,R,I){try{ji=0;var he=Ze(A,S,R,I);return $l=null,he}catch(oe){if(oe===Bl||oe===Gs)throw oe;var $e=na(29,oe,null,A.mode);return $e.lanes=I,$e.return=A,$e}}}var ul=wd(!0),Sd=wd(!1),Nn=!1;function Cu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ru(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Cn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Rn(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Le&2)!==0){var u=l.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),l.pending=t,t=zs(e),sd(e,null,a),t}return Ms(e,l,t,a),zs(e)}function Mi(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Oa(e,a)}}function ku(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var u=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var h={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};o===null?u=o=h:o=o.next=h,a=a.next}while(a!==null);o===null?u=o=t:o=o.next=t}else u=o=t;a={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:o,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Du=!1;function zi(){if(Du){var e=zl;if(e!==null)throw e}}function Bi(e,t,a,l){Du=!1;var u=e.updateQueue;Nn=!1;var o=u.firstBaseUpdate,h=u.lastBaseUpdate,y=u.shared.pending;if(y!==null){u.shared.pending=null;var b=y,k=b.next;b.next=null,h===null?o=k:h.next=k,h=b;var H=e.alternate;H!==null&&(H=H.updateQueue,y=H.lastBaseUpdate,y!==h&&(y===null?H.firstBaseUpdate=k:y.next=k,H.lastBaseUpdate=b))}if(o!==null){var P=u.baseState;h=0,H=k=b=null,y=o;do{var j=y.lane&-536870913,$=j!==y.lane;if($?(xe&j)===j:(l&j)===j){j!==0&&j===Ml&&(Du=!0),H!==null&&(H=H.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var re=e,pe=y;j=t;var Ze=a;switch(pe.tag){case 1:if(re=pe.payload,typeof re=="function"){P=re.call(Ze,P,j);break e}P=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=pe.payload,j=typeof re=="function"?re.call(Ze,P,j):re,j==null)break e;P=w({},P,j);break e;case 2:Nn=!0}}j=y.callback,j!==null&&(e.flags|=64,$&&(e.flags|=8192),$=u.callbacks,$===null?u.callbacks=[j]:$.push(j))}else $={lane:j,tag:y.tag,payload:y.payload,callback:y.callback,next:null},H===null?(k=H=$,b=P):H=H.next=$,h|=j;if(y=y.next,y===null){if(y=u.shared.pending,y===null)break;$=y,y=$.next,$.next=null,u.lastBaseUpdate=$,u.shared.pending=null}}while(!0);H===null&&(b=P),u.baseState=b,u.firstBaseUpdate=k,u.lastBaseUpdate=H,o===null&&(u.shared.lanes=0),xn|=h,e.lanes=h,e.memoizedState=P}}function Td(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function Ad(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Td(a[e],t)}var ql=E(null),Xs=E(0);function Od(e,t){e=cn,ne(Xs,e),ne(ql,t),cn=e|t.baseLanes}function Uu(){ne(Xs,cn),ne(ql,ql.current)}function ju(){cn=Xs.current,V(ql),V(Xs)}var la=E(null),_a=null;function kn(e){var t=e.alternate;ne(_t,_t.current&1),ne(la,e),_a===null&&(t===null||ql.current!==null||t.memoizedState!==null)&&(_a=e)}function xu(e){ne(_t,_t.current),ne(la,e),_a===null&&(_a=e)}function Nd(e){e.tag===22?(ne(_t,_t.current),ne(la,e),_a===null&&(_a=e)):Dn()}function Dn(){ne(_t,_t.current),ne(la,la.current)}function ia(e){V(la),_a===e&&(_a=null),V(_t)}var _t=E(0);function Qs(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Lo(a)||Go(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tn=0,Ne=null,Je=null,Nt=null,Js=!1,Hl=!1,ol=!1,Is=0,$i=0,Ll=null,Fp=0;function mt(){throw Error(r(321))}function Mu(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!aa(e[a],t[a]))return!1;return!0}function zu(e,t,a,l,u,o){return tn=o,Ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,M.H=e===null||e.memoizedState===null?df:Pu,ol=!1,o=a(l,u),ol=!1,Hl&&(o=Rd(t,a,l,u)),Cd(e),o}function Cd(e){M.H=Li;var t=Je!==null&&Je.next!==null;if(tn=0,Nt=Je=Ne=null,Js=!1,$i=0,Ll=null,t)throw Error(r(300));e===null||Ct||(e=e.dependencies,e!==null&&qs(e)&&(Ct=!0))}function Rd(e,t,a,l){Ne=e;var u=0;do{if(Hl&&(Ll=null),$i=0,Hl=!1,25<=u)throw Error(r(301));if(u+=1,Nt=Je=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}M.H=ff,o=t(a,l)}while(Hl);return o}function ev(){var e=M.H,t=e.useState()[0];return t=typeof t.then=="function"?qi(t):t,e=e.useState()[0],(Je!==null?Je.memoizedState:null)!==e&&(Ne.flags|=1024),t}function Bu(){var e=Is!==0;return Is=0,e}function $u(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function qu(e){if(Js){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Js=!1}tn=0,Nt=Je=Ne=null,Hl=!1,$i=Is=0,Ll=null}function Kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Ne.memoizedState=Nt=e:Nt=Nt.next=e,Nt}function Et(){if(Je===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Je.next;var t=Nt===null?Ne.memoizedState:Nt.next;if(t!==null)Nt=t,Je=e;else{if(e===null)throw Ne.alternate===null?Error(r(467)):Error(r(310));Je=e,e={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Nt===null?Ne.memoizedState=Nt=e:Nt=Nt.next=e}return Nt}function Zs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qi(e){var t=$i;return $i+=1,Ll===null&&(Ll=[]),e=bd(Ll,e,t),t=Ne,(Nt===null?t.memoizedState:Nt.next)===null&&(t=t.alternate,M.H=t===null||t.memoizedState===null?df:Pu),e}function Ps(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return qi(e);if(e.$$typeof===L)return $t(e)}throw Error(r(438,String(e)))}function Hu(e){var t=null,a=Ne.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=Ne.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Zs(),Ne.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=gt;return t.index++,a}function an(e,t){return typeof t=="function"?t(e):t}function Ws(e){var t=Et();return Lu(t,Je,e)}function Lu(e,t,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var u=e.baseQueue,o=l.pending;if(o!==null){if(u!==null){var h=u.next;u.next=o.next,o.next=h}t.baseQueue=u=o,l.pending=null}if(o=e.baseState,u===null)e.memoizedState=o;else{t=u.next;var y=h=null,b=null,k=t,H=!1;do{var P=k.lane&-536870913;if(P!==k.lane?(xe&P)===P:(tn&P)===P){var j=k.revertLane;if(j===0)b!==null&&(b=b.next={lane:0,revertLane:0,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),P===Ml&&(H=!0);else if((tn&j)===j){k=k.next,j===Ml&&(H=!0);continue}else P={lane:0,revertLane:k.revertLane,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},b===null?(y=b=P,h=o):b=b.next=P,Ne.lanes|=j,xn|=j;P=k.action,ol&&a(o,P),o=k.hasEagerState?k.eagerState:a(o,P)}else j={lane:P,revertLane:k.revertLane,gesture:k.gesture,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},b===null?(y=b=j,h=o):b=b.next=j,Ne.lanes|=P,xn|=P;k=k.next}while(k!==null&&k!==t);if(b===null?h=o:b.next=y,!aa(o,e.memoizedState)&&(Ct=!0,H&&(a=zl,a!==null)))throw a;e.memoizedState=o,e.baseState=h,e.baseQueue=b,l.lastRenderedState=o}return u===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Gu(e){var t=Et(),a=t.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,u=a.pending,o=t.memoizedState;if(u!==null){a.pending=null;var h=u=u.next;do o=e(o,h.action),h=h.next;while(h!==u);aa(o,t.memoizedState)||(Ct=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),a.lastRenderedState=o}return[o,l]}function kd(e,t,a){var l=Ne,u=Et(),o=ze;if(o){if(a===void 0)throw Error(r(407));a=a()}else a=t();var h=!aa((Je||u).memoizedState,a);if(h&&(u.memoizedState=a,Ct=!0),u=u.queue,Ku(jd.bind(null,l,u,e),[e]),u.getSnapshot!==t||h||Nt!==null&&Nt.memoizedState.tag&1){if(l.flags|=2048,Gl(9,{destroy:void 0},Ud.bind(null,l,u,a,t),null),We===null)throw Error(r(349));o||(tn&127)!==0||Dd(l,t,a)}return a}function Dd(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Ne.updateQueue,t===null?(t=Zs(),Ne.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Ud(e,t,a,l){t.value=a,t.getSnapshot=l,xd(t)&&Md(e)}function jd(e,t,a){return a(function(){xd(t)&&Md(e)})}function xd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!aa(e,a)}catch{return!0}}function Md(e){var t=el(e,2);t!==null&&Ft(t,e,2)}function Yu(e){var t=Kt();if(typeof e=="function"){var a=e;if(e=a(),ol){Aa(!0);try{a()}finally{Aa(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:an,lastRenderedState:e},t}function zd(e,t,a,l){return e.baseState=a,Lu(e,Je,typeof l=="function"?l:an)}function tv(e,t,a,l,u){if(tr(e))throw Error(r(485));if(e=t.action,e!==null){var o={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){o.listeners.push(h)}};M.T!==null?a(!0):o.isTransition=!1,l(o),a=t.pending,a===null?(o.next=t.pending=o,Bd(t,o)):(o.next=a.next,t.pending=a.next=o)}}function Bd(e,t){var a=t.action,l=t.payload,u=e.state;if(t.isTransition){var o=M.T,h={};M.T=h;try{var y=a(u,l),b=M.S;b!==null&&b(h,y),$d(e,t,y)}catch(k){Vu(e,t,k)}finally{o!==null&&h.types!==null&&(o.types=h.types),M.T=o}}else try{o=a(u,l),$d(e,t,o)}catch(k){Vu(e,t,k)}}function $d(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){qd(e,t,l)},function(l){return Vu(e,t,l)}):qd(e,t,a)}function qd(e,t,a){t.status="fulfilled",t.value=a,Hd(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Bd(e,a)))}function Vu(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,Hd(t),t=t.next;while(t!==l)}e.action=null}function Hd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ld(e,t){return t}function Gd(e,t){if(ze){var a=We.formState;if(a!==null){e:{var l=Ne;if(ze){if(it){t:{for(var u=it,o=ba;u.nodeType!==8;){if(!o){u=null;break t}if(u=Ea(u.nextSibling),u===null){u=null;break t}}o=u.data,u=o==="F!"||o==="F"?u:null}if(u){it=Ea(u.nextSibling),l=u.data==="F!";break e}}An(l)}l=!1}l&&(t=a[0])}}return a=Kt(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ld,lastRenderedState:t},a.queue=l,a=uf.bind(null,Ne,l),l.dispatch=a,l=Yu(!1),o=Zu.bind(null,Ne,!1,l.queue),l=Kt(),u={state:t,dispatch:null,action:e,pending:null},l.queue=u,a=tv.bind(null,Ne,u,o,a),u.dispatch=a,l.memoizedState=e,[t,a,!1]}function Yd(e){var t=Et();return Vd(t,Je,e)}function Vd(e,t,a){if(t=Lu(e,t,Ld)[0],e=Ws(an)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=qi(t)}catch(h){throw h===Bl?Gs:h}else l=t;t=Et();var u=t.queue,o=u.dispatch;return a!==t.memoizedState&&(Ne.flags|=2048,Gl(9,{destroy:void 0},av.bind(null,u,a),null)),[l,o,e]}function av(e,t){e.action=t}function Kd(e){var t=Et(),a=Je;if(a!==null)return Vd(t,a,e);Et(),t=t.memoizedState,a=Et();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function Gl(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=Ne.updateQueue,t===null&&(t=Zs(),Ne.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function Xd(){return Et().memoizedState}function Fs(e,t,a,l){var u=Kt();Ne.flags|=e,u.memoizedState=Gl(1|t,{destroy:void 0},a,l===void 0?null:l)}function er(e,t,a,l){var u=Et();l=l===void 0?null:l;var o=u.memoizedState.inst;Je!==null&&l!==null&&Mu(l,Je.memoizedState.deps)?u.memoizedState=Gl(t,o,a,l):(Ne.flags|=e,u.memoizedState=Gl(1|t,o,a,l))}function Qd(e,t){Fs(8390656,8,e,t)}function Ku(e,t){er(2048,8,e,t)}function nv(e){Ne.flags|=4;var t=Ne.updateQueue;if(t===null)t=Zs(),Ne.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Jd(e){var t=Et().memoizedState;return nv({ref:t,nextImpl:e}),function(){if((Le&2)!==0)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function Id(e,t){return er(4,2,e,t)}function Zd(e,t){return er(4,4,e,t)}function Pd(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Wd(e,t,a){a=a!=null?a.concat([e]):null,er(4,4,Pd.bind(null,t,e),a)}function Xu(){}function Fd(e,t){var a=Et();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&Mu(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function ef(e,t){var a=Et();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&Mu(t,l[1]))return l[0];if(l=e(),ol){Aa(!0);try{e()}finally{Aa(!1)}}return a.memoizedState=[l,t],l}function Qu(e,t,a){return a===void 0||(tn&1073741824)!==0&&(xe&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=ah(),Ne.lanes|=e,xn|=e,a)}function tf(e,t,a,l){return aa(a,t)?a:ql.current!==null?(e=Qu(e,a,l),aa(e,t)||(Ct=!0),e):(tn&42)===0||(tn&1073741824)!==0&&(xe&261930)===0?(Ct=!0,e.memoizedState=a):(e=ah(),Ne.lanes|=e,xn|=e,t)}function af(e,t,a,l,u){var o=ae.p;ae.p=o!==0&&8>o?o:8;var h=M.T,y={};M.T=y,Zu(e,!1,t,a);try{var b=u(),k=M.S;if(k!==null&&k(y,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var H=Wp(b,l);Hi(e,t,H,ua(e))}else Hi(e,t,l,ua(e))}catch(P){Hi(e,t,{then:function(){},status:"rejected",reason:P},ua())}finally{ae.p=o,h!==null&&y.types!==null&&(h.types=y.types),M.T=h}}function lv(){}function Ju(e,t,a,l){if(e.tag!==5)throw Error(r(476));var u=nf(e).queue;af(e,u,t,Y,a===null?lv:function(){return lf(e),a(l)})}function nf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:an,lastRenderedState:Y},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:an,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function lf(e){var t=nf(e);t.next===null&&(t=e.alternate.memoizedState),Hi(e,t.next.queue,{},ua())}function Iu(){return $t(ns)}function sf(){return Et().memoizedState}function rf(){return Et().memoizedState}function iv(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=ua();e=Cn(a);var l=Rn(t,e,a);l!==null&&(Ft(l,t,a),Mi(l,t,a)),t={cache:Tu()},e.payload=t;return}t=t.return}}function sv(e,t,a){var l=ua();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},tr(e)?of(t,a):(a=hu(e,t,a,l),a!==null&&(Ft(a,e,l),cf(a,t,l)))}function uf(e,t,a){var l=ua();Hi(e,t,a,l)}function Hi(e,t,a,l){var u={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(tr(e))of(t,u);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var h=t.lastRenderedState,y=o(h,a);if(u.hasEagerState=!0,u.eagerState=y,aa(y,h))return Ms(e,t,u,0),We===null&&xs(),!1}catch{}if(a=hu(e,t,u,l),a!==null)return Ft(a,e,l),cf(a,t,l),!0}return!1}function Zu(e,t,a,l){if(l={lane:2,revertLane:Ro(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},tr(e)){if(t)throw Error(r(479))}else t=hu(e,a,l,2),t!==null&&Ft(t,e,2)}function tr(e){var t=e.alternate;return e===Ne||t!==null&&t===Ne}function of(e,t){Hl=Js=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function cf(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Oa(e,a)}}var Li={readContext:$t,use:Ps,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};Li.useEffectEvent=mt;var df={readContext:$t,use:Ps,useCallback:function(e,t){return Kt().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:Qd,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Fs(4194308,4,Pd.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Fs(4194308,4,e,t)},useInsertionEffect:function(e,t){Fs(4,2,e,t)},useMemo:function(e,t){var a=Kt();t=t===void 0?null:t;var l=e();if(ol){Aa(!0);try{e()}finally{Aa(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=Kt();if(a!==void 0){var u=a(t);if(ol){Aa(!0);try{a(t)}finally{Aa(!1)}}}else u=t;return l.memoizedState=l.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},l.queue=e,e=e.dispatch=sv.bind(null,Ne,e),[l.memoizedState,e]},useRef:function(e){var t=Kt();return e={current:e},t.memoizedState=e},useState:function(e){e=Yu(e);var t=e.queue,a=uf.bind(null,Ne,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Xu,useDeferredValue:function(e,t){var a=Kt();return Qu(a,e,t)},useTransition:function(){var e=Yu(!1);return e=af.bind(null,Ne,e.queue,!0,!1),Kt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=Ne,u=Kt();if(ze){if(a===void 0)throw Error(r(407));a=a()}else{if(a=t(),We===null)throw Error(r(349));(xe&127)!==0||Dd(l,t,a)}u.memoizedState=a;var o={value:a,getSnapshot:t};return u.queue=o,Qd(jd.bind(null,l,o,e),[e]),l.flags|=2048,Gl(9,{destroy:void 0},Ud.bind(null,l,o,a,t),null),a},useId:function(){var e=Kt(),t=We.identifierPrefix;if(ze){var a=$a,l=Ba;a=(l&~(1<<32-Mt(l)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Is++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Fp++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Iu,useFormState:Gd,useActionState:Gd,useOptimistic:function(e){var t=Kt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Zu.bind(null,Ne,!0,a),a.dispatch=t,[e,t]},useMemoCache:Hu,useCacheRefresh:function(){return Kt().memoizedState=iv.bind(null,Ne)},useEffectEvent:function(e){var t=Kt(),a={impl:e};return t.memoizedState=a,function(){if((Le&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Pu={readContext:$t,use:Ps,useCallback:Fd,useContext:$t,useEffect:Ku,useImperativeHandle:Wd,useInsertionEffect:Id,useLayoutEffect:Zd,useMemo:ef,useReducer:Ws,useRef:Xd,useState:function(){return Ws(an)},useDebugValue:Xu,useDeferredValue:function(e,t){var a=Et();return tf(a,Je.memoizedState,e,t)},useTransition:function(){var e=Ws(an)[0],t=Et().memoizedState;return[typeof e=="boolean"?e:qi(e),t]},useSyncExternalStore:kd,useId:sf,useHostTransitionStatus:Iu,useFormState:Yd,useActionState:Yd,useOptimistic:function(e,t){var a=Et();return zd(a,Je,e,t)},useMemoCache:Hu,useCacheRefresh:rf};Pu.useEffectEvent=Jd;var ff={readContext:$t,use:Ps,useCallback:Fd,useContext:$t,useEffect:Ku,useImperativeHandle:Wd,useInsertionEffect:Id,useLayoutEffect:Zd,useMemo:ef,useReducer:Gu,useRef:Xd,useState:function(){return Gu(an)},useDebugValue:Xu,useDeferredValue:function(e,t){var a=Et();return Je===null?Qu(a,e,t):tf(a,Je.memoizedState,e,t)},useTransition:function(){var e=Gu(an)[0],t=Et().memoizedState;return[typeof e=="boolean"?e:qi(e),t]},useSyncExternalStore:kd,useId:sf,useHostTransitionStatus:Iu,useFormState:Kd,useActionState:Kd,useOptimistic:function(e,t){var a=Et();return Je!==null?zd(a,Je,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Hu,useCacheRefresh:rf};ff.useEffectEvent=Jd;function Wu(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:w({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Fu={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=ua(),u=Cn(l);u.payload=t,a!=null&&(u.callback=a),t=Rn(e,u,l),t!==null&&(Ft(t,e,l),Mi(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=ua(),u=Cn(l);u.tag=1,u.payload=t,a!=null&&(u.callback=a),t=Rn(e,u,l),t!==null&&(Ft(t,e,l),Mi(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=ua(),l=Cn(a);l.tag=2,t!=null&&(l.callback=t),t=Rn(e,l,a),t!==null&&(Ft(t,e,a),Mi(t,e,a))}};function hf(e,t,a,l,u,o,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,o,h):t.prototype&&t.prototype.isPureReactComponent?!Ni(a,l)||!Ni(u,o):!0}function mf(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&Fu.enqueueReplaceState(t,t.state,null)}function cl(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=w({},a));for(var u in e)a[u]===void 0&&(a[u]=e[u])}return a}function pf(e){js(e)}function vf(e){console.error(e)}function gf(e){js(e)}function ar(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function yf(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function eo(e,t,a){return a=Cn(a),a.tag=3,a.payload={element:null},a.callback=function(){ar(e,t)},a}function bf(e){return e=Cn(e),e.tag=3,e}function _f(e,t,a,l){var u=a.type.getDerivedStateFromError;if(typeof u=="function"){var o=l.value;e.payload=function(){return u(o)},e.callback=function(){yf(t,a,l)}}var h=a.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){yf(t,a,l),typeof u!="function"&&(Mn===null?Mn=new Set([this]):Mn.add(this));var y=l.stack;this.componentDidCatch(l.value,{componentStack:y!==null?y:""})})}function rv(e,t,a,l,u){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&xl(t,a,u,!0),a=la.current,a!==null){switch(a.tag){case 31:case 13:return _a===null?mr():a.alternate===null&&pt===0&&(pt=3),a.flags&=-257,a.flags|=65536,a.lanes=u,l===Ys?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),Oo(e,l,u)),!1;case 22:return a.flags|=65536,l===Ys?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),Oo(e,l,u)),!1}throw Error(r(435,a.tag))}return Oo(e,l,u),mr(),!1}if(ze)return t=la.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,l!==bu&&(e=Error(r(422),{cause:l}),ki(va(e,a)))):(l!==bu&&(t=Error(r(423),{cause:l}),ki(va(t,a))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,l=va(l,a),u=eo(e.stateNode,l,u),ku(e,u),pt!==4&&(pt=2)),!1;var o=Error(r(520),{cause:l});if(o=va(o,a),Ii===null?Ii=[o]:Ii.push(o),pt!==4&&(pt=2),t===null)return!0;l=va(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=u&-u,a.lanes|=e,e=eo(a.stateNode,l,e),ku(a,e),!1;case 1:if(t=a.type,o=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(Mn===null||!Mn.has(o))))return a.flags|=65536,u&=-u,a.lanes|=u,u=bf(u),_f(u,e,a,l),ku(a,u),!1}a=a.return}while(a!==null);return!1}var to=Error(r(461)),Ct=!1;function qt(e,t,a,l){t.child=e===null?Sd(t,null,a,l):ul(t,e.child,a,l)}function Ef(e,t,a,l,u){a=a.render;var o=t.ref;if("ref"in l){var h={};for(var y in l)y!=="ref"&&(h[y]=l[y])}else h=l;return ll(t),l=zu(e,t,a,h,o,u),y=Bu(),e!==null&&!Ct?($u(e,t,u),nn(e,t,u)):(ze&&y&&gu(t),t.flags|=1,qt(e,t,l,u),t.child)}function wf(e,t,a,l,u){if(e===null){var o=a.type;return typeof o=="function"&&!mu(o)&&o.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=o,Sf(e,t,o,l,u)):(e=Bs(a.type,null,l,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!oo(e,u)){var h=o.memoizedProps;if(a=a.compare,a=a!==null?a:Ni,a(h,l)&&e.ref===t.ref)return nn(e,t,u)}return t.flags|=1,e=Pa(o,l),e.ref=t.ref,e.return=t,t.child=e}function Sf(e,t,a,l,u){if(e!==null){var o=e.memoizedProps;if(Ni(o,l)&&e.ref===t.ref)if(Ct=!1,t.pendingProps=l=o,oo(e,u))(e.flags&131072)!==0&&(Ct=!0);else return t.lanes=e.lanes,nn(e,t,u)}return ao(e,t,a,l,u)}function Tf(e,t,a,l){var u=l.children,o=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(o=o!==null?o.baseLanes|a:a,e!==null){for(l=t.child=e.child,u=0;l!==null;)u=u|l.lanes|l.childLanes,l=l.sibling;l=u&~o}else l=0,t.child=null;return Af(e,t,o,a,l)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ls(t,o!==null?o.cachePool:null),o!==null?Od(t,o):Uu(),Nd(t);else return l=t.lanes=536870912,Af(e,t,o!==null?o.baseLanes|a:a,a,l)}else o!==null?(Ls(t,o.cachePool),Od(t,o),Dn(),t.memoizedState=null):(e!==null&&Ls(t,null),Uu(),Dn());return qt(e,t,u,a),t.child}function Gi(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Af(e,t,a,l,u){var o=Ou();return o=o===null?null:{parent:Ot._currentValue,pool:o},t.memoizedState={baseLanes:a,cachePool:o},e!==null&&Ls(t,null),Uu(),Nd(t),e!==null&&xl(e,t,l,!0),t.childLanes=u,null}function nr(e,t){return t=ir({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Of(e,t,a){return ul(t,e.child,null,a),e=nr(t,t.pendingProps),e.flags|=2,ia(t),t.memoizedState=null,e}function uv(e,t,a){var l=t.pendingProps,u=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ze){if(l.mode==="hidden")return e=nr(t,l),t.lanes=536870912,Gi(null,e);if(xu(t),(e=it)?(e=$h(e,ba),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Sn!==null?{id:Ba,overflow:$a}:null,retryLane:536870912,hydrationErrors:null},a=ud(e),a.return=t,t.child=a,Bt=t,it=null)):e=null,e===null)throw An(t);return t.lanes=536870912,null}return nr(t,l)}var o=e.memoizedState;if(o!==null){var h=o.dehydrated;if(xu(t),u)if(t.flags&256)t.flags&=-257,t=Of(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(r(558));else if(Ct||xl(e,t,a,!1),u=(a&e.childLanes)!==0,Ct||u){if(l=We,l!==null&&(h=Va(l,a),h!==0&&h!==o.retryLane))throw o.retryLane=h,el(e,h),Ft(l,e,h),to;mr(),t=Of(e,t,a)}else e=o.treeContext,it=Ea(h.nextSibling),Bt=t,ze=!0,Tn=null,ba=!1,e!==null&&dd(t,e),t=nr(t,l),t.flags|=4096;return t}return e=Pa(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function lr(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function ao(e,t,a,l,u){return ll(t),a=zu(e,t,a,l,void 0,u),l=Bu(),e!==null&&!Ct?($u(e,t,u),nn(e,t,u)):(ze&&l&&gu(t),t.flags|=1,qt(e,t,a,u),t.child)}function Nf(e,t,a,l,u,o){return ll(t),t.updateQueue=null,a=Rd(t,l,a,u),Cd(e),l=Bu(),e!==null&&!Ct?($u(e,t,o),nn(e,t,o)):(ze&&l&&gu(t),t.flags|=1,qt(e,t,a,o),t.child)}function Cf(e,t,a,l,u){if(ll(t),t.stateNode===null){var o=kl,h=a.contextType;typeof h=="object"&&h!==null&&(o=$t(h)),o=new a(l,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Fu,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=l,o.state=t.memoizedState,o.refs={},Cu(t),h=a.contextType,o.context=typeof h=="object"&&h!==null?$t(h):kl,o.state=t.memoizedState,h=a.getDerivedStateFromProps,typeof h=="function"&&(Wu(t,a,h,l),o.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(h=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),h!==o.state&&Fu.enqueueReplaceState(o,o.state,null),Bi(t,l,o,u),zi(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){o=t.stateNode;var y=t.memoizedProps,b=cl(a,y);o.props=b;var k=o.context,H=a.contextType;h=kl,typeof H=="object"&&H!==null&&(h=$t(H));var P=a.getDerivedStateFromProps;H=typeof P=="function"||typeof o.getSnapshotBeforeUpdate=="function",y=t.pendingProps!==y,H||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(y||k!==h)&&mf(t,o,l,h),Nn=!1;var j=t.memoizedState;o.state=j,Bi(t,l,o,u),zi(),k=t.memoizedState,y||j!==k||Nn?(typeof P=="function"&&(Wu(t,a,P,l),k=t.memoizedState),(b=Nn||hf(t,a,b,l,j,k,h))?(H||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=k),o.props=l,o.state=k,o.context=h,l=b):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{o=t.stateNode,Ru(e,t),h=t.memoizedProps,H=cl(a,h),o.props=H,P=t.pendingProps,j=o.context,k=a.contextType,b=kl,typeof k=="object"&&k!==null&&(b=$t(k)),y=a.getDerivedStateFromProps,(k=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(h!==P||j!==b)&&mf(t,o,l,b),Nn=!1,j=t.memoizedState,o.state=j,Bi(t,l,o,u),zi();var $=t.memoizedState;h!==P||j!==$||Nn||e!==null&&e.dependencies!==null&&qs(e.dependencies)?(typeof y=="function"&&(Wu(t,a,y,l),$=t.memoizedState),(H=Nn||hf(t,a,H,l,j,$,b)||e!==null&&e.dependencies!==null&&qs(e.dependencies))?(k||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(l,$,b),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(l,$,b)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||h===e.memoizedProps&&j===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&j===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=$),o.props=l,o.state=$,o.context=b,l=H):(typeof o.componentDidUpdate!="function"||h===e.memoizedProps&&j===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&j===e.memoizedState||(t.flags|=1024),l=!1)}return o=l,lr(e,t),l=(t.flags&128)!==0,o||l?(o=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&l?(t.child=ul(t,e.child,null,u),t.child=ul(t,null,a,u)):qt(e,t,a,u),t.memoizedState=o.state,e=t.child):e=nn(e,t,u),e}function Rf(e,t,a,l){return al(),t.flags|=256,qt(e,t,a,l),t.child}var no={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lo(e){return{baseLanes:e,cachePool:gd()}}function io(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=ra),e}function kf(e,t,a){var l=t.pendingProps,u=!1,o=(t.flags&128)!==0,h;if((h=o)||(h=e!==null&&e.memoizedState===null?!1:(_t.current&2)!==0),h&&(u=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(ze){if(u?kn(t):Dn(),(e=it)?(e=$h(e,ba),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Sn!==null?{id:Ba,overflow:$a}:null,retryLane:536870912,hydrationErrors:null},a=ud(e),a.return=t,t.child=a,Bt=t,it=null)):e=null,e===null)throw An(t);return Go(e)?t.lanes=32:t.lanes=536870912,null}var y=l.children;return l=l.fallback,u?(Dn(),u=t.mode,y=ir({mode:"hidden",children:y},u),l=tl(l,u,a,null),y.return=t,l.return=t,y.sibling=l,t.child=y,l=t.child,l.memoizedState=lo(a),l.childLanes=io(e,h,a),t.memoizedState=no,Gi(null,l)):(kn(t),so(t,y))}var b=e.memoizedState;if(b!==null&&(y=b.dehydrated,y!==null)){if(o)t.flags&256?(kn(t),t.flags&=-257,t=ro(e,t,a)):t.memoizedState!==null?(Dn(),t.child=e.child,t.flags|=128,t=null):(Dn(),y=l.fallback,u=t.mode,l=ir({mode:"visible",children:l.children},u),y=tl(y,u,a,null),y.flags|=2,l.return=t,y.return=t,l.sibling=y,t.child=l,ul(t,e.child,null,a),l=t.child,l.memoizedState=lo(a),l.childLanes=io(e,h,a),t.memoizedState=no,t=Gi(null,l));else if(kn(t),Go(y)){if(h=y.nextSibling&&y.nextSibling.dataset,h)var k=h.dgst;h=k,l=Error(r(419)),l.stack="",l.digest=h,ki({value:l,source:null,stack:null}),t=ro(e,t,a)}else if(Ct||xl(e,t,a,!1),h=(a&e.childLanes)!==0,Ct||h){if(h=We,h!==null&&(l=Va(h,a),l!==0&&l!==b.retryLane))throw b.retryLane=l,el(e,l),Ft(h,e,l),to;Lo(y)||mr(),t=ro(e,t,a)}else Lo(y)?(t.flags|=192,t.child=e.child,t=null):(e=b.treeContext,it=Ea(y.nextSibling),Bt=t,ze=!0,Tn=null,ba=!1,e!==null&&dd(t,e),t=so(t,l.children),t.flags|=4096);return t}return u?(Dn(),y=l.fallback,u=t.mode,b=e.child,k=b.sibling,l=Pa(b,{mode:"hidden",children:l.children}),l.subtreeFlags=b.subtreeFlags&65011712,k!==null?y=Pa(k,y):(y=tl(y,u,a,null),y.flags|=2),y.return=t,l.return=t,l.sibling=y,t.child=l,Gi(null,l),l=t.child,y=e.child.memoizedState,y===null?y=lo(a):(u=y.cachePool,u!==null?(b=Ot._currentValue,u=u.parent!==b?{parent:b,pool:b}:u):u=gd(),y={baseLanes:y.baseLanes|a,cachePool:u}),l.memoizedState=y,l.childLanes=io(e,h,a),t.memoizedState=no,Gi(e.child,l)):(kn(t),a=e.child,e=a.sibling,a=Pa(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=a,t.memoizedState=null,a)}function so(e,t){return t=ir({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ir(e,t){return e=na(22,e,null,t),e.lanes=0,e}function ro(e,t,a){return ul(t,e.child,null,a),e=so(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Df(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),wu(e.return,t,a)}function uo(e,t,a,l,u,o){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:u,treeForkCount:o}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=a,h.tailMode=u,h.treeForkCount=o)}function Uf(e,t,a){var l=t.pendingProps,u=l.revealOrder,o=l.tail;l=l.children;var h=_t.current,y=(h&2)!==0;if(y?(h=h&1|2,t.flags|=128):h&=1,ne(_t,h),qt(e,t,l,a),l=ze?Ri:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Df(e,a,t);else if(e.tag===19)Df(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(a=t.child,u=null;a!==null;)e=a.alternate,e!==null&&Qs(e)===null&&(u=a),a=a.sibling;a=u,a===null?(u=t.child,t.child=null):(u=a.sibling,a.sibling=null),uo(t,!1,u,a,o,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&Qs(e)===null){t.child=u;break}e=u.sibling,u.sibling=a,a=u,u=e}uo(t,!0,a,null,o,l);break;case"together":uo(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function nn(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),xn|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(xl(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,a=Pa(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Pa(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function oo(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&qs(e)))}function ov(e,t,a){switch(t.tag){case 3:St(t,t.stateNode.containerInfo),On(t,Ot,e.memoizedState.cache),al();break;case 27:case 5:ja(t);break;case 4:St(t,t.stateNode.containerInfo);break;case 10:On(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,xu(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(kn(t),t.flags|=128,null):(a&t.child.childLanes)!==0?kf(e,t,a):(kn(t),e=nn(e,t,a),e!==null?e.sibling:null);kn(t);break;case 19:var u=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(xl(e,t,a,!1),l=(a&t.childLanes)!==0),u){if(l)return Uf(e,t,a);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),ne(_t,_t.current),l)break;return null;case 22:return t.lanes=0,Tf(e,t,a,t.pendingProps);case 24:On(t,Ot,e.memoizedState.cache)}return nn(e,t,a)}function jf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ct=!0;else{if(!oo(e,a)&&(t.flags&128)===0)return Ct=!1,ov(e,t,a);Ct=(e.flags&131072)!==0}else Ct=!1,ze&&(t.flags&1048576)!==0&&cd(t,Ri,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=sl(t.elementType),t.type=e,typeof e=="function")mu(e)?(l=cl(e,l),t.tag=1,t=Cf(null,t,e,l,a)):(t.tag=0,t=ao(null,t,e,l,a));else{if(e!=null){var u=e.$$typeof;if(u===se){t.tag=11,t=Ef(null,t,e,l,a);break e}else if(u===te){t.tag=14,t=wf(null,t,e,l,a);break e}}throw t=wt(e)||e,Error(r(306,t,""))}}return t;case 0:return ao(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,u=cl(l,t.pendingProps),Cf(e,t,l,u,a);case 3:e:{if(St(t,t.stateNode.containerInfo),e===null)throw Error(r(387));l=t.pendingProps;var o=t.memoizedState;u=o.element,Ru(e,t),Bi(t,l,null,a);var h=t.memoizedState;if(l=h.cache,On(t,Ot,l),l!==o.cache&&Su(t,[Ot],a,!0),zi(),l=h.element,o.isDehydrated)if(o={element:l,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=Rf(e,t,l,a);break e}else if(l!==u){u=va(Error(r(424)),t),ki(u),t=Rf(e,t,l,a);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,it=Ea(e.firstChild),Bt=t,ze=!0,Tn=null,ba=!0,a=Sd(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(al(),l===u){t=nn(e,t,a);break e}qt(e,t,l,a)}t=t.child}return t;case 26:return lr(e,t),e===null?(a=Vh(t.type,null,t.pendingProps,null))?t.memoizedState=a:ze||(a=t.type,e=t.pendingProps,l=Er(Ae.current).createElement(a),l[Dt]=t,l[Yt]=e,Ht(l,a,e),At(l),t.stateNode=l):t.memoizedState=Vh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ja(t),e===null&&ze&&(l=t.stateNode=Lh(t.type,t.pendingProps,Ae.current),Bt=t,ba=!0,u=it,qn(t.type)?(Yo=u,it=Ea(l.firstChild)):it=u),qt(e,t,t.pendingProps.children,a),lr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ze&&((u=l=it)&&(l=qv(l,t.type,t.pendingProps,ba),l!==null?(t.stateNode=l,Bt=t,it=Ea(l.firstChild),ba=!1,u=!0):u=!1),u||An(t)),ja(t),u=t.type,o=t.pendingProps,h=e!==null?e.memoizedProps:null,l=o.children,$o(u,o)?l=null:h!==null&&$o(u,h)&&(t.flags|=32),t.memoizedState!==null&&(u=zu(e,t,ev,null,null,a),ns._currentValue=u),lr(e,t),qt(e,t,l,a),t.child;case 6:return e===null&&ze&&((e=a=it)&&(a=Hv(a,t.pendingProps,ba),a!==null?(t.stateNode=a,Bt=t,it=null,e=!0):e=!1),e||An(t)),null;case 13:return kf(e,t,a);case 4:return St(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=ul(t,null,l,a):qt(e,t,l,a),t.child;case 11:return Ef(e,t,t.type,t.pendingProps,a);case 7:return qt(e,t,t.pendingProps,a),t.child;case 8:return qt(e,t,t.pendingProps.children,a),t.child;case 12:return qt(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,On(t,t.type,l.value),qt(e,t,l.children,a),t.child;case 9:return u=t.type._context,l=t.pendingProps.children,ll(t),u=$t(u),l=l(u),t.flags|=1,qt(e,t,l,a),t.child;case 14:return wf(e,t,t.type,t.pendingProps,a);case 15:return Sf(e,t,t.type,t.pendingProps,a);case 19:return Uf(e,t,a);case 31:return uv(e,t,a);case 22:return Tf(e,t,a,t.pendingProps);case 24:return ll(t),l=$t(Ot),e===null?(u=Ou(),u===null&&(u=We,o=Tu(),u.pooledCache=o,o.refCount++,o!==null&&(u.pooledCacheLanes|=a),u=o),t.memoizedState={parent:l,cache:u},Cu(t),On(t,Ot,u)):((e.lanes&a)!==0&&(Ru(e,t),Bi(t,null,null,a),zi()),u=e.memoizedState,o=t.memoizedState,u.parent!==l?(u={parent:l,cache:l},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),On(t,Ot,l)):(l=o.cache,On(t,Ot,l),l!==u.cache&&Su(t,[Ot],a,!0))),qt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function ln(e){e.flags|=4}function co(e,t,a,l,u){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(sh())e.flags|=8192;else throw rl=Ys,Nu}else e.flags&=-16777217}function xf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ih(t))if(sh())e.flags|=8192;else throw rl=Ys,Nu}function sr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?bs():536870912,e.lanes|=t,Xl|=t)}function Yi(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var u=e.child;u!==null;)a|=u.lanes|u.childLanes,l|=u.subtreeFlags&65011712,l|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)a|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function cv(e,t,a){var l=t.pendingProps;switch(yu(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return st(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),en(Ot),Fe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(jl(t)?ln(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,_u())),st(t),null;case 26:var u=t.type,o=t.memoizedState;return e===null?(ln(t),o!==null?(st(t),xf(t,o)):(st(t),co(t,u,null,l,a))):o?o!==e.memoizedState?(ln(t),st(t),xf(t,o)):(st(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&ln(t),st(t),co(t,u,e,l,a)),null;case 27:if(La(t),a=Ae.current,u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ln(t);else{if(!l){if(t.stateNode===null)throw Error(r(166));return st(t),null}e=ie.current,jl(t)?fd(t):(e=Lh(u,l,a),t.stateNode=e,ln(t))}return st(t),null;case 5:if(La(t),u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ln(t);else{if(!l){if(t.stateNode===null)throw Error(r(166));return st(t),null}if(o=ie.current,jl(t))fd(t);else{var h=Er(Ae.current);switch(o){case 1:o=h.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:o=h.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":o=h.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":o=h.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":o=h.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?o.multiple=!0:l.size&&(o.size=l.size);break;default:o=typeof l.is=="string"?h.createElement(u,{is:l.is}):h.createElement(u)}}o[Dt]=t,o[Yt]=l;e:for(h=t.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}t.stateNode=o;e:switch(Ht(o,u,l),u){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ln(t)}}return st(t),co(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&ln(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(r(166));if(e=Ae.current,jl(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,u=Bt,u!==null)switch(u.tag){case 27:case 5:l=u.memoizedProps}e[Dt]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||kh(e.nodeValue,a)),e||An(t,!0)}else e=Er(e).createTextNode(l),e[Dt]=t,t.stateNode=e}return st(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(l=jl(t),a!==null){if(e===null){if(!l)throw Error(r(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[Dt]=t}else al(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),e=!1}else a=_u(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(ia(t),t):(ia(t),null);if((t.flags&128)!==0)throw Error(r(558))}return st(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=jl(t),l!==null&&l.dehydrated!==null){if(e===null){if(!u)throw Error(r(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));u[Dt]=t}else al(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),u=!1}else u=_u(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(ia(t),t):(ia(t),null)}return ia(t),(t.flags&128)!==0?(t.lanes=a,t):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=t.child,u=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(u=l.alternate.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==u&&(l.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),sr(t,t.updateQueue),st(t),null);case 4:return Fe(),e===null&&jo(t.stateNode.containerInfo),st(t),null;case 10:return en(t.type),st(t),null;case 19:if(V(_t),l=t.memoizedState,l===null)return st(t),null;if(u=(t.flags&128)!==0,o=l.rendering,o===null)if(u)Yi(l,!1);else{if(pt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=Qs(e),o!==null){for(t.flags|=128,Yi(l,!1),e=o.updateQueue,t.updateQueue=e,sr(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)rd(a,e),a=a.sibling;return ne(_t,_t.current&1|2),ze&&Wa(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Qe()>dr&&(t.flags|=128,u=!0,Yi(l,!1),t.lanes=4194304)}else{if(!u)if(e=Qs(o),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,sr(t,e),Yi(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!ze)return st(t),null}else 2*Qe()-l.renderingStartTime>dr&&a!==536870912&&(t.flags|=128,u=!0,Yi(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(e=l.last,e!==null?e.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Qe(),e.sibling=null,a=_t.current,ne(_t,u?a&1|2:a&1),ze&&Wa(t,l.treeForkCount),e):(st(t),null);case 22:case 23:return ia(t),ju(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),a=t.updateQueue,a!==null&&sr(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&V(il),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),en(Ot),st(t),null;case 25:return null;case 30:return null}throw Error(r(156,t.tag))}function dv(e,t){switch(yu(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return en(Ot),Fe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return La(t),null;case 31:if(t.memoizedState!==null){if(ia(t),t.alternate===null)throw Error(r(340));al()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(ia(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));al()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return V(_t),null;case 4:return Fe(),null;case 10:return en(t.type),null;case 22:case 23:return ia(t),ju(),e!==null&&V(il),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return en(Ot),null;case 25:return null;default:return null}}function Mf(e,t){switch(yu(t),t.tag){case 3:en(Ot),Fe();break;case 26:case 27:case 5:La(t);break;case 4:Fe();break;case 31:t.memoizedState!==null&&ia(t);break;case 13:ia(t);break;case 19:V(_t);break;case 10:en(t.type);break;case 22:case 23:ia(t),ju(),e!==null&&V(il);break;case 24:en(Ot)}}function Vi(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var u=l.next;a=u;do{if((a.tag&e)===e){l=void 0;var o=a.create,h=a.inst;l=o(),h.destroy=l}a=a.next}while(a!==u)}}catch(y){Ke(t,t.return,y)}}function Un(e,t,a){try{var l=t.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var o=u.next;l=o;do{if((l.tag&e)===e){var h=l.inst,y=h.destroy;if(y!==void 0){h.destroy=void 0,u=t;var b=a,k=y;try{k()}catch(H){Ke(u,b,H)}}}l=l.next}while(l!==o)}}catch(H){Ke(t,t.return,H)}}function zf(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Ad(t,a)}catch(l){Ke(e,e.return,l)}}}function Bf(e,t,a){a.props=cl(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Ke(e,t,l)}}function Ki(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(u){Ke(e,t,u)}}function qa(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(u){Ke(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(u){Ke(e,t,u)}else a.current=null}function $f(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(u){Ke(e,e.return,u)}}function fo(e,t,a){try{var l=e.stateNode;jv(l,e.type,a,t),l[Yt]=t}catch(u){Ke(e,e.return,u)}}function qf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&qn(e.type)||e.tag===4}function ho(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&qn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mo(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Ia));else if(l!==4&&(l===27&&qn(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(mo(e,t,a),e=e.sibling;e!==null;)mo(e,t,a),e=e.sibling}function rr(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&qn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(rr(e,t,a),e=e.sibling;e!==null;)rr(e,t,a),e=e.sibling}function Hf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);Ht(t,l,a),t[Dt]=e,t[Yt]=a}catch(o){Ke(e,e.return,o)}}var sn=!1,Rt=!1,po=!1,Lf=typeof WeakSet=="function"?WeakSet:Set,zt=null;function fv(e,t){if(e=e.containerInfo,zo=Cr,e=Wc(e),ru(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var u=l.anchorOffset,o=l.focusNode;l=l.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var h=0,y=-1,b=-1,k=0,H=0,P=e,j=null;t:for(;;){for(var $;P!==a||u!==0&&P.nodeType!==3||(y=h+u),P!==o||l!==0&&P.nodeType!==3||(b=h+l),P.nodeType===3&&(h+=P.nodeValue.length),($=P.firstChild)!==null;)j=P,P=$;for(;;){if(P===e)break t;if(j===a&&++k===u&&(y=h),j===o&&++H===l&&(b=h),($=P.nextSibling)!==null)break;P=j,j=P.parentNode}P=$}a=y===-1||b===-1?null:{start:y,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(Bo={focusedElem:e,selectionRange:a},Cr=!1,zt=t;zt!==null;)if(t=zt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,zt=e;else for(;zt!==null;){switch(t=zt,o=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)u=e[a],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&o!==null){e=void 0,a=t,u=o.memoizedProps,o=o.memoizedState,l=a.stateNode;try{var re=cl(a.type,u);e=l.getSnapshotBeforeUpdate(re,o),l.__reactInternalSnapshotBeforeUpdate=e}catch(pe){Ke(a,a.return,pe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Ho(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ho(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=t.sibling,e!==null){e.return=t.return,zt=e;break}zt=t.return}}function Gf(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:un(e,a),l&4&&Vi(5,a);break;case 1:if(un(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(h){Ke(a,a.return,h)}else{var u=cl(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){Ke(a,a.return,h)}}l&64&&zf(a),l&512&&Ki(a,a.return);break;case 3:if(un(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Ad(e,t)}catch(h){Ke(a,a.return,h)}}break;case 27:t===null&&l&4&&Hf(a);case 26:case 5:un(e,a),t===null&&l&4&&$f(a),l&512&&Ki(a,a.return);break;case 12:un(e,a);break;case 31:un(e,a),l&4&&Kf(e,a);break;case 13:un(e,a),l&4&&Xf(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Ev.bind(null,a),Lv(e,a))));break;case 22:if(l=a.memoizedState!==null||sn,!l){t=t!==null&&t.memoizedState!==null||Rt,u=sn;var o=Rt;sn=l,(Rt=t)&&!o?on(e,a,(a.subtreeFlags&8772)!==0):un(e,a),sn=u,Rt=o}break;case 30:break;default:un(e,a)}}function Yf(e){var t=e.alternate;t!==null&&(e.alternate=null,Yf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&bi(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var rt=null,It=!1;function rn(e,t,a){for(a=a.child;a!==null;)Vf(e,t,a),a=a.sibling}function Vf(e,t,a){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(Xt,a)}catch{}switch(a.tag){case 26:Rt||qa(a,t),rn(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Rt||qa(a,t);var l=rt,u=It;qn(a.type)&&(rt=a.stateNode,It=!1),rn(e,t,a),es(a.stateNode),rt=l,It=u;break;case 5:Rt||qa(a,t);case 6:if(l=rt,u=It,rt=null,rn(e,t,a),rt=l,It=u,rt!==null)if(It)try{(rt.nodeType===9?rt.body:rt.nodeName==="HTML"?rt.ownerDocument.body:rt).removeChild(a.stateNode)}catch(o){Ke(a,t,o)}else try{rt.removeChild(a.stateNode)}catch(o){Ke(a,t,o)}break;case 18:rt!==null&&(It?(e=rt,zh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),ei(e)):zh(rt,a.stateNode));break;case 4:l=rt,u=It,rt=a.stateNode.containerInfo,It=!0,rn(e,t,a),rt=l,It=u;break;case 0:case 11:case 14:case 15:Un(2,a,t),Rt||Un(4,a,t),rn(e,t,a);break;case 1:Rt||(qa(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Bf(a,t,l)),rn(e,t,a);break;case 21:rn(e,t,a);break;case 22:Rt=(l=Rt)||a.memoizedState!==null,rn(e,t,a),Rt=l;break;default:rn(e,t,a)}}function Kf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ei(e)}catch(a){Ke(t,t.return,a)}}}function Xf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ei(e)}catch(a){Ke(t,t.return,a)}}function hv(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Lf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Lf),t;default:throw Error(r(435,e.tag))}}function ur(e,t){var a=hv(e);t.forEach(function(l){if(!a.has(l)){a.add(l);var u=wv.bind(null,e,l);l.then(u,u)}})}function Zt(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var u=a[l],o=e,h=t,y=h;e:for(;y!==null;){switch(y.tag){case 27:if(qn(y.type)){rt=y.stateNode,It=!1;break e}break;case 5:rt=y.stateNode,It=!1;break e;case 3:case 4:rt=y.stateNode.containerInfo,It=!0;break e}y=y.return}if(rt===null)throw Error(r(160));Vf(o,h,u),rt=null,It=!1,o=u.alternate,o!==null&&(o.return=null),u.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Qf(t,e),t=t.sibling}var Ca=null;function Qf(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Zt(t,e),Pt(e),l&4&&(Un(3,e,e.return),Vi(3,e),Un(5,e,e.return));break;case 1:Zt(t,e),Pt(e),l&512&&(Rt||a===null||qa(a,a.return)),l&64&&sn&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var u=Ca;if(Zt(t,e),Pt(e),l&512&&(Rt||a===null||qa(a,a.return)),l&4){var o=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,u=u.ownerDocument||u;t:switch(l){case"title":o=u.getElementsByTagName("title")[0],(!o||o[yn]||o[Dt]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=u.createElement(l),u.head.insertBefore(o,u.querySelector("head > title"))),Ht(o,l,a),o[Dt]=e,At(o),l=o;break e;case"link":var h=Qh("link","href",u).get(l+(a.href||""));if(h){for(var y=0;y<h.length;y++)if(o=h[y],o.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&o.getAttribute("rel")===(a.rel==null?null:a.rel)&&o.getAttribute("title")===(a.title==null?null:a.title)&&o.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){h.splice(y,1);break t}}o=u.createElement(l),Ht(o,l,a),u.head.appendChild(o);break;case"meta":if(h=Qh("meta","content",u).get(l+(a.content||""))){for(y=0;y<h.length;y++)if(o=h[y],o.getAttribute("content")===(a.content==null?null:""+a.content)&&o.getAttribute("name")===(a.name==null?null:a.name)&&o.getAttribute("property")===(a.property==null?null:a.property)&&o.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&o.getAttribute("charset")===(a.charSet==null?null:a.charSet)){h.splice(y,1);break t}}o=u.createElement(l),Ht(o,l,a),u.head.appendChild(o);break;default:throw Error(r(468,l))}o[Dt]=e,At(o),l=o}e.stateNode=l}else Jh(u,e.type,e.stateNode);else e.stateNode=Xh(u,l,e.memoizedProps);else o!==l?(o===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):o.count--,l===null?Jh(u,e.type,e.stateNode):Xh(u,l,e.memoizedProps)):l===null&&e.stateNode!==null&&fo(e,e.memoizedProps,a.memoizedProps)}break;case 27:Zt(t,e),Pt(e),l&512&&(Rt||a===null||qa(a,a.return)),a!==null&&l&4&&fo(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Zt(t,e),Pt(e),l&512&&(Rt||a===null||qa(a,a.return)),e.flags&32){u=e.stateNode;try{we(u,"")}catch(re){Ke(e,e.return,re)}}l&4&&e.stateNode!=null&&(u=e.memoizedProps,fo(e,u,a!==null?a.memoizedProps:u)),l&1024&&(po=!0);break;case 6:if(Zt(t,e),Pt(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(re){Ke(e,e.return,re)}}break;case 3:if(Tr=null,u=Ca,Ca=wr(t.containerInfo),Zt(t,e),Ca=u,Pt(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ei(t.containerInfo)}catch(re){Ke(e,e.return,re)}po&&(po=!1,Jf(e));break;case 4:l=Ca,Ca=wr(e.stateNode.containerInfo),Zt(t,e),Pt(e),Ca=l;break;case 12:Zt(t,e),Pt(e);break;case 31:Zt(t,e),Pt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ur(e,l)));break;case 13:Zt(t,e),Pt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(cr=Qe()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ur(e,l)));break;case 22:u=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,k=sn,H=Rt;if(sn=k||u,Rt=H||b,Zt(t,e),Rt=H,sn=k,Pt(e),l&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(a===null||b||sn||Rt||dl(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){b=a=t;try{if(o=b.stateNode,u)h=o.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{y=b.stateNode;var P=b.memoizedProps.style,j=P!=null&&P.hasOwnProperty("display")?P.display:null;y.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(re){Ke(b,b.return,re)}}}else if(t.tag===6){if(a===null){b=t;try{b.stateNode.nodeValue=u?"":b.memoizedProps}catch(re){Ke(b,b.return,re)}}}else if(t.tag===18){if(a===null){b=t;try{var $=b.stateNode;u?Bh($,!0):Bh(b.stateNode,!1)}catch(re){Ke(b,b.return,re)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ur(e,a))));break;case 19:Zt(t,e),Pt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ur(e,l)));break;case 30:break;case 21:break;default:Zt(t,e),Pt(e)}}function Pt(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(qf(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var u=a.stateNode,o=ho(e);rr(e,o,u);break;case 5:var h=a.stateNode;a.flags&32&&(we(h,""),a.flags&=-33);var y=ho(e);rr(e,y,h);break;case 3:case 4:var b=a.stateNode.containerInfo,k=ho(e);mo(e,k,b);break;default:throw Error(r(161))}}catch(H){Ke(e,e.return,H)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Jf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Jf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function un(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Gf(e,t.alternate,t),t=t.sibling}function dl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Un(4,t,t.return),dl(t);break;case 1:qa(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Bf(t,t.return,a),dl(t);break;case 27:es(t.stateNode);case 26:case 5:qa(t,t.return),dl(t);break;case 22:t.memoizedState===null&&dl(t);break;case 30:dl(t);break;default:dl(t)}e=e.sibling}}function on(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,u=e,o=t,h=o.flags;switch(o.tag){case 0:case 11:case 15:on(u,o,a),Vi(4,o);break;case 1:if(on(u,o,a),l=o,u=l.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(k){Ke(l,l.return,k)}if(l=o,u=l.updateQueue,u!==null){var y=l.stateNode;try{var b=u.shared.hiddenCallbacks;if(b!==null)for(u.shared.hiddenCallbacks=null,u=0;u<b.length;u++)Td(b[u],y)}catch(k){Ke(l,l.return,k)}}a&&h&64&&zf(o),Ki(o,o.return);break;case 27:Hf(o);case 26:case 5:on(u,o,a),a&&l===null&&h&4&&$f(o),Ki(o,o.return);break;case 12:on(u,o,a);break;case 31:on(u,o,a),a&&h&4&&Kf(u,o);break;case 13:on(u,o,a),a&&h&4&&Xf(u,o);break;case 22:o.memoizedState===null&&on(u,o,a),Ki(o,o.return);break;case 30:break;default:on(u,o,a)}t=t.sibling}}function vo(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Di(a))}function go(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Di(e))}function Ra(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)If(e,t,a,l),t=t.sibling}function If(e,t,a,l){var u=t.flags;switch(t.tag){case 0:case 11:case 15:Ra(e,t,a,l),u&2048&&Vi(9,t);break;case 1:Ra(e,t,a,l);break;case 3:Ra(e,t,a,l),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Di(e)));break;case 12:if(u&2048){Ra(e,t,a,l),e=t.stateNode;try{var o=t.memoizedProps,h=o.id,y=o.onPostCommit;typeof y=="function"&&y(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){Ke(t,t.return,b)}}else Ra(e,t,a,l);break;case 31:Ra(e,t,a,l);break;case 13:Ra(e,t,a,l);break;case 23:break;case 22:o=t.stateNode,h=t.alternate,t.memoizedState!==null?o._visibility&2?Ra(e,t,a,l):Xi(e,t):o._visibility&2?Ra(e,t,a,l):(o._visibility|=2,Yl(e,t,a,l,(t.subtreeFlags&10256)!==0||!1)),u&2048&&vo(h,t);break;case 24:Ra(e,t,a,l),u&2048&&go(t.alternate,t);break;default:Ra(e,t,a,l)}}function Yl(e,t,a,l,u){for(u=u&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var o=e,h=t,y=a,b=l,k=h.flags;switch(h.tag){case 0:case 11:case 15:Yl(o,h,y,b,u),Vi(8,h);break;case 23:break;case 22:var H=h.stateNode;h.memoizedState!==null?H._visibility&2?Yl(o,h,y,b,u):Xi(o,h):(H._visibility|=2,Yl(o,h,y,b,u)),u&&k&2048&&vo(h.alternate,h);break;case 24:Yl(o,h,y,b,u),u&&k&2048&&go(h.alternate,h);break;default:Yl(o,h,y,b,u)}t=t.sibling}}function Xi(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,u=l.flags;switch(l.tag){case 22:Xi(a,l),u&2048&&vo(l.alternate,l);break;case 24:Xi(a,l),u&2048&&go(l.alternate,l);break;default:Xi(a,l)}t=t.sibling}}var Qi=8192;function Vl(e,t,a){if(e.subtreeFlags&Qi)for(e=e.child;e!==null;)Zf(e,t,a),e=e.sibling}function Zf(e,t,a){switch(e.tag){case 26:Vl(e,t,a),e.flags&Qi&&e.memoizedState!==null&&Fv(a,Ca,e.memoizedState,e.memoizedProps);break;case 5:Vl(e,t,a);break;case 3:case 4:var l=Ca;Ca=wr(e.stateNode.containerInfo),Vl(e,t,a),Ca=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Qi,Qi=16777216,Vl(e,t,a),Qi=l):Vl(e,t,a));break;default:Vl(e,t,a)}}function Pf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ji(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];zt=l,Ff(l,e)}Pf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Wf(e),e=e.sibling}function Wf(e){switch(e.tag){case 0:case 11:case 15:Ji(e),e.flags&2048&&Un(9,e,e.return);break;case 3:Ji(e);break;case 12:Ji(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,or(e)):Ji(e);break;default:Ji(e)}}function or(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];zt=l,Ff(l,e)}Pf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Un(8,t,t.return),or(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,or(t));break;default:or(t)}e=e.sibling}}function Ff(e,t){for(;zt!==null;){var a=zt;switch(a.tag){case 0:case 11:case 15:Un(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Di(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,zt=l;else e:for(a=e;zt!==null;){l=zt;var u=l.sibling,o=l.return;if(Yf(l),l===a){zt=null;break e}if(u!==null){u.return=o,zt=u;break e}zt=o}}}var mv={getCacheForType:function(e){var t=$t(Ot),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return $t(Ot).controller.signal}},pv=typeof WeakMap=="function"?WeakMap:Map,Le=0,We=null,Ue=null,xe=0,Ve=0,sa=null,jn=!1,Kl=!1,yo=!1,cn=0,pt=0,xn=0,fl=0,bo=0,ra=0,Xl=0,Ii=null,Wt=null,_o=!1,cr=0,eh=0,dr=1/0,fr=null,Mn=null,Ut=0,zn=null,Ql=null,dn=0,Eo=0,wo=null,th=null,Zi=0,So=null;function ua(){return(Le&2)!==0&&xe!==0?xe&-xe:M.T!==null?Ro():_s()}function ah(){if(ra===0)if((xe&536870912)===0||ze){var e=xa;xa<<=1,(xa&3932160)===0&&(xa=262144),ra=e}else ra=536870912;return e=la.current,e!==null&&(e.flags|=32),ra}function Ft(e,t,a){(e===We&&(Ve===2||Ve===9)||e.cancelPendingCommit!==null)&&(Jl(e,0),Bn(e,xe,ra,!1)),Jn(e,a),((Le&2)===0||e!==We)&&(e===We&&((Le&2)===0&&(fl|=a),pt===4&&Bn(e,xe,ra,!1)),Ha(e))}function nh(e,t,a){if((Le&6)!==0)throw Error(r(327));var l=!a&&(t&127)===0&&(t&e.expiredLanes)===0||vn(e,t),u=l?yv(e,t):Ao(e,t,!0),o=l;do{if(u===0){Kl&&!l&&Bn(e,t,0,!1);break}else{if(a=e.current.alternate,o&&!vv(a)){u=Ao(e,t,!1),o=!1;continue}if(u===2){if(o=t,e.errorRecoveryDisabledLanes&o)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var y=e;u=Ii;var b=y.current.memoizedState.isDehydrated;if(b&&(Jl(y,h).flags|=256),h=Ao(y,h,!1),h!==2){if(yo&&!b){y.errorRecoveryDisabledLanes|=o,fl|=o,u=4;break e}o=Wt,Wt=u,o!==null&&(Wt===null?Wt=o:Wt.push.apply(Wt,o))}u=h}if(o=!1,u!==2)continue}}if(u===1){Jl(e,0),Bn(e,t,0,!0);break}e:{switch(l=e,o=u,o){case 0:case 1:throw Error(r(345));case 4:if((t&4194048)!==t)break;case 6:Bn(l,t,ra,!jn);break e;case 2:Wt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((t&62914560)===t&&(u=cr+300-Qe(),10<u)){if(Bn(l,t,ra,!jn),Qn(l,0,!0)!==0)break e;dn=t,l.timeoutHandle=xh(lh.bind(null,l,a,Wt,fr,_o,t,ra,fl,Xl,jn,o,"Throttled",-0,0),u);break e}lh(l,a,Wt,fr,_o,t,ra,fl,Xl,jn,o,null,-0,0)}}break}while(!0);Ha(e)}function lh(e,t,a,l,u,o,h,y,b,k,H,P,j,$){if(e.timeoutHandle=-1,P=t.subtreeFlags,P&8192||(P&16785408)===16785408){P={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ia},Zf(t,o,P);var re=(o&62914560)===o?cr-Qe():(o&4194048)===o?eh-Qe():0;if(re=eg(P,re),re!==null){dn=o,e.cancelPendingCommit=re(fh.bind(null,e,t,o,a,l,u,h,y,b,H,P,null,j,$)),Bn(e,o,h,!k);return}}fh(e,t,o,a,l,u,h,y,b)}function vv(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var u=a[l],o=u.getSnapshot;u=u.value;try{if(!aa(o(),u))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bn(e,t,a,l){t&=~bo,t&=~fl,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var u=t;0<u;){var o=31-Mt(u),h=1<<o;l[o]=-1,u&=~h}a!==0&&pi(e,a,t)}function hr(){return(Le&6)===0?(Pi(0),!1):!0}function To(){if(Ue!==null){if(Ve===0)var e=Ue.return;else e=Ue,Fa=nl=null,qu(e),$l=null,ji=0,e=Ue;for(;e!==null;)Mf(e.alternate,e),e=e.return;Ue=null}}function Jl(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,zv(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),dn=0,To(),We=e,Ue=a=Pa(e.current,null),xe=t,Ve=0,sa=null,jn=!1,Kl=vn(e,t),yo=!1,Xl=ra=bo=fl=xn=pt=0,Wt=Ii=null,_o=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var u=31-Mt(l),o=1<<u;t|=e[u],l&=~o}return cn=t,xs(),a}function ih(e,t){Ne=null,M.H=Li,t===Bl||t===Gs?(t=_d(),Ve=3):t===Nu?(t=_d(),Ve=4):Ve=t===to?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,sa=t,Ue===null&&(pt=1,ar(e,va(t,e.current)))}function sh(){var e=la.current;return e===null?!0:(xe&4194048)===xe?_a===null:(xe&62914560)===xe||(xe&536870912)!==0?e===_a:!1}function rh(){var e=M.H;return M.H=Li,e===null?Li:e}function uh(){var e=M.A;return M.A=mv,e}function mr(){pt=4,jn||(xe&4194048)!==xe&&la.current!==null||(Kl=!0),(xn&134217727)===0&&(fl&134217727)===0||We===null||Bn(We,xe,ra,!1)}function Ao(e,t,a){var l=Le;Le|=2;var u=rh(),o=uh();(We!==e||xe!==t)&&(fr=null,Jl(e,t)),t=!1;var h=pt;e:do try{if(Ve!==0&&Ue!==null){var y=Ue,b=sa;switch(Ve){case 8:To(),h=6;break e;case 3:case 2:case 9:case 6:la.current===null&&(t=!0);var k=Ve;if(Ve=0,sa=null,Il(e,y,b,k),a&&Kl){h=0;break e}break;default:k=Ve,Ve=0,sa=null,Il(e,y,b,k)}}gv(),h=pt;break}catch(H){ih(e,H)}while(!0);return t&&e.shellSuspendCounter++,Fa=nl=null,Le=l,M.H=u,M.A=o,Ue===null&&(We=null,xe=0,xs()),h}function gv(){for(;Ue!==null;)oh(Ue)}function yv(e,t){var a=Le;Le|=2;var l=rh(),u=uh();We!==e||xe!==t?(fr=null,dr=Qe()+500,Jl(e,t)):Kl=vn(e,t);e:do try{if(Ve!==0&&Ue!==null){t=Ue;var o=sa;t:switch(Ve){case 1:Ve=0,sa=null,Il(e,t,o,1);break;case 2:case 9:if(yd(o)){Ve=0,sa=null,ch(t);break}t=function(){Ve!==2&&Ve!==9||We!==e||(Ve=7),Ha(e)},o.then(t,t);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:yd(o)?(Ve=0,sa=null,ch(t)):(Ve=0,sa=null,Il(e,t,o,7));break;case 5:var h=null;switch(Ue.tag){case 26:h=Ue.memoizedState;case 5:case 27:var y=Ue;if(h?Ih(h):y.stateNode.complete){Ve=0,sa=null;var b=y.sibling;if(b!==null)Ue=b;else{var k=y.return;k!==null?(Ue=k,pr(k)):Ue=null}break t}}Ve=0,sa=null,Il(e,t,o,5);break;case 6:Ve=0,sa=null,Il(e,t,o,6);break;case 8:To(),pt=6;break e;default:throw Error(r(462))}}bv();break}catch(H){ih(e,H)}while(!0);return Fa=nl=null,M.H=l,M.A=u,Le=a,Ue!==null?0:(We=null,xe=0,xs(),pt)}function bv(){for(;Ue!==null&&!Xe();)oh(Ue)}function oh(e){var t=jf(e.alternate,e,cn);e.memoizedProps=e.pendingProps,t===null?pr(e):Ue=t}function ch(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Nf(a,t,t.pendingProps,t.type,void 0,xe);break;case 11:t=Nf(a,t,t.pendingProps,t.type.render,t.ref,xe);break;case 5:qu(t);default:Mf(a,t),t=Ue=rd(t,cn),t=jf(a,t,cn)}e.memoizedProps=e.pendingProps,t===null?pr(e):Ue=t}function Il(e,t,a,l){Fa=nl=null,qu(t),$l=null,ji=0;var u=t.return;try{if(rv(e,u,t,a,xe)){pt=1,ar(e,va(a,e.current)),Ue=null;return}}catch(o){if(u!==null)throw Ue=u,o;pt=1,ar(e,va(a,e.current)),Ue=null;return}t.flags&32768?(ze||l===1?e=!0:Kl||(xe&536870912)!==0?e=!1:(jn=e=!0,(l===2||l===9||l===3||l===6)&&(l=la.current,l!==null&&l.tag===13&&(l.flags|=16384))),dh(t,e)):pr(t)}function pr(e){var t=e;do{if((t.flags&32768)!==0){dh(t,jn);return}e=t.return;var a=cv(t.alternate,t,cn);if(a!==null){Ue=a;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);pt===0&&(pt=5)}function dh(e,t){do{var a=dv(e.alternate,e);if(a!==null){a.flags&=32767,Ue=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Ue=e;return}Ue=e=a}while(e!==null);pt=6,Ue=null}function fh(e,t,a,l,u,o,h,y,b){e.cancelPendingCommit=null;do vr();while(Ut!==0);if((Le&6)!==0)throw Error(r(327));if(t!==null){if(t===e.current)throw Error(r(177));if(o=t.lanes|t.childLanes,o|=fu,El(e,a,o,h,y,b),e===We&&(Ue=We=null,xe=0),Ql=t,zn=e,dn=a,Eo=o,wo=u,th=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Sv(Be,function(){return gh(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=M.T,M.T=null,u=ae.p,ae.p=2,h=Le,Le|=4;try{fv(e,t,a)}finally{Le=h,ae.p=u,M.T=l}}Ut=1,hh(),mh(),ph()}}function hh(){if(Ut===1){Ut=0;var e=zn,t=Ql,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=M.T,M.T=null;var l=ae.p;ae.p=2;var u=Le;Le|=4;try{Qf(t,e);var o=Bo,h=Wc(e.containerInfo),y=o.focusedElem,b=o.selectionRange;if(h!==y&&y&&y.ownerDocument&&Pc(y.ownerDocument.documentElement,y)){if(b!==null&&ru(y)){var k=b.start,H=b.end;if(H===void 0&&(H=k),"selectionStart"in y)y.selectionStart=k,y.selectionEnd=Math.min(H,y.value.length);else{var P=y.ownerDocument||document,j=P&&P.defaultView||window;if(j.getSelection){var $=j.getSelection(),re=y.textContent.length,pe=Math.min(b.start,re),Ze=b.end===void 0?pe:Math.min(b.end,re);!$.extend&&pe>Ze&&(h=Ze,Ze=pe,pe=h);var A=Zc(y,pe),S=Zc(y,Ze);if(A&&S&&($.rangeCount!==1||$.anchorNode!==A.node||$.anchorOffset!==A.offset||$.focusNode!==S.node||$.focusOffset!==S.offset)){var R=P.createRange();R.setStart(A.node,A.offset),$.removeAllRanges(),pe>Ze?($.addRange(R),$.extend(S.node,S.offset)):(R.setEnd(S.node,S.offset),$.addRange(R))}}}}for(P=[],$=y;$=$.parentNode;)$.nodeType===1&&P.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<P.length;y++){var I=P[y];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}Cr=!!zo,Bo=zo=null}finally{Le=u,ae.p=l,M.T=a}}e.current=t,Ut=2}}function mh(){if(Ut===2){Ut=0;var e=zn,t=Ql,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=M.T,M.T=null;var l=ae.p;ae.p=2;var u=Le;Le|=4;try{Gf(e,t.alternate,t)}finally{Le=u,ae.p=l,M.T=a}}Ut=3}}function ph(){if(Ut===4||Ut===3){Ut=0,tt();var e=zn,t=Ql,a=dn,l=th;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ut=5:(Ut=0,Ql=zn=null,vh(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Mn=null),gn(a),t=t.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(Xt,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=M.T,u=ae.p,ae.p=2,M.T=null;try{for(var o=e.onRecoverableError,h=0;h<l.length;h++){var y=l[h];o(y.value,{componentStack:y.stack})}}finally{M.T=t,ae.p=u}}(dn&3)!==0&&vr(),Ha(e),u=e.pendingLanes,(a&261930)!==0&&(u&42)!==0?e===So?Zi++:(Zi=0,So=e):Zi=0,Pi(0)}}function vh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Di(t)))}function vr(){return hh(),mh(),ph(),gh()}function gh(){if(Ut!==5)return!1;var e=zn,t=Eo;Eo=0;var a=gn(dn),l=M.T,u=ae.p;try{ae.p=32>a?32:a,M.T=null,a=wo,wo=null;var o=zn,h=dn;if(Ut=0,Ql=zn=null,dn=0,(Le&6)!==0)throw Error(r(331));var y=Le;if(Le|=4,Wf(o.current),If(o,o.current,h,a),Le=y,Pi(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(Xt,o)}catch{}return!0}finally{ae.p=u,M.T=l,vh(e,t)}}function yh(e,t,a){t=va(a,t),t=eo(e.stateNode,t,2),e=Rn(e,t,2),e!==null&&(Jn(e,2),Ha(e))}function Ke(e,t,a){if(e.tag===3)yh(e,e,a);else for(;t!==null;){if(t.tag===3){yh(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Mn===null||!Mn.has(l))){e=va(a,e),a=bf(2),l=Rn(t,a,2),l!==null&&(_f(a,l,t,e),Jn(l,2),Ha(l));break}}t=t.return}}function Oo(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new pv;var u=new Set;l.set(t,u)}else u=l.get(t),u===void 0&&(u=new Set,l.set(t,u));u.has(a)||(yo=!0,u.add(a),e=_v.bind(null,e,t,a),t.then(e,e))}function _v(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,We===e&&(xe&a)===a&&(pt===4||pt===3&&(xe&62914560)===xe&&300>Qe()-cr?(Le&2)===0&&Jl(e,0):bo|=a,Xl===xe&&(Xl=0)),Ha(e)}function bh(e,t){t===0&&(t=bs()),e=el(e,t),e!==null&&(Jn(e,t),Ha(e))}function Ev(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),bh(e,a)}function wv(e,t){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,u=e.memoizedState;u!==null&&(a=u.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(t),bh(e,a)}function Sv(e,t){return yt(e,t)}var gr=null,Zl=null,No=!1,yr=!1,Co=!1,$n=0;function Ha(e){e!==Zl&&e.next===null&&(Zl===null?gr=Zl=e:Zl=Zl.next=e),yr=!0,No||(No=!0,Av())}function Pi(e,t){if(!Co&&yr){Co=!0;do for(var a=!1,l=gr;l!==null;){if(e!==0){var u=l.pendingLanes;if(u===0)var o=0;else{var h=l.suspendedLanes,y=l.pingedLanes;o=(1<<31-Mt(42|e)+1)-1,o&=u&~(h&~y),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(a=!0,Sh(l,o))}else o=xe,o=Qn(l,l===We?o:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(o&3)===0||vn(l,o)||(a=!0,Sh(l,o));l=l.next}while(a);Co=!1}}function Tv(){_h()}function _h(){yr=No=!1;var e=0;$n!==0&&Mv()&&(e=$n);for(var t=Qe(),a=null,l=gr;l!==null;){var u=l.next,o=Eh(l,t);o===0?(l.next=null,a===null?gr=u:a.next=u,u===null&&(Zl=a)):(a=l,(e!==0||(o&3)!==0)&&(yr=!0)),l=u}Ut!==0&&Ut!==5||Pi(e),$n!==0&&($n=0)}function Eh(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,u=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var h=31-Mt(o),y=1<<h,b=u[h];b===-1?((y&a)===0||(y&l)!==0)&&(u[h]=ys(y,t)):b<=t&&(e.expiredLanes|=y),o&=~y}if(t=We,a=xe,a=Qn(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(Ve===2||Ve===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&bt(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||vn(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&bt(l),gn(a)){case 2:case 8:a=Ga;break;case 32:a=Be;break;case 268435456:a=bl;break;default:a=Be}return l=wh.bind(null,e),a=yt(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&bt(l),e.callbackPriority=2,e.callbackNode=null,2}function wh(e,t){if(Ut!==0&&Ut!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(vr()&&e.callbackNode!==a)return null;var l=xe;return l=Qn(e,e===We?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(nh(e,l,t),Eh(e,Qe()),e.callbackNode!=null&&e.callbackNode===a?wh.bind(null,e):null)}function Sh(e,t){if(vr())return null;nh(e,t,!0)}function Av(){Bv(function(){(Le&6)!==0?yt(ma,Tv):_h()})}function Ro(){if($n===0){var e=Ml;e===0&&(e=Ya,Ya<<=1,(Ya&261888)===0&&(Ya=256)),$n=e}return $n}function Th(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Os(""+e)}function Ah(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Ov(e,t,a,l,u){if(t==="submit"&&a&&a.stateNode===u){var o=Th((u[Yt]||null).action),h=l.submitter;h&&(t=(t=h[Yt]||null)?Th(t.formAction):h.getAttribute("formAction"),t!==null&&(o=t,h=null));var y=new ks("action","action",null,l,u);e.push({event:y,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if($n!==0){var b=h?Ah(u,h):new FormData(u);Ju(a,{pending:!0,data:b,method:u.method,action:o},null,b)}}else typeof o=="function"&&(y.preventDefault(),b=h?Ah(u,h):new FormData(u),Ju(a,{pending:!0,data:b,method:u.method,action:o},o,b))},currentTarget:u}]})}}for(var ko=0;ko<du.length;ko++){var Do=du[ko],Nv=Do.toLowerCase(),Cv=Do[0].toUpperCase()+Do.slice(1);Na(Nv,"on"+Cv)}Na(td,"onAnimationEnd"),Na(ad,"onAnimationIteration"),Na(nd,"onAnimationStart"),Na("dblclick","onDoubleClick"),Na("focusin","onFocus"),Na("focusout","onBlur"),Na(Vp,"onTransitionRun"),Na(Kp,"onTransitionStart"),Na(Xp,"onTransitionCancel"),Na(ld,"onTransitionEnd"),Xa("onMouseEnter",["mouseout","mouseover"]),Xa("onMouseLeave",["mouseout","mouseover"]),Xa("onPointerEnter",["pointerout","pointerover"]),Xa("onPointerLeave",["pointerout","pointerover"]),Ka("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ka("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ka("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ka("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ka("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ka("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wi));function Oh(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],u=l.event;l=l.listeners;e:{var o=void 0;if(t)for(var h=l.length-1;0<=h;h--){var y=l[h],b=y.instance,k=y.currentTarget;if(y=y.listener,b!==o&&u.isPropagationStopped())break e;o=y,u.currentTarget=k;try{o(u)}catch(H){js(H)}u.currentTarget=null,o=b}else for(h=0;h<l.length;h++){if(y=l[h],b=y.instance,k=y.currentTarget,y=y.listener,b!==o&&u.isPropagationStopped())break e;o=y,u.currentTarget=k;try{o(u)}catch(H){js(H)}u.currentTarget=null,o=b}}}}function je(e,t){var a=t[vi];a===void 0&&(a=t[vi]=new Set);var l=e+"__bubble";a.has(l)||(Nh(t,e,2,!1),a.add(l))}function Uo(e,t,a){var l=0;t&&(l|=4),Nh(a,e,l,t)}var br="_reactListening"+Math.random().toString(36).slice(2);function jo(e){if(!e[br]){e[br]=!0,ws.forEach(function(a){a!=="selectionchange"&&(Rv.has(a)||Uo(a,!1,e),Uo(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[br]||(t[br]=!0,Uo("selectionchange",!1,t))}}function Nh(e,t,a,l){switch(am(t)){case 2:var u=ng;break;case 8:u=lg;break;default:u=Jo}a=u.bind(null,t,a,e),u=void 0,!Wr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),l?u!==void 0?e.addEventListener(t,a,{capture:!0,passive:u}):e.addEventListener(t,a,!0):u!==void 0?e.addEventListener(t,a,{passive:u}):e.addEventListener(t,a,!1)}function xo(e,t,a,l,u){var o=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var h=l.tag;if(h===3||h===4){var y=l.stateNode.containerInfo;if(y===u)break;if(h===4)for(h=l.return;h!==null;){var b=h.tag;if((b===3||b===4)&&h.stateNode.containerInfo===u)return;h=h.return}for(;y!==null;){if(h=bn(y),h===null)return;if(b=h.tag,b===5||b===6||b===26||b===27){l=o=h;continue e}y=y.parentNode}}l=l.return}Dc(function(){var k=o,H=Zr(a),P=[];e:{var j=id.get(e);if(j!==void 0){var $=ks,re=e;switch(e){case"keypress":if(Cs(a)===0)break e;case"keydown":case"keyup":$=wp;break;case"focusin":re="focus",$=au;break;case"focusout":re="blur",$=au;break;case"beforeblur":case"afterblur":$=au;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=xc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=cp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=Ap;break;case td:case ad:case nd:$=hp;break;case ld:$=Np;break;case"scroll":case"scrollend":$=up;break;case"wheel":$=Rp;break;case"copy":case"cut":case"paste":$=pp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=zc;break;case"toggle":case"beforetoggle":$=Dp}var pe=(t&4)!==0,Ze=!pe&&(e==="scroll"||e==="scrollend"),A=pe?j!==null?j+"Capture":null:j;pe=[];for(var S=k,R;S!==null;){var I=S;if(R=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||R===null||A===null||(I=_i(S,A),I!=null&&pe.push(Fi(S,I,R))),Ze)break;S=S.return}0<pe.length&&(j=new $(j,re,null,a,H),P.push({event:j,listeners:pe}))}}if((t&7)===0){e:{if(j=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",j&&a!==Ir&&(re=a.relatedTarget||a.fromElement)&&(bn(re)||re[za]))break e;if(($||j)&&(j=H.window===H?H:(j=H.ownerDocument)?j.defaultView||j.parentWindow:window,$?(re=a.relatedTarget||a.toElement,$=k,re=re?bn(re):null,re!==null&&(Ze=d(re),pe=re.tag,re!==Ze||pe!==5&&pe!==27&&pe!==6)&&(re=null)):($=null,re=k),$!==re)){if(pe=xc,I="onMouseLeave",A="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(pe=zc,I="onPointerLeave",A="onPointerEnter",S="pointer"),Ze=$==null?j:In($),R=re==null?j:In(re),j=new pe(I,S+"leave",$,a,H),j.target=Ze,j.relatedTarget=R,I=null,bn(H)===k&&(pe=new pe(A,S+"enter",re,a,H),pe.target=R,pe.relatedTarget=Ze,I=pe),Ze=I,$&&re)t:{for(pe=kv,A=$,S=re,R=0,I=A;I;I=pe(I))R++;I=0;for(var he=S;he;he=pe(he))I++;for(;0<R-I;)A=pe(A),R--;for(;0<I-R;)S=pe(S),I--;for(;R--;){if(A===S||S!==null&&A===S.alternate){pe=A;break t}A=pe(A),S=pe(S)}pe=null}else pe=null;$!==null&&Ch(P,j,$,pe,!1),re!==null&&Ze!==null&&Ch(P,Ze,re,pe,!0)}}e:{if(j=k?In(k):window,$=j.nodeName&&j.nodeName.toLowerCase(),$==="select"||$==="input"&&j.type==="file")var $e=Vc;else if(Gc(j))if(Kc)$e=Lp;else{$e=qp;var oe=$p}else $=j.nodeName,!$||$.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?k&&Ja(k.elementType)&&($e=Vc):$e=Hp;if($e&&($e=$e(e,k))){Yc(P,$e,a,H);break e}oe&&oe(e,j,k),e==="focusout"&&k&&j.type==="number"&&k.memoizedProps.value!=null&&Ye(j,"number",j.value)}switch(oe=k?In(k):window,e){case"focusin":(Gc(oe)||oe.contentEditable==="true")&&(Nl=oe,uu=k,Ci=null);break;case"focusout":Ci=uu=Nl=null;break;case"mousedown":ou=!0;break;case"contextmenu":case"mouseup":case"dragend":ou=!1,Fc(P,a,H);break;case"selectionchange":if(Yp)break;case"keydown":case"keyup":Fc(P,a,H)}var Ce;if(lu)e:{switch(e){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Ol?Hc(e,a)&&(Me="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Me="onCompositionStart");Me&&(Bc&&a.locale!=="ko"&&(Ol||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Ol&&(Ce=Uc()):(wn=H,Fr="value"in wn?wn.value:wn.textContent,Ol=!0)),oe=_r(k,Me),0<oe.length&&(Me=new Mc(Me,e,null,a,H),P.push({event:Me,listeners:oe}),Ce?Me.data=Ce:(Ce=Lc(a),Ce!==null&&(Me.data=Ce)))),(Ce=jp?xp(e,a):Mp(e,a))&&(Me=_r(k,"onBeforeInput"),0<Me.length&&(oe=new Mc("onBeforeInput","beforeinput",null,a,H),P.push({event:oe,listeners:Me}),oe.data=Ce)),Ov(P,e,k,a,H)}Oh(P,t)})}function Fi(e,t,a){return{instance:e,listener:t,currentTarget:a}}function _r(e,t){for(var a=t+"Capture",l=[];e!==null;){var u=e,o=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||o===null||(u=_i(e,a),u!=null&&l.unshift(Fi(e,u,o)),u=_i(e,t),u!=null&&l.push(Fi(e,u,o))),e.tag===3)return l;e=e.return}return[]}function kv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ch(e,t,a,l,u){for(var o=t._reactName,h=[];a!==null&&a!==l;){var y=a,b=y.alternate,k=y.stateNode;if(y=y.tag,b!==null&&b===l)break;y!==5&&y!==26&&y!==27||k===null||(b=k,u?(k=_i(a,o),k!=null&&h.unshift(Fi(a,k,b))):u||(k=_i(a,o),k!=null&&h.push(Fi(a,k,b)))),a=a.return}h.length!==0&&e.push({event:t,listeners:h})}var Dv=/\r\n?/g,Uv=/\u0000|\uFFFD/g;function Rh(e){return(typeof e=="string"?e:""+e).replace(Dv,`
`).replace(Uv,"")}function kh(e,t){return t=Rh(t),Rh(e)===t}function Ie(e,t,a,l,u,o){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||we(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&we(e,""+l);break;case"className":Sl(e,"class",l);break;case"tabIndex":Sl(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Sl(e,a,l);break;case"style":As(e,l,o);break;case"data":if(t!=="object"){Sl(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Os(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(a==="formAction"?(t!=="input"&&Ie(e,t,"name",u.name,u,null),Ie(e,t,"formEncType",u.formEncType,u,null),Ie(e,t,"formMethod",u.formMethod,u,null),Ie(e,t,"formTarget",u.formTarget,u,null)):(Ie(e,t,"encType",u.encType,u,null),Ie(e,t,"method",u.method,u,null),Ie(e,t,"target",u.target,u,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Os(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Ia);break;case"onScroll":l!=null&&je("scroll",e);break;case"onScrollEnd":l!=null&&je("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(u.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Os(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":je("beforetoggle",e),je("toggle",e),wl(e,"popover",l);break;case"xlinkActuate":N(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":N(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":N(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":N(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":N(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":N(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":N(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":N(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":N(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":wl(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=sp.get(a)||a,wl(e,a,l))}}function Mo(e,t,a,l,u,o){switch(a){case"style":As(e,l,o);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(u.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?we(e,l):(typeof l=="number"||typeof l=="bigint")&&we(e,""+l);break;case"onScroll":l!=null&&je("scroll",e);break;case"onScrollEnd":l!=null&&je("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Ia);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ss.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(u=a.endsWith("Capture"),t=a.slice(2,u?a.length-7:void 0),o=e[Yt]||null,o=o!=null?o[a]:null,typeof o=="function"&&e.removeEventListener(t,o,u),typeof l=="function")){typeof o!="function"&&o!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,u);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):wl(e,a,l)}}}function Ht(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",e),je("load",e);var l=!1,u=!1,o;for(o in a)if(a.hasOwnProperty(o)){var h=a[o];if(h!=null)switch(o){case"src":l=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Ie(e,t,o,h,a,null)}}u&&Ie(e,t,"srcSet",a.srcSet,a,null),l&&Ie(e,t,"src",a.src,a,null);return;case"input":je("invalid",e);var y=o=h=u=null,b=null,k=null;for(l in a)if(a.hasOwnProperty(l)){var H=a[l];if(H!=null)switch(l){case"name":u=H;break;case"type":h=H;break;case"checked":b=H;break;case"defaultChecked":k=H;break;case"value":o=H;break;case"defaultValue":y=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,t));break;default:Ie(e,t,l,H,a,null)}}Oe(e,o,y,b,k,h,u,!1);return;case"select":je("invalid",e),l=h=o=null;for(u in a)if(a.hasOwnProperty(u)&&(y=a[u],y!=null))switch(u){case"value":o=y;break;case"defaultValue":h=y;break;case"multiple":l=y;default:Ie(e,t,u,y,a,null)}t=o,a=h,e.multiple=!!l,t!=null?q(e,!!l,t,!1):a!=null&&q(e,!!l,a,!0);return;case"textarea":je("invalid",e),o=u=l=null;for(h in a)if(a.hasOwnProperty(h)&&(y=a[h],y!=null))switch(h){case"value":l=y;break;case"defaultValue":u=y;break;case"children":o=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:Ie(e,t,h,y,a,null)}ht(e,l,u,o);return;case"option":for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null)&&(b==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":Ie(e,t,b,l,a,null));return;case"dialog":je("beforetoggle",e),je("toggle",e),je("cancel",e),je("close",e);break;case"iframe":case"object":je("load",e);break;case"video":case"audio":for(l=0;l<Wi.length;l++)je(Wi[l],e);break;case"image":je("error",e),je("load",e);break;case"details":je("toggle",e);break;case"embed":case"source":case"link":je("error",e),je("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(k in a)if(a.hasOwnProperty(k)&&(l=a[k],l!=null))switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Ie(e,t,k,l,a,null)}return;default:if(Ja(t)){for(H in a)a.hasOwnProperty(H)&&(l=a[H],l!==void 0&&Mo(e,t,H,l,a,void 0));return}}for(y in a)a.hasOwnProperty(y)&&(l=a[y],l!=null&&Ie(e,t,y,l,a,null))}function jv(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,o=null,h=null,y=null,b=null,k=null,H=null;for($ in a){var P=a[$];if(a.hasOwnProperty($)&&P!=null)switch($){case"checked":break;case"value":break;case"defaultValue":b=P;default:l.hasOwnProperty($)||Ie(e,t,$,null,l,P)}}for(var j in l){var $=l[j];if(P=a[j],l.hasOwnProperty(j)&&($!=null||P!=null))switch(j){case"type":o=$;break;case"name":u=$;break;case"checked":k=$;break;case"defaultChecked":H=$;break;case"value":h=$;break;case"defaultValue":y=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,t));break;default:$!==P&&Ie(e,t,j,$,l,P)}}Re(e,h,y,b,k,H,o,u);return;case"select":$=h=y=j=null;for(o in a)if(b=a[o],a.hasOwnProperty(o)&&b!=null)switch(o){case"value":break;case"multiple":$=b;default:l.hasOwnProperty(o)||Ie(e,t,o,null,l,b)}for(u in l)if(o=l[u],b=a[u],l.hasOwnProperty(u)&&(o!=null||b!=null))switch(u){case"value":j=o;break;case"defaultValue":y=o;break;case"multiple":h=o;default:o!==b&&Ie(e,t,u,o,l,b)}t=y,a=h,l=$,j!=null?q(e,!!a,j,!1):!!l!=!!a&&(t!=null?q(e,!!a,t,!0):q(e,!!a,a?[]:"",!1));return;case"textarea":$=j=null;for(y in a)if(u=a[y],a.hasOwnProperty(y)&&u!=null&&!l.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Ie(e,t,y,null,l,u)}for(h in l)if(u=l[h],o=a[h],l.hasOwnProperty(h)&&(u!=null||o!=null))switch(h){case"value":j=u;break;case"defaultValue":$=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(r(91));break;default:u!==o&&Ie(e,t,h,u,l,o)}F(e,j,$);return;case"option":for(var re in a)j=a[re],a.hasOwnProperty(re)&&j!=null&&!l.hasOwnProperty(re)&&(re==="selected"?e.selected=!1:Ie(e,t,re,null,l,j));for(b in l)j=l[b],$=a[b],l.hasOwnProperty(b)&&j!==$&&(j!=null||$!=null)&&(b==="selected"?e.selected=j&&typeof j!="function"&&typeof j!="symbol":Ie(e,t,b,j,l,$));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in a)j=a[pe],a.hasOwnProperty(pe)&&j!=null&&!l.hasOwnProperty(pe)&&Ie(e,t,pe,null,l,j);for(k in l)if(j=l[k],$=a[k],l.hasOwnProperty(k)&&j!==$&&(j!=null||$!=null))switch(k){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(137,t));break;default:Ie(e,t,k,j,l,$)}return;default:if(Ja(t)){for(var Ze in a)j=a[Ze],a.hasOwnProperty(Ze)&&j!==void 0&&!l.hasOwnProperty(Ze)&&Mo(e,t,Ze,void 0,l,j);for(H in l)j=l[H],$=a[H],!l.hasOwnProperty(H)||j===$||j===void 0&&$===void 0||Mo(e,t,H,j,l,$);return}}for(var A in a)j=a[A],a.hasOwnProperty(A)&&j!=null&&!l.hasOwnProperty(A)&&Ie(e,t,A,null,l,j);for(P in l)j=l[P],$=a[P],!l.hasOwnProperty(P)||j===$||j==null&&$==null||Ie(e,t,P,j,l,$)}function Dh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xv(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var u=a[l],o=u.transferSize,h=u.initiatorType,y=u.duration;if(o&&y&&Dh(h)){for(h=0,y=u.responseEnd,l+=1;l<a.length;l++){var b=a[l],k=b.startTime;if(k>y)break;var H=b.transferSize,P=b.initiatorType;H&&Dh(P)&&(b=b.responseEnd,h+=H*(b<y?1:(y-k)/(b-k)))}if(--l,t+=8*(o+h)/(u.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var zo=null,Bo=null;function Er(e){return e.nodeType===9?e:e.ownerDocument}function Uh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function $o(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qo=null;function Mv(){var e=window.event;return e&&e.type==="popstate"?e===qo?!1:(qo=e,!0):(qo=null,!1)}var xh=typeof setTimeout=="function"?setTimeout:void 0,zv=typeof clearTimeout=="function"?clearTimeout:void 0,Mh=typeof Promise=="function"?Promise:void 0,Bv=typeof queueMicrotask=="function"?queueMicrotask:typeof Mh<"u"?function(e){return Mh.resolve(null).then(e).catch($v)}:xh;function $v(e){setTimeout(function(){throw e})}function qn(e){return e==="head"}function zh(e,t){var a=t,l=0;do{var u=a.nextSibling;if(e.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(u),ei(t);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")es(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,es(a);for(var o=a.firstChild;o;){var h=o.nextSibling,y=o.nodeName;o[yn]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&o.rel.toLowerCase()==="stylesheet"||a.removeChild(o),o=h}}else a==="body"&&es(e.ownerDocument.body);a=u}while(a);ei(t)}function Bh(e,t){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function Ho(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ho(a),bi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function qv(e,t,a,l){for(;e.nodeType===1;){var u=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[yn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=Ea(e.nextSibling),e===null)break}return null}function Hv(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ea(e.nextSibling),e===null))return null;return e}function $h(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Ea(e.nextSibling),e===null))return null;return e}function Lo(e){return e.data==="$?"||e.data==="$~"}function Go(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Lv(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Ea(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Yo=null;function qh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Ea(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Hh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Lh(e,t,a){switch(t=Er(a),e){case"html":if(e=t.documentElement,!e)throw Error(r(452));return e;case"head":if(e=t.head,!e)throw Error(r(453));return e;case"body":if(e=t.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function es(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);bi(e)}var wa=new Map,Gh=new Set;function wr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var fn=ae.d;ae.d={f:Gv,r:Yv,D:Vv,C:Kv,L:Xv,m:Qv,X:Iv,S:Jv,M:Zv};function Gv(){var e=fn.f(),t=hr();return e||t}function Yv(e){var t=_n(e);t!==null&&t.tag===5&&t.type==="form"?lf(t):fn.r(e)}var Pl=typeof document>"u"?null:document;function Yh(e,t,a){var l=Pl;if(l&&typeof t=="string"&&t){var u=D(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof a=="string"&&(u+='[crossorigin="'+a+'"]'),Gh.has(u)||(Gh.add(u),e={rel:e,crossOrigin:a,href:t},l.querySelector(u)===null&&(t=l.createElement("link"),Ht(t,"link",e),At(t),l.head.appendChild(t)))}}function Vv(e){fn.D(e),Yh("dns-prefetch",e,null)}function Kv(e,t){fn.C(e,t),Yh("preconnect",e,t)}function Xv(e,t,a){fn.L(e,t,a);var l=Pl;if(l&&e&&t){var u='link[rel="preload"][as="'+D(t)+'"]';t==="image"&&a&&a.imageSrcSet?(u+='[imagesrcset="'+D(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(u+='[imagesizes="'+D(a.imageSizes)+'"]')):u+='[href="'+D(e)+'"]';var o=u;switch(t){case"style":o=Wl(e);break;case"script":o=Fl(e)}wa.has(o)||(e=w({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),wa.set(o,e),l.querySelector(u)!==null||t==="style"&&l.querySelector(ts(o))||t==="script"&&l.querySelector(as(o))||(t=l.createElement("link"),Ht(t,"link",e),At(t),l.head.appendChild(t)))}}function Qv(e,t){fn.m(e,t);var a=Pl;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+D(l)+'"][href="'+D(e)+'"]',o=u;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Fl(e)}if(!wa.has(o)&&(e=w({rel:"modulepreload",href:e},t),wa.set(o,e),a.querySelector(u)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(as(o)))return}l=a.createElement("link"),Ht(l,"link",e),At(l),a.head.appendChild(l)}}}function Jv(e,t,a){fn.S(e,t,a);var l=Pl;if(l&&e){var u=En(l).hoistableStyles,o=Wl(e);t=t||"default";var h=u.get(o);if(!h){var y={loading:0,preload:null};if(h=l.querySelector(ts(o)))y.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},a),(a=wa.get(o))&&Vo(e,a);var b=h=l.createElement("link");At(b),Ht(b,"link",e),b._p=new Promise(function(k,H){b.onload=k,b.onerror=H}),b.addEventListener("load",function(){y.loading|=1}),b.addEventListener("error",function(){y.loading|=2}),y.loading|=4,Sr(h,t,l)}h={type:"stylesheet",instance:h,count:1,state:y},u.set(o,h)}}}function Iv(e,t){fn.X(e,t);var a=Pl;if(a&&e){var l=En(a).hoistableScripts,u=Fl(e),o=l.get(u);o||(o=a.querySelector(as(u)),o||(e=w({src:e,async:!0},t),(t=wa.get(u))&&Ko(e,t),o=a.createElement("script"),At(o),Ht(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(u,o))}}function Zv(e,t){fn.M(e,t);var a=Pl;if(a&&e){var l=En(a).hoistableScripts,u=Fl(e),o=l.get(u);o||(o=a.querySelector(as(u)),o||(e=w({src:e,async:!0,type:"module"},t),(t=wa.get(u))&&Ko(e,t),o=a.createElement("script"),At(o),Ht(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(u,o))}}function Vh(e,t,a,l){var u=(u=Ae.current)?wr(u):null;if(!u)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Wl(a.href),a=En(u).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Wl(a.href);var o=En(u).hoistableStyles,h=o.get(e);if(h||(u=u.ownerDocument||u,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,h),(o=u.querySelector(ts(e)))&&!o._p&&(h.instance=o,h.state.loading=5),wa.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},wa.set(e,a),o||Pv(u,e,a,h.state))),t&&l===null)throw Error(r(528,""));return h}if(t&&l!==null)throw Error(r(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Fl(a),a=En(u).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Wl(e){return'href="'+D(e)+'"'}function ts(e){return'link[rel="stylesheet"]['+e+"]"}function Kh(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function Pv(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Ht(t,"link",a),At(t),e.head.appendChild(t))}function Fl(e){return'[src="'+D(e)+'"]'}function as(e){return"script[async]"+e}function Xh(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+D(a.href)+'"]');if(l)return t.instance=l,At(l),l;var u=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),At(l),Ht(l,"style",u),Sr(l,a.precedence,e),t.instance=l;case"stylesheet":u=Wl(a.href);var o=e.querySelector(ts(u));if(o)return t.state.loading|=4,t.instance=o,At(o),o;l=Kh(a),(u=wa.get(u))&&Vo(l,u),o=(e.ownerDocument||e).createElement("link"),At(o);var h=o;return h._p=new Promise(function(y,b){h.onload=y,h.onerror=b}),Ht(o,"link",l),t.state.loading|=4,Sr(o,a.precedence,e),t.instance=o;case"script":return o=Fl(a.src),(u=e.querySelector(as(o)))?(t.instance=u,At(u),u):(l=a,(u=wa.get(o))&&(l=w({},a),Ko(l,u)),e=e.ownerDocument||e,u=e.createElement("script"),At(u),Ht(u,"link",l),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(r(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Sr(l,a.precedence,e));return t.instance}function Sr(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=l.length?l[l.length-1]:null,o=u,h=0;h<l.length;h++){var y=l[h];if(y.dataset.precedence===t)o=y;else if(o!==u)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Vo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ko(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Tr=null;function Qh(e,t,a){if(Tr===null){var l=new Map,u=Tr=new Map;u.set(a,l)}else u=Tr,l=u.get(a),l||(l=new Map,u.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),u=0;u<a.length;u++){var o=a[u];if(!(o[yn]||o[Dt]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var h=o.getAttribute(t)||"";h=e+h;var y=l.get(h);y?y.push(o):l.set(h,[o])}}return l}function Jh(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Wv(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Ih(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Fv(e,t,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var u=Wl(l.href),o=t.querySelector(ts(u));if(o){t=o._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ar.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=o,At(o);return}o=t.ownerDocument||t,l=Kh(l),(u=wa.get(u))&&Vo(l,u),o=o.createElement("link"),At(o);var h=o;h._p=new Promise(function(y,b){h.onload=y,h.onerror=b}),Ht(o,"link",l),a.instance=o}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Ar.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Xo=0;function eg(e,t){return e.stylesheets&&e.count===0&&Nr(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&Nr(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4+t);0<e.imgBytes&&Xo===0&&(Xo=62500*xv());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Nr(e,e.stylesheets),e.unsuspend)){var o=e.unsuspend;e.unsuspend=null,o()}},(e.imgBytes>Xo?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(u)}}:null}function Ar(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Or=null;function Nr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Or=new Map,t.forEach(tg,e),Or=null,Ar.call(e))}function tg(e,t){if(!(t.state.loading&4)){var a=Or.get(e);if(a)var l=a.get(null);else{a=new Map,Or.set(e,a);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<u.length;o++){var h=u[o];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(a.set(h.dataset.precedence,h),l=h)}l&&a.set(null,l)}u=t.instance,h=u.getAttribute("data-precedence"),o=a.get(h)||l,o===l&&a.set(null,u),a.set(h,u),this.count++,l=Ar.bind(this),u.addEventListener("load",l),u.addEventListener("error",l),o?o.parentNode.insertBefore(u,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var ns={$$typeof:L,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function ag(e,t,a,l,u,o,h,y,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mi(0),this.hiddenUpdates=mi(null),this.identifierPrefix=l,this.onUncaughtError=u,this.onCaughtError=o,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Zh(e,t,a,l,u,o,h,y,b,k,H,P){return e=new ag(e,t,a,h,b,k,H,P,y),t=1,o===!0&&(t|=24),o=na(3,null,null,t),e.current=o,o.stateNode=e,t=Tu(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:l,isDehydrated:a,cache:t},Cu(o),e}function Ph(e){return e?(e=kl,e):kl}function Wh(e,t,a,l,u,o){u=Ph(u),l.context===null?l.context=u:l.pendingContext=u,l=Cn(t),l.payload={element:a},o=o===void 0?null:o,o!==null&&(l.callback=o),a=Rn(e,l,t),a!==null&&(Ft(a,e,t),Mi(a,e,t))}function Fh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Qo(e,t){Fh(e,t),(e=e.alternate)&&Fh(e,t)}function em(e){if(e.tag===13||e.tag===31){var t=el(e,67108864);t!==null&&Ft(t,e,67108864),Qo(e,67108864)}}function tm(e){if(e.tag===13||e.tag===31){var t=ua();t=Qt(t);var a=el(e,t);a!==null&&Ft(a,e,t),Qo(e,t)}}var Cr=!0;function ng(e,t,a,l){var u=M.T;M.T=null;var o=ae.p;try{ae.p=2,Jo(e,t,a,l)}finally{ae.p=o,M.T=u}}function lg(e,t,a,l){var u=M.T;M.T=null;var o=ae.p;try{ae.p=8,Jo(e,t,a,l)}finally{ae.p=o,M.T=u}}function Jo(e,t,a,l){if(Cr){var u=Io(l);if(u===null)xo(e,t,l,Rr,a),nm(e,l);else if(sg(u,e,t,a,l))l.stopPropagation();else if(nm(e,l),t&4&&-1<ig.indexOf(e)){for(;u!==null;){var o=_n(u);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var h=ta(o.pendingLanes);if(h!==0){var y=o;for(y.pendingLanes|=2,y.entangledLanes|=2;h;){var b=1<<31-Mt(h);y.entanglements[1]|=b,h&=~b}Ha(o),(Le&6)===0&&(dr=Qe()+500,Pi(0))}}break;case 31:case 13:y=el(o,2),y!==null&&Ft(y,o,2),hr(),Qo(o,2)}if(o=Io(l),o===null&&xo(e,t,l,Rr,a),o===u)break;u=o}u!==null&&l.stopPropagation()}else xo(e,t,l,null,a)}}function Io(e){return e=Zr(e),Zo(e)}var Rr=null;function Zo(e){if(Rr=null,e=bn(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=m(t),e!==null)return e;e=null}else if(a===31){if(e=p(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Rr=e,null}function am(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ha()){case ma:return 2;case Ga:return 8;case Be:case Ta:return 32;case bl:return 268435456;default:return 32}default:return 32}}var Po=!1,Hn=null,Ln=null,Gn=null,ls=new Map,is=new Map,Yn=[],ig="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nm(e,t){switch(e){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":Gn=null;break;case"pointerover":case"pointerout":ls.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":is.delete(t.pointerId)}}function ss(e,t,a,l,u,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:o,targetContainers:[u]},t!==null&&(t=_n(t),t!==null&&em(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function sg(e,t,a,l,u){switch(t){case"focusin":return Hn=ss(Hn,e,t,a,l,u),!0;case"dragenter":return Ln=ss(Ln,e,t,a,l,u),!0;case"mouseover":return Gn=ss(Gn,e,t,a,l,u),!0;case"pointerover":var o=u.pointerId;return ls.set(o,ss(ls.get(o)||null,e,t,a,l,u)),!0;case"gotpointercapture":return o=u.pointerId,is.set(o,ss(is.get(o)||null,e,t,a,l,u)),!0}return!1}function lm(e){var t=bn(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=m(a),t!==null){e.blockedOn=t,Es(e.priority,function(){tm(a)});return}}else if(t===31){if(t=p(a),t!==null){e.blockedOn=t,Es(e.priority,function(){tm(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function kr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Io(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Ir=l,a.target.dispatchEvent(l),Ir=null}else return t=_n(a),t!==null&&em(t),e.blockedOn=a,!1;t.shift()}return!0}function im(e,t,a){kr(e)&&a.delete(t)}function rg(){Po=!1,Hn!==null&&kr(Hn)&&(Hn=null),Ln!==null&&kr(Ln)&&(Ln=null),Gn!==null&&kr(Gn)&&(Gn=null),ls.forEach(im),is.forEach(im)}function Dr(e,t){e.blockedOn===t&&(e.blockedOn=null,Po||(Po=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,rg)))}var Ur=null;function sm(e){Ur!==e&&(Ur=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ur===e&&(Ur=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],u=e[t+2];if(typeof l!="function"){if(Zo(l||a)===null)continue;break}var o=_n(a);o!==null&&(e.splice(t,3),t-=3,Ju(o,{pending:!0,data:u,method:a.method,action:l},l,u))}}))}function ei(e){function t(b){return Dr(b,e)}Hn!==null&&Dr(Hn,e),Ln!==null&&Dr(Ln,e),Gn!==null&&Dr(Gn,e),ls.forEach(t),is.forEach(t);for(var a=0;a<Yn.length;a++){var l=Yn[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Yn.length&&(a=Yn[0],a.blockedOn===null);)lm(a),a.blockedOn===null&&Yn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var u=a[l],o=a[l+1],h=u[Yt]||null;if(typeof o=="function")h||sm(a);else if(h){var y=null;if(o&&o.hasAttribute("formAction")){if(u=o,h=o[Yt]||null)y=h.formAction;else if(Zo(u)!==null)continue}else y=h.action;typeof y=="function"?a[l+1]=y:(a.splice(l,3),l-=3),sm(a)}}}function rm(){function e(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(h){return u=h})},focusReset:"manual",scroll:"manual"})}function t(){u!==null&&(u(),u=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),u!==null&&(u(),u=null)}}}function Wo(e){this._internalRoot=e}jr.prototype.render=Wo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));var a=t.current,l=ua();Wh(a,l,e,t,null,null)},jr.prototype.unmount=Wo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wh(e.current,2,null,e,null,null),hr(),t[za]=null}};function jr(e){this._internalRoot=e}jr.prototype.unstable_scheduleHydration=function(e){if(e){var t=_s();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Yn.length&&t!==0&&t<Yn[a].priority;a++);Yn.splice(a,0,e),a===0&&lm(e)}};var um=n.version;if(um!=="19.2.3")throw Error(r(527,um,"19.2.3"));ae.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=g(t),e=e!==null?_(e):null,e=e===null?null:e.stateNode,e};var ug={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xr.isDisabled&&xr.supportsFiber)try{Xt=xr.inject(ug),xt=xr}catch{}}return rs.createRoot=function(e,t){if(!c(e))throw Error(r(299));var a=!1,l="",u=pf,o=vf,h=gf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=Zh(e,1,!1,null,null,a,l,null,u,o,h,rm),e[za]=t.current,jo(e),new Wo(t)},rs.hydrateRoot=function(e,t,a){if(!c(e))throw Error(r(299));var l=!1,u="",o=pf,h=vf,y=gf,b=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(h=a.onCaughtError),a.onRecoverableError!==void 0&&(y=a.onRecoverableError),a.formState!==void 0&&(b=a.formState)),t=Zh(e,1,!0,t,a??null,l,u,b,o,h,y,rm),t.context=Ph(null),a=t.current,l=ua(),l=Qt(l),u=Cn(l),u.callback=null,Rn(a,u,l),a=l,t.current.lanes=a,Jn(t,a),Ha(t),e[za]=t.current,jo(e),new jr(t)},rs.version="19.2.3",rs}var vm;function vg(){if(vm)return ec.exports;vm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),ec.exports=pg(),ec.exports}var gg=vg();const yg=Gm(gg),ti=[{id:1,name:"Gojo",maxHp:105,hp:105,maxMana:100,mana:100,attack:24,rarity:"UR",passive:{name:"Six Eyes",description:"Cooldowns reduce 1 turn faster, mana costs reduced by 10%",type:"cooldown-reduction",value:1,manaReduction:.1},abilities:[{id:"gojo-1",name:"Infinity",description:"Become invincible for the next enemy turn",type:"defensive",manaCost:30,cooldown:3,currentCooldown:0},{id:"gojo-2",name:"Red - Reversal",description:"Deals 34 damage to one enemy",type:"attack",damage:34,manaCost:25,cooldown:2,currentCooldown:0},{id:"gojo-3",name:"Blue - Lapse",description:"Deals 22 damage and stuns for 1 turn",type:"attack-stun",damage:22,stunDuration:1,manaCost:35,cooldown:3,currentCooldown:0}],ultimate:{id:"gojo-ult",name:"Hollow Purple",description:"Deals 55 damage to all enemies",type:"attack-all",damage:55,manaCost:75,cooldown:5,currentCooldown:0}},{id:2,name:"Yuji",maxHp:95,hp:95,maxMana:100,mana:100,attack:22,rarity:"SSR",passive:{name:"Vessel Body",description:"Heals 6 HP at the start of each turn",type:"regen",value:6},abilities:[{id:"yuji-1",name:"Divergent Fist",description:"Deals 30 damage to one enemy",type:"attack",damage:30,manaCost:20,cooldown:2,currentCooldown:0},{id:"yuji-2",name:"Manji Kick",description:"Deals 24 damage to one enemy",type:"attack",damage:24,manaCost:15,cooldown:1,currentCooldown:0},{id:"yuji-3",name:"Adrenaline Rush",description:"Boosts own attack by 14 for 2 turns",type:"buff",buffAmount:14,duration:2,manaCost:30,cooldown:3,currentCooldown:0}],ultimate:{id:"yuji-ult",name:"Black Flash",description:"Deals 70 damage to one enemy",type:"attack",damage:70,manaCost:70,cooldown:5,currentCooldown:0}},{id:3,name:"Megumi",maxHp:88,hp:88,maxMana:100,mana:100,attack:19,rarity:"SSR",passive:{name:"Ten Shadows",description:"All attacks deal 10% bonus damage",type:"damage-boost",value:.1},abilities:[{id:"megumi-1",name:"Divine Dogs",description:"Deals 24 damage to one enemy",type:"attack",damage:24,manaCost:20,cooldown:1,currentCooldown:0},{id:"megumi-2",name:"Nue",description:"Deals 20 damage and stuns for 1 turn",type:"attack-stun",damage:20,stunDuration:1,manaCost:35,cooldown:3,currentCooldown:0},{id:"megumi-3",name:"Toad",description:"Heals all allies for 18 HP",type:"heal-all",healAmount:18,manaCost:40,cooldown:3,currentCooldown:0}],ultimate:{id:"megumi-ult",name:"Chimera Shadow Garden",description:"Deals 38 damage to all enemies and heals allies for 22",type:"ultimate-megumi",damage:38,healAmount:22,manaCost:80,cooldown:6,currentCooldown:0}},{id:4,name:"Nobara",maxHp:82,hp:82,maxMana:100,mana:100,attack:21,rarity:"SR",passive:{name:"Resonance",description:"Attacks have a 20% chance to hit twice",type:"double-hit",value:.2},abilities:[{id:"nobara-1",name:"Straw Doll",description:"Deals 24 damage to one enemy",type:"attack",damage:24,manaCost:20,cooldown:1,currentCooldown:0},{id:"nobara-2",name:"Hairpin",description:"Deals 32 damage to one enemy",type:"attack",damage:32,manaCost:30,cooldown:3,currentCooldown:0},{id:"nobara-3",name:"Resonance Link",description:"Marks an enemy to take +14 damage for 2 turns",type:"debuff-mark",extraDamage:14,duration:2,manaCost:35,cooldown:3,currentCooldown:0}],ultimate:{id:"nobara-ult",name:"Black Flash Hairpin",description:"Deals 64 damage to one enemy",type:"attack",damage:64,manaCost:70,cooldown:5,currentCooldown:0}},{id:5,name:"Nanami",maxHp:98,hp:98,maxMana:100,mana:100,attack:25,rarity:"SSR",passive:{name:"Ratio Technique",description:"Attacks deal 20% bonus damage to enemies below 50% HP",type:"execute",value:.2,threshold:.5},abilities:[{id:"nanami-1",name:"Blunted Blade",description:"Deals 26 damage to one enemy",type:"attack",damage:26,manaCost:20,cooldown:1,currentCooldown:0},{id:"nanami-2",name:"Weak Point Strike",description:"Deals 38 damage, +20 if enemy below 50% HP",type:"attack-execute",damage:38,bonusDamage:20,threshold:.5,manaCost:35,cooldown:2,currentCooldown:0},{id:"nanami-3",name:"Overtime",description:"Boosts own attack by 22 but takes 8 damage",type:"buff-self-damage",buffAmount:22,selfDamage:8,duration:3,manaCost:30,cooldown:4,currentCooldown:0}],ultimate:{id:"nanami-ult",name:"Collapse",description:"Deals 85 damage to one enemy",type:"attack",damage:85,manaCost:80,cooldown:6,currentCooldown:0}},{id:6,name:"Jogo",maxHp:78,hp:78,maxMana:100,mana:100,attack:20,rarity:"SR",passive:{name:"Disaster Flame",description:"Attacks burn enemies for 6 damage at turn start",type:"burn",value:6},abilities:[{id:"jogo-1",name:"Ember Insects",description:"Deals 20 damage to one enemy",type:"attack",damage:20,manaCost:15,cooldown:1,currentCooldown:0},{id:"jogo-2",name:"Flame Pillar",description:"Deals 28 damage to one enemy",type:"attack",damage:28,manaCost:25,cooldown:2,currentCooldown:0},{id:"jogo-3",name:"Coffin of the Iron Mountain",description:"Stuns one enemy for 2 turns",type:"stun-only",stunDuration:2,manaCost:45,cooldown:4,currentCooldown:0}],ultimate:{id:"jogo-ult",name:"Maximum Meteor",description:"Deals 62 damage to all enemies",type:"attack-all",damage:62,manaCost:75,cooldown:6,currentCooldown:0}}],bg="/assets/gojo-oQwO0DXj.png",_g={Gojo:bg,Yuji:null,Megumi:null,Nobara:null,Todo:null,Nanami:null,Sukuna:null,Mahito:null,Jogo:null},Eg={"gojo-1":null,"gojo-2":null,"gojo-3":null,"gojo-ult":null,"yuji-1":null,"yuji-2":null,"yuji-3":null,"yuji-ult":null,"megumi-1":null,"megumi-2":null,"megumi-3":null,"megumi-ult":null,"sukuna-1":null,"sukuna-2":null,"sukuna-3":null,"sukuna-ult":null,"mahito-1":null,"mahito-2":null,"mahito-3":null,"mahito-ult":null,"jogo-1":null,"jogo-2":null,"jogo-3":null,"jogo-ult":null,"nobara-1":null,"nobara-2":null,"nobara-3":null,"nobara-ult":null,"todo-1":null,"todo-2":null,"todo-3":null,"todo-ult":null,"nanami-1":null,"nanami-2":null,"nanami-3":null,"nanami-ult":null},qr=s=>_g[s]||null,wg=s=>Eg[s]||null;function Sg({characters:s,selectedTeam:n,onSelect:i,onStartBattle:r,onStartPvpQuick:c,onStartPvpRanked:d,pvpStatus:m,characterProgress:p,teamPresets:v,onSavePreset:g,onApplyPreset:_}){const w=Y=>n.some(fe=>fe.id===Y),O=p||{},U=n.length===3,G=[0,1,2].map(Y=>n[Y]).filter(Boolean),[z,Q]=f.useState(""),[ee,le]=f.useState(s[0]?.id||null),[L,se]=f.useState(!1),[be,J]=f.useState(null),te=s.find(Y=>Y.id===ee)||s[0],me=te?O[te.id]||{level:1,xp:0}:{level:1,xp:0},ke=100+me.level*25;Math.min(100,Math.floor(me.xp/ke*100));const gt=s.filter(Y=>Y.name.toLowerCase().includes(z.toLowerCase())),ct=n.length>=3,Se=te?w(te.id):!1,dt=Y=>{w(Y.id)?i(n.filter(fe=>fe.id!==Y.id)):n.length<3&&i([...n,Y])},wt=(Y,fe)=>{const _e=s.find(ne=>ne.id===fe);if(!_e)return;const E=[...n],V=E.findIndex(ne=>ne.id===_e.id);V>=0&&E.splice(V,1),E.length<3?Y<=E.length?E.splice(Y,0,_e):E.push(_e):Y<3&&(E[Y]=_e),i(E.slice(0,3))},nt=Y=>{switch(Y){case"UR":return"linear-gradient(90deg, #ff6b6b, #feca57)";case"SSR":return"#9b59b6";case"SR":return"#3498db";default:return"#95a5a6"}},M=({character:Y,size:fe="normal"})=>{const _e=qr(Y.name);return f.createElement("div",{className:`select-portrait ${fe}`},_e?f.createElement("img",{src:_e,alt:Y.name,className:"select-portrait-img"}):f.createElement("div",{className:"select-portrait-placeholder"},f.createElement("span",{className:"select-portrait-initial"},Y.name[0])))},ae=te?[...te.abilities.slice(0,3),te.ultimate].filter(Boolean):[];return f.createElement("div",{className:"team-select-container"},f.createElement("div",{className:"team-select-grid"},f.createElement("div",{className:"team-left-column"},f.createElement("section",{className:"character-details-panel"},te?f.createElement(f.Fragment,null,f.createElement("div",{className:"details-header-row"},f.createElement("div",{className:"details-header-left"},f.createElement("div",{className:"details-portrait"},f.createElement(M,{character:te})),f.createElement("div",{className:"details-meta"},f.createElement("h2",null,te.name),f.createElement("div",{className:"details-grade",style:{color:nt(te.rarity)}},te.rarity," Grade"),f.createElement("div",{className:"details-level"},"Lv ",me.level))),f.createElement("div",{className:"details-header-right"},f.createElement("button",{className:"details-primary-btn",onClick:()=>dt(te),disabled:ct&&!Se},Se?" Selected":ct?"Squad Full":"Add to Squad"))),f.createElement("div",{className:"details-passive-line"},f.createElement("span",null,"Passive:")," ",te.passive.name,"  ",te.passive.description),f.createElement("div",{className:"details-skills"},f.createElement("div",{className:"skills-grid"},ae.map(Y=>f.createElement("div",{key:Y.id,className:"skill-card"},f.createElement("span",{className:"skill-icon"},""),f.createElement("span",{className:"skill-name"},Y.name),f.createElement("span",{className:"skill-cost"}," ",Y.manaCost??0,"   ",Y.cooldown),f.createElement("div",{className:"skill-tooltip"},f.createElement("div",{className:"skill-tooltip-title"},Y.name),f.createElement("div",{className:"skill-tooltip-desc"},Y.description),f.createElement("div",{className:"skill-tooltip-meta"},f.createElement("span",null,"Cost: ",Y.manaCost??0),f.createElement("span",null,"Cooldown: ",Y.cooldown),f.createElement("span",null,"Type: ",Y.type||"Ability")))))))):f.createElement("div",{className:"details-empty"},f.createElement("div",{className:"empty-state-icon"},""),f.createElement("div",{className:"empty-state-text"},"Select a character to view details"))),f.createElement("section",{className:"character-roster-panel"},f.createElement("div",{className:"section-header"},f.createElement("h2",null,"Character Roster"),f.createElement("span",{className:"selection-count"},n.length,"/3 Selected")),f.createElement("div",{className:"roster-search-bar"},f.createElement("span",{className:"search-icon"},""),f.createElement("input",{type:"text",value:z,onChange:Y=>Q(Y.target.value),placeholder:"Search sorcerers...",className:"search-input"})),f.createElement("div",{className:"roster-grid-container"},gt.map(Y=>{const fe=O[Y.id]||{level:1};return f.createElement("div",{key:Y.id,className:`roster-character-card ${w(Y.id)?"is-selected":""} ${ee===Y.id?"is-focused":""}`,onClick:()=>le(Y.id),onDoubleClick:()=>dt(Y),draggable:!0,onDragStart:_e=>{_e.dataTransfer.setData("text/plain",String(Y.id))}},w(Y.id)&&f.createElement("div",{className:"card-selected-badge"},""),f.createElement("div",{className:"card-portrait"},f.createElement(M,{character:Y,size:"small"})),f.createElement("div",{className:"card-info"},f.createElement("div",{className:"card-name"},Y.name),f.createElement("div",{className:"card-rarity",style:{color:nt(Y.rarity)}},Y.rarity),f.createElement("div",{className:"card-level"},"Lv ",fe.level)))})))),f.createElement("div",{className:"team-right-column"},f.createElement("section",{className:"squad-panel"},f.createElement("div",{className:"team-panel-header"},f.createElement("h2",null,"Your Squad"),n.length>0&&f.createElement("button",{className:"clear-btn",onClick:()=>i([])},"Clear All")),f.createElement("div",{className:"team-slots team-panel-slots"},[0,1,2].map(Y=>f.createElement("div",{key:Y,className:`team-slot ${n[Y]?"filled":"empty"} ${be===Y?"drag-over":""}`,onDragOver:fe=>fe.preventDefault(),onDragEnter:()=>J(Y),onDragLeave:()=>J(null),onDrop:fe=>{fe.preventDefault();const _e=Number(fe.dataTransfer.getData("text/plain"));wt(Y,_e),J(null)}},n[Y]?f.createElement(f.Fragment,null,f.createElement("button",{className:"slot-remove",onClick:()=>i(n.filter((fe,_e)=>_e!==Y)),title:"Remove"},""),f.createElement("div",{className:"slot-portrait"},f.createElement(M,{character:n[Y]})),f.createElement("div",{className:"slot-info"},f.createElement("div",{className:"slot-name"},n[Y].name),f.createElement("div",{className:"slot-rarity",style:{color:nt(n[Y].rarity)}},n[Y].rarity),f.createElement("div",{className:"slot-level"},"Lv ",(O[n[Y].id]||{level:1}).level))):f.createElement("div",{className:"slot-empty-state"},f.createElement("div",{className:"empty-icon"},"+"),f.createElement("div",{className:"empty-text"},"Slot ",Y+1))))),f.createElement("div",{className:`team-ready-indicator ${U?"ready":""}`},U?f.createElement(f.Fragment,null,f.createElement("span",{className:"ready-icon"},""),f.createElement("span",null,"Team Ready!")):f.createElement("span",null,"Select ",3-n.length," more"))),f.createElement("section",{className:"match-controls"},f.createElement("button",{className:"match-primary-btn",disabled:!U||m==="searching",onClick:c||r},m==="searching"?"Searching...":"Quick PvP"),f.createElement("div",{className:"match-secondary-buttons"},f.createElement("button",{className:"match-secondary-btn",disabled:!U||m==="searching",onClick:d},"Ranked PvP"),f.createElement("button",{className:"match-secondary-btn",disabled:!U,onClick:r},"Vs AI"),f.createElement("button",{className:"match-secondary-btn",onClick:()=>se(Y=>!Y)},L?"Hide Teams":"Saved Teams"),f.createElement("button",{className:"match-secondary-btn",disabled:!0,title:"Coming soon"},"Random"))))),L&&f.createElement("div",{className:"presets-modal-overlay",onClick:()=>se(!1)},f.createElement("div",{className:"presets-modal",onClick:Y=>Y.stopPropagation()},f.createElement("div",{className:"modal-header"},f.createElement("h3",null,"Saved Teams"),f.createElement("button",{className:"modal-close",onClick:()=>se(!1)},"")),f.createElement("div",{className:"preset-cards"},[1,2,3].map(Y=>{const fe=v?.[Y],_e=fe?.name||`Preset ${Y}`;return f.createElement("div",{key:Y,className:"preset-card-modal"},f.createElement("div",{className:"preset-card-header"},f.createElement("span",{className:"preset-number"},"#",Y),f.createElement("span",{className:"preset-name"},_e)),f.createElement("div",{className:"preset-card-actions"},f.createElement("button",{className:"preset-action-btn save",onClick:()=>{g?.(Y,_e,G.map(E=>E.id)),se(!1)},disabled:!U}," Save Current"),f.createElement("button",{className:"preset-action-btn load",onClick:()=>{fe?.character_ids&&_?.(fe.character_ids),se(!1)},disabled:!fe?.character_ids?.length}," Load")))})))))}function Tg({playerTeam:s,enemyTeam:n,selectedEnemy:i,setSelectedEnemy:r,queueAbility:c,queuedActions:d,removeQueuedAction:m,battleLog:p,turn:v,gameOver:g,resetGame:_,actedCharacters:w,pendingAbility:O,setPendingAbility:U,endTurn:G,profile:z,matchSummary:Q,combatEvents:ee,battleShake:le,isPvp:L,isMyTurn:se,storyBattle:be,onExitStory:J}){const[te,me]=f.useState(null),[ke,gt]=f.useState([]),[ct,Se]=f.useState([]),dt=f.useRef([]),wt=f.useRef([]);f.useEffect(()=>{if(g)return;me("YOUR TURN");const C=setTimeout(()=>me(null),1200);return()=>clearTimeout(C)},[v,g]);const nt=(C,ue,He)=>{const et=C.map(ut=>ut.hp),Tt=He.current;ue(ut=>{const ft=[...ut];return et.forEach((yt,bt)=>{Tt[bt]!=null&&yt<Tt[bt]?(ft[bt]=Tt[bt],setTimeout(()=>{ue(Xe=>{const tt=[...Xe];return tt[bt]=yt,tt})},360)):ft[bt]=yt}),ft}),He.current=et};f.useEffect(()=>{nt(s,gt,dt)},[s]),f.useEffect(()=>{nt(n,Se,wt)},[n]);const M=(C,ue,He,et,Tt)=>{if(w.includes(C)||Tt.hp<=0||et.currentCooldown>0)return;let ut=et.manaCost||0;if(Tt.passive?.manaReduction&&(ut=Math.floor(ut*(1-Tt.passive.manaReduction))),!(Tt.mana<ut)){if(O&&O.characterIndex===C&&O.abilityIndex===ue&&O.isUltimate===He){U(null);return}U({characterIndex:C,abilityIndex:ue,isUltimate:He,ability:et,needsTarget:["attack","attack-stun","stun-only","ultimate-mahito","attack-execute","debuff-mark"].includes(et.type)}),["attack","attack-stun","stun-only","ultimate-mahito","attack-execute","debuff-mark"].includes(et.type)||c(C,ue,He,null)}},ae=C=>{!O||!O.needsTarget||n[C].hp<=0||c(O.characterIndex,O.abilityIndex,O.isUltimate,C)},Y=C=>{const ue=C.toLowerCase();return ue.includes("victory")?"log-win":ue.includes("defeat")||ue.includes("ko")?"log-lose":ue.includes("heals")||C.includes("")?"log-heal":ue.includes("stun")||C.includes("")?"log-stun":ue.includes("burn")||C.includes("")?"log-burn":ue.includes("invincible")||C.includes("")?"log-shield":ue.includes("damage")||C.includes("")||C.includes("")?"log-hit":""},fe=({character:C,size:ue="normal"})=>{const He=qr(C.name),et=ue==="small"?"portrait-small":"";return f.createElement("div",{className:`portrait-image-container ${et}`},He?f.createElement("img",{src:He,alt:C.name,className:"portrait-img"}):f.createElement("div",{className:"portrait-placeholder"},f.createElement("span",{className:"portrait-initial"},C.name[0]),f.createElement("span",{className:"portrait-name-small"},C.name.substring(1,4))))},_e=({ability:C,isUltimate:ue})=>{const He=wg(C.id);return f.createElement("div",{className:`ability-icon-container ${ue?"ultimate":""}`},He?f.createElement("img",{src:He,alt:C.name,className:"ability-img"}):f.createElement("div",{className:"ability-placeholder"},f.createElement("span",{className:"ability-initial"},C.name.substring(0,2))),ue&&f.createElement("span",{className:"ultimate-star"},""))},E=({character:C,index:ue,isPlayer:He,onAbilityClick:et,actedCharacters:Tt,pendingAbility:ut,hpPreview:ft})=>{const yt=C.hp/C.maxHp*100,bt=ft!=null?ft/C.maxHp*100:yt,Xe=C.mana/C.maxMana*100,tt=C.hp<=0,Qe=Tt.includes(ue),ha=ut&&ut.characterIndex===ue;C.level,C.xp;const ma=()=>yt>50?"#2ecc71":yt>25?"#f1c40f":"#e74c3c",Ga=C.invincible>0||C.burning>0||C.marked>0,Be=C.stunned>0||C.attackBuff>0,Ta=(ee||[]).filter(Pe=>Pe.team===(He?"player":"enemy")&&Pe.index===ue),bl=Ta.some(Pe=>Pe.type==="damage"&&Pe.big);return f.createElement("div",{className:`character-row ${tt?"dead":""} ${Qe?"acted":""} ${ha?"selecting-target":""} ${Ta.length?"hit-flash":""} ${bl?"crit-flash":""}`},f.createElement("div",{className:`portrait-container ${ha?"active":""}`},f.createElement("div",{className:"portrait-frame"},f.createElement(fe,{character:C}),Ga&&f.createElement("div",{className:"status-icons"},C.invincible>0&&f.createElement("span",{className:"status-icon invincible",title:`Invincible: ${C.invincible} turn(s)`},""),C.burning>0&&f.createElement("span",{className:"status-icon burning",title:`Burning: ${C.burning} damage`},""),C.marked>0&&f.createElement("span",{className:"status-icon marked",title:`Marked: +${C.marked} damage taken`},"")),f.createElement("div",{className:`portrait-rarity ${C.rarity.toLowerCase()}`},C.rarity),Qe&&!tt&&f.createElement("div",{className:"acted-overlay"},f.createElement("span",null,"")),tt&&f.createElement("div",{className:"dead-overlay"},f.createElement("span",null,""))),f.createElement("p",{className:"portrait-name"},C.name),C.passive&&f.createElement("div",{className:"passive-indicator"},f.createElement("span",{className:"passive-tag"},"Passive"),f.createElement("div",{className:"passive-tooltip"},f.createElement("strong",null,C.passive.name),f.createElement("span",null,C.passive.description))),f.createElement("div",{className:"portrait-hp-bar"},f.createElement("div",{className:"portrait-hp-preview",style:{width:`${bt}%`}}),f.createElement("div",{className:"portrait-hp-fill",style:{width:`${yt}%`,background:ma()}}),f.createElement("span",{className:"portrait-hp-text"},C.hp)),f.createElement("div",{className:"portrait-mana-bar"},f.createElement("div",{className:"portrait-mana-fill",style:{width:`${Xe}%`}}),f.createElement("span",{className:"portrait-mana-text"},C.mana))),He&&Be&&f.createElement("div",{className:"player-status-row"},C.stunned>0&&f.createElement("span",{className:"status-pill stunned"}," Stun ",C.stunned),C.attackBuff>0&&f.createElement("span",{className:"status-pill buffed"}," Buff +",C.attackBuff)),He&&f.createElement("div",{className:"ability-cards"},C.abilities.map((Pe,ea)=>f.createElement(ne,{key:Pe.id,ability:Pe,index:ea,isSelected:ha&&!ut.isUltimate&&ut.abilityIndex===ea,isQueued:d.some(Xt=>Xt.characterIndex===ue&&Xt.abilityIndex===ea&&!Xt.isUltimate),onSelect:()=>et(ue,ea,!1,Pe,C),disabled:Qe||tt||Pe.currentCooldown>0,characterMana:C.mana,character:C})),f.createElement(ne,{ability:C.ultimate,index:0,isSelected:ha&&ut.isUltimate,isQueued:d.some(Pe=>Pe.characterIndex===ue&&Pe.isUltimate),onSelect:()=>et(ue,0,!0,C.ultimate,C),disabled:Qe||tt||C.ultimate.currentCooldown>0,isUltimate:!0,characterMana:C.mana,character:C})),!He&&Ga&&f.createElement("div",{className:"enemy-status-effects"},C.invincible>0&&f.createElement("div",{className:"status-badge invincible"},f.createElement("span",{className:"status-emoji"},""),f.createElement("span",{className:"status-count"},C.invincible)),C.stunned>0&&f.createElement("div",{className:"status-badge stunned"},f.createElement("span",{className:"status-emoji"},""),f.createElement("span",{className:"status-count"},C.stunned)),C.burning>0&&f.createElement("div",{className:"status-badge burning"},f.createElement("span",{className:"status-emoji"},""),f.createElement("span",{className:"status-count"},C.burning)),C.marked>0&&f.createElement("div",{className:"status-badge marked"},f.createElement("span",{className:"status-emoji"},""),f.createElement("span",{className:"status-count"},C.marked))),Ta.length>0&&f.createElement("div",{className:"damage-floats"},Ta.map(Pe=>f.createElement("span",{key:Pe.id,className:`damage-float ${Pe.type} ${Pe.big?"big":""}`},Pe.type==="heal"?`+${Pe.amount}`:`-${Pe.amount}`))))},V=({character:C,index:ue,isSelected:He,onSelect:et,pendingAbility:Tt,hpPreview:ut})=>{const ft=C.hp/C.maxHp*100,yt=ut!=null?ut/C.maxHp*100:ft,bt=C.mana/C.maxMana*100,Xe=C.hp<=0,tt=Tt&&Tt.needsTarget&&!Xe,Qe=()=>ft>50?"#2ecc71":ft>25?"#f1c40f":"#e74c3c",ha=C.invincible>0||C.stunned>0||C.burning>0||C.marked>0,ma=(ee||[]).filter(Be=>Be.team==="enemy"&&Be.index===ue),Ga=ma.some(Be=>Be.type==="damage"&&Be.big);return f.createElement("div",{className:`character-row enemy ${Xe?"dead":""} ${He?"selected":""} ${tt?"targetable":""} ${ma.length?"hit-flash":""} ${Ga?"crit-flash":""}`,onClick:()=>tt&&et(ue)},f.createElement("div",{className:`portrait-container ${tt?"targetable":""}`},f.createElement("div",{className:"portrait-frame"},f.createElement(fe,{character:C}),f.createElement("div",{className:`portrait-rarity ${C.rarity.toLowerCase()}`},C.rarity),Xe&&f.createElement("div",{className:"dead-overlay"},f.createElement("span",null,"")),tt&&f.createElement("div",{className:"target-indicator"},f.createElement("span",null,""))),f.createElement("p",{className:"portrait-name"},C.name),f.createElement("div",{className:"portrait-hp-bar"},f.createElement("div",{className:"portrait-hp-preview",style:{width:`${yt}%`}}),f.createElement("div",{className:"portrait-hp-fill",style:{width:`${ft}%`,background:Qe()}}),f.createElement("span",{className:"portrait-hp-text"},C.hp)),f.createElement("div",{className:"portrait-mana-bar"},f.createElement("div",{className:"portrait-mana-fill",style:{width:`${bt}%`}}),f.createElement("span",{className:"portrait-mana-text"},C.mana))),ha&&f.createElement("div",{className:"enemy-status-effects"},C.invincible>0&&f.createElement("div",{className:"status-badge invincible"},f.createElement("span",{className:"status-emoji"},""),f.createElement("span",{className:"status-count"},C.invincible)),C.stunned>0&&f.createElement("div",{className:"status-badge stunned"},f.createElement("span",{className:"status-emoji"},""),f.createElement("span",{className:"status-count"},C.stunned)),C.burning>0&&f.createElement("div",{className:"status-badge burning"},f.createElement("span",{className:"status-emoji"},""),f.createElement("span",{className:"status-count"},C.burning)),C.marked>0&&f.createElement("div",{className:"status-badge marked"},f.createElement("span",{className:"status-emoji"},""),f.createElement("span",{className:"status-count"},C.marked))),ma.length>0&&f.createElement("div",{className:"damage-floats"},ma.map(Be=>f.createElement("span",{key:Be.id,className:`damage-float ${Be.type} ${Be.big?"big":""}`},Be.type==="heal"?`+${Be.amount}`:`-${Be.amount}`))))},ne=({ability:C,index:ue,isSelected:He,isQueued:et,onSelect:Tt,disabled:ut,isUltimate:ft,characterMana:yt,character:bt})=>{let Xe=C.manaCost||0;bt.passive?.manaReduction&&(Xe=Math.floor(Xe*(1-bt.passive.manaReduction)));const tt=yt<Xe,Qe=ut||tt;return f.createElement("div",{className:`ability-card ${He?"selected":""} ${et?"queued":""} ${Qe?"disabled":""} ${ft?"ultimate":""} ${tt?"no-mana":""}`,onClick:()=>!Qe&&Tt()},f.createElement("div",{className:"ability-card-art"},f.createElement(_e,{ability:C,isUltimate:ft})),f.createElement("div",{className:"ability-name",title:C.name},C.name),C.currentCooldown>0&&f.createElement("div",{className:"ability-cooldown-overlay"},f.createElement("span",null,C.currentCooldown),f.createElement("span",{className:"ability-cooldown-label"},"CD")),f.createElement("div",{className:`ability-mana-cost ${tt?"not-enough":""}`},f.createElement("span",null,"",Xe)),f.createElement("div",{className:"ability-tooltip"},f.createElement("div",{className:"tooltip-header"},f.createElement("h4",null,C.name),ft&&f.createElement("span",{className:"tooltip-ultimate"},"ULTIMATE")),f.createElement("p",null,C.description),f.createElement("div",{className:"tooltip-stats"},f.createElement("span",{className:tt?"not-enough":""}," ",Xe),f.createElement("span",null," ",C.cooldown," CD"))))},ie=s.filter(C=>C.hp>0).length,ve=w.length,Ae=ie-ve,De=z?.display_name||"Player",St=z?.avatar_url||null,Fe=z?.account_level||1,ja=L?"Opponent":"Cursed AI",La=L?se?"Awaiting Turn":"Taking Turn":"Awaiting Turn",fa=C=>{const ue=s[C.characterIndex];if(!ue)return"Unknown";const He=C.isUltimate?ue.ultimate:ue.abilities[C.abilityIndex],et=C.enemyIndex!=null?n[C.enemyIndex]?.name:null;return`${ue.name}: ${He?.name||"Ability"}${et?`  ${et}`:""}`};return f.createElement("div",{className:`battle-screen ${le?"screen-shake":""}`},f.createElement("div",{className:"battle-background"}),te&&f.createElement("div",{className:"turn-banner"},f.createElement("span",null,te)),f.createElement("div",{className:"battle-hud"},f.createElement("div",{className:"hud-side"},f.createElement("div",{className:"team-indicator player"},f.createElement("span",null,"Your Team"),f.createElement("div",{className:"team-indicator-meta"},f.createElement("div",{className:"team-avatar"},St?f.createElement("img",{src:St,alt:De}):f.createElement("span",null,De.slice(0,1))),f.createElement("div",null,f.createElement("div",{className:"team-name"},De),f.createElement("div",{className:"team-subtitle"},"Lv ",Fe))))),f.createElement("div",{className:"hud-center"},f.createElement("div",{className:"turn-display"},f.createElement("span",{className:"turn-label"},"TURN"),f.createElement("span",{className:"turn-number"},v)),f.createElement("div",{className:"actions-display"},f.createElement("span",{className:"actions-label"},"ACTIONS LEFT"),f.createElement("span",{className:"actions-number"},Ae)),f.createElement("button",{className:"end-turn-btn",onClick:G,disabled:L&&!se},L&&!se?"Waiting...":"End Turn")),f.createElement("div",{className:"hud-side right"},f.createElement("div",{className:"team-indicator enemy"},f.createElement("span",null,"Enemy Team"),f.createElement("div",{className:"team-indicator-meta"},f.createElement("div",null,f.createElement("div",{className:"team-name"},ja),f.createElement("div",{className:"team-subtitle"},La)),f.createElement("div",{className:"team-avatar"},f.createElement("span",null,L?"VS":"AI"))))),O&&O.needsTarget&&f.createElement("div",{className:"targeting-prompt"},f.createElement("span",null," Select a target for ",O.ability.name,"!"),f.createElement("button",{className:"cancel-btn",onClick:()=>U(null)},"Cancel"))),g&&f.createElement("div",{className:`game-over-overlay ${g}`},f.createElement("div",{className:"game-over-content"},f.createElement("h1",null,g==="win"?" VICTORY! ":" DEFEAT "),!be&&Q&&f.createElement("div",{className:"match-summary"},f.createElement("div",{className:"summary-row"},f.createElement("span",null,"Account XP"),f.createElement("strong",null,"+",Q.accountGain," (Lv ",Q.accountLevel,")")),f.createElement("div",{className:"summary-row"},f.createElement("span",null,"Character XP"),f.createElement("strong",null,"+",Q.characterGain," each")),f.createElement("div",{className:"summary-row"},f.createElement("span",null,"Rating"),f.createElement("strong",null,Q.ratingDelta>=0?"+":"",Q.ratingDelta,"  ",Q.rating)),f.createElement("div",{className:"summary-xp-bar"},f.createElement("div",{className:"summary-xp-fill",style:{width:`${Math.min(100,Math.floor(Q.accountXp/Q.accountNeeded*100))}%`}})),Q.characterLevelUps.length>0&&f.createElement("div",{className:"summary-levelups"},Q.characterLevelUps.map(C=>f.createElement("span",{key:C.name},C.name,"  Lv ",C.level))),Q.characterSummaries?.length>0&&f.createElement("div",{className:"summary-characters"},Q.characterSummaries.map(C=>{const ue=qr(C.name),He=Math.min(100,Math.floor(C.xp/C.xpNeeded*100));return f.createElement("div",{key:C.id,className:"summary-character"},f.createElement("div",{className:"summary-portrait"},ue?f.createElement("img",{src:ue,alt:C.name}):f.createElement("span",null,C.name[0])),f.createElement("div",{className:"summary-char-info"},f.createElement("div",{className:"summary-char-name"},C.name),f.createElement("div",{className:"summary-char-level"},"Lv ",C.level,"  ",C.xp,"/",C.xpNeeded," XP"),f.createElement("div",{className:"summary-char-bar"},f.createElement("div",{className:"summary-char-fill",style:{width:`${He}%`}}))))}))),be?f.createElement("div",{className:"battle-result-actions"},f.createElement("button",{onClick:J,className:"play-again-btn",disabled:!J},"Return to Story")):f.createElement("button",{onClick:_,className:"play-again-btn"},"Play Again"))),f.createElement("div",{className:`battle-main ${be?"battle-main-story":""} ${s.length<=1&&n.length<=2?"battle-main-compact":""}`},f.createElement("div",{className:"battle-top-row"},f.createElement("div",{className:"battle-log-center"},f.createElement("div",{className:"battle-log-header"},f.createElement("h3",null,"Battle Log"),be&&f.createElement("div",{className:"battle-objective"},f.createElement("div",{className:"battle-objective-title"},be.mode||"Story Battle"),f.createElement("div",{className:"battle-objective-text"},be.objective))),f.createElement("div",{className:"log-scroll-vertical"},p.slice(-8).map((C,ue)=>f.createElement("p",{key:ue,className:`${Y(C)} ${ue===p.slice(-8).length-1?"latest":""}`},C)))),f.createElement("div",{className:"battle-queue"},f.createElement("div",{className:"battle-queue-title"},"Queued Actions"),f.createElement("div",{className:"battle-queue-items"},d.length===0?f.createElement("span",{className:"queue-empty"},"No actions queued yet."):d.map((C,ue)=>f.createElement("div",{key:`${C.characterIndex}-${ue}`,className:"queue-chip"},f.createElement("span",null,fa(C)),f.createElement("button",{type:"button",className:"queue-remove",onClick:()=>m?.(ue)},"")))))),f.createElement("div",{className:"battle-team-row"},f.createElement("div",{className:"team-container player-side"},s.map((C,ue)=>f.createElement(E,{key:C.id,character:C,index:ue,isPlayer:!0,onAbilityClick:M,actedCharacters:w,pendingAbility:O,hpPreview:ke[ue]}))),f.createElement("div",{className:"team-container enemy-side"},n.map((C,ue)=>f.createElement(V,{key:C.id,character:C,index:ue,isSelected:i===ue,onSelect:ae,pendingAbility:O,hpPreview:ct[ue]}))))))}function Yr(s,n){var i={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&n.indexOf(r)<0&&(i[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,r=Object.getOwnPropertySymbols(s);c<r.length;c++)n.indexOf(r[c])<0&&Object.prototype.propertyIsEnumerable.call(s,r[c])&&(i[r[c]]=s[r[c]]);return i}function Ag(s,n,i,r){function c(d){return d instanceof i?d:new i(function(m){m(d)})}return new(i||(i=Promise))(function(d,m){function p(_){try{g(r.next(_))}catch(w){m(w)}}function v(_){try{g(r.throw(_))}catch(w){m(w)}}function g(_){_.done?d(_.value):c(_.value).then(p,v)}g((r=r.apply(s,n||[])).next())})}const Og=s=>s?(...n)=>s(...n):(...n)=>fetch(...n);class Ac extends Error{constructor(n,i="FunctionsError",r){super(n),this.name=i,this.context=r}}class Ng extends Ac{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class gm extends Ac{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class ym extends Ac{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var hc;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(hc||(hc={}));class Cg{constructor(n,{headers:i={},customFetch:r,region:c=hc.Any}={}){this.url=n,this.headers=i,this.region=c,this.fetch=Og(r)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return Ag(this,arguments,void 0,function*(i,r={}){var c;let d,m;try{const{headers:p,method:v,body:g,signal:_,timeout:w}=r;let O={},{region:U}=r;U||(U=this.region);const G=new URL(`${this.url}/${i}`);U&&U!=="any"&&(O["x-region"]=U,G.searchParams.set("forceFunctionRegion",U));let z;g&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(O["Content-Type"]="application/octet-stream",z=g):typeof g=="string"?(O["Content-Type"]="text/plain",z=g):typeof FormData<"u"&&g instanceof FormData?z=g:(O["Content-Type"]="application/json",z=JSON.stringify(g)):g&&typeof g!="string"&&!(typeof Blob<"u"&&g instanceof Blob)&&!(g instanceof ArrayBuffer)&&!(typeof FormData<"u"&&g instanceof FormData)?z=JSON.stringify(g):z=g;let Q=_;w&&(m=new AbortController,d=setTimeout(()=>m.abort(),w),_?(Q=m.signal,_.addEventListener("abort",()=>m.abort())):Q=m.signal);const ee=yield this.fetch(G.toString(),{method:v||"POST",headers:Object.assign(Object.assign(Object.assign({},O),this.headers),p),body:z,signal:Q}).catch(be=>{throw new Ng(be)}),le=ee.headers.get("x-relay-error");if(le&&le==="true")throw new gm(ee);if(!ee.ok)throw new ym(ee);let L=((c=ee.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),se;return L==="application/json"?se=yield ee.json():L==="application/octet-stream"||L==="application/pdf"?se=yield ee.blob():L==="text/event-stream"?se=ee:L==="multipart/form-data"?se=yield ee.formData():se=yield ee.text(),{data:se,error:null,response:ee}}catch(p){return{data:null,error:p,response:p instanceof ym||p instanceof gm?p.context:void 0}}finally{d&&clearTimeout(d)}})}}var Rg=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},kg=class{constructor(s){var n,i;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(n=s.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=s.signal,this.isMaybeSingle=(i=s.isMaybeSingle)!==null&&i!==void 0?i:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,n){return this.headers=new Headers(this.headers),this.headers.set(s,n),this}then(s,n){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let c=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{let m=null,p=null,v=null,g=d.status,_=d.statusText;if(d.ok){var w,O;if(i.method!=="HEAD"){var U;const ee=await d.text();ee===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((U=i.headers.get("Accept"))===null||U===void 0)&&U.includes("application/vnd.pgrst.plan+text"))?p=ee:p=JSON.parse(ee))}const z=(w=i.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),Q=(O=d.headers.get("content-range"))===null||O===void 0?void 0:O.split("/");z&&Q&&Q.length>1&&(v=parseInt(Q[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(p)&&(p.length>1?(m={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,v=null,g=406,_="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{var G;const z=await d.text();try{m=JSON.parse(z),Array.isArray(m)&&d.status===404&&(p=[],m=null,g=200,_="OK")}catch{d.status===404&&z===""?(g=204,_="No Content"):m={message:z}}if(m&&i.isMaybeSingle&&(!(m==null||(G=m.details)===null||G===void 0)&&G.includes("0 rows"))&&(m=null,g=200,_="OK"),m&&i.shouldThrowOnError)throw new Rg(m)}return{error:m,data:p,count:v,status:g,statusText:_}});return this.shouldThrowOnError||(c=c.catch(d=>{var m;let p="";const v=d?.cause;if(v){var g,_,w,O;const G=(g=v?.message)!==null&&g!==void 0?g:"",z=(_=v?.code)!==null&&_!==void 0?_:"";p=`${(w=d?.name)!==null&&w!==void 0?w:"FetchError"}: ${d?.message}`,p+=`

Caused by: ${(O=v?.name)!==null&&O!==void 0?O:"Error"}: ${G}`,z&&(p+=` (${z})`),v?.stack&&(p+=`
${v.stack}`)}else{var U;p=(U=d?.stack)!==null&&U!==void 0?U:""}return{error:{message:`${(m=d?.name)!==null&&m!==void 0?m:"FetchError"}: ${d?.message}`,details:p,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),c.then(s,n)}returns(){return this}overrideTypes(){return this}},Dg=class extends kg{select(s){let n=!1;const i=(s??"*").split("").map(r=>/\s/.test(r)&&!n?"":(r==='"'&&(n=!n),r)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:n=!0,nullsFirst:i,foreignTable:r,referencedTable:c=r}={}){const d=c?`${c}.order`:"order",m=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${m?`${m},`:""}${s}.${n?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:n,referencedTable:i=n}={}){const r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${s}`),this}range(s,n,{foreignTable:i,referencedTable:r=i}={}){const c=typeof r>"u"?"offset":`${r}.offset`,d=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(d,`${n-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:n=!1,settings:i=!1,buffers:r=!1,wal:c=!1,format:d="text"}={}){var m;const p=[s?"analyze":null,n?"verbose":null,i?"settings":null,r?"buffers":null,c?"wal":null].filter(Boolean).join("|"),v=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${v}"; options=${p};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const bm=new RegExp("[,()]");var ui=class extends Dg{eq(s,n){return this.url.searchParams.append(s,`eq.${n}`),this}neq(s,n){return this.url.searchParams.append(s,`neq.${n}`),this}gt(s,n){return this.url.searchParams.append(s,`gt.${n}`),this}gte(s,n){return this.url.searchParams.append(s,`gte.${n}`),this}lt(s,n){return this.url.searchParams.append(s,`lt.${n}`),this}lte(s,n){return this.url.searchParams.append(s,`lte.${n}`),this}like(s,n){return this.url.searchParams.append(s,`like.${n}`),this}likeAllOf(s,n){return this.url.searchParams.append(s,`like(all).{${n.join(",")}}`),this}likeAnyOf(s,n){return this.url.searchParams.append(s,`like(any).{${n.join(",")}}`),this}ilike(s,n){return this.url.searchParams.append(s,`ilike.${n}`),this}ilikeAllOf(s,n){return this.url.searchParams.append(s,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(s,n){return this.url.searchParams.append(s,`ilike(any).{${n.join(",")}}`),this}regexMatch(s,n){return this.url.searchParams.append(s,`match.${n}`),this}regexIMatch(s,n){return this.url.searchParams.append(s,`imatch.${n}`),this}is(s,n){return this.url.searchParams.append(s,`is.${n}`),this}isDistinct(s,n){return this.url.searchParams.append(s,`isdistinct.${n}`),this}in(s,n){const i=Array.from(new Set(n)).map(r=>typeof r=="string"&&bm.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(s,`in.(${i})`),this}notIn(s,n){const i=Array.from(new Set(n)).map(r=>typeof r=="string"&&bm.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(s,`not.in.(${i})`),this}contains(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cs.{${n.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(n)}`),this}containedBy(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cd.{${n.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(n)}`),this}rangeGt(s,n){return this.url.searchParams.append(s,`sr.${n}`),this}rangeGte(s,n){return this.url.searchParams.append(s,`nxl.${n}`),this}rangeLt(s,n){return this.url.searchParams.append(s,`sl.${n}`),this}rangeLte(s,n){return this.url.searchParams.append(s,`nxr.${n}`),this}rangeAdjacent(s,n){return this.url.searchParams.append(s,`adj.${n}`),this}overlaps(s,n){return typeof n=="string"?this.url.searchParams.append(s,`ov.${n}`):this.url.searchParams.append(s,`ov.{${n.join(",")}}`),this}textSearch(s,n,{config:i,type:r}={}){let c="";r==="plain"?c="pl":r==="phrase"?c="ph":r==="websearch"&&(c="w");const d=i===void 0?"":`(${i})`;return this.url.searchParams.append(s,`${c}fts${d}.${n}`),this}match(s){return Object.entries(s).forEach(([n,i])=>{this.url.searchParams.append(n,`eq.${i}`)}),this}not(s,n,i){return this.url.searchParams.append(s,`not.${n}.${i}`),this}or(s,{foreignTable:n,referencedTable:i=n}={}){const r=i?`${i}.or`:"or";return this.url.searchParams.append(r,`(${s})`),this}filter(s,n,i){return this.url.searchParams.append(s,`${n}.${i}`),this}},Ug=class{constructor(s,{headers:n={},schema:i,fetch:r}){this.url=s,this.headers=new Headers(n),this.schema=i,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,n){const{head:i=!1,count:r}=n??{},c=i?"HEAD":"GET";let d=!1;const m=(s??"*").split("").map(g=>/\s/.test(g)&&!d?"":(g==='"'&&(d=!d),g)).join(""),{url:p,headers:v}=this.cloneRequestState();return p.searchParams.set("select",m),r&&v.append("Prefer",`count=${r}`),new ui({method:c,url:p,headers:v,schema:this.schema,fetch:this.fetch})}insert(s,{count:n,defaultToNull:i=!0}={}){var r;const c="POST",{url:d,headers:m}=this.cloneRequestState();if(n&&m.append("Prefer",`count=${n}`),i||m.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((v,g)=>v.concat(Object.keys(g)),[]);if(p.length>0){const v=[...new Set(p)].map(g=>`"${g}"`);d.searchParams.set("columns",v.join(","))}}return new ui({method:c,url:d,headers:m,schema:this.schema,body:s,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(s,{onConflict:n,ignoreDuplicates:i=!1,count:r,defaultToNull:c=!0}={}){var d;const m="POST",{url:p,headers:v}=this.cloneRequestState();if(v.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),n!==void 0&&p.searchParams.set("on_conflict",n),r&&v.append("Prefer",`count=${r}`),c||v.append("Prefer","missing=default"),Array.isArray(s)){const g=s.reduce((_,w)=>_.concat(Object.keys(w)),[]);if(g.length>0){const _=[...new Set(g)].map(w=>`"${w}"`);p.searchParams.set("columns",_.join(","))}}return new ui({method:m,url:p,headers:v,schema:this.schema,body:s,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(s,{count:n}={}){var i;const r="PATCH",{url:c,headers:d}=this.cloneRequestState();return n&&d.append("Prefer",`count=${n}`),new ui({method:r,url:c,headers:d,schema:this.schema,body:s,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:s}={}){var n;const i="DELETE",{url:r,headers:c}=this.cloneRequestState();return s&&c.append("Prefer",`count=${s}`),new ui({method:i,url:r,headers:c,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}},jg=class Ym{constructor(n,{headers:i={},schema:r,fetch:c}={}){this.url=n,this.headers=new Headers(i),this.schemaName=r,this.fetch=c}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Ug(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new Ym(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,i={},{head:r=!1,get:c=!1,count:d}={}){var m;let p;const v=new URL(`${this.url}/rpc/${n}`);let g;const _=U=>U!==null&&typeof U=="object"&&(!Array.isArray(U)||U.some(_)),w=r&&Object.values(i).some(_);w?(p="POST",g=i):r||c?(p=r?"HEAD":"GET",Object.entries(i).filter(([U,G])=>G!==void 0).map(([U,G])=>[U,Array.isArray(G)?`{${G.join(",")}}`:`${G}`]).forEach(([U,G])=>{v.searchParams.append(U,G)})):(p="POST",g=i);const O=new Headers(this.headers);return w?O.set("Prefer",d?`count=${d},return=minimal`:"return=minimal"):d&&O.set("Prefer",`count=${d}`),new ui({method:p,url:v,headers:O,schema:this.schemaName,body:g,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}};class xg{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const i=globalThis.process;if(i){const r=i.versions;if(r&&r.node){const c=r.node,d=parseInt(c.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let i=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(i+=`

Suggested solution: ${n.workaround}`),new Error(i)}static createWebSocket(n,i){const r=this.getWebSocketConstructor();return new r(n,i)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Mg="2.91.0",zg=`realtime-js/${Mg}`,Bg="1.0.0",Vm="2.0.0",_m=Vm,mc=1e4,$g=1e3,qg=100;var Kn;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Kn||(Kn={}));var jt;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(jt||(jt={}));var Ua;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Ua||(Ua={}));var pc;(function(s){s.websocket="websocket"})(pc||(pc={}));var vl;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(vl||(vl={}));class Hg{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,i){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(n));let r=[n.join_ref,n.ref,n.topic,n.event,n.payload];return i(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(n){var i;return this._isArrayBuffer((i=n.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var i,r;const c=(r=(i=n.payload)===null||i===void 0?void 0:i.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,c)}_encodeJsonUserBroadcastPush(n){var i,r;const c=(r=(i=n.payload)===null||i===void 0?void 0:i.payload)!==null&&r!==void 0?r:{},m=new TextEncoder().encode(JSON.stringify(c)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,m)}_encodeUserBroadcastPush(n,i,r){var c,d;const m=n.topic,p=(c=n.ref)!==null&&c!==void 0?c:"",v=(d=n.join_ref)!==null&&d!==void 0?d:"",g=n.payload.event,_=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},w=Object.keys(_).length===0?"":JSON.stringify(_);if(v.length>255)throw new Error(`joinRef length ${v.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`topic length ${m.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const O=this.USER_BROADCAST_PUSH_META_LENGTH+v.length+p.length+m.length+g.length+w.length,U=new ArrayBuffer(this.HEADER_LENGTH+O);let G=new DataView(U),z=0;G.setUint8(z++,this.KINDS.userBroadcastPush),G.setUint8(z++,v.length),G.setUint8(z++,p.length),G.setUint8(z++,m.length),G.setUint8(z++,g.length),G.setUint8(z++,w.length),G.setUint8(z++,i),Array.from(v,ee=>G.setUint8(z++,ee.charCodeAt(0))),Array.from(p,ee=>G.setUint8(z++,ee.charCodeAt(0))),Array.from(m,ee=>G.setUint8(z++,ee.charCodeAt(0))),Array.from(g,ee=>G.setUint8(z++,ee.charCodeAt(0))),Array.from(w,ee=>G.setUint8(z++,ee.charCodeAt(0)));var Q=new Uint8Array(U.byteLength+r.byteLength);return Q.set(new Uint8Array(U),0),Q.set(new Uint8Array(r),U.byteLength),Q.buffer}decode(n,i){if(this._isArrayBuffer(n)){let r=this._binaryDecode(n);return i(r)}if(typeof n=="string"){const r=JSON.parse(n),[c,d,m,p,v]=r;return i({join_ref:c,ref:d,topic:m,event:p,payload:v})}return i({})}_binaryDecode(n){const i=new DataView(n),r=i.getUint8(0),c=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(n,i,c)}_decodeUserBroadcast(n,i,r){const c=i.getUint8(1),d=i.getUint8(2),m=i.getUint8(3),p=i.getUint8(4);let v=this.HEADER_LENGTH+4;const g=r.decode(n.slice(v,v+c));v=v+c;const _=r.decode(n.slice(v,v+d));v=v+d;const w=r.decode(n.slice(v,v+m));v=v+m;const O=n.slice(v,n.byteLength),U=p===this.JSON_ENCODING?JSON.parse(r.decode(O)):O,G={type:this.BROADCAST_EVENT,event:_,payload:U};return m>0&&(G.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:G}}_isArrayBuffer(n){var i;return n instanceof ArrayBuffer||((i=n?.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(n,i){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([r])=>i.includes(r)))}}class Km{constructor(n,i){this.callback=n,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var at;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(at||(at={}));const Em=(s,n,i={})=>{var r;const c=(r=i.skipTypes)!==null&&r!==void 0?r:[];return n?Object.keys(n).reduce((d,m)=>(d[m]=Lg(m,s,n,c),d),{}):{}},Lg=(s,n,i,r)=>{const c=n.find(p=>p.name===s),d=c?.type,m=i[s];return d&&!r.includes(d)?Xm(d,m):vc(m)},Xm=(s,n)=>{if(s.charAt(0)==="_"){const i=s.slice(1,s.length);return Kg(n,i)}switch(s){case at.bool:return Gg(n);case at.float4:case at.float8:case at.int2:case at.int4:case at.int8:case at.numeric:case at.oid:return Yg(n);case at.json:case at.jsonb:return Vg(n);case at.timestamp:return Xg(n);case at.abstime:case at.date:case at.daterange:case at.int4range:case at.int8range:case at.money:case at.reltime:case at.text:case at.time:case at.timestamptz:case at.timetz:case at.tsrange:case at.tstzrange:return vc(n);default:return vc(n)}},vc=s=>s,Gg=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Yg=s=>{if(typeof s=="string"){const n=parseFloat(s);if(!Number.isNaN(n))return n}return s},Vg=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},Kg=(s,n)=>{if(typeof s!="string")return s;const i=s.length-1,r=s[i];if(s[0]==="{"&&r==="}"){let d;const m=s.slice(1,i);try{d=JSON.parse("["+m+"]")}catch{d=m?m.split(","):[]}return d.map(p=>Xm(n,p))}return s},Xg=s=>typeof s=="string"?s.replace(" ","T"):s,Qm=s=>{const n=new URL(s);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class lc{constructor(n,i,r={},c=mc){this.channel=n,this.event=i,this.payload=r,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,i){var r;return this._hasReceived(n)&&i((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:n,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:i}){this.recHooks.filter(r=>r.status===n).forEach(r=>r.callback(i))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var wm;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(wm||(wm={}));class os{constructor(n,i){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=i?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},c=>{const{onJoin:d,onLeave:m,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=os.syncState(this.state,c,d,m),this.pendingDiffs.forEach(v=>{this.state=os.syncDiff(this.state,v,d,m)}),this.pendingDiffs=[],p()}),this.channel._on(r.diff,{},c=>{const{onJoin:d,onLeave:m,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=os.syncDiff(this.state,c,d,m),p())}),this.onJoin((c,d,m)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:d,newPresences:m})}),this.onLeave((c,d,m)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:d,leftPresences:m})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,i,r,c){const d=this.cloneDeep(n),m=this.transformState(i),p={},v={};return this.map(d,(g,_)=>{m[g]||(v[g]=_)}),this.map(m,(g,_)=>{const w=d[g];if(w){const O=_.map(Q=>Q.presence_ref),U=w.map(Q=>Q.presence_ref),G=_.filter(Q=>U.indexOf(Q.presence_ref)<0),z=w.filter(Q=>O.indexOf(Q.presence_ref)<0);G.length>0&&(p[g]=G),z.length>0&&(v[g]=z)}else p[g]=_}),this.syncDiff(d,{joins:p,leaves:v},r,c)}static syncDiff(n,i,r,c){const{joins:d,leaves:m}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return r||(r=()=>{}),c||(c=()=>{}),this.map(d,(p,v)=>{var g;const _=(g=n[p])!==null&&g!==void 0?g:[];if(n[p]=this.cloneDeep(v),_.length>0){const w=n[p].map(U=>U.presence_ref),O=_.filter(U=>w.indexOf(U.presence_ref)<0);n[p].unshift(...O)}r(p,_,v)}),this.map(m,(p,v)=>{let g=n[p];if(!g)return;const _=v.map(w=>w.presence_ref);g=g.filter(w=>_.indexOf(w.presence_ref)<0),n[p]=g,c(p,g,v),g.length===0&&delete n[p]}),n}static map(n,i){return Object.getOwnPropertyNames(n).map(r=>i(r,n[r]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((i,r)=>{const c=n[r];return"metas"in c?i[r]=c.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):i[r]=c,i},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Sm;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Sm||(Sm={}));var cs;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(cs||(cs={}));var hn;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(hn||(hn={}));class di{constructor(n,i={config:{}},r){var c,d;if(this.topic=n,this.params=i,this.socket=r,this.bindings={},this.state=jt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new lc(this,Ua.join,this.params,this.timeout),this.rejoinTimer=new Km(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(m=>m.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jt.closed,this.socket._remove(this)}),this._onError(m=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,m),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",m=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,m),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ua.reply,{},(m,p)=>{this._trigger(this._replyEventName(p),m)}),this.presence=new os(this),this.broadcastEndpointURL=Qm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,i=this.timeout){var r,c,d;if(this.socket.isConnected()||this.socket.connect(),this.state==jt.closed){const{config:{broadcast:m,presence:p,private:v}}=this.params,g=(c=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(U=>U.filter))!==null&&c!==void 0?c:[],_=!!this.bindings[cs.PRESENCE]&&this.bindings[cs.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,w={},O={broadcast:m,presence:Object.assign(Object.assign({},p),{enabled:_}),postgres_changes:g,private:v};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(U=>n?.(hn.CHANNEL_ERROR,U)),this._onClose(()=>n?.(hn.CLOSED)),this.updateJoinPayload(Object.assign({config:O},w)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:U})=>{var G;if(this.socket._isManualToken()||this.socket.setAuth(),U===void 0){n?.(hn.SUBSCRIBED);return}else{const z=this.bindings.postgres_changes,Q=(G=z?.length)!==null&&G!==void 0?G:0,ee=[];for(let le=0;le<Q;le++){const L=z[le],{filter:{event:se,schema:be,table:J,filter:te}}=L,me=U&&U[le];if(me&&me.event===se&&di.isFilterValueEqual(me.schema,be)&&di.isFilterValueEqual(me.table,J)&&di.isFilterValueEqual(me.filter,te))ee.push(Object.assign(Object.assign({},L),{id:me.id}));else{this.unsubscribe(),this.state=jt.errored,n?.(hn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=ee,n&&n(hn.SUBSCRIBED);return}}).receive("error",U=>{this.state=jt.errored,n?.(hn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(U).join(", ")||"error")))}).receive("timeout",()=>{n?.(hn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,i={}){return await this.send({type:"presence",event:"track",payload:n},i.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,i,r){return this.state===jt.joined&&n===cs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,i,r)}async httpSend(n,i,r={}){var c;if(i==null)return Promise.reject("Payload is required for httpSend()");const d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:i,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(c=r.timeout)!==null&&c!==void 0?c:this.timeout);if(p.status===202)return{success:!0};let v=p.statusText;try{const g=await p.json();v=g.error||g.message||v}catch{}return Promise.reject(new Error(v))}async send(n,i={}){var r,c;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:m}=n,p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const v={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:m,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,v,(r=i.timeout)!==null&&r!==void 0?r:this.timeout);return await((c=g.body)===null||c===void 0?void 0:c.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var m,p,v;const g=this._push(n.type,n,i.timeout||this.timeout);n.type==="broadcast"&&!(!((v=(p=(m=this.params)===null||m===void 0?void 0:m.config)===null||p===void 0?void 0:p.broadcast)===null||v===void 0)&&v.ack)&&d("ok"),g.receive("ok",()=>d("ok")),g.receive("error",()=>d("error")),g.receive("timeout",()=>d("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=jt.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ua.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(c=>{r=new lc(this,Ua.leave,{},n),r.receive("ok",()=>{i(),c("ok")}).receive("timeout",()=>{i(),c("timed out")}).receive("error",()=>{c("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=jt.closed,this.bindings={}}async _fetchWithTimeout(n,i,r){const c=new AbortController,d=setTimeout(()=>c.abort(),r),m=await this.socket.fetch(n,Object.assign(Object.assign({},i),{signal:c.signal}));return clearTimeout(d),m}_push(n,i,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new lc(this,n,i,r);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>qg){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(n,i,r){return i}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,i,r){var c,d;const m=n.toLocaleLowerCase(),{close:p,error:v,leave:g,join:_}=Ua;if(r&&[p,v,g,_].indexOf(m)>=0&&r!==this._joinRef())return;let O=this._onMessage(m,i,r);if(i&&!O)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(m)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(U=>{var G,z,Q;return((G=U.filter)===null||G===void 0?void 0:G.event)==="*"||((Q=(z=U.filter)===null||z===void 0?void 0:z.event)===null||Q===void 0?void 0:Q.toLocaleLowerCase())===m}).map(U=>U.callback(O,r)):(d=this.bindings[m])===null||d===void 0||d.filter(U=>{var G,z,Q,ee,le,L,se,be;if(["broadcast","presence","postgres_changes"].includes(m))if("id"in U){const J=U.id,te=(G=U.filter)===null||G===void 0?void 0:G.event;return J&&((z=i.ids)===null||z===void 0?void 0:z.includes(J))&&(te==="*"||te?.toLocaleLowerCase()===((Q=i.data)===null||Q===void 0?void 0:Q.type.toLocaleLowerCase()))&&(!(!((ee=U.filter)===null||ee===void 0)&&ee.table)||U.filter.table===((le=i.data)===null||le===void 0?void 0:le.table))}else{const J=(se=(L=U?.filter)===null||L===void 0?void 0:L.event)===null||se===void 0?void 0:se.toLocaleLowerCase();return J==="*"||J===((be=i?.event)===null||be===void 0?void 0:be.toLocaleLowerCase())}else return U.type.toLocaleLowerCase()===m}).map(U=>{if(typeof O=="object"&&"ids"in O){const G=O.data,{schema:z,table:Q,commit_timestamp:ee,type:le,errors:L}=G;O=Object.assign(Object.assign({},{schema:z,table:Q,commit_timestamp:ee,eventType:le,new:{},old:{},errors:L}),this._getPayloadRecords(G))}U.callback(O,r)})}_isClosed(){return this.state===jt.closed}_isJoined(){return this.state===jt.joined}_isJoining(){return this.state===jt.joining}_isLeaving(){return this.state===jt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,i,r){const c=n.toLocaleLowerCase(),d={type:c,filter:i,callback:r};return this.bindings[c]?this.bindings[c].push(d):this.bindings[c]=[d],this}_off(n,i){const r=n.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(c=>{var d;return!(((d=c.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===r&&di.isEqual(c.filter,i))})),this}static isEqual(n,i){if(Object.keys(n).length!==Object.keys(i).length)return!1;for(const r in n)if(n[r]!==i[r])return!1;return!0}static isFilterValueEqual(n,i){return(n??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Ua.close,{},n)}_onError(n){this._on(Ua.error,{},i=>n(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const i={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(i.new=Em(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(i.old=Em(n.columns,n.old_record)),i}}const ic=()=>{},Mr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Qg=[1e3,2e3,5e3,1e4],Jg=1e4,Ig=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Zg{constructor(n,i){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mc,this.transport=null,this.heartbeatIntervalMs=Mr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ic,this.ref=0,this.reconnectTimer=null,this.vsn=_m,this.logger=ic,this.conn=null,this.sendBuffer=[],this.serializer=new Hg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=c=>c?(...d)=>c(...d):(...d)=>fetch(...d),!(!((r=i?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${n}/${pc.websocket}`,this.httpEndpoint=Qm(n),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xg.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const i=n.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const i=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const n=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,i,r){this.logger(n,i,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Kn.connecting:return vl.Connecting;case Kn.open:return vl.Open;case Kn.closing:return vl.Closing;default:return vl.Closed}}isConnected(){return this.connectionState()===vl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,i={config:{}}){const r=`realtime:${n}`,c=this.getChannels().find(d=>d.topic===r);if(c)return c;{const d=new di(`realtime:${n}`,i,this);return this.channels.push(d),d}}push(n){const{topic:i,event:r,payload:c,ref:d}=n,m=()=>{this.encode(n,p=>{var v;(v=this.conn)===null||v===void 0||v.send(p)})};this.log("push",`${i} ${r} (${d})`,c),this.isConnected()?m():this.sendBuffer.push(m)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close($g,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Mr.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let i=this.channels.find(r=>r.topic===n&&(r._isJoined()||r._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${n}"`),i.unsubscribe())}_remove(n){this.channels=this.channels.filter(i=>i.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply"&&i.ref&&i.ref===this.pendingHeartbeatRef){const g=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error",g)}catch(_){this.log("error","error in heartbeat callback",_)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:c,payload:d,ref:m}=i,p=m?`(${m})`:"",v=d.status||"";this.log("receive",`${v} ${r} ${c} ${p}`.trim(),d),this.channels.filter(g=>g._isMember(r)).forEach(g=>g._trigger(c,d,m)),this._triggerStateCallbacks("message",i)})}_clearTimer(n){var i;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===Kn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Kn.open||this.conn.readyState===Kn.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var i;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Ua.error))}_appendParams(n,i){if(Object.keys(i).length===0)return n;const r=n.match(/\?/)?"&":"?",c=new URLSearchParams(i);return`${n}${r}${c}`}_workerObjectUrl(n){let i;if(n)i=n;else{const r=new Blob([Ig],{type:"application/javascript"});i=URL.createObjectURL(r)}return i}_setConnectionState(n,i=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(n=null){let i,r=!1;if(n)i=n,r=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(c){this.log("error","Error fetching access token from callback",c),i=this.accessTokenValue}else i=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(c=>{const d={access_token:i,version:zg};i&&c.updateJoinPayload(d),c.joinedOnce&&c._isJoined()&&c._push(Ua.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${n}`,i)})}_triggerStateCallbacks(n,i){try{this.stateChangeCallbacks[n].forEach(r=>{try{r(i)}catch(c){this.log("error",`error in ${n} callback`,c)}})}catch(r){this.log("error",`error triggering ${n} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Km(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Mr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var i,r,c,d,m,p,v,g,_,w,O,U;switch(this.transport=(i=n?.transport)!==null&&i!==void 0?i:null,this.timeout=(r=n?.timeout)!==null&&r!==void 0?r:mc,this.heartbeatIntervalMs=(c=n?.heartbeatIntervalMs)!==null&&c!==void 0?c:Mr.HEARTBEAT_INTERVAL,this.worker=(d=n?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(m=n?.accessToken)!==null&&m!==void 0?m:null,this.heartbeatCallback=(p=n?.heartbeatCallback)!==null&&p!==void 0?p:ic,this.vsn=(v=n?.vsn)!==null&&v!==void 0?v:_m,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=n?.reconnectAfterMs)!==null&&g!==void 0?g:(G=>Qg[G-1]||Jg),this.vsn){case Bg:this.encode=(_=n?.encode)!==null&&_!==void 0?_:((G,z)=>z(JSON.stringify(G))),this.decode=(w=n?.decode)!==null&&w!==void 0?w:((G,z)=>z(JSON.parse(G)));break;case Vm:this.encode=(O=n?.encode)!==null&&O!==void 0?O:this.serializer.encode.bind(this.serializer),this.decode=(U=n?.decode)!==null&&U!==void 0?U:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var ds=class extends Error{constructor(s,n){super(s),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Pg(s,n,i){const r=new URL(n,s);if(i)for(const[c,d]of Object.entries(i))d!==void 0&&r.searchParams.set(c,d);return r.toString()}async function Wg(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function Fg(s){const n=s.fetchImpl??globalThis.fetch;return{async request({method:i,path:r,query:c,body:d,headers:m}){const p=Pg(s.baseUrl,r,c),v=await Wg(s.auth),g=await n(p,{method:i,headers:{...d?{"Content-Type":"application/json"}:{},...v,...m},body:d?JSON.stringify(d):void 0}),_=await g.text(),w=(g.headers.get("content-type")||"").includes("application/json"),O=w&&_?JSON.parse(_):_;if(!g.ok){const U=w?O:void 0,G=U?.error;throw new ds(G?.message??`Request failed with status ${g.status}`,{status:g.status,icebergType:G?.type,icebergCode:G?.code,details:U})}return{status:g.status,headers:g.headers,data:O}}}}function zr(s){return s.join("")}var ey=class{constructor(s,n=""){this.client=s,this.prefix=n}async listNamespaces(s){const n=s?{parent:zr(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(s,n){const i={namespace:s.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${zr(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zr(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${zr(s.namespace)}`}),!0}catch(n){if(n instanceof ds&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(s,n){try{return await this.createNamespace(s,n)}catch(i){if(i instanceof ds&&i.status===409)return;throw i}}};function ai(s){return s.join("")}var ty=class{constructor(s,n="",i){this.client=s,this.prefix=n,this.accessDelegation=i}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ai(s.namespace)}/tables`})).data.identifiers}async createTable(s,n){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ai(s.namespace)}/tables`,body:n,headers:i})).data.metadata}async updateTable(s,n){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ai(s.namespace)}/tables/${s.name}`,body:n});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(s,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ai(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(s){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ai(s.namespace)}/tables/${s.name}`,headers:n})).data.metadata}async tableExists(s){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ai(s.namespace)}/tables/${s.name}`,headers:n}),!0}catch(i){if(i instanceof ds&&i.status===404)return!1;throw i}}async createTableIfNotExists(s,n){try{return await this.createTable(s,n)}catch(i){if(i instanceof ds&&i.status===409)return await this.loadTable({namespace:s.namespace,name:n.name});throw i}}},ay=class{constructor(s){let n="v1";s.catalogName&&(n+=`/${s.catalogName}`);const i=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=Fg({baseUrl:i,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=s.accessDelegation?.join(","),this.namespaceOps=new ey(this.client,n),this.tableOps=new ty(this.client,n,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,n){return this.namespaceOps.createNamespace(s,n)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,n){return this.tableOps.createTable(s,n)}async updateTable(s,n){return this.tableOps.updateTable(s,n)}async dropTable(s,n){await this.tableOps.dropTable(s,n)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,n){return this.namespaceOps.createNamespaceIfNotExists(s,n)}async createTableIfNotExists(s,n){return this.tableOps.createTableIfNotExists(s,n)}},Vr=class extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}};function ot(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var ny=class extends Vr{constructor(s,n,i){super(s),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},gc=class extends Vr{constructor(s,n){super(s),this.name="StorageUnknownError",this.originalError=n}};const Oc=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),ly=()=>Response,yc=s=>{if(Array.isArray(s))return s.map(i=>yc(i));if(typeof s=="function"||s!==Object(s))return s;const n={};return Object.entries(s).forEach(([i,r])=>{const c=i.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));n[c]=yc(r)}),n},iy=s=>{if(typeof s!="object"||s===null)return!1;const n=Object.getPrototypeOf(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},sy=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function fs(s){"@babel/helpers - typeof";return fs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fs(s)}function ry(s,n){if(fs(s)!="object"||!s)return s;var i=s[Symbol.toPrimitive];if(i!==void 0){var r=i.call(s,n);if(fs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function uy(s){var n=ry(s,"string");return fs(n)=="symbol"?n:n+""}function oy(s,n,i){return(n=uy(n))in s?Object.defineProperty(s,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[n]=i,s}function Tm(s,n){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);n&&(r=r.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),i.push.apply(i,r)}return i}function ye(s){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?Tm(Object(i),!0).forEach(function(r){oy(s,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(i)):Tm(Object(i)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(i,r))})}return s}const sc=s=>{var n;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(n=s.error)===null||n===void 0?void 0:n.message)||JSON.stringify(s)},cy=async(s,n,i)=>{s instanceof await ly()&&!i?.noResolveJson?s.json().then(r=>{const c=s.status||500,d=r?.statusCode||c+"";n(new ny(sc(r),c,d))}).catch(r=>{n(new gc(sc(r),r))}):n(new gc(sc(s),s))},dy=(s,n,i,r)=>{const c={method:s,headers:n?.headers||{}};return s==="GET"||!r?c:(iy(r)?(c.headers=ye({"Content-Type":"application/json"},n?.headers),c.body=JSON.stringify(r)):c.body=r,n?.duplex&&(c.duplex=n.duplex),ye(ye({},c),i))};async function gs(s,n,i,r,c,d){return new Promise((m,p)=>{s(i,dy(n,r,c,d)).then(v=>{if(!v.ok)throw v;return r?.noResolveJson?v:v.json()}).then(v=>m(v)).catch(v=>cy(v,p,r))})}async function hs(s,n,i,r){return gs(s,"GET",n,i,r)}async function Da(s,n,i,r,c){return gs(s,"POST",n,r,c,i)}async function bc(s,n,i,r,c){return gs(s,"PUT",n,r,c,i)}async function fy(s,n,i,r){return gs(s,"HEAD",n,ye(ye({},i),{},{noResolveJson:!0}),r)}async function Nc(s,n,i,r,c){return gs(s,"DELETE",n,r,c,i)}var hy=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n}then(s,n){return this.execute().then(s,n)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}};let Jm;Jm=Symbol.toStringTag;var my=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n,this[Jm]="BlobDownloadBuilder",this.promise=null}asStream(){return new hy(this.downloadFn,this.shouldThrowOnError)}then(s,n){return this.getPromise().then(s,n)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}};const py={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Am={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var vy=class{constructor(s,n={},i,r){this.shouldThrowOnError=!1,this.url=s,this.headers=n,this.bucketId=i,this.fetch=Oc(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(s,n,i,r){var c=this;try{let d;const m=ye(ye({},Am),r);let p=ye(ye({},c.headers),s==="POST"&&{"x-upsert":String(m.upsert)});const v=m.metadata;typeof Blob<"u"&&i instanceof Blob?(d=new FormData,d.append("cacheControl",m.cacheControl),v&&d.append("metadata",c.encodeMetadata(v)),d.append("",i)):typeof FormData<"u"&&i instanceof FormData?(d=i,d.has("cacheControl")||d.append("cacheControl",m.cacheControl),v&&!d.has("metadata")&&d.append("metadata",c.encodeMetadata(v))):(d=i,p["cache-control"]=`max-age=${m.cacheControl}`,p["content-type"]=m.contentType,v&&(p["x-metadata"]=c.toBase64(c.encodeMetadata(v))),(typeof ReadableStream<"u"&&d instanceof ReadableStream||d&&typeof d=="object"&&"pipe"in d&&typeof d.pipe=="function")&&!m.duplex&&(m.duplex="half")),r?.headers&&(p=ye(ye({},p),r.headers));const g=c._removeEmptyFolders(n),_=c._getFinalPath(g),w=await(s=="PUT"?bc:Da)(c.fetch,`${c.url}/object/${_}`,d,ye({headers:p},m?.duplex?{duplex:m.duplex}:{}));return{data:{path:g,id:w.Id,fullPath:w.Key},error:null}}catch(d){if(c.shouldThrowOnError)throw d;if(ot(d))return{data:null,error:d};throw d}}async upload(s,n,i){return this.uploadOrUpdate("POST",s,n,i)}async uploadToSignedUrl(s,n,i,r){var c=this;const d=c._removeEmptyFolders(s),m=c._getFinalPath(d),p=new URL(c.url+`/object/upload/sign/${m}`);p.searchParams.set("token",n);try{let v;const g=ye({upsert:Am.upsert},r),_=ye(ye({},c.headers),{"x-upsert":String(g.upsert)});return typeof Blob<"u"&&i instanceof Blob?(v=new FormData,v.append("cacheControl",g.cacheControl),v.append("",i)):typeof FormData<"u"&&i instanceof FormData?(v=i,v.append("cacheControl",g.cacheControl)):(v=i,_["cache-control"]=`max-age=${g.cacheControl}`,_["content-type"]=g.contentType),{data:{path:d,fullPath:(await bc(c.fetch,p.toString(),v,{headers:_})).Key},error:null}}catch(v){if(c.shouldThrowOnError)throw v;if(ot(v))return{data:null,error:v};throw v}}async createSignedUploadUrl(s,n){var i=this;try{let r=i._getFinalPath(s);const c=ye({},i.headers);n?.upsert&&(c["x-upsert"]="true");const d=await Da(i.fetch,`${i.url}/object/upload/sign/${r}`,{},{headers:c}),m=new URL(i.url+d.url),p=m.searchParams.get("token");if(!p)throw new Vr("No token returned by API");return{data:{signedUrl:m.toString(),path:s,token:p},error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async update(s,n,i){return this.uploadOrUpdate("PUT",s,n,i)}async move(s,n,i){var r=this;try{return{data:await Da(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:s,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:r.headers}),error:null}}catch(c){if(r.shouldThrowOnError)throw c;if(ot(c))return{data:null,error:c};throw c}}async copy(s,n,i){var r=this;try{return{data:{path:(await Da(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:s,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:r.headers})).Key},error:null}}catch(c){if(r.shouldThrowOnError)throw c;if(ot(c))return{data:null,error:c};throw c}}async createSignedUrl(s,n,i){var r=this;try{let c=r._getFinalPath(s),d=await Da(r.fetch,`${r.url}/object/sign/${c}`,ye({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:r.headers});const m=i?.download?`&download=${i.download===!0?"":i.download}`:"";return d={signedUrl:encodeURI(`${r.url}${d.signedURL}${m}`)},{data:d,error:null}}catch(c){if(r.shouldThrowOnError)throw c;if(ot(c))return{data:null,error:c};throw c}}async createSignedUrls(s,n,i){var r=this;try{const c=await Da(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:n,paths:s},{headers:r.headers}),d=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:c.map(m=>ye(ye({},m),{},{signedUrl:m.signedURL?encodeURI(`${r.url}${m.signedURL}${d}`):null})),error:null}}catch(c){if(r.shouldThrowOnError)throw c;if(ot(c))return{data:null,error:c};throw c}}download(s,n){const i=typeof n?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(n?.transform||{}),c=r?`?${r}`:"",d=this._getFinalPath(s),m=()=>hs(this.fetch,`${this.url}/${i}/${d}${c}`,{headers:this.headers,noResolveJson:!0});return new my(m,this.shouldThrowOnError)}async info(s){var n=this;const i=n._getFinalPath(s);try{return{data:yc(await hs(n.fetch,`${n.url}/object/info/${i}`,{headers:n.headers})),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async exists(s){var n=this;const i=n._getFinalPath(s);try{return await fy(n.fetch,`${n.url}/object/${i}`,{headers:n.headers}),{data:!0,error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ot(r)&&r instanceof gc){const c=r.originalError;if([400,404].includes(c?.status))return{data:!1,error:r}}throw r}}getPublicUrl(s,n){const i=this._getFinalPath(s),r=[],c=n?.download?`download=${n.download===!0?"":n.download}`:"";c!==""&&r.push(c);const d=typeof n?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(n?.transform||{});m!==""&&r.push(m);let p=r.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${i}${p}`)}}}async remove(s){var n=this;try{return{data:await Nc(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:s},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}}async list(s,n,i){var r=this;try{const c=ye(ye(ye({},py),n),{},{prefix:s||""});return{data:await Da(r.fetch,`${r.url}/object/list/${r.bucketId}`,c,{headers:r.headers},i),error:null}}catch(c){if(r.shouldThrowOnError)throw c;if(ot(c))return{data:null,error:c};throw c}}async listV2(s,n){var i=this;try{const r=ye({},s);return{data:await Da(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,r,{headers:i.headers},n),error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const n=[];return s.width&&n.push(`width=${s.width}`),s.height&&n.push(`height=${s.height}`),s.resize&&n.push(`resize=${s.resize}`),s.format&&n.push(`format=${s.format}`),s.quality&&n.push(`quality=${s.quality}`),n.join("&")}};const Im="2.91.0",Zm={"X-Client-Info":`storage-js/${Im}`};var gy=class{constructor(s,n={},i,r){this.shouldThrowOnError=!1;const c=new URL(s);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=ye(ye({},Zm),n),this.fetch=Oc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(s){var n=this;try{const i=n.listBucketOptionsToQueryString(s);return{data:await hs(n.fetch,`${n.url}/bucket${i}`,{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}}async getBucket(s){var n=this;try{return{data:await hs(n.fetch,`${n.url}/bucket/${s}`,{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}}async createBucket(s,n={public:!1}){var i=this;try{return{data:await Da(i.fetch,`${i.url}/bucket`,{id:s,name:s,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:i.headers}),error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async updateBucket(s,n){var i=this;try{return{data:await bc(i.fetch,`${i.url}/bucket/${s}`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:i.headers}),error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async emptyBucket(s){var n=this;try{return{data:await Da(n.fetch,`${n.url}/bucket/${s}/empty`,{},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}}async deleteBucket(s){var n=this;try{return{data:await Nc(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}}listBucketOptionsToQueryString(s){const n={};return s&&("limit"in s&&(n.limit=String(s.limit)),"offset"in s&&(n.offset=String(s.offset)),s.search&&(n.search=s.search),s.sortColumn&&(n.sortColumn=s.sortColumn),s.sortOrder&&(n.sortOrder=s.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},yy=class{constructor(s,n={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=ye(ye({},Zm),n),this.fetch=Oc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var n=this;try{return{data:await Da(n.fetch,`${n.url}/bucket`,{name:s},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}}async listBuckets(s){var n=this;try{const i=new URLSearchParams;s?.limit!==void 0&&i.set("limit",s.limit.toString()),s?.offset!==void 0&&i.set("offset",s.offset.toString()),s?.sortColumn&&i.set("sortColumn",s.sortColumn),s?.sortOrder&&i.set("sortOrder",s.sortOrder),s?.search&&i.set("search",s.search);const r=i.toString(),c=r?`${n.url}/bucket?${r}`:`${n.url}/bucket`;return{data:await hs(n.fetch,c,{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}}async deleteBucket(s){var n=this;try{return{data:await Nc(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}}from(s){var n=this;if(!sy(s))throw new Vr("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new ay({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(i,{get(c,d){const m=c[d];return typeof m!="function"?m:async(...p)=>{try{return{data:await m.apply(c,p),error:null}}catch(v){if(r)throw v;return{data:null,error:v}}}}})}};const Cc={"X-Client-Info":`storage-js/${Im}`,"Content-Type":"application/json"};var Pm=class extends Error{constructor(s){super(s),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function ca(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}var rc=class extends Pm{constructor(s,n,i){super(s),this.name="StorageVectorsApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},by=class extends Pm{constructor(s,n){super(s),this.name="StorageVectorsUnknownError",this.originalError=n}};const Rc=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),_y=s=>{if(typeof s!="object"||s===null)return!1;const n=Object.getPrototypeOf(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Om=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Ey=async(s,n,i)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!i?.noResolveJson){const r=s.status||500,c=s;if(typeof c.json=="function")c.json().then(d=>{const m=d?.statusCode||d?.code||r+"";n(new rc(Om(d),r,m))}).catch(()=>{const d=r+"";n(new rc(c.statusText||`HTTP ${r} error`,r,d))});else{const d=r+"";n(new rc(c.statusText||`HTTP ${r} error`,r,d))}}else n(new by(Om(s),s))},wy=(s,n,i,r)=>{const c={method:s,headers:n?.headers||{}};return r?(_y(r)?(c.headers=ye({"Content-Type":"application/json"},n?.headers),c.body=JSON.stringify(r)):c.body=r,ye(ye({},c),i)):c};async function Sy(s,n,i,r,c,d){return new Promise((m,p)=>{s(i,wy(n,r,c,d)).then(v=>{if(!v.ok)throw v;if(r?.noResolveJson)return v;const g=v.headers.get("content-type");return!g||!g.includes("application/json")?{}:v.json()}).then(v=>m(v)).catch(v=>Ey(v,p,r))})}async function da(s,n,i,r,c){return Sy(s,"POST",n,r,c,i)}var Ty=class{constructor(s,n={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=ye(ye({},Cc),n),this.fetch=Rc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(s){var n=this;try{return{data:await da(n.fetch,`${n.url}/CreateIndex`,s,{headers:n.headers})||{},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ca(i))return{data:null,error:i};throw i}}async getIndex(s,n){var i=this;try{return{data:await da(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:s,indexName:n},{headers:i.headers}),error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(ca(r))return{data:null,error:r};throw r}}async listIndexes(s){var n=this;try{return{data:await da(n.fetch,`${n.url}/ListIndexes`,s,{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ca(i))return{data:null,error:i};throw i}}async deleteIndex(s,n){var i=this;try{return{data:await da(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:s,indexName:n},{headers:i.headers})||{},error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(ca(r))return{data:null,error:r};throw r}}},Ay=class{constructor(s,n={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=ye(ye({},Cc),n),this.fetch=Rc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(s){var n=this;try{if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await da(n.fetch,`${n.url}/PutVectors`,s,{headers:n.headers})||{},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ca(i))return{data:null,error:i};throw i}}async getVectors(s){var n=this;try{return{data:await da(n.fetch,`${n.url}/GetVectors`,s,{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ca(i))return{data:null,error:i};throw i}}async listVectors(s){var n=this;try{if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return{data:await da(n.fetch,`${n.url}/ListVectors`,s,{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ca(i))return{data:null,error:i};throw i}}async queryVectors(s){var n=this;try{return{data:await da(n.fetch,`${n.url}/QueryVectors`,s,{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ca(i))return{data:null,error:i};throw i}}async deleteVectors(s){var n=this;try{if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await da(n.fetch,`${n.url}/DeleteVectors`,s,{headers:n.headers})||{},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ca(i))return{data:null,error:i};throw i}}},Oy=class{constructor(s,n={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=ye(ye({},Cc),n),this.fetch=Rc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var n=this;try{return{data:await da(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ca(i))return{data:null,error:i};throw i}}async getBucket(s){var n=this;try{return{data:await da(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:s},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ca(i))return{data:null,error:i};throw i}}async listBuckets(s={}){var n=this;try{return{data:await da(n.fetch,`${n.url}/ListVectorBuckets`,s,{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ca(i))return{data:null,error:i};throw i}}async deleteBucket(s){var n=this;try{return{data:await da(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ca(i))return{data:null,error:i};throw i}}},Ny=class extends Oy{constructor(s,n={}){super(s,n.headers||{},n.fetch)}from(s){return new Cy(this.url,this.headers,s,this.fetch)}async createBucket(s){var n=()=>super.createBucket,i=this;return n().call(i,s)}async getBucket(s){var n=()=>super.getBucket,i=this;return n().call(i,s)}async listBuckets(s={}){var n=()=>super.listBuckets,i=this;return n().call(i,s)}async deleteBucket(s){var n=()=>super.deleteBucket,i=this;return n().call(i,s)}},Cy=class extends Ty{constructor(s,n,i,r){super(s,n,r),this.vectorBucketName=i}async createIndex(s){var n=()=>super.createIndex,i=this;return n().call(i,ye(ye({},s),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(s={}){var n=()=>super.listIndexes,i=this;return n().call(i,ye(ye({},s),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(s){var n=()=>super.getIndex,i=this;return n().call(i,i.vectorBucketName,s)}async deleteIndex(s){var n=()=>super.deleteIndex,i=this;return n().call(i,i.vectorBucketName,s)}index(s){return new Ry(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},Ry=class extends Ay{constructor(s,n,i,r,c){super(s,n,c),this.vectorBucketName=i,this.indexName=r}async putVectors(s){var n=()=>super.putVectors,i=this;return n().call(i,ye(ye({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(s){var n=()=>super.getVectors,i=this;return n().call(i,ye(ye({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(s={}){var n=()=>super.listVectors,i=this;return n().call(i,ye(ye({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(s){var n=()=>super.queryVectors,i=this;return n().call(i,ye(ye({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(s){var n=()=>super.deleteVectors,i=this;return n().call(i,ye(ye({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},ky=class extends gy{constructor(s,n={},i,r){super(s,n,i,r)}from(s){return new vy(this.url,this.headers,s,this.fetch)}get vectors(){return new Ny(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new yy(this.url+"/iceberg",this.headers,this.fetch)}};const Wm="2.91.0",oi=30*1e3,_c=3,uc=_c*oi,Dy="http://localhost:9999",Uy="supabase.auth.token",jy={"X-Client-Info":`gotrue-js/${Wm}`},Ec="X-Supabase-Api-Version",Fm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,My=600*1e3;class ms extends Error{constructor(n,i,r){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=r}}function ce(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class zy extends ms{constructor(n,i,r){super(n,i,r),this.name="AuthApiError",this.status=i,this.code=r}}function By(s){return ce(s)&&s.name==="AuthApiError"}class gl extends ms{constructor(n,i){super(n),this.name="AuthUnknownError",this.originalError=i}}class mn extends ms{constructor(n,i,r,c){super(n,r,c),this.name=i,this.status=r}}class oa extends mn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $y(s){return ce(s)&&s.name==="AuthSessionMissingError"}class ni extends mn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Br extends mn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class $r extends mn{constructor(n,i=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function qy(s){return ce(s)&&s.name==="AuthImplicitGrantRedirectError"}class Nm extends mn{constructor(n,i=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Hy extends mn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class wc extends mn{constructor(n,i){super(n,"AuthRetryableFetchError",i,void 0)}}function oc(s){return ce(s)&&s.name==="AuthRetryableFetchError"}class Cm extends mn{constructor(n,i,r){super(n,"AuthWeakPasswordError",i,"weak_password"),this.reasons=r}}class Sc extends mn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Hr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Rm=` 	
\r=`.split(""),Ly=(()=>{const s=new Array(128);for(let n=0;n<s.length;n+=1)s[n]=-1;for(let n=0;n<Rm.length;n+=1)s[Rm[n].charCodeAt(0)]=-2;for(let n=0;n<Hr.length;n+=1)s[Hr[n].charCodeAt(0)]=n;return s})();function km(s,n,i){if(s!==null)for(n.queue=n.queue<<8|s,n.queuedBits+=8;n.queuedBits>=6;){const r=n.queue>>n.queuedBits-6&63;i(Hr[r]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const r=n.queue>>n.queuedBits-6&63;i(Hr[r]),n.queuedBits-=6}}function ep(s,n,i){const r=Ly[s];if(r>-1)for(n.queue=n.queue<<6|r,n.queuedBits+=6;n.queuedBits>=8;)i(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Dm(s){const n=[],i=m=>{n.push(String.fromCodePoint(m))},r={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},d=m=>{Vy(m,r,i)};for(let m=0;m<s.length;m+=1)ep(s.charCodeAt(m),c,d);return n.join("")}function Gy(s,n){if(s<=127){n(s);return}else if(s<=2047){n(192|s>>6),n(128|s&63);return}else if(s<=65535){n(224|s>>12),n(128|s>>6&63),n(128|s&63);return}else if(s<=1114111){n(240|s>>18),n(128|s>>12&63),n(128|s>>6&63),n(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function Yy(s,n){for(let i=0;i<s.length;i+=1){let r=s.charCodeAt(i);if(r>55295&&r<=56319){const c=(r-55296)*1024&65535;r=(s.charCodeAt(i+1)-56320&65535|c)+65536,i+=1}Gy(r,n)}}function Vy(s,n,i){if(n.utf8seq===0){if(s<=127){i(s);return}for(let r=1;r<6;r+=1)if((s>>7-r&1)===0){n.utf8seq=r;break}if(n.utf8seq===2)n.codepoint=s&31;else if(n.utf8seq===3)n.codepoint=s&15;else if(n.utf8seq===4)n.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|s&63,n.utf8seq-=1,n.utf8seq===0&&i(n.codepoint)}}function fi(s){const n=[],i={queue:0,queuedBits:0},r=c=>{n.push(c)};for(let c=0;c<s.length;c+=1)ep(s.charCodeAt(c),i,r);return new Uint8Array(n)}function Ky(s){const n=[];return Yy(s,i=>n.push(i)),new Uint8Array(n)}function yl(s){const n=[],i={queue:0,queuedBits:0},r=c=>{n.push(c)};return s.forEach(c=>km(c,i,r)),km(null,i,r),n.join("")}function Xy(s){return Math.round(Date.now()/1e3)+s}function Qy(){return Symbol("auth-callback")}const Gt=()=>typeof window<"u"&&typeof document<"u",hl={tested:!1,writable:!1},tp=()=>{if(!Gt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(hl.tested)return hl.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),hl.tested=!0,hl.writable=!0}catch{hl.tested=!0,hl.writable=!1}return hl.writable};function Jy(s){const n={},i=new URL(s);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((c,d)=>{n[d]=c})}catch{}return i.searchParams.forEach((r,c)=>{n[c]=r}),n}const ap=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),Iy=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",ci=async(s,n,i)=>{await s.setItem(n,JSON.stringify(i))},ml=async(s,n)=>{const i=await s.getItem(n);if(!i)return null;try{return JSON.parse(i)}catch{return i}},Lt=async(s,n)=>{await s.removeItem(n)};class Kr{constructor(){this.promise=new Kr.promiseConstructor((n,i)=>{this.resolve=n,this.reject=i})}}Kr.promiseConstructor=Promise;function cc(s){const n=s.split(".");if(n.length!==3)throw new Sc("Invalid JWT structure");for(let r=0;r<n.length;r++)if(!xy.test(n[r]))throw new Sc("JWT not in base64url format");return{header:JSON.parse(Dm(n[0])),payload:JSON.parse(Dm(n[1])),signature:fi(n[2]),raw:{header:n[0],payload:n[1]}}}async function Zy(s){return await new Promise(n=>{setTimeout(()=>n(null),s)})}function Py(s,n){return new Promise((r,c)=>{(async()=>{for(let d=0;d<1/0;d++)try{const m=await s(d);if(!n(d,null,m)){r(m);return}}catch(m){if(!n(d,m)){c(m);return}}})()})}function Wy(s){return("0"+s.toString(16)).substr(-2)}function Fy(){const n=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=i.length;let c="";for(let d=0;d<56;d++)c+=i.charAt(Math.floor(Math.random()*r));return c}return crypto.getRandomValues(n),Array.from(n,Wy).join("")}async function e0(s){const i=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",i),c=new Uint8Array(r);return Array.from(c).map(d=>String.fromCharCode(d)).join("")}async function t0(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const i=await e0(s);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function li(s,n,i=!1){const r=Fy();let c=r;i&&(c+="/PASSWORD_RECOVERY"),await ci(s,`${n}-code-verifier`,c);const d=await t0(r);return[d,r===d?"plain":"s256"]}const a0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function n0(s){const n=s.headers.get(Ec);if(!n||!n.match(a0))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function l0(s){if(!s)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(s<=n)throw new Error("JWT has expired")}function i0(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const s0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ii(s){if(!s0.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function dc(){const s={};return new Proxy(s,{get:(n,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const r=i.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function r0(s,n){return new Proxy(s,{get:(i,r,c)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const d=r.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,r,c)}return!n.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(i,r,c)}})}function Um(s){return JSON.parse(JSON.stringify(s))}const pl=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),u0=[502,503,504];async function jm(s){var n;if(!Iy(s))throw new wc(pl(s),0);if(u0.includes(s.status))throw new wc(pl(s),s.status);let i;try{i=await s.json()}catch(d){throw new gl(pl(d),d)}let r;const c=n0(s);if(c&&c.getTime()>=Fm["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?r=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(r=i.error_code),r){if(r==="weak_password")throw new Cm(pl(i),s.status,((n=i.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(r==="session_not_found")throw new oa}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((d,m)=>d&&typeof m=="string",!0))throw new Cm(pl(i),s.status,i.weak_password.reasons);throw new zy(pl(i),s.status||500,r)}const o0=(s,n,i,r)=>{const c={method:s,headers:n?.headers||{}};return s==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),c.body=JSON.stringify(r),Object.assign(Object.assign({},c),i))};async function ge(s,n,i,r){var c;const d=Object.assign({},r?.headers);d[Ec]||(d[Ec]=Fm["2024-01-01"].name),r?.jwt&&(d.Authorization=`Bearer ${r.jwt}`);const m=(c=r?.query)!==null&&c!==void 0?c:{};r?.redirectTo&&(m.redirect_to=r.redirectTo);const p=Object.keys(m).length?"?"+new URLSearchParams(m).toString():"",v=await c0(s,n,i+p,{headers:d,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(v):{data:Object.assign({},v),error:null}}async function c0(s,n,i,r,c,d){const m=o0(n,r,c,d);let p;try{p=await s(i,Object.assign({},m))}catch(v){throw console.error(v),new wc(pl(v),0)}if(p.ok||await jm(p),r?.noResolveJson)return p;try{return await p.json()}catch(v){await jm(v)}}function ka(s){var n;let i=null;h0(s)&&(i=Object.assign({},s),s.expires_at||(i.expires_at=Xy(s.expires_in)));const r=(n=s.user)!==null&&n!==void 0?n:s;return{data:{session:i,user:r},error:null}}function xm(s){const n=ka(s);return!n.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((i,r)=>i&&typeof r=="string",!0)&&(n.data.weak_password=s.weak_password),n}function Xn(s){var n;return{data:{user:(n=s.user)!==null&&n!==void 0?n:s},error:null}}function d0(s){return{data:s,error:null}}function f0(s){const{action_link:n,email_otp:i,hashed_token:r,redirect_to:c,verification_type:d}=s,m=Yr(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:i,hashed_token:r,redirect_to:c,verification_type:d},v=Object.assign({},m);return{data:{properties:p,user:v},error:null}}function Mm(s){return s}function h0(s){return s.access_token&&s.refresh_token&&s.expires_in}const fc=["global","local","others"];class m0{constructor({url:n="",headers:i={},fetch:r}){this.url=n,this.headers=i,this.fetch=ap(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,i=fc[0]){if(fc.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fc.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async inviteUserByEmail(n,i={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:Xn})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async generateLink(n){try{const{options:i}=n,r=Yr(n,["options"]),c=Object.assign(Object.assign({},r),i);return"newEmail"in r&&(c.new_email=r?.newEmail,delete c.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:f0,redirectTo:i?.redirectTo})}catch(i){if(ce(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(n){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Xn})}catch(i){if(ce(i))return{data:{user:null},error:i};throw i}}async listUsers(n){var i,r,c,d,m,p,v;try{const g={nextPage:null,lastPage:0,total:0},_=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(i=n?.page)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:"",per_page:(d=(c=n?.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:Mm});if(_.error)throw _.error;const w=await _.json(),O=(m=_.headers.get("x-total-count"))!==null&&m!==void 0?m:0,U=(v=(p=_.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&v!==void 0?v:[];return U.length>0&&(U.forEach(G=>{const z=parseInt(G.split(";")[0].split("=")[1].substring(0,1)),Q=JSON.parse(G.split(";")[1].split("=")[1]);g[`${Q}Page`]=z}),g.total=parseInt(O)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(ce(g))return{data:{users:[]},error:g};throw g}}async getUserById(n){ii(n);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Xn})}catch(i){if(ce(i))return{data:{user:null},error:i};throw i}}async updateUserById(n,i){ii(n);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:i,headers:this.headers,xform:Xn})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async deleteUser(n,i=!1){ii(n);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:i},xform:Xn})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async _listFactors(n){ii(n.userId);try{const{data:i,error:r}=await ge(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:i,error:r}}catch(i){if(ce(i))return{data:null,error:i};throw i}}async _deleteFactor(n){ii(n.userId),ii(n.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(i){if(ce(i))return{data:null,error:i};throw i}}async _listOAuthClients(n){var i,r,c,d,m,p,v;try{const g={nextPage:null,lastPage:0,total:0},_=await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(i=n?.page)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:"",per_page:(d=(c=n?.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:Mm});if(_.error)throw _.error;const w=await _.json(),O=(m=_.headers.get("x-total-count"))!==null&&m!==void 0?m:0,U=(v=(p=_.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&v!==void 0?v:[];return U.length>0&&(U.forEach(G=>{const z=parseInt(G.split(";")[0].split("=")[1].substring(0,1)),Q=JSON.parse(G.split(";")[1].split("=")[1]);g[`${Q}Page`]=z}),g.total=parseInt(O)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(ce(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(n){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ce(i))return{data:null,error:i};throw i}}async _getOAuthClient(n){try{return await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ce(i))return{data:null,error:i};throw i}}async _updateOAuthClient(n,i){try{return await ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:i,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(n){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ce(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(n){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ce(i))return{data:null,error:i};throw i}}}function zm(s={}){return{getItem:n=>s[n]||null,setItem:(n,i)=>{s[n]=i},removeItem:n=>{delete s[n]}}}const si={debug:!!(globalThis&&tp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class np extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class p0 extends np{}async function v0(s,n,i){si.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,n);const r=new globalThis.AbortController;return n>0&&setTimeout(()=>{r.abort(),si.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async c=>{if(c){si.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,c.name);try{return await i()}finally{si.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,c.name)}}else{if(n===0)throw si.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new p0(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(si.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function g0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function lp(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function y0(s){return parseInt(s,16)}function b0(s){const n=new TextEncoder().encode(s);return"0x"+Array.from(n,r=>r.toString(16).padStart(2,"0")).join("")}function _0(s){var n;const{chainId:i,domain:r,expirationTime:c,issuedAt:d=new Date,nonce:m,notBefore:p,requestId:v,resources:g,scheme:_,uri:w,version:O}=s;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(m&&m.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${m}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(O!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${O}`);if(!((n=s.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const U=lp(s.address),G=_?`${_}://${r}`:r,z=s.statement?`${s.statement}
`:"",Q=`${G} wants you to sign in with your Ethereum account:
${U}

${z}`;let ee=`URI: ${w}
Version: ${O}
Chain ID: ${i}${m?`
Nonce: ${m}`:""}
Issued At: ${d.toISOString()}`;if(c&&(ee+=`
Expiration Time: ${c.toISOString()}`),p&&(ee+=`
Not Before: ${p.toISOString()}`),v&&(ee+=`
Request ID: ${v}`),g){let le=`
Resources:`;for(const L of g){if(!L||typeof L!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${L}`);le+=`
- ${L}`}ee+=le}return`${Q}
${ee}`}class kt extends Error{constructor({message:n,code:i,cause:r,name:c}){var d;super(n,{cause:r}),this.__isWebAuthnError=!0,this.name=(d=c??(r instanceof Error?r.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=i}}class Lr extends kt{constructor(n,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:n}),this.name="WebAuthnUnknownError",this.originalError=i}}function E0({error:s,options:n}){var i,r,c;const{publicKey:d}=n;if(!d)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new kt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((i=d.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new kt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(n.mediation==="conditional"&&((r=d.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new kt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((c=d.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new kt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new kt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new kt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return d.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new kt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new kt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const m=window.location.hostname;if(ip(m)){if(d.rp.id!==m)return new kt({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new kt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new kt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new kt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new kt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function w0({error:s,options:n}){const{publicKey:i}=n;if(!i)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new kt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new kt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const r=window.location.hostname;if(ip(r)){if(i.rpId!==r)return new kt({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new kt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new kt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new kt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class S0{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const T0=new S0;function A0(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:n,user:i,excludeCredentials:r}=s,c=Yr(s,["challenge","user","excludeCredentials"]),d=fi(n).buffer,m=Object.assign(Object.assign({},i),{id:fi(i.id).buffer}),p=Object.assign(Object.assign({},c),{challenge:d,user:m});if(r&&r.length>0){p.excludeCredentials=new Array(r.length);for(let v=0;v<r.length;v++){const g=r[v];p.excludeCredentials[v]=Object.assign(Object.assign({},g),{id:fi(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return p}function O0(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:n,allowCredentials:i}=s,r=Yr(s,["challenge","allowCredentials"]),c=fi(n).buffer,d=Object.assign(Object.assign({},r),{challenge:c});if(i&&i.length>0){d.allowCredentials=new Array(i.length);for(let m=0;m<i.length;m++){const p=i[m];d.allowCredentials[m]=Object.assign(Object.assign({},p),{id:fi(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return d}function N0(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const i=s;return{id:s.id,rawId:s.id,response:{attestationObject:yl(new Uint8Array(s.response.attestationObject)),clientDataJSON:yl(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(n=i.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function C0(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const i=s,r=s.getClientExtensionResults(),c=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:yl(new Uint8Array(c.authenticatorData)),clientDataJSON:yl(new Uint8Array(c.clientDataJSON)),signature:yl(new Uint8Array(c.signature)),userHandle:c.userHandle?yl(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(n=i.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function ip(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function Bm(){var s,n;return!!(Gt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function R0(s){try{const n=await navigator.credentials.create(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Lr("Browser returned unexpected credential type",n)}:{data:null,error:new Lr("Empty credential response",n)}}catch(n){return{data:null,error:E0({error:n,options:s})}}}async function k0(s){try{const n=await navigator.credentials.get(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Lr("Browser returned unexpected credential type",n)}:{data:null,error:new Lr("Empty credential response",n)}}catch(n){return{data:null,error:w0({error:n,options:s})}}}const D0={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},U0={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Gr(...s){const n=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),i=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),r={};for(const c of s)if(c)for(const d in c){const m=c[d];if(m!==void 0)if(Array.isArray(m))r[d]=m;else if(i(m))r[d]=m;else if(n(m)){const p=r[d];n(p)?r[d]=Gr(p,m):r[d]=Gr(m)}else r[d]=m}return r}function j0(s,n){return Gr(D0,s,n||{})}function x0(s,n){return Gr(U0,s,n||{})}class M0{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:i,friendlyName:r,signal:c},d){try{const{data:m,error:p}=await this.client.mfa.challenge({factorId:n,webauthn:i});if(!m)return{data:null,error:p};const v=c??T0.createNewAbortSignal();if(m.webauthn.type==="create"){const{user:g}=m.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${r}`),g.displayName||(g.displayName=g.name)}switch(m.webauthn.type){case"create":{const g=j0(m.webauthn.credential_options.publicKey,d?.create),{data:_,error:w}=await R0({publicKey:g,signal:v});return _?{data:{factorId:n,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:_}},error:null}:{data:null,error:w}}case"request":{const g=x0(m.webauthn.credential_options.publicKey,d?.request),{data:_,error:w}=await k0(Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:g,signal:v}));return _?{data:{factorId:n,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:_}},error:null}:{data:null,error:w}}}}catch(m){return ce(m)?{data:null,error:m}:{data:null,error:new gl("Unexpected error in challenge",m)}}}async _verify({challengeId:n,factorId:i,webauthn:r}){return this.client.mfa.verify({factorId:i,challengeId:n,webauthn:r})}async _authenticate({factorId:n,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},d){if(!i)return{data:null,error:new ms("rpId is required for WebAuthn authentication")};try{if(!Bm())return{data:null,error:new gl("Browser does not support WebAuthn",null)};const{data:m,error:p}=await this.challenge({factorId:n,webauthn:{rpId:i,rpOrigins:r},signal:c},{request:d});if(!m)return{data:null,error:p};const{webauthn:v}=m;return this._verify({factorId:n,challengeId:m.challengeId,webauthn:{type:v.type,rpId:i,rpOrigins:r,credential_response:v.credential_response}})}catch(m){return ce(m)?{data:null,error:m}:{data:null,error:new gl("Unexpected error in authenticate",m)}}}async _register({friendlyName:n,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},d){if(!i)return{data:null,error:new ms("rpId is required for WebAuthn registration")};try{if(!Bm())return{data:null,error:new gl("Browser does not support WebAuthn",null)};const{data:m,error:p}=await this._enroll({friendlyName:n});if(!m)return await this.client.mfa.listFactors().then(_=>{var w;return(w=_.data)===null||w===void 0?void 0:w.all.find(O=>O.factor_type==="webauthn"&&O.friendly_name===n&&O.status!=="unverified")}).then(_=>_?this.client.mfa.unenroll({factorId:_?.id}):void 0),{data:null,error:p};const{data:v,error:g}=await this._challenge({factorId:m.id,friendlyName:m.friendly_name,webauthn:{rpId:i,rpOrigins:r},signal:c},{create:d});return v?this._verify({factorId:m.id,challengeId:v.challengeId,webauthn:{rpId:i,rpOrigins:r,type:v.webauthn.type,credential_response:v.webauthn.credential_response}}):{data:null,error:g}}catch(m){return ce(m)?{data:null,error:m}:{data:null,error:new gl("Unexpected error in register",m)}}}}g0();const z0={url:Dy,storageKey:Uy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:jy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function $m(s,n,i){return await i()}const ri={};class ps{get jwks(){var n,i;return(i=(n=ri[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(n){ri[this.storageKey]=Object.assign(Object.assign({},ri[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,i;return(i=(n=ri[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){ri[this.storageKey]=Object.assign(Object.assign({},ri[this.storageKey]),{cachedAt:n})}constructor(n){var i,r,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const d=Object.assign(Object.assign({},z0),n);if(this.storageKey=d.storageKey,this.instanceID=(i=ps.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,ps.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.instanceID>0&&Gt()){const m=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(m),this.logDebugMessages&&console.trace(m)}if(this.persistSession=d.persistSession,this.autoRefreshToken=d.autoRefreshToken,this.admin=new m0({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=ap(d.fetch),this.lock=d.lock||$m,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,this.lockAcquireTimeout=d.lockAcquireTimeout,d.lock?this.lock=d.lock:this.persistSession&&Gt()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=v0:this.lock=$m,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new M0(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:tp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zm(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=zm(this.memoryStorage)),Gt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(m){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",m)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async m=>{this._debug("received broadcast notification from other tab or client",m),await this._notifyAllSubscribers(m.data.event,m.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Wm}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let i={},r="none";if(Gt()&&(i=Jy(window.location.href),this._isImplicitGrantCallback(i)?r="implicit":await this._isPKCECallback(i)&&(r="pkce")),Gt()&&this.detectSessionInUrl&&r!=="none"){const{data:c,error:d}=await this._getSessionFromURL(i,r);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),qy(d)){const v=(n=d.details)===null||n===void 0?void 0:n.code;if(v==="identity_already_exists"||v==="identity_not_found"||v==="single_identity_not_deletable")return{error:d}}return{error:d}}const{session:m,redirectType:p}=c;return this._debug("#_initialize()","detected session in URL",m,"redirect type",p),await this._saveSession(m),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",m):await this._notifyAllSubscribers("SIGNED_IN",m)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return ce(i)?this._returnResult({error:i}):this._returnResult({error:new gl("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var i,r,c;try{const d=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(i=n?.options)===null||i===void 0?void 0:i.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(c=n?.options)===null||c===void 0?void 0:c.captchaToken}},xform:ka}),{data:m,error:p}=d;if(p||!m)return this._returnResult({data:{user:null,session:null},error:p});const v=m.session,g=m.user;return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:g,session:v},error:null})}catch(d){if(ce(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signUp(n){var i,r,c;try{let d;if("email"in n){const{email:_,password:w,options:O}=n;let U=null,G=null;this.flowType==="pkce"&&([U,G]=await li(this.storage,this.storageKey)),d=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:O?.emailRedirectTo,body:{email:_,password:w,data:(i=O?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:O?.captchaToken},code_challenge:U,code_challenge_method:G},xform:ka})}else if("phone"in n){const{phone:_,password:w,options:O}=n;d=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_,password:w,data:(r=O?.data)!==null&&r!==void 0?r:{},channel:(c=O?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:O?.captchaToken}},xform:ka})}else throw new Br("You must provide either an email or phone number and a password");const{data:m,error:p}=d;if(p||!m)return await Lt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const v=m.session,g=m.user;return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:g,session:v},error:null})}catch(d){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ce(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithPassword(n){try{let i;if("email"in n){const{email:d,password:m,options:p}=n;i=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:m,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:xm})}else if("phone"in n){const{phone:d,password:m,options:p}=n;i=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:m,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:xm})}else throw new Br("You must provide either an email or phone number and a password");const{data:r,error:c}=i;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!r||!r.session||!r.user){const d=new ni;return this._returnResult({data:{user:null,session:null},error:d})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:c})}catch(i){if(ce(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(n){var i,r,c,d;return await this._handleProviderSignIn(n.provider,{redirectTo:(i=n.options)===null||i===void 0?void 0:i.redirectTo,scopes:(r=n.options)===null||r===void 0?void 0:r.scopes,queryParams:(c=n.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(d=n.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:i}=n;switch(i){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(n){var i,r,c,d,m,p,v,g,_,w,O;let U,G;if("message"in n)U=n.message,G=n.signature;else{const{chain:z,wallet:Q,statement:ee,options:le}=n;let L;if(Gt())if(typeof Q=="object")L=Q;else{const ke=window;if("ethereum"in ke&&typeof ke.ethereum=="object"&&"request"in ke.ethereum&&typeof ke.ethereum.request=="function")L=ke.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof Q!="object"||!le?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=Q}const se=new URL((i=le?.url)!==null&&i!==void 0?i:window.location.href),be=await L.request({method:"eth_requestAccounts"}).then(ke=>ke).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!be||be.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const J=lp(be[0]);let te=(r=le?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!te){const ke=await L.request({method:"eth_chainId"});te=y0(ke)}const me={domain:se.host,address:J,statement:ee,uri:se.href,version:"1",chainId:te,nonce:(c=le?.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(m=(d=le?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&m!==void 0?m:new Date,expirationTime:(p=le?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(v=le?.signInWithEthereum)===null||v===void 0?void 0:v.notBefore,requestId:(g=le?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(_=le?.signInWithEthereum)===null||_===void 0?void 0:_.resources};U=_0(me),G=await L.request({method:"personal_sign",params:[b0(U),J]})}try{const{data:z,error:Q}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:U,signature:G},!((w=n.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(O=n.options)===null||O===void 0?void 0:O.captchaToken}}:null),xform:ka});if(Q)throw Q;if(!z||!z.session||!z.user){const ee=new ni;return this._returnResult({data:{user:null,session:null},error:ee})}return z.session&&(await this._saveSession(z.session),await this._notifyAllSubscribers("SIGNED_IN",z.session)),this._returnResult({data:Object.assign({},z),error:Q})}catch(z){if(ce(z))return this._returnResult({data:{user:null,session:null},error:z});throw z}}async signInWithSolana(n){var i,r,c,d,m,p,v,g,_,w,O,U;let G,z;if("message"in n)G=n.message,z=n.signature;else{const{chain:Q,wallet:ee,statement:le,options:L}=n;let se;if(Gt())if(typeof ee=="object")se=ee;else{const J=window;if("solana"in J&&typeof J.solana=="object"&&("signIn"in J.solana&&typeof J.solana.signIn=="function"||"signMessage"in J.solana&&typeof J.solana.signMessage=="function"))se=J.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof ee!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");se=ee}const be=new URL((i=L?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in se&&se.signIn){const J=await se.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L?.signInWithSolana),{version:"1",domain:be.host,uri:be.href}),le?{statement:le}:null));let te;if(Array.isArray(J)&&J[0]&&typeof J[0]=="object")te=J[0];else if(J&&typeof J=="object"&&"signedMessage"in J&&"signature"in J)te=J;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in te&&"signature"in te&&(typeof te.signedMessage=="string"||te.signedMessage instanceof Uint8Array)&&te.signature instanceof Uint8Array)G=typeof te.signedMessage=="string"?te.signedMessage:new TextDecoder().decode(te.signedMessage),z=te.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in se)||typeof se.signMessage!="function"||!("publicKey"in se)||typeof se!="object"||!se.publicKey||!("toBase58"in se.publicKey)||typeof se.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");G=[`${be.host} wants you to sign in with your Solana account:`,se.publicKey.toBase58(),...le?["",le,""]:[""],"Version: 1",`URI: ${be.href}`,`Issued At: ${(c=(r=L?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((d=L?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((m=L?.signInWithSolana)===null||m===void 0)&&m.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((p=L?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((v=L?.signInWithSolana)===null||v===void 0)&&v.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((g=L?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((w=(_=L?.signInWithSolana)===null||_===void 0?void 0:_.resources)===null||w===void 0)&&w.length?["Resources",...L.signInWithSolana.resources.map(te=>`- ${te}`)]:[]].join(`
`);const J=await se.signMessage(new TextEncoder().encode(G),"utf8");if(!J||!(J instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");z=J}}try{const{data:Q,error:ee}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:G,signature:yl(z)},!((O=n.options)===null||O===void 0)&&O.captchaToken?{gotrue_meta_security:{captcha_token:(U=n.options)===null||U===void 0?void 0:U.captchaToken}}:null),xform:ka});if(ee)throw ee;if(!Q||!Q.session||!Q.user){const le=new ni;return this._returnResult({data:{user:null,session:null},error:le})}return Q.session&&(await this._saveSession(Q.session),await this._notifyAllSubscribers("SIGNED_IN",Q.session)),this._returnResult({data:Object.assign({},Q),error:ee})}catch(Q){if(ce(Q))return this._returnResult({data:{user:null,session:null},error:Q});throw Q}}async _exchangeCodeForSession(n){const i=await ml(this.storage,`${this.storageKey}-code-verifier`),[r,c]=(i??"").split("/");try{if(!r&&this.flowType==="pkce")throw new Hy;const{data:d,error:m}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:r},xform:ka});if(await Lt(this.storage,`${this.storageKey}-code-verifier`),m)throw m;if(!d||!d.session||!d.user){const p=new ni;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return d.session&&(await this._saveSession(d.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",d.session)},0)),this._returnResult({data:Object.assign(Object.assign({},d),{redirectType:c??null}),error:m})}catch(d){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ce(d))return this._returnResult({data:{user:null,session:null,redirectType:null},error:d});throw d}}async signInWithIdToken(n){try{const{options:i,provider:r,token:c,access_token:d,nonce:m}=n,p=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:c,access_token:d,nonce:m,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:ka}),{data:v,error:g}=p;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!v||!v.session||!v.user){const _=new ni;return this._returnResult({data:{user:null,session:null},error:_})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:v,error:g})}catch(i){if(ce(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(n){var i,r,c,d,m;try{if("email"in n){const{email:p,options:v}=n;let g=null,_=null;this.flowType==="pkce"&&([g,_]=await li(this.storage,this.storageKey));const{error:w}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(i=v?.data)!==null&&i!==void 0?i:{},create_user:(r=v?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:g,code_challenge_method:_},redirectTo:v?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in n){const{phone:p,options:v}=n,{data:g,error:_}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(c=v?.data)!==null&&c!==void 0?c:{},create_user:(d=v?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:v?.captchaToken},channel:(m=v?.channel)!==null&&m!==void 0?m:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:_})}throw new Br("You must provide either an email or phone number.")}catch(p){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ce(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(n){var i,r;try{let c,d;"options"in n&&(c=(i=n.options)===null||i===void 0?void 0:i.redirectTo,d=(r=n.options)===null||r===void 0?void 0:r.captchaToken);const{data:m,error:p}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:d}}),redirectTo:c,xform:ka});if(p)throw p;if(!m)throw new Error("An error occurred on token verification.");const v=m.session,g=m.user;return v?.access_token&&(await this._saveSession(v),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",v)),this._returnResult({data:{user:g,session:v},error:null})}catch(c){if(ce(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(n){var i,r,c,d,m;try{let p=null,v=null;this.flowType==="pkce"&&([p,v]=await li(this.storage,this.storageKey));const g=await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(r=(i=n.options)===null||i===void 0?void 0:i.redirectTo)!==null&&r!==void 0?r:void 0}),!((c=n?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:v}),headers:this.headers,xform:d0});return!((d=g.data)===null||d===void 0)&&d.url&&Gt()&&!(!((m=n.options)===null||m===void 0)&&m.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(p){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ce(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;if(r)throw r;if(!i)throw new oa;const{error:c}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(n){if(ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const i=`${this.url}/resend`;if("email"in n){const{email:r,type:c,options:d}=n,{error:m}=await ge(this.fetch,"POST",i,{headers:this.headers,body:{email:r,type:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}else if("phone"in n){const{phone:r,type:c,options:d}=n,{data:m,error:p}=await ge(this.fetch,"POST",i,{headers:this.headers,body:{phone:r,type:c,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:m?.message_id},error:p})}throw new Br("You must provide either an email or phone number and a type")}catch(i){if(ce(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async i=>i))}async _acquireLock(n,i){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await r,await i()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=i();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await n(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const i=await ml(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?n=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const r=n.expires_at?n.expires_at*1e3-Date.now()<uc:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",n.expires_at),!r){if(this.userStorage){const m=await ml(this.userStorage,this.storageKey+"-user");m?.user?n.user=m.user:n.user=dc()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const m={value:this.suppressGetSessionWarning};n.user=r0(n.user,m),m.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:c,error:d}=await this._callRefreshToken(n.refresh_token);return d?this._returnResult({data:{session:null},error:d}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const i=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(n){try{return n?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Xn}):await this._useSession(async i=>{var r,c,d;const{data:m,error:p}=i;if(p)throw p;return!(!((r=m.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new oa}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(c=m.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0,xform:Xn})})}catch(i){if(ce(i))return $y(i)&&(await this._removeSession(),await Lt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(n,i={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,i))}async _updateUser(n,i={}){try{return await this._useSession(async r=>{const{data:c,error:d}=r;if(d)throw d;if(!c.session)throw new oa;const m=c.session;let p=null,v=null;this.flowType==="pkce"&&n.email!=null&&([p,v]=await li(this.storage,this.storageKey));const{data:g,error:_}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:v}),jwt:m.access_token,xform:Xn});if(_)throw _;return m.user=g.user,await this._saveSession(m),await this._notifyAllSubscribers("USER_UPDATED",m),this._returnResult({data:{user:m.user},error:null})})}catch(r){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ce(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new oa;const i=Date.now()/1e3;let r=i,c=!0,d=null;const{payload:m}=cc(n.access_token);if(m.exp&&(r=m.exp,c=r<=i),c){const{data:p,error:v}=await this._callRefreshToken(n.refresh_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!p)return{data:{user:null,session:null},error:null};d=p}else{const{data:p,error:v}=await this._getUser(n.access_token);if(v)throw v;d={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:r-i,expires_at:r},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return this._returnResult({data:{user:d.user,session:d},error:null})}catch(i){if(ce(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async i=>{var r;if(!n){const{data:m,error:p}=i;if(p)throw p;n=(r=m.session)!==null&&r!==void 0?r:void 0}if(!n?.refresh_token)throw new oa;const{data:c,error:d}=await this._callRefreshToken(n.refresh_token);return d?this._returnResult({data:{user:null,session:null},error:d}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(ce(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(n,i){try{if(!Gt())throw new $r("No browser detected.");if(n.error||n.error_description||n.error_code)throw new $r(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Nm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $r("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Nm("No code detected.");const{data:le,error:L}=await this._exchangeCodeForSession(n.code);if(L)throw L;const se=new URL(window.location.href);return se.searchParams.delete("code"),window.history.replaceState(window.history.state,"",se.toString()),{data:{session:le.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:c,access_token:d,refresh_token:m,expires_in:p,expires_at:v,token_type:g}=n;if(!d||!p||!m||!g)throw new $r("No session defined in URL");const _=Math.round(Date.now()/1e3),w=parseInt(p);let O=_+w;v&&(O=parseInt(v));const U=O-_;U*1e3<=oi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${U}s, should have been closer to ${w}s`);const G=O-w;_-G>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",G,O,_):_-G<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",G,O,_);const{data:z,error:Q}=await this._getUser(d);if(Q)throw Q;const ee={provider_token:r,provider_refresh_token:c,access_token:d,expires_in:w,expires_at:O,refresh_token:m,token_type:g,user:z.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:ee,redirectType:n.type},error:null})}catch(r){if(ce(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const i=await ml(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&i)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async i=>{var r;const{data:c,error:d}=i;if(d)return this._returnResult({error:d});const m=(r=c.session)===null||r===void 0?void 0:r.access_token;if(m){const{error:p}=await this.admin.signOut(m,n);if(p&&!(By(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return n!=="others"&&(await this._removeSession(),await Lt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const i=Qy(),r={id:i,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:r}}}async _emitInitialSession(n){return await this._useSession(async i=>{var r,c;try{const{data:{session:d},error:m}=i;if(m)throw m;await((r=this.stateChangeEmitters.get(n))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",n,"session",d)}catch(d){await((c=this.stateChangeEmitters.get(n))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",d),console.error(d)}})}async resetPasswordForEmail(n,i={}){let r=null,c=null;this.flowType==="pkce"&&([r,c]=await li(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:r,code_challenge_method:c,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(d){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ce(d))return this._returnResult({data:null,error:d});throw d}}async getUserIdentities(){var n;try{const{data:i,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(n=i.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(i){if(ce(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var i;try{const{data:r,error:c}=await this._useSession(async d=>{var m,p,v,g,_;const{data:w,error:O}=d;if(O)throw O;const U=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(m=n.options)===null||m===void 0?void 0:m.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(v=n.options)===null||v===void 0?void 0:v.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",U,{headers:this.headers,jwt:(_=(g=w.session)===null||g===void 0?void 0:g.access_token)!==null&&_!==void 0?_:void 0})});if(c)throw c;return Gt()&&!(!((i=n.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:n.provider,url:r?.url},error:null})}catch(r){if(ce(r))return this._returnResult({data:{provider:n.provider,url:null},error:r});throw r}}async linkIdentityIdToken(n){return await this._useSession(async i=>{var r;try{const{error:c,data:{session:d}}=i;if(c)throw c;const{options:m,provider:p,token:v,access_token:g,nonce:_}=n,w=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=d?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:p,id_token:v,access_token:g,nonce:_,link_identity:!0,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:ka}),{data:O,error:U}=w;return U?this._returnResult({data:{user:null,session:null},error:U}):!O||!O.session||!O.user?this._returnResult({data:{user:null,session:null},error:new ni}):(O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("USER_UPDATED",O.session)),this._returnResult({data:O,error:U}))}catch(c){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),ce(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(n){try{return await this._useSession(async i=>{var r,c;const{data:d,error:m}=i;if(m)throw m;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(c=(r=d.session)===null||r===void 0?void 0:r.access_token)!==null&&c!==void 0?c:void 0})})}catch(i){if(ce(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(n){const i=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(i,"begin");try{const r=Date.now();return await Py(async c=>(c>0&&await Zy(200*Math.pow(2,c-1)),this._debug(i,"refreshing attempt",c),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:ka})),(c,d)=>{const m=200*Math.pow(2,c);return d&&oc(d)&&Date.now()+m-r<oi})}catch(r){if(this._debug(i,"error",r),ce(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(i,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,i){const r=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",i,"url",r),Gt()&&!i.skipBrowserRedirect&&window.location.assign(r),{data:{provider:n,url:r},error:null}}async _recoverAndRefresh(){var n,i;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const c=await ml(this.storage,this.storageKey);if(c&&this.userStorage){let m=await ml(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!m&&(m={user:c.user},await ci(this.userStorage,this.storageKey+"-user",m)),c.user=(n=m?.user)!==null&&n!==void 0?n:dc()}else if(c&&!c.user&&!c.user){const m=await ml(this.storage,this.storageKey+"-user");m&&m?.user?(c.user=m.user,await Lt(this.storage,this.storageKey+"-user"),await ci(this.storage,this.storageKey,c)):c.user=dc()}if(this._debug(r,"session from storage",c),!this._isValidSession(c)){this._debug(r,"session is not valid"),c!==null&&await this._removeSession();return}const d=((i=c.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<uc;if(this._debug(r,`session has${d?"":" not"} expired with margin of ${uc}s`),d){if(this.autoRefreshToken&&c.refresh_token){const{error:m}=await this._callRefreshToken(c.refresh_token);m&&(console.error(m),oc(m)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",m),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:m,error:p}=await this._getUser(c.access_token);!p&&m?.user?(c.user=m.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(m){console.error("Error getting user data:",m),this._debug(r,"error getting user data, skipping SIGNED_IN notification",m)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(r,"error",c),console.error(c);return}finally{this._debug(r,"end")}}async _callRefreshToken(n){var i,r;if(!n)throw new oa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new Kr;const{data:d,error:m}=await this._refreshAccessToken(n);if(m)throw m;if(!d.session)throw new oa;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const p={data:d.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(d){if(this._debug(c,"error",d),ce(d)){const m={data:null,error:d};return oc(d)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(m),m}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(d),d}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(n,i,r=!0){const c=`#_notifyAllSubscribers(${n})`;this._debug(c,"begin",i,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:n,session:i});const d=[],m=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,i)}catch(v){d.push(v)}});if(await Promise.all(m),d.length>0){for(let p=0;p<d.length;p+=1)console.error(d[p]);throw d[0]}}finally{this._debug(c,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Lt(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},n),r=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&i.user&&await ci(this.userStorage,this.storageKey+"-user",{user:i.user});const c=Object.assign({},i);delete c.user;const d=Um(c);await ci(this.storage,this.storageKey,d)}else{const c=Um(i);await ci(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Lt(this.storage,this.storageKey),await Lt(this.storage,this.storageKey+"-code-verifier"),await Lt(this.storage,this.storageKey+"-user"),this.userStorage&&await Lt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Gt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),oi);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const i=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const i=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,i&&clearTimeout(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async i=>{const{data:{session:r}}=i;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((r.expires_at*1e3-n)/oi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${oi}ms, refresh threshold is ${_c} ticks`),c<=_c&&await this._callRefreshToken(r.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof np)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Gt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const i=`#_onVisibilityChanged(${n})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,i,r){const c=[`provider=${encodeURIComponent(i)}`];if(r?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&c.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[d,m]=await li(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(m)}`});c.push(p.toString())}if(r?.queryParams){const d=new URLSearchParams(r.queryParams);c.push(d.toString())}return r?.skipBrowserRedirect&&c.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${n}?${c.join("&")}`}async _unenroll(n){try{return await this._useSession(async i=>{var r;const{data:c,error:d}=i;return d?this._returnResult({data:null,error:d}):await ge(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(r=c?.session)===null||r===void 0?void 0:r.access_token})})}catch(i){if(ce(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(n){try{return await this._useSession(async i=>{var r,c;const{data:d,error:m}=i;if(m)return this._returnResult({data:null,error:m});const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:v,error:g}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(r=d?.session)===null||r===void 0?void 0:r.access_token});return g?this._returnResult({data:null,error:g}):(n.factorType==="totp"&&v.type==="totp"&&(!((c=v?.totp)===null||c===void 0)&&c.qr_code)&&(v.totp.qr_code=`data:image/svg+xml;utf-8,${v.totp.qr_code}`),this._returnResult({data:v,error:null}))})}catch(i){if(ce(i))return this._returnResult({data:null,error:i});throw i}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var r;const{data:c,error:d}=i;if(d)return this._returnResult({data:null,error:d});const m=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?N0(n.webauthn.credential_response):C0(n.webauthn.credential_response)})}:{code:n.code}),{data:p,error:v}=await ge(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:m,headers:this.headers,jwt:(r=c?.session)===null||r===void 0?void 0:r.access_token});return v?this._returnResult({data:null,error:v}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:v}))})}catch(i){if(ce(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var r;const{data:c,error:d}=i;if(d)return this._returnResult({data:null,error:d});const m=await ge(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(r=c?.session)===null||r===void 0?void 0:r.access_token});if(m.error)return m;const{data:p}=m;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:A0(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:O0(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(ce(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(n){const{data:i,error:r}=await this._challenge({factorId:n.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:n.factorId,challengeId:i.id,code:n.code})}async _listFactors(){var n;const{data:{user:i},error:r}=await this.getUser();if(r)return{data:null,error:r};const c={all:[],phone:[],totp:[],webauthn:[]};for(const d of(n=i?.factors)!==null&&n!==void 0?n:[])c.all.push(d),d.status==="verified"&&c[d.factor_type].push(d);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var n,i;const{data:{session:r},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=cc(r.access_token);let m=null;d.aal&&(m=d.aal);let p=m;((i=(n=r.user.factors)===null||n===void 0?void 0:n.filter(_=>_.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(p="aal2");const g=d.amr||[];return{data:{currentLevel:m,nextLevel:p,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async i=>{const{data:{session:r},error:c}=i;return c?this._returnResult({data:null,error:c}):r?await ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:r.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new oa})})}catch(i){if(ce(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(n,i){try{return await this._useSession(async r=>{const{data:{session:c},error:d}=r;if(d)return this._returnResult({data:null,error:d});if(!c)return this._returnResult({data:null,error:new oa});const m=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return m.data&&m.data.redirect_url&&Gt()&&!i?.skipBrowserRedirect&&window.location.assign(m.data.redirect_url),m})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(n,i){try{return await this._useSession(async r=>{const{data:{session:c},error:d}=r;if(d)return this._returnResult({data:null,error:d});if(!c)return this._returnResult({data:null,error:new oa});const m=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return m.data&&m.data.redirect_url&&Gt()&&!i?.skipBrowserRedirect&&window.location.assign(m.data.redirect_url),m})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;return r?this._returnResult({data:null,error:r}):i?await ge(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new oa})})}catch(n){if(ce(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async i=>{const{data:{session:r},error:c}=i;return c?this._returnResult({data:null,error:c}):r?(await ge(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new oa})})}catch(i){if(ce(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(n,i={keys:[]}){let r=i.keys.find(p=>p.kid===n);if(r)return r;const c=Date.now();if(r=this.jwks.keys.find(p=>p.kid===n),r&&this.jwks_cached_at+My>c)return r;const{data:d,error:m}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(m)throw m;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=c,r=d.keys.find(p=>p.kid===n),!r)?null:r}async getClaims(n,i={}){try{let r=n;if(!r){const{data:U,error:G}=await this.getSession();if(G||!U.session)return this._returnResult({data:null,error:G});r=U.session.access_token}const{header:c,payload:d,signature:m,raw:{header:p,payload:v}}=cc(r);i?.allowExpired||l0(d.exp);const g=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!g){const{error:U}=await this.getUser(r);if(U)throw U;return{data:{claims:d,header:c,signature:m},error:null}}const _=i0(c.alg),w=await crypto.subtle.importKey("jwk",g,_,!0,["verify"]);if(!await crypto.subtle.verify(_,w,m,Ky(`${p}.${v}`)))throw new Sc("Invalid JWT signature");return{data:{claims:d,header:c,signature:m},error:null}}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}}ps.nextInstanceID={};const B0=ps,$0="2.91.0";let us="";typeof Deno<"u"?us="deno":typeof document<"u"?us="web":typeof navigator<"u"&&navigator.product==="ReactNative"?us="react-native":us="node";const q0={"X-Client-Info":`supabase-js-${us}/${$0}`},H0={headers:q0},L0={schema:"public"},G0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Y0={};function vs(s){"@babel/helpers - typeof";return vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},vs(s)}function V0(s,n){if(vs(s)!="object"||!s)return s;var i=s[Symbol.toPrimitive];if(i!==void 0){var r=i.call(s,n);if(vs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function K0(s){var n=V0(s,"string");return vs(n)=="symbol"?n:n+""}function X0(s,n,i){return(n=K0(n))in s?Object.defineProperty(s,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[n]=i,s}function qm(s,n){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);n&&(r=r.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),i.push.apply(i,r)}return i}function vt(s){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?qm(Object(i),!0).forEach(function(r){X0(s,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(i)):qm(Object(i)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(i,r))})}return s}const Q0=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),J0=()=>Headers,I0=(s,n,i)=>{const r=Q0(i),c=J0();return async(d,m)=>{var p;const v=(p=await n())!==null&&p!==void 0?p:s;let g=new c(m?.headers);return g.has("apikey")||g.set("apikey",s),g.has("Authorization")||g.set("Authorization",`Bearer ${v}`),r(d,vt(vt({},m),{},{headers:g}))}};function Z0(s){return s.endsWith("/")?s:s+"/"}function P0(s,n){var i,r;const{db:c,auth:d,realtime:m,global:p}=s,{db:v,auth:g,realtime:_,global:w}=n,O={db:vt(vt({},v),c),auth:vt(vt({},g),d),realtime:vt(vt({},_),m),storage:{},global:vt(vt(vt({},w),p),{},{headers:vt(vt({},(i=w?.headers)!==null&&i!==void 0?i:{}),(r=p?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return s.accessToken?O.accessToken=s.accessToken:delete O.accessToken,O}function W0(s){const n=s?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Z0(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var F0=class extends B0{constructor(s){super(s)}},eb=class{constructor(s,n,i){var r,c;this.supabaseUrl=s,this.supabaseKey=n;const d=W0(s);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const m=`sb-${d.hostname.split(".")[0]}-auth-token`,p={db:L0,realtime:Y0,auth:vt(vt({},G0),{},{storageKey:m}),global:H0},v=P0(i??{},p);if(this.storageKey=(r=v.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(c=v.global.headers)!==null&&c!==void 0?c:{},v.accessToken)this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(_,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var g;this.auth=this._initSupabaseAuthClient((g=v.auth)!==null&&g!==void 0?g:{},this.headers,v.global.fetch)}this.fetch=I0(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(vt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(_=>this.realtime.setAuth(_)).catch(_=>console.warn("Failed to set initial Realtime auth token:",_)),this.rest=new jg(new URL("rest/v1",d).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new ky(this.storageUrl.href,this.headers,this.fetch,i?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new Cg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,n={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,n,i)}channel(s,n={config:{}}){return this.realtime.channel(s,n)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,n,i;if(s.accessToken)return await s.accessToken();const{data:r}=await s.auth.getSession();return(n=(i=r.session)===null||i===void 0?void 0:i.access_token)!==null&&n!==void 0?n:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:n,detectSessionInUrl:i,storage:r,userStorage:c,storageKey:d,flowType:m,lock:p,debug:v,throwOnError:g},_,w){const O={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new F0({url:this.authUrl.href,headers:vt(vt({},O),_),storageKey:d,autoRefreshToken:s,persistSession:n,detectSessionInUrl:i,storage:r,userStorage:c,flowType:m,lock:p,debug:v,throwOnError:g,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(U=>U.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new Zg(this.realtimeUrl.href,vt(vt({},s),{},{params:vt(vt({},{apikey:this.supabaseKey}),s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n?.access_token)})}_handleTokenChanged(s,n,i){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const tb=(s,n,i)=>new eb(s,n,i);function ab(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const n=s.version;if(n==null)return!1;const i=n.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}ab()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const nb="https://mzpfwxrdituexjpwqlqz.supabase.co",lb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im16cGZ3eHJkaXR1ZXhqcHdxbHF6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwMTA3MjIsImV4cCI6MjA4NDU4NjcyMn0.eggtdN05BCQGrE2KzITYne2i8qxNhXSULt_7a1YIOIY",Ee=tb(nb,lb);function ib({children:s,onSession:n,onProfile:i,navItems:r=[],onProfileClick:c,compact:d=!1}){const[m,p]=de.useState(null),[v,g]=de.useState(null),[_,w]=de.useState(!0),[O,U]=de.useState(""),[G,z]=de.useState(""),[Q,ee]=de.useState(""),[le,L]=de.useState("");de.useEffect(()=>{let Se=!0;(async()=>{const{data:nt}=await Ee.auth.getSession();Se&&(p(nt.session??null),w(!1))})();const{data:wt}=Ee.auth.onAuthStateChange((nt,M)=>{p(M),g(null),L(""),n&&n(M)});return()=>{Se=!1,wt?.subscription?.unsubscribe()}},[]),de.useEffect(()=>{(async()=>{if(!m)return;const{data:dt,error:wt}=await Ee.from("profiles").select("id, display_name, account_xp, account_level, rating, avatar_url, soft_currency, premium_currency").eq("id",m.user.id).maybeSingle();if(wt){L(wt.message);return}g(dt||null),i&&i(dt||null)})()},[m]);const se=async()=>{L("");const{error:Se}=await Ee.auth.signInWithPassword({email:O,password:G});Se&&L(Se.message)},be=async()=>{L("");const{error:Se}=await Ee.auth.signUp({email:O,password:G});Se&&L(Se.message)},J=async()=>{if(!m)return;if(!Q.trim()){L("Display name is required.");return}L("");const{error:Se}=await Ee.from("profiles").upsert({id:m.user.id,display_name:Q.trim(),updated_at:new Date().toISOString()});if(Se){L(Se.message);return}const dt={id:m.user.id,display_name:Q.trim(),account_xp:0,account_level:1,rating:1e3,avatar_url:null,soft_currency:0,premium_currency:0};g(dt),i&&i(dt)},te=async()=>{await Ee.auth.signOut(),g(null),i&&i(null),n&&n(null)};if(_)return f.createElement("div",{className:"auth-screen"},f.createElement("div",{className:"auth-panel"},f.createElement("div",{className:"auth-logo"},""),f.createElement("h1",null,"CURSED ARENA"),f.createElement("p",{className:"auth-subtitle"},"Loading your experience..."),f.createElement("div",{className:"auth-loading"},f.createElement("div",{className:"auth-loading-bar"}))));if(!m)return f.createElement("div",{className:"auth-screen"},f.createElement("div",{className:"auth-panel"},f.createElement("div",{className:"auth-logo"},""),f.createElement("h1",null,"CURSED ARENA"),f.createElement("p",{className:"auth-subtitle"},"Sign in or create an account to save your progress and compete with others."),f.createElement("label",{className:"auth-label"},f.createElement("span",{className:"auth-label-text"},"Email Address"),f.createElement("input",{type:"email",value:O,onChange:Se=>U(Se.target.value),className:"auth-input",placeholder:"you@example.com"})),f.createElement("label",{className:"auth-label"},f.createElement("span",{className:"auth-label-text"},"Password"),f.createElement("input",{type:"password",value:G,onChange:Se=>z(Se.target.value),className:"auth-input",placeholder:"At least 6 characters"})),le&&f.createElement("p",{className:"auth-error"}," ",le),f.createElement("div",{className:"auth-actions"},f.createElement("button",{className:"auth-btn primary",onClick:se},f.createElement("span",null,"Sign In")),f.createElement("button",{className:"auth-btn secondary",onClick:be},f.createElement("span",null,"Create Account")))));if(!v)return f.createElement("div",{className:"auth-screen"},f.createElement("div",{className:"auth-panel"},f.createElement("div",{className:"auth-logo"},""),f.createElement("h1",null,"WELCOME WARRIOR"),f.createElement("p",{className:"auth-subtitle"},"Choose a display name to begin your journey in the Cursed Arena."),f.createElement("label",{className:"auth-label"},f.createElement("span",{className:"auth-label-text"},"Display Name"),f.createElement("input",{type:"text",value:Q,onChange:Se=>ee(Se.target.value),className:"auth-input",placeholder:"Your in-game name",maxLength:20})),le&&f.createElement("p",{className:"auth-error"}," ",le),f.createElement("div",{className:"auth-actions"},f.createElement("button",{className:"auth-btn primary",onClick:J},f.createElement("span",null,"Start Playing")),f.createElement("button",{className:"auth-btn secondary",onClick:te},f.createElement("span",null,"Sign Out")))));const me=v?.account_level||1,ke=v?.account_xp||0,gt=100+me*25,ct=v?.display_name?.[0]?.toUpperCase()||"?";return f.createElement("div",{className:"auth-wrapper"},f.createElement("div",{className:`auth-bar ${d?"compact":""}`},f.createElement("button",{className:"auth-user-card",type:"button",onClick:c,disabled:!c},f.createElement("div",{className:"auth-avatar"},v?.avatar_url?f.createElement("img",{src:v.avatar_url,alt:v.display_name}):f.createElement("span",null,ct)),f.createElement("div",{className:"auth-user-meta"},f.createElement("span",{className:"auth-user-name"},v.display_name),f.createElement("span",{className:"auth-user-level"},"Lv ",me,"  ",ke,"/",gt," XP"))),f.createElement("div",{className:"auth-center"},f.createElement("div",{className:"auth-title"},"Cursed Arena"),r.length>0&&f.createElement("div",{className:"auth-nav"},r.map(Se=>f.createElement("button",{key:Se.label,type:"button",className:`auth-nav-btn ${Se.active?"active":""}`,onClick:Se.onClick,disabled:Se.disabled},Se.label)))),f.createElement("div",{className:"auth-actions"},!d&&f.createElement("button",{className:"auth-link",onClick:te},"Sign Out"))),f.createElement("div",{className:"auth-content"},s))}function sb({profile:s,matchHistory:n,onBack:i,onProfileUpdate:r}){const c=s?.display_name||"Unknown",d=s?.account_level||1,m=s?.account_xp||0,p=s?.rating??1e3,v=100+d*25,g=Math.min(100,Math.floor(m/v*100)),_=n.filter(L=>L.result==="win").length,w=n.filter(L=>L.result==="lose").length,O=c.slice(0,2).toUpperCase(),U=de.useRef(null),[G,z]=de.useState(!1),[Q,ee]=de.useState(""),le=async L=>{const se=L.target.files?.[0];if(!se||!s?.id)return;z(!0),ee("");const be=se.name.split(".").pop(),J=`${s.id}/${Date.now()}.${be}`,{error:te}=await Ee.storage.from("avatars").upload(J,se,{upsert:!0});if(te){ee(te.message),z(!1);return}const{data:me}=Ee.storage.from("avatars").getPublicUrl(J),ke=me?.publicUrl||null,{error:gt}=await Ee.from("profiles").update({avatar_url:ke,updated_at:new Date().toISOString()}).eq("id",s.id);if(gt){ee(gt.message),z(!1);return}r?.({...s,avatar_url:ke}),z(!1)};return f.createElement("div",{className:"profile-page"},f.createElement("div",{className:"profile-header"},f.createElement("button",{className:"profile-back",onClick:i}," Back"),f.createElement("h1",null,"Player Profile")),f.createElement("div",{className:"profile-grid"},f.createElement("div",{className:"profile-card primary"},f.createElement("div",{className:"profile-hero"},f.createElement("div",{className:"profile-avatar"},s?.avatar_url?f.createElement("img",{src:s.avatar_url,alt:c}):O),f.createElement("div",null,f.createElement("h2",null,c),f.createElement("p",{className:"profile-subtitle"},"Active  Clanless"),f.createElement("div",{className:"profile-avatar-actions"},f.createElement("button",{className:"profile-avatar-btn",onClick:()=>U.current?.click(),disabled:G},G?"Uploading...":"Upload Avatar"),Q&&f.createElement("span",{className:"profile-upload-error"},Q),f.createElement("input",{ref:U,type:"file",accept:"image/*",className:"profile-avatar-input",onChange:le})))),f.createElement("div",{className:"profile-stats"},f.createElement("div",null,f.createElement("span",null,"Account Level"),f.createElement("strong",null,"Lv ",d)),f.createElement("div",null,f.createElement("span",null,"Rating"),f.createElement("strong",null,p)),f.createElement("div",null,f.createElement("span",null,"Record"),f.createElement("strong",null,_,"W / ",w,"L"))),f.createElement("div",{className:"profile-xp"},f.createElement("div",{className:"profile-xp-text"},"Account XP ",m,"/",v),f.createElement("div",{className:"profile-xp-bar"},f.createElement("div",{className:"profile-xp-fill",style:{width:`${g}%`}})))),f.createElement("div",{className:"profile-card"},f.createElement("h3",null,"Match History"),n.length===0?f.createElement("p",{className:"profile-empty"},"No matches yet. Jump in and play!"):f.createElement("div",{className:"match-list"},n.map(L=>f.createElement("div",{key:L.id,className:`match-row ${L.result}`},f.createElement("div",{className:"match-result"},L.result==="win"?"WIN":"LOSS"),f.createElement("div",{className:"match-meta"},f.createElement("span",null,"Turns: ",L.turns??"-"),f.createElement("span",null,"Rating: ",L.rating_delta>=0?"+":"",L.rating_delta)),f.createElement("div",{className:"match-xp"},f.createElement("span",null,"Account +",L.account_xp_gain),f.createElement("span",null,"Team +",L.character_xp_gain)),f.createElement("div",{className:"match-date"},new Date(L.created_at).toLocaleString()))))),f.createElement("div",{className:"profile-card"},f.createElement("h3",null,"Activity"),f.createElement("div",{className:"activity-grid"},f.createElement("div",null,f.createElement("span",null,"Status"),f.createElement("strong",null,"Online")),f.createElement("div",null,f.createElement("span",null,"Clan"),f.createElement("strong",null,"None")),f.createElement("div",null,f.createElement("span",null,"Favorite Mode"),f.createElement("strong",null,"Unranked")),f.createElement("div",null,f.createElement("span",null,"Last Match"),f.createElement("strong",null,n[0]?.result?n[0].result.toUpperCase():"N/A"))))))}function rb({missions:s,userMissions:n,onBack:i,onClaim:r}){const c=new Map(n.map(p=>[p.mission_id,p])),d=p=>s.filter(v=>v.type===p),m=p=>{const v=c.get(p.id),g=v?.progress??0;v?.claimed;const _=Math.min(100,Math.floor(g/p.target*100));return f.createElement("div",{key:p.id,className:"mission-card"},f.createElement("div",null,f.createElement("h4",null,p.title),f.createElement("p",null,p.description),f.createElement("div",{className:"mission-progress"},f.createElement("div",{className:"mission-progress-bar"},f.createElement("div",{className:"mission-progress-fill",style:{width:`${_}%`}})),f.createElement("span",null,g,"/",p.target))),f.createElement("div",{className:"mission-reward"},f.createElement("span",null,"Soft +",p.reward_soft),f.createElement("span",null,"Premium +",p.reward_premium),p.reward_shard_character_id&&p.reward_shard_amount>0&&f.createElement("span",null,"Shard +",p.reward_shard_amount)))};return f.createElement("div",{className:"meta-page"},f.createElement("div",{className:"meta-header"},f.createElement("button",{className:"profile-back",onClick:i}," Back"),f.createElement("h1",null,"Missions")),f.createElement("div",{className:"meta-grid"},f.createElement("section",null,f.createElement("h3",null,"Daily"),f.createElement("div",{className:"mission-list"},d("daily").map(p=>f.createElement("div",{key:p.id},m(p),f.createElement("button",{className:"mission-claim",onClick:()=>r?.(p.id),disabled:(c.get(p.id)?.claimed??!1)||(c.get(p.id)?.progress??0)<p.target},c.get(p.id)?.claimed?"Claimed":"Claim Reward"))))),f.createElement("section",null,f.createElement("h3",null,"Weekly"),f.createElement("div",{className:"mission-list"},d("weekly").map(p=>f.createElement("div",{key:p.id},m(p),f.createElement("button",{className:"mission-claim",onClick:()=>r?.(p.id),disabled:(c.get(p.id)?.claimed??!1)||(c.get(p.id)?.progress??0)<p.target},c.get(p.id)?.claimed?"Claimed":"Claim Reward"))))),f.createElement("section",null,f.createElement("h3",null,"Limited Time"),f.createElement("div",{className:"mission-list"},d("limited").map(p=>f.createElement("div",{key:p.id},m(p),f.createElement("button",{className:"mission-claim",onClick:()=>r?.(p.id),disabled:(c.get(p.id)?.claimed??!1)||(c.get(p.id)?.progress??0)<p.target},c.get(p.id)?.claimed?"Claimed":"Claim Reward")))))))}function ub({offers:s,profile:n,onBack:i,onPurchase:r}){const c=n?.soft_currency??0,d=n?.premium_currency??0;return f.createElement("div",{className:"meta-page"},f.createElement("div",{className:"meta-header"},f.createElement("button",{className:"profile-back",onClick:i}," Back"),f.createElement("h1",null,"Shop"),f.createElement("div",{className:"meta-currency"},f.createElement("span",null,"Soft ",c),f.createElement("span",null,"Premium ",d))),f.createElement("div",{className:"meta-grid"},f.createElement("section",{className:"shop-grid"},s.map(m=>f.createElement("div",{key:m.id,className:"shop-card"},f.createElement("h4",null,m.name),f.createElement("p",null,m.description),f.createElement("div",{className:"shop-cost"},f.createElement("span",null,"Soft ",m.cost_soft),f.createElement("span",null,"Premium ",m.cost_premium)),f.createElement("button",{className:"mission-claim",onClick:()=>r?.(m.id),disabled:c<m.cost_soft||d<m.cost_premium},"Buy"))))))}function ob({banners:s,bannerItems:n,profile:i,onBack:r,onPull:c,result:d}){const m=i?.premium_currency??0,p=100,v=s[0],g=v?n.filter(_=>_.banner_id===v.id):[];return f.createElement("div",{className:"meta-page"},f.createElement("div",{className:"meta-header"},f.createElement("button",{className:"profile-back",onClick:r}," Back"),f.createElement("h1",null,"Gacha"),f.createElement("div",{className:"meta-currency"},f.createElement("span",null,"Premium ",m))),f.createElement("div",{className:"meta-grid"},f.createElement("section",{className:"gacha-banner"},f.createElement("h3",null,v?v.name:"No banner available"),f.createElement("p",null,v?.description),f.createElement("button",{className:"mode-btn primary",onClick:()=>v&&c?.(v.id),disabled:!v||m<p},"Pull (",p,")"),d&&f.createElement("div",{className:"gacha-result"},f.createElement("strong",null,"Result"),f.createElement("span",null,d.item_type),d.character_id&&f.createElement("span",null,"Character #",d.character_id),d.shard_amount>0&&f.createElement("span",null,"Shards x",d.shard_amount),d.soft_currency>0&&f.createElement("span",null,"Soft x",d.soft_currency))),f.createElement("section",{className:"gacha-items"},f.createElement("h4",null,"Featured Drops"),f.createElement("div",{className:"gacha-grid"},g.map((_,w)=>f.createElement("div",{key:`${_.item_type}-${w}`,className:"gacha-card"},f.createElement("span",null,_.item_type),f.createElement("strong",null,_.character_id?`Character #${_.character_id}`:"",_.shard_amount>0?` Shards x${_.shard_amount}`:"",_.soft_currency>0?` Soft x${_.soft_currency}`:"",_.premium_currency>0?` Premium x${_.premium_currency}`:"")))))))}function cb({characters:s,inventory:n,characterProgress:i,onBack:r,onLimitBreak:c,limitBreakCost:d}){const m=p=>{const v=n[p.id]||0,g=i[p.id]||{level:1,limit_break:0},_=g.limit_break+1,w=_<=5&&v>=d(_),O=qr(p.name);return f.createElement("div",{key:p.id,className:"inventory-card"},f.createElement("div",{className:"inventory-portrait"},O?f.createElement("img",{src:O,alt:p.name}):f.createElement("span",null,p.name[0])),f.createElement("div",{className:"inventory-info"},f.createElement("h4",null,p.name),f.createElement("div",{className:"inventory-stats"},f.createElement("span",null,"Lv ",g.level),f.createElement("span",null,"LB ",g.limit_break,"/5")),f.createElement("div",{className:"inventory-shards"},"Shards: ",v),f.createElement("button",{className:"mission-claim",onClick:()=>c?.(p.id),disabled:!w},_>5?"Maxed":`Limit Break (+${d(_)})`)))};return f.createElement("div",{className:"meta-page"},f.createElement("div",{className:"meta-header"},f.createElement("button",{className:"profile-back",onClick:r}," Back"),f.createElement("h1",null,"Inventory")),f.createElement("div",{className:"meta-grid inventory-grid"},s.map(m)))}function db({chapter:s,completedNodes:n,activeNodeId:i,onSelectNode:r,onCompleteNode:c,onStartBattle:d,storyResult:m,onClearResult:p,onClaimRewards:v,rewardsClaimed:g}){const _=s?.nodes||[],w=_.find(z=>z.id===i)||_[0],O=z=>{if(!_.length)return!1;const Q=_.findIndex(ee=>ee.id===z);return Q<=0?!0:n.includes(_[Q-1].id)},U=de.useMemo(()=>{const z={};return _.forEach(Q=>{z[Q.id]=n.includes(Q.id)?"completed":O(Q.id)?"available":"locked"}),z},[_,n]),G=n.length===_.length;return s?f.createElement("div",{className:"story-container"},f.createElement("div",{className:"story-header"},f.createElement("div",null,f.createElement("h1",null,s.title),f.createElement("span",{className:"story-subtitle"},s.subtitle)),f.createElement("div",{className:"story-progress"},f.createElement("span",null,n.length,"/",_.length," nodes cleared"))),f.createElement("div",{className:"story-layout"},f.createElement("div",{className:"story-map"},f.createElement("div",{className:"story-map-title"},"Chapter Map"),f.createElement("div",{className:"story-map-nodes"},_.map((z,Q)=>f.createElement("button",{key:z.id,type:"button",className:`story-node ${U[z.id]} ${i===z.id?"active":""}`,disabled:U[z.id]==="locked",onClick:()=>r(z.id)},f.createElement("div",{className:"story-node-id"},z.id),f.createElement("div",{className:"story-node-title"},z.title),f.createElement("div",{className:`story-node-type ${z.type}`},z.type==="battle"?"Battle":"Story"),Q<_.length-1&&f.createElement("div",{className:"story-node-link"}))))),f.createElement("div",{className:"story-detail"},f.createElement("div",{className:"story-detail-header"},f.createElement("div",null,f.createElement("h2",null,w?.title),f.createElement("div",{className:"story-location"},w?.location)),f.createElement("div",{className:`story-status ${U[w?.id]||"locked"}`},U[w?.id]==="completed"?"Completed":U[w?.id]==="available"?"Available":"Locked")),m&&m.nodeId===w?.id&&f.createElement("div",{className:`story-result ${m.result}`},f.createElement("strong",null,m.result==="win"?"Objective Complete":"Defeat"),f.createElement("p",null,m.result==="win"?"Return to the story to continue.":"Try the battle again when you are ready."),f.createElement("button",{className:"mode-btn primary",onClick:p},"Continue")),w?.type==="story"&&f.createElement("div",{className:"story-scroll"},f.createElement("div",{className:"story-scene"},w.lines?.map((z,Q)=>f.createElement("div",{key:`${w.id}-${Q}`,className:"story-line"},f.createElement("span",{className:"story-speaker"},z.speaker),f.createElement("span",{className:"story-text"},z.text))),w.system&&f.createElement("div",{className:"story-system"},"System: ",w.system)),f.createElement("div",{className:"story-actions"},f.createElement("button",{className:"mode-btn primary",onClick:()=>c(w.id),disabled:U[w.id]!=="available"},"Continue"))),w?.type==="battle"&&f.createElement("div",{className:"story-scroll"},f.createElement("div",{className:"story-scene"},w.intro?.map((z,Q)=>f.createElement("div",{key:`${w.id}-intro-${Q}`,className:"story-text"},z)),w.battle&&f.createElement("div",{className:"story-battle-info"},f.createElement("div",null,f.createElement("strong",null,"Mode:")," ",w.battle.mode),f.createElement("div",null,f.createElement("strong",null,"Objective:")," ",w.battle.objective),w.battle.type==="survival"&&f.createElement("div",null,f.createElement("strong",null,"Condition:")," Survive ",w.battle.turnLimit," turns."),w.battle.unlocks?.length>0&&f.createElement("div",null,f.createElement("strong",null,"Unlock:")," ",w.battle.unlocks.join(", "))),w.battle?.prompts?.length>0&&f.createElement("div",{className:"story-prompts"},w.battle.prompts.map((z,Q)=>f.createElement("div",{key:`${w.id}-prompt-${Q}`,className:"story-prompt"}," ",z))),w.outro?.length>0&&f.createElement("div",{className:"story-outro"},f.createElement("div",{className:"story-outro-title"},"After Battle"),w.outro.map((z,Q)=>f.createElement("div",{key:`${w.id}-outro-${Q}`,className:"story-text"},z)))),f.createElement("div",{className:"story-actions"},f.createElement("button",{className:"mode-btn primary",onClick:()=>d(w),disabled:U[w.id]!=="available"},"Start Battle"))))),f.createElement("div",{className:"story-footer"},f.createElement("div",{className:"story-rewards"},f.createElement("h3",null,"Chapter Rewards"),f.createElement("div",{className:"story-reward-grid"},s.rewards.map((z,Q)=>f.createElement("div",{key:`${z.label}-${Q}`,className:"story-reward-card"},f.createElement("span",{className:"story-reward-label"},z.label))))),f.createElement("div",{className:"story-preview"},f.createElement("h3",null,"Next Chapter Preview"),s.preview.map((z,Q)=>f.createElement("div",{key:`${s.id}-preview-${Q}`,className:"story-preview-line"},z)),f.createElement("button",{className:"mode-btn ghost",onClick:v,disabled:g||!G},g?"Rewards Claimed":G?"Claim Chapter Rewards":"Complete Chapter to Claim")))):f.createElement("div",{className:"story-container"},f.createElement("div",{className:"story-panel"},"Story mode not available."))}const Hm={"fly-head":{id:"fly-head",name:"Fly Head Curse",maxHp:55,hp:55,maxMana:60,mana:60,attack:14,rarity:"SR",passive:{name:"Cursed Instinct",description:"Attacks deal 10% bonus damage.",type:"damage-boost",value:.1},abilities:[{id:"fly-head-1",name:"Claw Swipe",description:"Deals 18 damage to one enemy.",type:"attack",damage:18,manaCost:15,cooldown:1,currentCooldown:0},{id:"fly-head-2",name:"Shriek",description:"Deals 12 damage and stuns for 1 turn.",type:"attack-stun",damage:12,stunDuration:1,manaCost:20,cooldown:2,currentCooldown:0}],ultimate:{id:"fly-head-ult",name:"Swarm Rush",description:"Deals 20 damage to all enemies.",type:"attack-all",damage:20,manaCost:35,cooldown:4,currentCooldown:0}},"finger-bearer":{id:"finger-bearer",name:"Finger Bearer",maxHp:220,hp:220,maxMana:120,mana:120,attack:26,rarity:"SSR",passive:{name:"Cursed Giant",description:"Attacks deal +4 bonus damage.",type:"stacking-attack",value:4},abilities:[{id:"finger-bearer-1",name:"Crushing Slam",description:"Deals 28 damage to one enemy.",type:"attack",damage:28,manaCost:20,cooldown:1,currentCooldown:0},{id:"finger-bearer-2",name:"Malice Burst",description:"Deals 20 damage and stuns for 1 turn.",type:"attack-stun",damage:20,stunDuration:1,manaCost:35,cooldown:3,currentCooldown:0}],ultimate:{id:"finger-bearer-ult",name:"Cursed Howl",description:"Deals 30 damage to all enemies.",type:"attack-all",damage:30,manaCost:60,cooldown:4,currentCooldown:0}}},Lm=[{id:"chapter-1",title:"Chapter 1  The Vessel",subtitle:"Sugisawa High Incident",nodes:[{id:"1-1",title:"Last Words",type:"story",location:"Sugisawa Hospital  Evening",system:"Some promises are harder to keep than others.",lines:[{speaker:"Grandpa Itadori",text:"Yuji... come closer."},{speaker:"Yuji Itadori",text:"Save your strength, old man. The doctor said"},{speaker:"Grandpa Itadori",text:"Forget what he said. I'm dying. And I need to tell you something."},{speaker:"Grandpa Itadori",text:"You're strong, Yuji. Stronger than you know. But strength alone won't save you."},{speaker:"Yuji Itadori",text:"What are you talking about?"},{speaker:"Grandpa Itadori",text:"When I'm gone... don't be alone. Find people. Protect them."},{speaker:"Grandpa Itadori",text:"And when your time comes... die surrounded by others. Not like me. Promise me."},{speaker:"Yuji Itadori",text:"...I promise."}]},{id:"1-2",title:"The Occult Club",type:"story",location:"Sugisawa High School  Night",system:"Cursed energy attracts curses. The finger has been unsealed.",lines:[{speaker:"Sasaki",text:"Itadori! Finally! We've been waiting for you!"},{speaker:"Iguchi",text:"Dude, you gotta see what we found. This is the real deal."},{speaker:"Yuji Itadori",text:"Wait. You removed the seals?"},{speaker:"Yuji Itadori",text:"...Something's wrong."},{speaker:"Iguchi",text:"What the hell was that?!"},{speaker:"Yuji Itadori",text:"Both of you. Get behind me. Now."}]},{id:"1-3",title:"First Contact",type:"battle",location:"Sugisawa High School  Hallway",intro:["A grotesque curse lunges from the shadows.","Yuji shoves his friends aside and braces for impact."],battle:{mode:"Tutorial Battle",playerIds:["Yuji"],enemyIds:["fly-head","fly-head"],objective:"Defeat all enemies.",prompts:["Tap an ability to queue it for this turn.","Abilities have mana costs. Manage your energy carefully.","End your turn when you have selected your actions."]}},{id:"1-4",title:"Cornered",type:"battle",location:"Sugisawa High School  Third Floor",intro:["Megumi calls out Divine Dogs as the Finger Bearer emerges.","This is a holding action. Survive."],battle:{mode:"Story Battle",playerIds:["Megumi"],enemyIds:["finger-bearer"],objective:"Survive 4 turns.",type:"survival",turnLimit:4,enemyCannotDie:!0,prompts:["Some battles require survival, not victory.","Use defensive abilities to reduce incoming damage.","Megumi's Divine Dogs can attack and intercept."]},outro:["Megumi is thrown against the wall. His shikigami flicker.",'A voice calls out from the doorway: "HEY! UGLY!"']},{id:"1-5",title:"The King of Curses",type:"battle",location:"Sugisawa High School  Rooftop",intro:["Yuji has nowhere left to run. The finger pulses in his hand.","He swallows it. Power surges."],battle:{mode:"Boss Battle",playerIds:["Yuji"],enemyIds:["finger-bearer"],objective:"Defeat the Finger Bearer.",type:"boss",playerBuffs:{Yuji:{hpBonus:30,manaBonus:20,attackBonus:6}},unlocks:["Divergent Fist"]},outro:["The Finger Bearer dissolves into cursed mist.",'Megumi stares, stunned. "You became Sukunas vessel."','Yuji exhales. "Apparently."','Megumi nods. "Come with me. Theres someone you need to meet."']}],rewards:[{type:"character",label:"Yuji Itadori  Playable Character"},{type:"character",label:"Megumi Fushiguro  Playable Character"},{type:"soft_currency",label:"Cursed Energy x500",amount:500},{type:"premium_currency",label:"Premium Currency x100",amount:100},{type:"item",label:"Finger Fragment x3 (Gacha Material)"},{type:"title",label:'Title: "The Vessel"'}],preview:['Gojo Satoru: "So youre the kid who ate Sukunas finger and lived? Interesting."',"Chapter 2: Execution  Coming Soon"]}],Sa=s=>JSON.parse(JSON.stringify(s));function fb(){const[s,n]=de.useState([]),[i,r]=de.useState([]),[c,d]=de.useState(null),[m,p]=de.useState(["Battle Start! Queue actions, then End Turn."]),[v,g]=de.useState(null),[_,w]=de.useState(1),[O,U]=de.useState("select"),[G,z]=de.useState([]),[Q,ee]=de.useState([]),[le,L]=de.useState(null),[se,be]=de.useState([]),[J,te]=de.useState(null),[me,ke]=de.useState(null),[gt,ct]=de.useState({}),[Se,dt]=de.useState(null),[wt,nt]=de.useState([]),[M,ae]=de.useState("team"),[Y,fe]=de.useState({}),[_e,E]=de.useState(null),[V,ne]=de.useState([]),[ie,ve]=de.useState([]),[Ae,De]=de.useState([]),[St,Fe]=de.useState([]),[ja,La]=de.useState([]),[fa,C]=de.useState({}),[ue,He]=de.useState(null),[et,Tt]=de.useState([]),[ut,ft]=de.useState(!1),[yt,bt]=de.useState({chapterId:"chapter-1",activeNodeId:"1-1",completedNodes:[]}),[Xe,tt]=de.useState(null),[Qe,ha]=de.useState(null),[ma,Ga]=de.useState(!1),[Be,Ta]=de.useState(null),[bl,Pe]=de.useState(null),[ea,Xt]=de.useState(null),xt=N=>100+N*25,Aa=(N,T,x)=>{let X=Math.max(1,N||1),K=Math.max(0,T||0)+x,W=xt(X);for(;K>=W;)K-=W,X+=1,W=xt(X);return{level:X,xp:K}},Mt=N=>{const T=`${Date.now()}-${Math.random()}`,x={id:T,...N};Tt(X=>[...X,x]),setTimeout(()=>{Tt(X=>X.filter(K=>K.id!==T))},800)},Xr=()=>{ft(!0),setTimeout(()=>ft(!1),220)},hi=(N,T)=>{const x=T?.level||1,X=T?.limit_break||0,K=(x-1)*3+X*12,W=(x-1)*2+X*4,B=(x-1)*1+X*3;return{...Sa(N),level:x,xp:T?.xp||0,limit_break:X,maxHp:N.maxHp+K,hp:N.maxHp+K,maxMana:N.maxMana+W,mana:N.maxMana+W,attack:N.attack+B}},_l=(N,T=!1)=>N.map(x=>ti.find(X=>X.id===x)).filter(Boolean).map(x=>T?hi(x,Ya[x.id]):Sa(x)),Ya=de.useMemo(()=>gt,[gt]),xa=!!Be,pn=xa&&Be?.turn_owner===J?.user?.id,ta=de.useMemo(()=>Lm.find(N=>N.id===yt.chapterId)||Lm[0],[yt.chapterId]),Qn=N=>{bt(T=>{if(T.completedNodes.includes(N))return T;const x=ta?.nodes||[],X=x.findIndex(W=>W.id===N),K=x[X+1]?.id||N;return{...T,completedNodes:[...T.completedNodes,N],activeNodeId:K}})},vn=N=>{if(!N)return null;if(Hm[N])return Sa(Hm[N]);const T=ti.find(x=>x.id===N||x.name===N);return T?Sa(T):null},ys=(N,T)=>{if(!T)return N;const x={...N};return T.hpBonus&&(x.maxHp+=T.hpBonus,x.hp+=T.hpBonus),T.manaBonus&&(x.maxMana+=T.manaBonus,x.mana+=T.manaBonus),T.attackBonus&&(x.attack+=T.attackBonus),x},bs=N=>{if(!N?.battle)return;const T=N.battle,x=T.playerIds.map(B=>vn(B)).filter(Boolean),X=T.enemyIds.map(B=>vn(B)).filter(Boolean),K=T.playerBuffs||{},W=x.map(B=>{if(typeof B.id=="number"){const Z=hi(B,Ya[B.id]);return ys(Z,K[B.name])}return ys(B,K[B.name])});n(W),r(X),tt({nodeId:N.id,objective:T.objective,type:T.type||"standard",turnLimit:T.turnLimit,enemyCannotDie:T.enemyCannotDie,prompts:T.prompts||[],mode:T.mode}),ha(null),U("battle"),p([`Story Battle: ${N.title}`,`Objective: ${T.objective}`,...T.prompts.map(B=>`Tip: ${B}`)]),w(1),ee([]),be([])},mi=()=>{Qe?.result==="win"&&Qe.nodeId&&Qn(Qe.nodeId),ha(null)},Jn=async()=>{if(ma||!ta)return;const N=ta.rewards.find(K=>K.type==="soft_currency"),T=ta.rewards.find(K=>K.type==="premium_currency"),x=N?.amount||0,X=T?.amount||0;if(J&&(x>0||X>0)){const K=(me?.soft_currency||0)+x,W=(me?.premium_currency||0)+X;await Ee.from("profiles").update({soft_currency:K,premium_currency:W,updated_at:new Date().toISOString()}).eq("id",J.user.id),ke(B=>({...B||{},soft_currency:K,premium_currency:W}))}Ga(!0)};de.useEffect(()=>{if(!J){ct({}),nt([]),fe({}),ne([]),ve([]),De([]),Fe([]),La([]),C({});return}(async()=>{const{data:T,error:x}=await Ee.from("character_progress").select("character_id, level, xp, limit_break").eq("user_id",J.user.id);if(x)return;const X={};T.forEach(K=>{X[K.character_id]={level:K.level,xp:K.xp,limit_break:K.limit_break}}),ct(X)})()},[J]),de.useEffect(()=>{if(!J)return;(async()=>{const{data:T,error:x}=await Ee.from("team_presets").select("slot, name, character_ids").eq("user_id",J.user.id);if(x)return;const X={};T.forEach(K=>{X[K.slot]=K}),fe(X)})()},[J]),de.useEffect(()=>{if(!J)return;(async()=>{const[{data:T},{data:x},{data:X},{data:K},{data:W},{data:B}]=await Promise.all([Ee.from("missions").select("*").order("id"),Ee.from("user_missions").select("*").eq("user_id",J.user.id),Ee.from("shop_offers").select("*").eq("active",!0).order("id"),Ee.from("banners").select("*").order("id"),Ee.from("banner_items").select("*").order("banner_id"),Ee.from("user_inventory").select("*").eq("user_id",J.user.id)]);ne(T||[]),ve(x||[]),De(X||[]),Fe(K||[]),La(W||[]);const Z={};(B||[]).forEach(D=>{Z[D.character_id]=D.shard_amount}),C(Z)})()},[J]),de.useEffect(()=>{if(!J||V.length===0)return;(async()=>{const T=new Set(ie.map(W=>W.mission_id)),x=V.filter(W=>!T.has(W.id));if(x.length===0)return;const X=x.map(W=>({user_id:J.user.id,mission_id:W.id,progress:0,claimed:!1,updated_at:new Date().toISOString()})),{data:K}=await Ee.from("user_missions").insert(X).select();K&&ve(W=>[...W,...K])})()},[V,J,ie]),de.useEffect(()=>{if(!J)return;(async()=>{const{data:T,error:x}=await Ee.from("match_history").select("id, result, turns, rating_delta, account_xp_gain, character_xp_gain, created_at").eq("user_id",J.user.id).order("created_at",{ascending:!1}).limit(20);x||nt(T||[])})()},[J]);const El=(N,T=!1,x="player")=>{const X=Sa(N),K=[];return X.forEach(W=>{if(!(W.hp<=0||!W.passive)&&T){if(W.passive.type==="regen"){const B=Math.min(W.passive.value,W.maxHp-W.hp);B>0&&(W.hp=Math.min(W.maxHp,W.hp+W.passive.value),K.push(` ${W.name}'s ${W.passive.name} heals ${B} HP!`),Mt({team:x,index:X.findIndex(Z=>Z.id===W.id),amount:B,type:"heal"}))}W.burning&&(W.hp=Math.max(0,W.hp-W.burning),K.push(` ${W.name} takes ${W.burning} burn damage!`),Mt({team:x,index:X.findIndex(B=>B.id===W.id),amount:W.burning,type:"damage"}),W.burning=0)}}),{team:X,logs:K}},pi=N=>{N.forEach(T=>{const x=T.passive?.type==="cooldown-reduction"?T.passive.value:0;T.hp>0&&(T.mana=Math.min(T.maxMana,T.mana+25)),T.abilities.forEach(X=>{X.currentCooldown>0&&(X.currentCooldown=Math.max(0,X.currentCooldown-1-x))}),T.ultimate?.currentCooldown>0&&(T.ultimate.currentCooldown=Math.max(0,T.ultimate.currentCooldown-1-x)),T.stunned&&T.stunned--,T.invincible&&T.invincible--,T.buffDuration&&(T.buffDuration--,T.buffDuration<=0&&(T.attackBuff=0)),T.markedDuration&&(T.markedDuration--,T.markedDuration<=0&&(T.marked=0))})},Oa=(N,T)=>{let x=T;return N.attackBuff&&(x+=N.attackBuff),N.passive?.type==="damage-boost"&&(x=Math.floor(x*(1+N.passive.value))),x},Va=(N,T,x=[])=>{if(x.length>0&&p(X=>[...X,...x]),g(N==="win"?"win":"lose"),Xe){ha({nodeId:Xe.nodeId,result:N}),bt(X=>({...X,activeNodeId:Xe.nodeId}));return}En(N,T)},Qt=(N,T,x,X=!1)=>{x<=0||T==null||(Mt({team:N,index:T,amount:x,type:"damage",big:X}),X&&Xr())},gn=(N,T,x)=>{x<=0||T==null||Mt({team:N,index:T,amount:x,type:"heal"})},_s=(N,T,x,X,K,W)=>{const B=K[N];if(!B||B.hp<=0)return{logs:[]};if(B.stunned)return{logs:[` ${B.name} is stunned and cannot act!`]};const Z=x?B.ultimate:B.abilities[T];if(!Z)return{logs:[]};let D=[];x?K[N].ultimate.currentCooldown=Z.cooldown:K[N].abilities[T].currentCooldown=Z.cooldown;let Re=Z.manaCost||0;if(B.passive?.manaReduction&&(Re=Math.floor(Re*(1-B.passive.manaReduction))),B.mana<Re)return{logs:[` ${B.name} doesn't have enough mana for ${Z.name}.`]};K[N].mana-=Re;const Oe=q=>q.passive?.type==="dodge-chance"&&Math.random()<q.passive.value,Ye=q=>q.invincible;switch(Z.type){case"attack":{const q=W[X];if(!q||q.hp<=0)break;if(Oe(q))D.push(` ${q.name} DODGES ${B.name}'s ${Z.name}!`);else if(Ye(q))D.push(` ${q.name} blocks ${B.name}'s ${Z.name}!`);else{let F=Oa(B,Z.damage);B.passive?.type==="execute"&&q.hp/q.maxHp<B.passive.threshold&&(F=Math.floor(F*(1+B.passive.value))),q.marked&&(F+=q.marked),q.hp=Math.max(0,q.hp-F),D.push(` ${B.name}  ${Z.name}  ${q.name} for ${F} damage!`),Qt("enemy",X,F,F>=45),q.hp<=0&&D.push(` ${q.name} defeated!`),B.passive?.type==="burn"&&(q.burning=B.passive.value,D.push(` ${q.name} is burning!`)),B.passive?.type==="stacking-attack"&&(K[N].attack+=B.passive.value,D.push(` ${B.name}'s attack increases!`)),B.passive?.type==="double-hit"&&Math.random()<B.passive.value&&(q.hp=Math.max(0,q.hp-F),D.push(` Resonance! Hits again for ${F}!`),Qt("enemy",X,F,F>=45),q.hp<=0&&D.push(` ${q.name} defeated!`))}break}case"attack-execute":{const q=W[X];if(!q||q.hp<=0)break;if(Oe(q))D.push(` ${q.name} DODGES ${B.name}'s ${Z.name}!`);else if(Ye(q))D.push(` ${q.name} blocks ${B.name}'s ${Z.name}!`);else{let F=Oa(B,Z.damage);q.hp/q.maxHp<Z.threshold&&(F+=Z.bonusDamage,D.push(" Weak point strike!")),q.marked&&(F+=q.marked),q.hp=Math.max(0,q.hp-F),D.push(` ${B.name}  ${Z.name}  ${q.name} for ${F}!`),Qt("enemy",X,F,F>=45),q.hp<=0&&D.push(` ${q.name} defeated!`)}break}case"attack-all":{D.push(` ${B.name} uses ${Z.name}!`);const q=Oa(B,Z.damage);W.forEach((F,ht)=>{if(F.hp>0)if(Oe(F))D.push(`   ${F.name} DODGES!`);else if(Ye(F))D.push(`   ${F.name} blocks!`);else{let we=q;F.marked&&(we+=F.marked),F.hp=Math.max(0,F.hp-we),D.push(`   ${F.name} takes ${we}!`),Qt("enemy",ht,we,we>=45),F.hp<=0&&D.push(`   ${F.name} defeated!`),B.passive?.type==="burn"&&(F.burning=B.passive.value)}});break}case"attack-stun":{const q=W[X];if(!q||q.hp<=0)break;if(Oe(q))D.push(` ${q.name} DODGES ${B.name}'s ${Z.name}!`);else if(Ye(q))D.push(` ${q.name} blocks ${B.name}'s ${Z.name}!`);else{let F=Oa(B,Z.damage);q.marked&&(F+=q.marked),q.hp=Math.max(0,q.hp-F),q.stunned=Z.stunDuration,D.push(` ${B.name}  ${Z.name}  ${q.name} for ${F} + STUN!`),Qt("enemy",X,F,F>=45),q.hp<=0&&D.push(` ${q.name} defeated!`)}break}case"stun-only":{const q=W[X];if(!q||q.hp<=0)break;q.stunned=Z.stunDuration,D.push(` ${B.name}  ${Z.name}  ${q.name} STUNNED ${Z.stunDuration} turns!`);break}case"defensive":{K[N].invincible=1,D.push(` ${B.name} uses ${Z.name}  INVINCIBLE!`);break}case"buff":{K[N].attackBuff=(K[N].attackBuff||0)+Z.buffAmount,K[N].buffDuration=Z.duration,D.push(` ${B.name} uses ${Z.name}  ATK +${Z.buffAmount}!`);break}case"buff-self-damage":{K[N].attackBuff=(K[N].attackBuff||0)+Z.buffAmount,K[N].buffDuration=Z.duration,K[N].hp=Math.max(1,K[N].hp-Z.selfDamage),D.push(` ${B.name} uses ${Z.name}  ATK +${Z.buffAmount}, -${Z.selfDamage} HP!`),Qt("player",N,Z.selfDamage,!1);break}case"heal-self":{const q=Math.min(Z.healAmount,B.maxHp-B.hp);K[N].hp=Math.min(B.maxHp,B.hp+Z.healAmount),D.push(` ${B.name} uses ${Z.name}  +${q} HP!`),gn("player",N,q);break}case"heal-all":{D.push(` ${B.name} uses ${Z.name}!`),K.forEach(q=>{if(q.hp>0){const F=Math.min(Z.healAmount,q.maxHp-q.hp);if(q.hp=Math.min(q.maxHp,q.hp+Z.healAmount),F>0&&D.push(`   ${q.name} +${F} HP!`),F>0){const ht=K.findIndex(we=>we.id===q.id);gn("player",ht,F)}}});break}case"ultimate-megumi":{const q=Oa(B,Z.damage);D.push(` ${B.name} uses ${Z.name}!`),W.forEach((F,ht)=>{F.hp>0&&(F.hp=Math.max(0,F.hp-q),D.push(`   ${F.name} takes ${q}!`),Qt("enemy",ht,q,q>=45),F.hp<=0&&D.push(`   ${F.name} defeated!`))}),K.forEach((F,ht)=>{if(F.hp>0){const we=Math.min(Z.healAmount,F.maxHp-F.hp);F.hp=Math.min(F.maxHp,F.hp+Z.healAmount),we>0&&D.push(`   ${F.name} +${we} HP!`),we>0&&gn("player",ht,we)}});break}case"ultimate-mahito":{const q=W[X];if(!q||q.hp<=0)break;if(K[N].invincible=1,Oe(q))D.push(` ${q.name} DODGES ${B.name}'s ${Z.name}!`);else if(Ye(q))D.push(` ${q.name} blocks ${B.name}'s ${Z.name}!`);else{let F=Oa(B,Z.damage);q.marked&&(F+=q.marked),q.hp=Math.max(0,q.hp-F),D.push(` ${B.name}  ${Z.name}  INVINCIBLE + ${F} to ${q.name}!`),Qt("enemy",X,F,F>=45),q.hp<=0&&D.push(` ${q.name} defeated!`)}break}case"debuff-mark":{const q=W[X];if(!q||q.hp<=0)break;q.marked=Z.extraDamage,q.markedDuration=Z.duration,D.push(` ${B.name}  ${Z.name}  ${q.name} MARKED!`);break}case"utility":{D.push(` ${B.name} uses ${Z.name}!`);break}case"buff-ally":{const q=K.filter((F,ht)=>F.hp>0&&ht!==N);if(q.length>0){const F=q[Math.floor(Math.random()*q.length)],ht=K.findIndex(we=>we.id===F.id);K[ht].attackBuff=(K[ht].attackBuff||0)+Z.buffAmount,K[ht].buffDuration=Z.duration,D.push(` ${B.name}  ${Z.name}  ${F.name} ATK +${Z.buffAmount}!`)}break}}return{logs:D}},Es=(N,T,x,X)=>{v||xa&&!pn||(be(K=>[...K,{characterIndex:N,abilityIndex:T,isUltimate:x,enemyIndex:X}]),ee(K=>[...K,N]),L(null))},Ma=N=>{be(T=>{const x=T.filter((K,W)=>W!==N),X=new Set(x.map(K=>K.characterIndex));return ee(K=>K.filter(W=>X.has(W))),x})},Dt=(N=s,T=i)=>{let x=[],X=Sa(T),K=Sa(N);const W=El(X,!0,"enemy");X=W.team,x.push(...W.logs),X.filter(D=>D.hp>0&&!D.stunned).forEach(D=>{const Re=X.findIndex(F=>F.id===D.id);if(K.filter(F=>F.hp>0).length===0)return;const Ye=[...D.abilities];D.ultimate.currentCooldown===0&&Ye.push({...D.ultimate,isUlt:!0});const q=Ye.filter(F=>F.currentCooldown===0&&(F.manaCost||0)<=D.mana);if(q.length>0){const F=q[Math.floor(Math.random()*q.length)];if(F.isUlt)X[Re].ultimate.currentCooldown=F.cooldown;else{const lt=D.abilities.findIndex(Ge=>Ge.id===F.id);lt>=0&&(X[Re].abilities[lt].currentCooldown=F.cooldown)}X[Re].mana-=F.manaCost||0;const ht=K.findIndex(lt=>lt.hp>0),we=K[ht];if(F.type==="attack"||F.type==="attack-stun"||F.type==="attack-execute")if(we.passive?.type==="dodge-chance"&&Math.random()<we.passive.value)x.push(` ${we.name} DODGES ${D.name}'s ${F.name}!`);else if(we.invincible)x.push(` ${we.name} blocks ${D.name}'s ${F.name}!`);else{let lt=Oa(D,F.damage);we.marked&&(lt+=we.marked),we.hp=Math.max(0,we.hp-lt),x.push(` ${D.name}  ${F.name}  ${we.name} for ${lt}!`),Qt("player",ht,lt,lt>=45),we.hp<=0&&x.push(` ${we.name} KO'd!`),D.passive?.type==="burn"&&(we.burning=D.passive.value)}else if(F.type==="attack-all"){x.push(` ${D.name} uses ${F.name}!`);const lt=Oa(D,F.damage);K.forEach((Ge,As)=>{if(Ge.hp>0)if(Ge.passive?.type==="dodge-chance"&&Math.random()<Ge.passive.value)x.push(`   ${Ge.name} DODGES!`);else if(Ge.invincible)x.push(`   ${Ge.name} blocks!`);else{let Ja=lt;Ge.marked&&(Ja+=Ge.marked),Ge.hp=Math.max(0,Ge.hp-Ja),x.push(`   ${Ge.name} takes ${Ja}!`),Qt("player",As,Ja,Ja>=45),Ge.hp<=0&&x.push(`   ${Ge.name} KO'd!`)}})}else if(F.type==="heal-self"){const lt=Math.min(F.healAmount,D.maxHp-D.hp);X[Re].hp=Math.min(D.maxHp,D.hp+F.healAmount),x.push(` ${D.name} heals ${lt} HP!`),gn("enemy",Re,lt)}else F.type==="defensive"&&(X[Re].invincible=1,x.push(` ${D.name} becomes INVINCIBLE!`))}}),X.forEach(D=>{D.stunned&&D.hp>0&&x.push(` ${D.name} is STUNNED!`)});const Z=El(K,!0,"player");if(K=Z.team,x.push(...Z.logs),K.forEach(D=>{const Re=D.passive?.type==="cooldown-reduction"?D.passive.value:0;D.hp>0&&(D.mana=Math.min(D.maxMana,D.mana+25)),D.abilities.forEach(Oe=>{Oe.currentCooldown>0&&(Oe.currentCooldown=Math.max(0,Oe.currentCooldown-1-Re))}),D.ultimate?.currentCooldown>0&&(D.ultimate.currentCooldown=Math.max(0,D.ultimate.currentCooldown-1-Re)),D.invincible&&D.invincible--,D.buffDuration&&(D.buffDuration--,D.buffDuration<=0&&(D.attackBuff=0)),D.markedDuration&&(D.markedDuration--,D.markedDuration<=0&&(D.marked=0))}),X.forEach(D=>{const Re=D.passive?.type==="cooldown-reduction"?D.passive.value:0;D.hp>0&&(D.mana=Math.min(D.maxMana,D.mana+25)),D.abilities.forEach(Oe=>{Oe.currentCooldown>0&&(Oe.currentCooldown=Math.max(0,Oe.currentCooldown-1-Re))}),D.ultimate?.currentCooldown>0&&(D.ultimate.currentCooldown=Math.max(0,D.ultimate.currentCooldown-1-Re)),D.stunned&&D.stunned--,D.invincible&&D.invincible--,D.markedDuration&&(D.markedDuration--,D.markedDuration<=0&&(D.marked=0))}),n(K),r(X),K.every(D=>D.hp<=0)){x.push(" DEFEAT!"),Va("lose",N,x);return}p(D=>[...D,...x]),ee([]),w(D=>D+1)},Yt=async()=>{if(O!=="battle"||v||xa&&!pn)return;L(null);let N=Sa(i),T=Sa(s),x=[];const X=[...se];if(se.forEach(W=>{const B=_s(W.characterIndex,W.abilityIndex,W.isUltimate,W.enemyIndex,T,N);x.push(...B.logs)}),be([]),Xe?.enemyCannotDie){let W=!1;N.forEach(B=>{B.hp<=0&&(W=!0,B.hp=1)}),W&&x.push(" The enemy cannot be defeated yet.")}if((!Xe||Xe.type!=="survival")&&N.every(W=>W.hp<=0)){x.push(" VICTORY!"),Va("win",T,x);return}if(xa&&Be&&J){const W=Be.player1_id===J.user.id,B=W?Be.player2_id:Be.player1_id,Z=Be.state?.log||m,D=El(T,!0,"player");T=D.team,x.push(...D.logs);const Re=El(N,!0,"enemy");if(N=Re.team,x.push(...Re.logs),pi(T),pi(N),N.every(q=>q.hp<=0)){const q={player1Team:W?T:N,player2Team:W?N:T,turn:Be.state?.turn||_,log:[...Z,...x," VICTORY!"]};await Ee.from("pvp_matches").update({state:q,status:"completed",winner_id:J.user.id,turn_owner:null,updated_at:new Date().toISOString()}).eq("id",Be.id),Va("win",T,[]);return}if(T.every(q=>q.hp<=0)){const q={player1Team:W?T:N,player2Team:W?N:T,turn:Be.state?.turn||_,log:[...Z,...x," DEFEAT!"]};await Ee.from("pvp_matches").update({state:q,status:"completed",winner_id:B,turn_owner:null,updated_at:new Date().toISOString()}).eq("id",Be.id),Va("lose",T,[]);return}const Oe=(Be.state?.turn||_)+1,Ye={player1Team:W?T:N,player2Team:W?N:T,turn:Oe,log:[...Z,...x]};p(Ye.log),n(T),r(N),ee([]),w(Oe),await Ee.from("pvp_turns").insert({match_id:Be.id,user_id:J.user.id,turn_number:Oe-1,actions:{queuedActions:X}}),await Ee.from("pvp_matches").update({state:Ye,turn:Oe,turn_owner:B,updated_at:new Date().toISOString()}).eq("id",Be.id);return}p(W=>[...W,...x]),Dt(T,N)};de.useEffect(()=>{if(!(!Xe||O!=="battle"||v)&&Xe.type==="survival"&&_>Xe.turnLimit){const N=[` Objective complete! Survived ${Xe.turnLimit} turns.`];Va("win",s,N)}},[_,Xe,O,v,s]);const za=()=>{U("select"),z([]),n([]),r([]),d(null),p(["Battle Start! Queue actions, then End Turn."]),g(null),w(1),ee([]),L(null),be([]),E(null),tt(null),Ta(null),Pe(null),ea&&(ea.unsubscribe(),Xt(null))},vi=()=>{U("select"),n([]),r([]),d(null),p(["Battle Start! Queue actions, then End Turn."]),g(null),w(1),ee([]),L(null),be([]),E(null),tt(null),ae("story")},Qr=()=>{const N=G.map(X=>hi(X,Ya[X.id]));n(N);const x=[...ti.filter(X=>!G.some(K=>K.id===X.id))].sort(()=>Math.random()-.5);r(Sa(x.slice(0,3))),U("battle"),p(["Battle Start! Queue actions, then End Turn."]),ee([]),be([]),tt(null)},gi=N=>{if(!N||!J)return;const T=N.player1_id===J.user.id,x=N.state||{},X=x.player1Team||_l(N.player1_team||[],!1),K=x.player2Team||_l(N.player2_team||[],!1);n(Sa(T?X:K)),r(Sa(T?K:X)),p(x.log?.length?x.log:["PvP Match Start!"]),w(x.turn||N.turn||1),be([]),ee([]),L(null),g(null),U("battle"),tt(null)},yi=N=>{if(!N)return;ea&&ea.unsubscribe();const T=Ee.channel(`pvp-match-${N}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"pvp_matches",filter:`id=eq.${N}`},x=>{if(Ta(x.new),gi(x.new),x.new.status==="completed"&&x.new.winner_id&&J){const X=x.new.winner_id===J.user.id?"win":"lose";Va(X,s,[])}}).subscribe();Xt(T)},yn=async N=>{if(!J||G.length<3)return;Pe("searching");const T=G.map(B=>B.id),x=_l(T,!0),{data:X}=await Ee.from("pvp_queue").select("*").eq("mode",N).neq("user_id",J.user.id).order("created_at",{ascending:!0}).limit(1),K=X?.[0];if(K){await Ee.from("pvp_queue").delete().eq("id",K.id),await Ee.from("pvp_queue").delete().eq("user_id",J.user.id);const B=Array.isArray(K.team_state)&&K.team_state.length?K.team_state:_l(K.team_ids||[],!1),Z={mode:N,player1_id:K.user_id,player2_id:J.user.id,player1_team:K.team_ids||[],player2_team:T,state:{player1Team:B,player2Team:x,turn:1,log:["PvP Match Start! Queue actions, then End Turn."]},turn:1,turn_owner:K.user_id,status:"active",updated_at:new Date().toISOString()},{data:D}=await Ee.from("pvp_matches").insert(Z).select().single();D&&(Ta(D),Pe(null),gi(D),yi(D.id));return}await Ee.from("pvp_queue").delete().eq("user_id",J.user.id),await Ee.from("pvp_queue").insert({user_id:J.user.id,mode:N,team_ids:T,team_state:x}),ea&&(ea.unsubscribe(),Xt(null));const W=Ee.channel(`pvp-lobby-${J.user.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"pvp_matches"},B=>{const Z=B.new;(Z.player1_id===J.user.id||Z.player2_id===J.user.id)&&(Ta(Z),Pe(null),gi(Z),yi(Z.id),Ee.from("pvp_queue").delete().eq("user_id",J.user.id),W.unsubscribe())}).subscribe();Xt(W)},bi=()=>yn("quick"),bn=()=>yn("ranked"),_n=async(N,T,x)=>{if(!J)return;const X={user_id:J.user.id,slot:N,name:T||`Preset ${N}`,character_ids:x,updated_at:new Date().toISOString()},{error:K}=await Ee.from("team_presets").upsert(X,{onConflict:"user_id,slot"});K||fe(W=>({...W,[N]:X}))},In=N=>{const T=N.map(x=>ti.find(X=>X.id===x)).filter(Boolean);z(T)},En=async(N,T)=>{if(!J)return;const x=N==="win"?60:40,X=N==="win"?35:25,K=me?.account_level||1,W=me?.account_xp||0,B=me?.rating??1e3,Z=Aa(K,W,x),D=N==="win"?20:-15,Re=Math.max(0,B+D),Oe=[];Z.level>K&&Oe.push(`Account leveled up to ${Z.level}!`),ke(we=>({...we||{},account_level:Z.level,account_xp:Z.xp,rating:Re}));const Ye={...Ya},q=[],F=[],ht=[];T.forEach(we=>{const lt=Ye[we.id]||{level:1,xp:0,limit_break:0},Ge=Aa(lt.level,lt.xp,X);Ye[we.id]={...lt,...Ge},Ge.level>lt.level&&(Oe.push(`${we.name} reached Lv ${Ge.level}!`),F.push({name:we.name,level:Ge.level})),ht.push({id:we.id,name:we.name,level:Ge.level,xp:Ge.xp,xpNeeded:xt(Ge.level)}),q.push({user_id:J.user.id,character_id:we.id,level:Ge.level,xp:Ge.xp,limit_break:lt.limit_break||0,updated_at:new Date().toISOString()})}),ct(Ye),await Ee.from("profiles").update({account_level:Z.level,account_xp:Z.xp,rating:Re,updated_at:new Date().toISOString()}).eq("id",J.user.id),q.length>0&&await Ee.from("character_progress").upsert(q,{onConflict:"user_id,character_id"}),await Ee.from("match_history").insert({user_id:J.user.id,result:N,turns:_,rating_delta:D,account_xp_gain:x,character_xp_gain:X}).select().then(({data:we,error:lt})=>{!lt&&we&&nt(Ge=>[...we,...Ge].slice(0,20))}),Oe.length>0&&(dt(Oe.join(" ")),setTimeout(()=>{dt(null)},2800)),await At(N,F.length),E({result:N,accountGain:x,characterGain:X,accountLevel:Z.level,accountXp:Z.xp,accountNeeded:xt(Z.level),ratingDelta:D,rating:Re,characterLevelUps:F,characterSummaries:ht})},At=async(N,T=0)=>{if(!J||V.length===0)return;const x=[],X=[...ie];V.forEach(K=>{const W=X.findIndex(Ye=>Ye.mission_id===K.id);if(W===-1)return;const B=X[W];if(B.claimed)return;const Z=K.condition||"match_any";if(!(Z==="match_any"||Z==="match_win"&&N==="win"||Z==="match_loss"&&N==="lose"||Z==="character_level_up"&&T>0))return;const Re=Z==="character_level_up"?T:1,Oe=Math.min(K.target,B.progress+Re);Oe!==B.progress&&(X[W]={...B,progress:Oe},x.push({user_id:J.user.id,mission_id:K.id,progress:Oe,claimed:B.claimed,updated_at:new Date().toISOString()}))}),x.length!==0&&(await Ee.from("user_missions").upsert(x,{onConflict:"user_id,mission_id"}),ve(X))},ws=async N=>{if(!J)return;const T=V.find(B=>B.id===N),x=ie.find(B=>B.mission_id===N);if(!T||!x||x.claimed||x.progress<T.target)return;const X=(me?.soft_currency??0)+T.reward_soft,K=(me?.premium_currency??0)+T.reward_premium,W=[];if(T.reward_shard_character_id&&T.reward_shard_amount>0){const Z=(fa[T.reward_shard_character_id]||0)+T.reward_shard_amount;W.push({user_id:J.user.id,character_id:T.reward_shard_character_id,shard_amount:Z,updated_at:new Date().toISOString()}),C(D=>({...D,[T.reward_shard_character_id]:Z}))}await Ee.from("profiles").update({soft_currency:X,premium_currency:K,updated_at:new Date().toISOString()}).eq("id",J.user.id),await Ee.from("user_missions").update({claimed:!0,updated_at:new Date().toISOString()}).eq("user_id",J.user.id).eq("mission_id",N),W.length>0&&await Ee.from("user_inventory").upsert(W,{onConflict:"user_id,character_id"}),ke(B=>({...B||{},soft_currency:X,premium_currency:K})),ve(B=>B.map(Z=>Z.mission_id===N?{...Z,claimed:!0}:Z))},Ss=async N=>{if(!J)return;const T=Ae.find(Z=>Z.id===N);if(!T)return;const x=me?.soft_currency??0,X=me?.premium_currency??0;if(x<T.cost_soft||X<T.cost_premium)return;const K=x-T.cost_soft,W=X-T.cost_premium,B=[];if(T.item_type==="shards"&&T.character_id&&T.shard_amount>0){const D=(fa[T.character_id]||0)+T.shard_amount;B.push({user_id:J.user.id,character_id:T.character_id,shard_amount:D,updated_at:new Date().toISOString()}),C(Re=>({...Re,[T.character_id]:D}))}if(T.item_type==="currency"){const Z=T.soft_currency||0,D=T.premium_currency||0;ke(Re=>({...Re||{},soft_currency:K+Z,premium_currency:W+D})),await Ee.from("profiles").update({soft_currency:K+Z,premium_currency:W+D,updated_at:new Date().toISOString()}).eq("id",J.user.id)}else await Ee.from("profiles").update({soft_currency:K,premium_currency:W,updated_at:new Date().toISOString()}).eq("id",J.user.id),ke(Z=>({...Z||{},soft_currency:K,premium_currency:W}));B.length>0&&await Ee.from("user_inventory").upsert(B,{onConflict:"user_id,character_id"})},Ka=async N=>{if(!J)return;const T=me?.premium_currency??0,x=100;if(T<x)return;const X=ja.filter(Oe=>Oe.banner_id===N);if(X.length===0)return;const K=X.reduce((Oe,Ye)=>Oe+Ye.weight,0);let W=Math.random()*K,B=X[0];for(const Oe of X)if(W-=Oe.weight,W<=0){B=Oe;break}const Z=T-x;let D=me?.soft_currency??0;const Re=[];if(B.item_type==="currency"&&(D+=B.soft_currency||0),B.item_type==="shards"&&B.character_id){const Ye=(fa[B.character_id]||0)+(B.shard_amount||0);Re.push({user_id:J.user.id,character_id:B.character_id,shard_amount:Ye,updated_at:new Date().toISOString()}),C(q=>({...q,[B.character_id]:Ye}))}if(B.item_type==="character"&&B.character_id){const Ye=(fa[B.character_id]||0)+30;Re.push({user_id:J.user.id,character_id:B.character_id,shard_amount:Ye,updated_at:new Date().toISOString()}),C(q=>({...q,[B.character_id]:Ye}))}await Ee.from("profiles").update({soft_currency:D,premium_currency:Z,updated_at:new Date().toISOString()}).eq("id",J.user.id),Re.length>0&&await Ee.from("user_inventory").upsert(Re,{onConflict:"user_id,character_id"}),ke(Oe=>({...Oe||{},soft_currency:D,premium_currency:Z})),He(B)},Xa=N=>N*25,Jr=async N=>{if(!J)return;const T=fa[N]||0,x=gt[N]||{level:1,xp:0,limit_break:0},X=x.limit_break+1;if(X>5)return;const K=Xa(X);if(T<K)return;const W=T-K;await Ee.from("user_inventory").upsert({user_id:J.user.id,character_id:N,shard_amount:W,updated_at:new Date().toISOString()},{onConflict:"user_id,character_id"}),await Ee.from("character_progress").upsert({user_id:J.user.id,character_id:N,level:x.level,xp:x.xp,limit_break:X,updated_at:new Date().toISOString()},{onConflict:"user_id,character_id"}),C(B=>({...B,[N]:W})),ct(B=>({...B,[N]:{...x,limit_break:X}}))},Ts=()=>{ae("team"),O==="battle"&&za()},Qa=N=>{O==="battle"&&za(),ae(N)},Zn=O==="battle",wl=[{label:"Home",onClick:Ts,active:M==="team"&&O==="select"},{label:"Story",onClick:()=>Qa("story"),active:M==="story",disabled:Zn},{label:"Shop",onClick:()=>Qa("shop"),active:M==="shop",disabled:Zn},{label:"Gacha",onClick:()=>Qa("gacha"),active:M==="gacha",disabled:Zn},{label:"Inventory",onClick:()=>Qa("inventory"),active:M==="inventory",disabled:Zn},{label:"Missions",onClick:()=>Qa("missions"),active:M==="missions",disabled:Zn}],Sl=O!=="battle";return f.createElement(ib,{onSession:te,onProfile:ke,navItems:wl,onProfileClick:Sl?()=>Qa("profile"):null,compact:O==="battle"},Se&&f.createElement("div",{className:"level-toast"},f.createElement("span",null,Se)),O==="battle"?f.createElement(Tg,{playerTeam:s,enemyTeam:i,selectedEnemy:c,setSelectedEnemy:d,queueAbility:Es,queuedActions:se,removeQueuedAction:Ma,battleLog:m,turn:_,gameOver:v,resetGame:za,actedCharacters:Q,pendingAbility:le,setPendingAbility:L,setActedCharacters:ee,endTurn:Yt,profile:me,matchSummary:_e,combatEvents:et,battleShake:ut,isPvp:xa,isMyTurn:pn,storyBattle:Xe,onExitStory:vi}):M==="profile"?f.createElement(sb,{profile:me,matchHistory:wt,onBack:()=>ae("team"),onProfileUpdate:ke}):M==="missions"?f.createElement(rb,{missions:V,userMissions:ie,onBack:()=>ae("team"),onClaim:ws}):M==="inventory"?f.createElement(cb,{characters:ti,inventory:fa,characterProgress:gt,onBack:()=>ae("team"),onLimitBreak:Jr,limitBreakCost:Xa}):M==="shop"?f.createElement(ub,{offers:Ae,profile:me,onBack:()=>ae("team"),onPurchase:Ss}):M==="gacha"?f.createElement(ob,{banners:St,bannerItems:ja,profile:me,onBack:()=>ae("team"),onPull:Ka,result:ue}):M==="story"?f.createElement(db,{chapter:ta,completedNodes:yt.completedNodes,activeNodeId:yt.activeNodeId,onSelectNode:N=>bt(T=>({...T,activeNodeId:N})),onCompleteNode:Qn,onStartBattle:bs,storyResult:Qe,onClearResult:mi,onClaimRewards:Jn,rewardsClaimed:ma}):f.createElement(Sg,{characters:ti,selectedTeam:G,onSelect:z,onStartBattle:Qr,onStartPvpQuick:bi,onStartPvpRanked:bn,pvpStatus:bl,characterProgress:gt,teamPresets:Y,onSavePreset:_n,onApplyPreset:In}))}yg.createRoot(document.getElementById("root")).render(f.createElement(f.StrictMode,null,f.createElement(fb,null)));
